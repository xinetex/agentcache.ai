import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{r as N,j as l,R as k,a as Ti,b as $i}from"./client-DwJ0wxic.js";import{u as zi}from"./with-selector-Ohjvhcbn.js";const Ri=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Di=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sr=e=>{const t=Di(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ss=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Pi=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Hi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Li=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},d)=>N.createElement("svg",{ref:d,...Hi,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ss("lucide",s),...!o&&!Pi(a)&&{"aria-hidden":"true"},...a},[...i.map(([u,c])=>N.createElement(u,c)),...Array.isArray(o)?o:[o]]));const K=(e,t)=>{const n=N.forwardRef(({className:r,...s},o)=>N.createElement(Li,{ref:o,iconNode:t,className:Ss(`lucide-${Ri(Sr(e))}`,`lucide-${e}`,r),...s}));return n.displayName=Sr(e),n};const Oi=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qe=K("activity",Oi);const Vi=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jn=K("arrow-right",Vi);const Bi=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Fi=K("bell",Bi);const Gi=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ui=K("clock",Gi);const Yi=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],zn=K("database",Yi);const Xi=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qi=K("eye",Xi);const Zi=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Es=K("flask-conical",Zi);const Wi=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Ki=K("git-commit-horizontal",Wi);const Ji=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Er=K("globe",Ji);const Qi=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],ea=K("hexagon",Qi);const ta=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jr=K("layers",ta);const na=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ra=K("layout-grid",na);const sa=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],oa=K("lock",sa);const ia=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],aa=K("log-out",ia);const ca=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],la=K("play",ca);const ua=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],da=K("plus",ua);const ha=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fa=K("radio",ha);const pa=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ma=K("save",pa);const ga=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Rn=K("search",ga);const xa=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ya=K("server",xa);const va=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],js=K("shield",va);const ba=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],wa=K("terminal",ba);const Na=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],_a=K("trophy",Na);const Sa=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Ea=K("wand-sparkles",Sa);const ja=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],ka=K("workflow",ja);const Ca=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Aa=K("x",Ca);const Ma=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ks=K("zap",Ma),Ia=({activeView:e,setActiveView:t,user:n})=>{const[r,s]=N.useState(!1),o=[{id:"overview",label:"Overview",icon:ra},{id:"pipeline",label:"Pipeline Studio",icon:ka},{id:"swarm",label:"Swarm Intelligence",icon:ea},{id:"observability",label:"Observability",icon:Qe},{id:"lab",label:"Research Lab",icon:Es},{id:"data",label:"Data Explorer",icon:zn},{id:"governance",label:"Governance",icon:js}];return l.jsxs("div",{className:`fixed left-0 top-16 bottom-0 z-40 flex flex-col bg-[rgba(6,11,20,0.95)] border-r border-[rgba(0,243,255,0.2)] backdrop-blur-xl transition-all duration-300 ${r?"w-64":"w-16"}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[l.jsx("div",{className:"flex-1 py-6 flex flex-col gap-2",children:o.map(i=>{const a=i.icon,d=e===i.id;return l.jsxs("button",{onClick:()=>t(i.id),className:`relative flex items-center h-12 px-4 mx-2 rounded-lg transition-all duration-200 group ${d?"bg-[rgba(0,243,255,0.1)] text-[var(--hud-accent)] shadow-[0_0_15px_rgba(0,243,255,0.2)]":"text-[var(--hud-text-dim)] hover:bg-[rgba(255,255,255,0.05)] hover:text-white"}`,children:[l.jsx(a,{size:20,className:`min-w-[20px] transition-transform duration-300 ${d?"scale-110":"group-hover:scale-110"}`}),l.jsx("span",{className:`ml-4 font-['Rajdhani'] font-semibold tracking-wide whitespace-nowrap overflow-hidden transition-all duration-300 ${r?"opacity-100 w-auto":"opacity-0 w-0"}`,children:i.label}),d&&l.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[var(--hud-accent)] rounded-r-full shadow-[0_0_10px_var(--hud-accent)]"})]},i.id)})}),l.jsxs("div",{className:"p-2 border-t border-[rgba(0,243,255,0.1)]",children:[l.jsxs("div",{className:`flex items-center p-2 rounded-lg bg-[rgba(0,0,0,0.3)] border border-[rgba(255,255,255,0.05)] ${r?"justify-start":"justify-center"}`,children:[l.jsx("div",{className:"w-8 h-8 rounded bg-gradient-to-br from-[var(--hud-accent)] to-[var(--hud-accent-secondary)] flex items-center justify-center text-black font-bold text-xs shadow-[0_0_10px_rgba(0,243,255,0.3)]",children:n?.name?.charAt(0)||"G"}),l.jsxs("div",{className:`ml-3 overflow-hidden transition-all duration-300 ${r?"w-auto opacity-100":"w-0 opacity-0"}`,children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:n?.name||"Guest"}),l.jsx("div",{className:"text-xs text-[var(--hud-accent)] font-mono",children:n?.role||"Viewer"})]})]}),l.jsxs("button",{onClick:()=>{localStorage.removeItem("agentcache_token"),localStorage.removeItem("agentcache_user"),window.location.href="/login.html"},className:`mt-2 w-full flex items-center justify-center h-10 rounded-lg text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors ${!r&&"hidden"}`,children:[l.jsx(aa,{size:16,className:"mr-2"}),l.jsx("span",{className:"font-['Rajdhani'] font-semibold",children:"LOGOUT"})]})]})]})},Ta=()=>{const[e,t]=N.useState(new Date),[n,r]=N.useState(!1);return N.useEffect(()=>{const s=setInterval(()=>t(new Date),1e3),o=()=>r(window.scrollY>20);return window.addEventListener("scroll",o),()=>{clearInterval(s),window.removeEventListener("scroll",o)}},[]),l.jsx("header",{className:`fixed top-0 left-0 right-0 h-16 z-50 transition-all duration-300 ${n?"bg-[rgba(3,5,8,0.9)] backdrop-blur-md border-b border-[rgba(0,243,255,0.2)]":"bg-transparent border-b border-transparent"}`,children:l.jsxs("div",{className:"h-full px-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative group cursor-pointer",children:[l.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--hud-accent)] to-[var(--hud-accent-secondary)] rounded-lg blur opacity-40 group-hover:opacity-75 transition duration-500"}),l.jsx("div",{className:"relative w-10 h-10 bg-black border border-[var(--hud-accent)] rounded-lg flex items-center justify-center",children:l.jsx("div",{className:"w-4 h-4 bg-[var(--hud-accent)] rotate-45 group-hover:rotate-90 transition-transform duration-500"})})]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-['Rajdhani'] font-bold tracking-widest text-white",children:["AGENT",l.jsx("span",{className:"text-[var(--hud-accent)]",children:"CACHE"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-[var(--hud-text-dim)]",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"SYSTEM ONLINE"]})]})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-8 px-8 py-2 bg-[rgba(255,255,255,0.03)] rounded-full border border-[rgba(255,255,255,0.05)]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-[var(--hud-text-dim)] uppercase tracking-wider",children:"Grid Status"}),l.jsx("span",{className:"text-xs font-mono text-[var(--hud-success)]",children:"OPTIMAL"})]}),l.jsx("div",{className:"w-px h-4 bg-[rgba(255,255,255,0.1)]"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-[var(--hud-text-dim)] uppercase tracking-wider",children:"Latency"}),l.jsx("span",{className:"text-xs font-mono text-[var(--hud-accent)]",children:"42ms"})]}),l.jsx("div",{className:"w-px h-4 bg-[rgba(255,255,255,0.1)]"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] text-[var(--hud-text-dim)] uppercase tracking-wider",children:"Active Agents"}),l.jsx("span",{className:"text-xs font-mono text-white",children:"8,492"})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{className:"text-[var(--hud-text-dim)] hover:text-white transition-colors",children:l.jsx(Rn,{size:20})}),l.jsxs("button",{className:"relative text-[var(--hud-text-dim)] hover:text-white transition-colors",children:[l.jsx(Fi,{size:20}),l.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-[var(--hud-accent)] rounded-full animate-pulse"})]})]}),l.jsxs("div",{className:"text-right hidden sm:block",children:[l.jsx("div",{className:"text-sm font-mono font-bold text-white",children:e.toLocaleTimeString([],{hour12:!1})}),l.jsx("div",{className:"text-[10px] font-mono text-[var(--hud-text-dim)]",children:"UTC"})]})]})]})})},J=({title:e,children:t,className:n="",icon:r,action:s})=>l.jsxs("div",{className:`relative group bg-[var(--hud-panel-bg)] border border-[var(--hud-border)] rounded-lg overflow-hidden transition-all duration-300 hover:shadow-[0_0_20px_rgba(0,243,255,0.1)] hover:border-[var(--hud-accent)] ${n}`,children:[l.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-t-2 border-l-2 border-[var(--hud-accent)] opacity-50 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t-2 border-r-2 border-[var(--hud-accent)] opacity-50 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b-2 border-l-2 border-[var(--hud-accent)] opacity-50 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b-2 border-r-2 border-[var(--hud-accent)] opacity-50 group-hover:opacity-100 transition-opacity"}),(e||r)&&l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[var(--hud-border)] bg-[rgba(0,0,0,0.2)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[r&&l.jsx(r,{size:18,className:"text-[var(--hud-accent)]"}),l.jsxs("h3",{className:"font-['Rajdhani'] font-bold text-lg tracking-wider text-white uppercase",children:[l.jsx("span",{className:"text-[var(--hud-accent)] mr-2",children:"::"}),e]})]}),s&&l.jsx("div",{className:"text-sm",children:s})]}),l.jsx("div",{className:"p-6",children:t})]}),Gt=({value:e,max:t=100,label:n,sublabel:r,color:s="var(--hud-accent)"})=>{const o=Math.min(100,Math.max(0,e/t*100)),i=36,a=2*Math.PI*i,d=a-o/100*a;return l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[l.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[l.jsx("circle",{cx:"64",cy:"64",r:i,stroke:"rgba(255,255,255,0.1)",strokeWidth:"8",fill:"transparent"}),l.jsx("circle",{cx:"64",cy:"64",r:i,stroke:s,strokeWidth:"8",fill:"transparent",strokeDasharray:a,strokeDashoffset:d,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{filter:`drop-shadow(0 0 4px ${s})`}})]}),l.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:l.jsxs("span",{className:"text-2xl font-['Rajdhani'] font-bold text-white",children:[e,"%"]})})]}),l.jsxs("div",{className:"text-center mt-2",children:[l.jsx("div",{className:"text-sm font-bold text-white tracking-wide",children:n}),r&&l.jsx("div",{className:"text-xs text-[var(--hud-text-dim)]",children:r})]})]})},sn=({columns:e,data:t,onRowClick:n})=>l.jsx("div",{className:"w-full overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsx("tr",{className:"border-b border-[var(--hud-border)]",children:e.map((r,s)=>l.jsx("th",{className:"py-3 px-4 text-xs font-['Rajdhani'] font-bold text-[var(--hud-text-dim)] uppercase tracking-wider whitespace-nowrap bg-[rgba(0,0,0,0.2)]",children:r.header},s))})}),l.jsx("tbody",{className:"font-mono text-sm",children:t.map((r,s)=>l.jsx("tr",{onClick:()=>n&&n(r),className:`
                border-b border-[rgba(255,255,255,0.05)] transition-colors duration-200
                ${n?"cursor-pointer hover:bg-[rgba(0,243,255,0.05)]":""}
                group
              `,children:e.map((o,i)=>l.jsx("td",{className:"py-3 px-4 text-white group-hover:text-[var(--hud-accent)] transition-colors",children:o.render?o.render(r):r[o.accessor]},i))},r.id||s))})]})}),kr=()=>{const[e,t]=N.useState({requests:0,bandwidth:0,latency:0,savings:0,hitRate:0,uptime:100}),[n,r]=N.useState([]),[s,o]=N.useState(!0);return N.useEffect(()=>{const i=async()=>{try{const c=await(await fetch("/api/admin-stats",{headers:{Authorization:`Bearer ${localStorage.getItem("agentcache_token")}`}})).json();c&&!c.error&&t({requests:c.total_requests_today||0,bandwidth:Math.round((c.tokens_saved_today||0)/1e3),latency:42,savings:c.cost_saved_today?parseFloat(c.cost_saved_today.replace("$","")):0,hitRate:c.hit_rate||0,uptime:99.9})}catch(u){console.error("Failed to fetch admin stats:",u)}finally{o(!1)}};i();const a=setInterval(i,3e4),d=new EventSource("/api/events/stream");return d.onmessage=u=>{const c=JSON.parse(u.data);if(c.type==="sys:connected")return;const h={id:Date.now(),type:c.type.toUpperCase(),source:c.agentId||"System",hash:c.hash?`${c.hash.substring(0,8)}...`:"-",time:new Date().toLocaleTimeString()};r(f=>[h,...f].slice(0,10))},()=>{clearInterval(a),d.close()}},[]),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx(J,{title:"Global Grid Status",icon:Er,className:"lg:col-span-2 min-h-[300px]",children:l.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-[rgba(0,0,0,0.3)] rounded border border-[rgba(255,255,255,0.05)] relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--hud-accent)_0%,_transparent_70%)] opacity-10 animate-pulse"}),l.jsxs("div",{className:"text-center",children:[l.jsx(Er,{size:64,className:"mx-auto text-[var(--hud-accent)] opacity-50 mb-4"}),l.jsxs("p",{className:"text-[var(--hud-text-dim)] font-mono text-sm",children:["GRID VISUALIZATION ONLINE",l.jsx("br",{}),l.jsx("span",{className:"text-[var(--hud-success)]",children:"3 REGIONS ACTIVE"})]})]})]})}),l.jsx(J,{title:"System Health",icon:Qe,className:"flex flex-col justify-center",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(Gt,{value:e.uptime,label:"Uptime",sublabel:"30 Days",color:"var(--hud-success)"}),l.jsx(Gt,{value:e.hitRate,label:"Cache Hit",sublabel:"Global",color:"var(--hud-accent)"}),l.jsx(Gt,{value:42,max:100,label:"CPU Load",sublabel:"Cluster",color:"var(--hud-warning)"}),l.jsx(Gt,{value:12,max:100,label:"Memory",sublabel:"Usage",color:"var(--hud-accent-secondary)"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs(J,{className:"p-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Total Requests"}),l.jsx("h3",{className:"text-2xl font-mono font-bold text-white",children:e.requests.toLocaleString()})]}),l.jsx(ks,{className:"text-[var(--hud-accent)] opacity-50",size:24})]}),l.jsx("div",{className:"mt-2 text-xs text-[var(--hud-success)] flex items-center",children:l.jsx("span",{children:"Today"})})]}),l.jsxs(J,{className:"p-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Tokens Saved"}),l.jsxs("h3",{className:"text-2xl font-mono font-bold text-white",children:[e.bandwidth.toLocaleString()," k"]})]}),l.jsx(ya,{className:"text-[var(--hud-accent-secondary)] opacity-50",size:24})]}),l.jsx("div",{className:"mt-2 text-xs text-[var(--hud-success)] flex items-center",children:l.jsx("span",{children:"Est. Bandwidth"})})]}),l.jsxs(J,{className:"p-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Avg Latency"}),l.jsxs("h3",{className:"text-2xl font-mono font-bold text-white",children:[e.latency,"ms"]})]}),l.jsx(Qe,{className:"text-[var(--hud-warning)] opacity-50",size:24})]}),l.jsx("div",{className:"mt-2 text-xs text-[var(--hud-success)] flex items-center",children:l.jsx("span",{children:"Global Avg"})})]}),l.jsxs(J,{className:"p-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Cost Savings"}),l.jsxs("h3",{className:"text-2xl font-mono font-bold text-white",children:["$",e.savings.toFixed(2)]})]}),l.jsx(js,{className:"text-[var(--hud-success)] opacity-50",size:24})]}),l.jsx("div",{className:"mt-2 text-xs text-[var(--hud-success)] flex items-center",children:l.jsx("span",{children:"Today"})})]})]}),l.jsxs(J,{title:"Live Event Stream",icon:Ui,action:l.jsx("button",{className:"text-xs text-[var(--hud-accent)] hover:underline",children:"View All"}),children:[l.jsx(sn,{columns:[{header:"Time",accessor:"time"},{header:"Type",accessor:"type",render:i=>l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${i.type.includes("HIT")?"bg-green-500/10 text-green-400":i.type.includes("MISS")?"bg-red-500/10 text-red-400":"bg-blue-500/10 text-blue-400"}`,children:i.type})},{header:"Source",accessor:"source"},{header:"Hash / ID",accessor:"hash",render:i=>l.jsx("span",{className:"font-mono text-[var(--hud-text-dim)]",children:i.hash})}],data:n}),n.length===0&&l.jsx("div",{className:"p-4 text-center text-[var(--hud-text-dim)] italic",children:"Waiting for events..."})]})]})};function le(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=le(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const $a={},Cr=e=>{let t;const n=new Set,r=(c,h)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const p=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(b=>b(t,p))}},s=()=>t,d={setState:r,getState:s,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{($a?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,d);return d},za=e=>e?Cr(e):Cr,{useDebugValue:Ra}=k,{useSyncExternalStoreWithSelector:Da}=zi,Pa=e=>e;function Cs(e,t=Pa,n){const r=Da(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ra(r),r}const Ar=(e,t)=>{const n=za(e),r=(s,o=t)=>Cs(n,s,o);return Object.assign(r,n),r},Ha=(e,t)=>e?Ar(e,t):Ar;function ae(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var La={value:()=>{}};function Ot(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new en(n)}function en(e){this._=e}function Oa(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}en.prototype=Ot.prototype={constructor:en,on:function(e,t){var n=this._,r=Oa(e+"",n),s,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((s=(e=r[o]).type)&&(s=Va(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(s=(e=r[o]).type)n[s]=Mr(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Mr(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new en(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,o=r.length;s<o;++s)r[s].value.apply(t,n)}};function Va(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function Mr(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=La,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Dn="http://www.w3.org/1999/xhtml";const Ir={svg:"http://www.w3.org/2000/svg",xhtml:Dn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ir.hasOwnProperty(t)?{space:Ir[t],local:e}:e}function Ba(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Dn&&t.documentElement.namespaceURI===Dn?t.createElement(e):t.createElementNS(n,e)}}function Fa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function As(e){var t=mn(e);return(t.local?Fa:Ba)(t)}function Ga(){}function Qn(e){return e==null?Ga:function(){return this.querySelector(e)}}function Ua(e){typeof e!="function"&&(e=Qn(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=new Array(i),d,u,c=0;c<i;++c)(d=o[c])&&(u=e.call(d,d.__data__,c,o))&&("__data__"in d&&(u.__data__=d.__data__),a[c]=u);return new fe(r,this._parents)}function Ya(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xa(){return[]}function Ms(e){return e==null?Xa:function(){return this.querySelectorAll(e)}}function qa(e){return function(){return Ya(e.apply(this,arguments))}}function Za(e){typeof e=="function"?e=qa(e):e=Ms(e);for(var t=this._groups,n=t.length,r=[],s=[],o=0;o<n;++o)for(var i=t[o],a=i.length,d,u=0;u<a;++u)(d=i[u])&&(r.push(e.call(d,d.__data__,u,i)),s.push(d));return new fe(r,s)}function Is(e){return function(){return this.matches(e)}}function Ts(e){return function(t){return t.matches(e)}}var Wa=Array.prototype.find;function Ka(e){return function(){return Wa.call(this.children,e)}}function Ja(){return this.firstElementChild}function Qa(e){return this.select(e==null?Ja:Ka(typeof e=="function"?e:Ts(e)))}var ec=Array.prototype.filter;function tc(){return Array.from(this.children)}function nc(e){return function(){return ec.call(this.children,e)}}function rc(e){return this.selectAll(e==null?tc:nc(typeof e=="function"?e:Ts(e)))}function sc(e){typeof e!="function"&&(e=Is(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=[],d,u=0;u<i;++u)(d=o[u])&&e.call(d,d.__data__,u,o)&&a.push(d);return new fe(r,this._parents)}function $s(e){return new Array(e.length)}function oc(){return new fe(this._enter||this._groups.map($s),this._parents)}function on(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}on.prototype={constructor:on,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ic(e){return function(){return e}}function ac(e,t,n,r,s,o){for(var i=0,a,d=t.length,u=o.length;i<u;++i)(a=t[i])?(a.__data__=o[i],r[i]=a):n[i]=new on(e,o[i]);for(;i<d;++i)(a=t[i])&&(s[i]=a)}function cc(e,t,n,r,s,o,i){var a,d,u=new Map,c=t.length,h=o.length,f=new Array(c),p;for(a=0;a<c;++a)(d=t[a])&&(f[a]=p=i.call(d,d.__data__,a,t)+"",u.has(p)?s[a]=d:u.set(p,d));for(a=0;a<h;++a)p=i.call(e,o[a],a,o)+"",(d=u.get(p))?(r[a]=d,d.__data__=o[a],u.delete(p)):n[a]=new on(e,o[a]);for(a=0;a<c;++a)(d=t[a])&&u.get(f[a])===d&&(s[a]=d)}function lc(e){return e.__data__}function uc(e,t){if(!arguments.length)return Array.from(this,lc);var n=t?cc:ac,r=this._parents,s=this._groups;typeof e!="function"&&(e=ic(e));for(var o=s.length,i=new Array(o),a=new Array(o),d=new Array(o),u=0;u<o;++u){var c=r[u],h=s[u],f=h.length,p=dc(e.call(c,c&&c.__data__,u,r)),b=p.length,g=a[u]=new Array(b),x=i[u]=new Array(b),m=d[u]=new Array(f);n(c,h,g,x,m,p,t);for(var w=0,_=0,v,C;w<b;++w)if(v=g[w]){for(w>=_&&(_=w+1);!(C=x[_])&&++_<b;);v._next=C||null}}return i=new fe(i,r),i._enter=a,i._exit=d,i}function dc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hc(){return new fe(this._exit||this._groups.map($s),this._parents)}function fc(e,t,n){var r=this.enter(),s=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function pc(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,o=r.length,i=Math.min(s,o),a=new Array(s),d=0;d<i;++d)for(var u=n[d],c=r[d],h=u.length,f=a[d]=new Array(h),p,b=0;b<h;++b)(p=u[b]||c[b])&&(f[b]=p);for(;d<s;++d)a[d]=n[d];return new fe(a,this._parents)}function mc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,o=r[s],i;--s>=0;)(i=r[s])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function gc(e){e||(e=xc);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var i=n[o],a=i.length,d=s[o]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(d[c]=u);d.sort(t)}return new fe(s,this._parents).order()}function xc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vc(){return Array.from(this)}function bc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length;s<o;++s){var i=r[s];if(i)return i}return null}function wc(){let e=0;for(const t of this)++e;return e}function Nc(){return!this.node()}function _c(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],o=0,i=s.length,a;o<i;++o)(a=s[o])&&e.call(a,a.__data__,o,s);return this}function Sc(e){return function(){this.removeAttribute(e)}}function Ec(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jc(e,t){return function(){this.setAttribute(e,t)}}function kc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Cc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ac(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mc(e,t){var n=mn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ec:Sc:typeof t=="function"?n.local?Ac:Cc:n.local?kc:jc)(n,t))}function zs(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ic(e){return function(){this.style.removeProperty(e)}}function Tc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $c(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function zc(e,t,n){return arguments.length>1?this.each((t==null?Ic:typeof t=="function"?$c:Tc)(e,t,n??"")):xt(this.node(),e)}function xt(e,t){return e.style.getPropertyValue(t)||zs(e).getComputedStyle(e,null).getPropertyValue(t)}function Rc(e){return function(){delete this[e]}}function Dc(e,t){return function(){this[e]=t}}function Pc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Hc(e,t){return arguments.length>1?this.each((t==null?Rc:typeof t=="function"?Pc:Dc)(e,t)):this.node()[e]}function Rs(e){return e.trim().split(/^|\s+/)}function er(e){return e.classList||new Ds(e)}function Ds(e){this._node=e,this._names=Rs(e.getAttribute("class")||"")}Ds.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ps(e,t){for(var n=er(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Hs(e,t){for(var n=er(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Lc(e){return function(){Ps(this,e)}}function Oc(e){return function(){Hs(this,e)}}function Vc(e,t){return function(){(t.apply(this,arguments)?Ps:Hs)(this,e)}}function Bc(e,t){var n=Rs(e+"");if(arguments.length<2){for(var r=er(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Vc:t?Lc:Oc)(n,t))}function Fc(){this.textContent=""}function Gc(e){return function(){this.textContent=e}}function Uc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Yc(e){return arguments.length?this.each(e==null?Fc:(typeof e=="function"?Uc:Gc)(e)):this.node().textContent}function Xc(){this.innerHTML=""}function qc(e){return function(){this.innerHTML=e}}function Zc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wc(e){return arguments.length?this.each(e==null?Xc:(typeof e=="function"?Zc:qc)(e)):this.node().innerHTML}function Kc(){this.nextSibling&&this.parentNode.appendChild(this)}function Jc(){return this.each(Kc)}function Qc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function el(){return this.each(Qc)}function tl(e){var t=typeof e=="function"?e:As(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nl(){return null}function rl(e,t){var n=typeof e=="function"?e:As(e),r=t==null?nl:typeof t=="function"?t:Qn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sl(){var e=this.parentNode;e&&e.removeChild(this)}function ol(){return this.each(sl)}function il(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function al(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cl(e){return this.select(e?al:il)}function ll(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ul(e){return function(t){e.call(this,t,this.__data__)}}function dl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function hl(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,o;n<s;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function fl(e,t,n){return function(){var r=this.__on,s,o=ul(t);if(r){for(var i=0,a=r.length;i<a;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=t;return}}this.addEventListener(e.type,o,n),s={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(s):this.__on=[s]}}function pl(e,t,n){var r=dl(e+""),s,o=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var d=0,u=a.length,c;d<u;++d)for(s=0,c=a[d];s<o;++s)if((i=r[s]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?fl:hl,s=0;s<o;++s)this.each(a(r[s],t,n));return this}function Ls(e,t,n){var r=zs(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function ml(e,t){return function(){return Ls(this,e,t)}}function gl(e,t){return function(){return Ls(this,e,t.apply(this,arguments))}}function xl(e,t){return this.each((typeof t=="function"?gl:ml)(e,t))}function*yl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,i;s<o;++s)(i=r[s])&&(yield i)}var Os=[null];function fe(e,t){this._groups=e,this._parents=t}function Vt(){return new fe([[document.documentElement]],Os)}function vl(){return this}fe.prototype=Vt.prototype={constructor:fe,select:Ua,selectAll:Za,selectChild:Qa,selectChildren:rc,filter:sc,data:uc,enter:oc,exit:hc,join:fc,merge:pc,selection:vl,order:mc,sort:gc,call:yc,nodes:vc,node:bc,size:wc,empty:Nc,each:_c,attr:Mc,style:zc,property:Hc,classed:Bc,text:Yc,html:Wc,raise:Jc,lower:el,append:tl,insert:rl,remove:ol,clone:cl,datum:ll,on:pl,dispatch:xl,[Symbol.iterator]:yl};function ge(e){return typeof e=="string"?new fe([[document.querySelector(e)]],[document.documentElement]):new fe([[e]],Os)}function bl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=bl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const wl={passive:!1},$t={capture:!0,passive:!1};function Sn(e){e.stopImmediatePropagation()}function ft(e){e.preventDefault(),e.stopImmediatePropagation()}function Vs(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",ft,$t);"onselectstart"in t?n.on("selectstart.drag",ft,$t):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bs(e,t){var n=e.document.documentElement,r=ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",ft,$t),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ut=e=>()=>e;function Pn(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:o,x:i,y:a,dx:d,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Pn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Nl(e){return!e.ctrlKey&&!e.button}function _l(){return this.parentNode}function Sl(e,t){return t??{x:e.x,y:e.y}}function El(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fs(){var e=Nl,t=_l,n=Sl,r=El,s={},o=Ot("start","drag","end"),i=0,a,d,u,c,h=0;function f(v){v.on("mousedown.drag",p).filter(r).on("touchstart.drag",x).on("touchmove.drag",m,wl).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,C){if(!(c||!e.call(this,v,C))){var A=_(this,t.call(this,v,C),v,C,"mouse");A&&(ge(v.view).on("mousemove.drag",b,$t).on("mouseup.drag",g,$t),Vs(v.view),Sn(v),u=!1,a=v.clientX,d=v.clientY,A("start",v))}}function b(v){if(ft(v),!u){var C=v.clientX-a,A=v.clientY-d;u=C*C+A*A>h}s.mouse("drag",v)}function g(v){ge(v.view).on("mousemove.drag mouseup.drag",null),Bs(v.view,u),ft(v),s.mouse("end",v)}function x(v,C){if(e.call(this,v,C)){var A=v.changedTouches,R=t.call(this,v,C),T=A.length,M,$;for(M=0;M<T;++M)($=_(this,R,v,C,A[M].identifier,A[M]))&&(Sn(v),$("start",v,A[M]))}}function m(v){var C=v.changedTouches,A=C.length,R,T;for(R=0;R<A;++R)(T=s[C[R].identifier])&&(ft(v),T("drag",v,C[R]))}function w(v){var C=v.changedTouches,A=C.length,R,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),R=0;R<A;++R)(T=s[C[R].identifier])&&(Sn(v),T("end",v,C[R]))}function _(v,C,A,R,T,M){var $=o.copy(),L=je(M||A,C),V,P,y;if((y=n.call(v,new Pn("beforestart",{sourceEvent:A,target:f,identifier:T,active:i,x:L[0],y:L[1],dx:0,dy:0,dispatch:$}),R))!=null)return V=y.x-L[0]||0,P=y.y-L[1]||0,function j(S,I,H){var E=L,z;switch(S){case"start":s[T]=j,z=i++;break;case"end":delete s[T],--i;case"drag":L=je(H||I,C),z=i;break}$.call(S,v,new Pn(S,{sourceEvent:I,subject:y,target:f,identifier:T,active:z,x:L[0]+V,y:L[1]+P,dx:L[0]-E[0],dy:L[1]-E[1],dispatch:$}),R)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Ut(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Ut(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Ut(v),f):n},f.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:Ut(!!v),f):r},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,f):Math.sqrt(h)},f}function tr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Gs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bt(){}var zt=.7,an=1/zt,pt="\\s*([+-]?\\d+)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jl=/^#([0-9a-f]{3,8})$/,kl=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),Cl=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),Al=new RegExp(`^rgba\\(${pt},${pt},${pt},${Rt}\\)$`),Ml=new RegExp(`^rgba\\(${ke},${ke},${ke},${Rt}\\)$`),Il=new RegExp(`^hsl\\(${Rt},${ke},${ke}\\)$`),Tl=new RegExp(`^hsla\\(${Rt},${ke},${ke},${Rt}\\)$`),Tr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tr(Bt,Dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$r,formatHex:$r,formatHex8:$l,formatHsl:zl,formatRgb:zr,toString:zr});function $r(){return this.rgb().formatHex()}function $l(){return this.rgb().formatHex8()}function zl(){return Us(this).formatHsl()}function zr(){return this.rgb().formatRgb()}function Dt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Rr(t):n===3?new de(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kl.exec(e))?new de(t[1],t[2],t[3],1):(t=Cl.exec(e))?new de(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Al.exec(e))?Yt(t[1],t[2],t[3],t[4]):(t=Ml.exec(e))?Yt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Il.exec(e))?Hr(t[1],t[2]/100,t[3]/100,1):(t=Tl.exec(e))?Hr(t[1],t[2]/100,t[3]/100,t[4]):Tr.hasOwnProperty(e)?Rr(Tr[e]):e==="transparent"?new de(NaN,NaN,NaN,0):null}function Rr(e){return new de(e>>16&255,e>>8&255,e&255,1)}function Yt(e,t,n,r){return r<=0&&(e=t=n=NaN),new de(e,t,n,r)}function Rl(e){return e instanceof Bt||(e=Dt(e)),e?(e=e.rgb(),new de(e.r,e.g,e.b,e.opacity)):new de}function Hn(e,t,n,r){return arguments.length===1?Rl(e):new de(e,t,n,r??1)}function de(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tr(de,Hn,Gs(Bt,{brighter(e){return e=e==null?an:Math.pow(an,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zt:Math.pow(zt,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new de(Ke(this.r),Ke(this.g),Ke(this.b),cn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dr,formatHex:Dr,formatHex8:Dl,formatRgb:Pr,toString:Pr}));function Dr(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}`}function Dl(){return`#${Ze(this.r)}${Ze(this.g)}${Ze(this.b)}${Ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pr(){const e=cn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ke(this.r)}, ${Ke(this.g)}, ${Ke(this.b)}${e===1?")":`, ${e})`}`}function cn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ke(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ze(e){return e=Ke(e),(e<16?"0":"")+e.toString(16)}function Hr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new be(e,t,n,r)}function Us(e){if(e instanceof be)return new be(e.h,e.s,e.l,e.opacity);if(e instanceof Bt||(e=Dt(e)),!e)return new be;if(e instanceof be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,a=o-s,d=(o+s)/2;return a?(t===o?i=(n-r)/a+(n<r)*6:n===o?i=(r-t)/a+2:i=(t-n)/a+4,a/=d<.5?o+s:2-o-s,i*=60):a=d>0&&d<1?0:i,new be(i,a,d,e.opacity)}function Pl(e,t,n,r){return arguments.length===1?Us(e):new be(e,t,n,r??1)}function be(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tr(be,Pl,Gs(Bt,{brighter(e){return e=e==null?an:Math.pow(an,e),new be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zt:Math.pow(zt,e),new be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new de(En(e>=240?e-240:e+120,s,r),En(e,s,r),En(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new be(Lr(this.h),Xt(this.s),Xt(this.l),cn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cn(this.opacity);return`${e===1?"hsl(":"hsla("}${Lr(this.h)}, ${Xt(this.s)*100}%, ${Xt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Lr(e){return e=(e||0)%360,e<0?e+360:e}function Xt(e){return Math.max(0,Math.min(1,e||0))}function En(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ys=e=>()=>e;function Hl(e,t){return function(n){return e+n*t}}function Ll(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ol(e){return(e=+e)==1?Xs:function(t,n){return n-t?Ll(t,n,e):Ys(isNaN(t)?n:t)}}function Xs(e,t){var n=t-e;return n?Hl(e,n):Ys(isNaN(e)?t:e)}const Or=(function e(t){var n=Ol(t);function r(s,o){var i=n((s=Hn(s)).r,(o=Hn(o)).r),a=n(s.g,o.g),d=n(s.b,o.b),u=Xs(s.opacity,o.opacity);return function(c){return s.r=i(c),s.g=a(c),s.b=d(c),s.opacity=u(c),s+""}}return r.gamma=e,r})(1);function Re(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jn=new RegExp(Ln.source,"g");function Vl(e){return function(){return e}}function Bl(e){return function(t){return e(t)+""}}function Fl(e,t){var n=Ln.lastIndex=jn.lastIndex=0,r,s,o,i=-1,a=[],d=[];for(e=e+"",t=t+"";(r=Ln.exec(e))&&(s=jn.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),a[i]?a[i]+=o:a[++i]=o),(r=r[0])===(s=s[0])?a[i]?a[i]+=s:a[++i]=s:(a[++i]=null,d.push({i,x:Re(r,s)})),n=jn.lastIndex;return n<t.length&&(o=t.slice(n),a[i]?a[i]+=o:a[++i]=o),a.length<2?d[0]?Bl(d[0].x):Vl(t):(t=d.length,function(u){for(var c=0,h;c<t;++c)a[(h=d[c]).i]=h.x(u);return a.join("")})}var Vr=180/Math.PI,On={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qs(e,t,n,r,s,o){var i,a,d;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,d/=a),e*r<t*n&&(e=-e,t=-t,d=-d,i=-i),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*Vr,skewX:Math.atan(d)*Vr,scaleX:i,scaleY:a}}var qt;function Gl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?On:qs(t.a,t.b,t.c,t.d,t.e,t.f)}function Ul(e){return e==null||(qt||(qt=document.createElementNS("http://www.w3.org/2000/svg","g")),qt.setAttribute("transform",e),!(e=qt.transform.baseVal.consolidate()))?On:(e=e.matrix,qs(e.a,e.b,e.c,e.d,e.e,e.f))}function Zs(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function o(u,c,h,f,p,b){if(u!==h||c!==f){var g=p.push("translate(",null,t,null,n);b.push({i:g-4,x:Re(u,h)},{i:g-2,x:Re(c,f)})}else(h||f)&&p.push("translate("+h+t+f+n)}function i(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(s(h)+"rotate(",null,r)-2,x:Re(u,c)})):c&&h.push(s(h)+"rotate("+c+r)}function a(u,c,h,f){u!==c?f.push({i:h.push(s(h)+"skewX(",null,r)-2,x:Re(u,c)}):c&&h.push(s(h)+"skewX("+c+r)}function d(u,c,h,f,p,b){if(u!==h||c!==f){var g=p.push(s(p)+"scale(",null,",",null,")");b.push({i:g-4,x:Re(u,h)},{i:g-2,x:Re(c,f)})}else(h!==1||f!==1)&&p.push(s(p)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,f),i(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),d(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(p){for(var b=-1,g=f.length,x;++b<g;)h[(x=f[b]).i]=x.x(p);return h.join("")}}}var Yl=Zs(Gl,"px, ","px)","deg)"),Xl=Zs(Ul,", ",")",")"),ql=1e-12;function Br(e){return((e=Math.exp(e))+1/e)/2}function Zl(e){return((e=Math.exp(e))-1/e)/2}function Wl(e){return((e=Math.exp(2*e))-1)/(e+1)}const Kl=(function e(t,n,r){function s(o,i){var a=o[0],d=o[1],u=o[2],c=i[0],h=i[1],f=i[2],p=c-a,b=h-d,g=p*p+b*b,x,m;if(g<ql)m=Math.log(f/u)/t,x=function(R){return[a+R*p,d+R*b,u*Math.exp(t*R*m)]};else{var w=Math.sqrt(g),_=(f*f-u*u+r*g)/(2*u*n*w),v=(f*f-u*u-r*g)/(2*f*n*w),C=Math.log(Math.sqrt(_*_+1)-_),A=Math.log(Math.sqrt(v*v+1)-v);m=(A-C)/t,x=function(R){var T=R*m,M=Br(C),$=u/(n*w)*(M*Wl(t*T+C)-Zl(C));return[a+$*p,d+$*b,u*M/Br(t*T+C)]}}return x.duration=m*1e3*t/Math.SQRT2,x}return s.rho=function(o){var i=Math.max(.001,+o),a=i*i,d=a*a;return e(i,a,d)},s})(Math.SQRT2,2,4);var yt=0,Mt=0,Et=0,Ws=1e3,ln,It,un=0,et=0,gn=0,Pt=typeof performance=="object"&&performance.now?performance:Date,Ks=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nr(){return et||(Ks(Jl),et=Pt.now()+gn)}function Jl(){et=0}function dn(){this._call=this._time=this._next=null}dn.prototype=rr.prototype={constructor:dn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nr():+n)+(t==null?0:+t),!this._next&&It!==this&&(It?It._next=this:ln=this,It=this),this._call=e,this._time=n,Vn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vn())}};function rr(e,t,n){var r=new dn;return r.restart(e,t,n),r}function Ql(){nr(),++yt;for(var e=ln,t;e;)(t=et-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yt}function Fr(){et=(un=Pt.now())+gn,yt=Mt=0;try{Ql()}finally{yt=0,tu(),et=0}}function eu(){var e=Pt.now(),t=e-un;t>Ws&&(gn-=t,un=e)}function tu(){for(var e,t=ln,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ln=n);It=e,Vn(r)}function Vn(e){if(!yt){Mt&&(Mt=clearTimeout(Mt));var t=e-et;t>24?(e<1/0&&(Mt=setTimeout(Fr,e-Pt.now()-gn)),Et&&(Et=clearInterval(Et))):(Et||(un=Pt.now(),Et=setInterval(eu,Ws)),yt=1,Ks(Fr))}}function Gr(e,t,n){var r=new dn;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var nu=Ot("start","end","cancel","interrupt"),ru=[],Js=0,Ur=1,Bn=2,tn=3,Yr=4,Fn=5,nn=6;function xn(e,t,n,r,s,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;su(e,n,{name:t,index:r,group:s,on:nu,tween:ru,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Js})}function sr(e,t){var n=Ne(e,t);if(n.state>Js)throw new Error("too late; already scheduled");return n}function Ce(e,t){var n=Ne(e,t);if(n.state>tn)throw new Error("too late; already running");return n}function Ne(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function su(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=rr(o,0,n.time);function o(u){n.state=Ur,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,h,f,p;if(n.state!==Ur)return d();for(c in r)if(p=r[c],p.name===n.name){if(p.state===tn)return Gr(i);p.state===Yr?(p.state=nn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=nn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(Gr(function(){n.state===tn&&(n.state=Yr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Bn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bn){for(n.state=tn,s=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=p);s.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(d),n.state=Fn,1),h=-1,f=s.length;++h<f;)s[h].call(e,c);n.state===Fn&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=nn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function rn(e,t){var n=e.__transition,r,s,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}s=r.state>Bn&&r.state<Fn,r.state=nn,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function ou(e){return this.each(function(){rn(this,e)})}function iu(e,t){var n,r;return function(){var s=Ce(this,e),o=s.tween;if(o!==n){r=n=o;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function au(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Ce(this,e),i=o.tween;if(i!==r){s=(r=i).slice();for(var a={name:t,value:n},d=0,u=s.length;d<u;++d)if(s[d].name===t){s[d]=a;break}d===u&&s.push(a)}o.tween=s}}function cu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ne(this.node(),n).tween,s=0,o=r.length,i;s<o;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?iu:au)(n,e,t))}function or(e,t,n){var r=e._id;return e.each(function(){var s=Ce(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Ne(s,r).value[t]}}function Qs(e,t){var n;return(typeof t=="number"?Re:t instanceof Dt?Or:(n=Dt(t))?(t=n,Or):Fl)(e,t)}function lu(e){return function(){this.removeAttribute(e)}}function uu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function du(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttribute(e);return i===s?null:i===r?o:o=t(r=i,n)}}function hu(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?o:o=t(r=i,n)}}function fu(e,t,n){var r,s,o;return function(){var i,a=n(this),d;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),d=a+"",i===d?null:i===r&&d===s?o:(s=d,o=t(r=i,a)))}}function pu(e,t,n){var r,s,o;return function(){var i,a=n(this),d;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),d=a+"",i===d?null:i===r&&d===s?o:(s=d,o=t(r=i,a)))}}function mu(e,t){var n=mn(e),r=n==="transform"?Xl:Qs;return this.attrTween(e,typeof t=="function"?(n.local?pu:fu)(n,r,or(this,"attr."+e,t)):t==null?(n.local?uu:lu)(n):(n.local?hu:du)(n,r,t))}function gu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yu(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&xu(e,o)),n}return s._value=t,s}function vu(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&gu(e,o)),n}return s._value=t,s}function bu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=mn(e);return this.tween(n,(r.local?yu:vu)(r,t))}function wu(e,t){return function(){sr(this,e).delay=+t.apply(this,arguments)}}function Nu(e,t){return t=+t,function(){sr(this,e).delay=t}}function _u(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wu:Nu)(t,e)):Ne(this.node(),t).delay}function Su(e,t){return function(){Ce(this,e).duration=+t.apply(this,arguments)}}function Eu(e,t){return t=+t,function(){Ce(this,e).duration=t}}function ju(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Su:Eu)(t,e)):Ne(this.node(),t).duration}function ku(e,t){if(typeof t!="function")throw new Error;return function(){Ce(this,e).ease=t}}function Cu(e){var t=this._id;return arguments.length?this.each(ku(t,e)):Ne(this.node(),t).ease}function Au(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ce(this,e).ease=n}}function Mu(e){if(typeof e!="function")throw new Error;return this.each(Au(this._id,e))}function Iu(e){typeof e!="function"&&(e=Is(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=[],d,u=0;u<i;++u)(d=o[u])&&e.call(d,d.__data__,u,o)&&a.push(d);return new Te(r,this._parents,this._name,this._id)}function Tu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),i=new Array(r),a=0;a<o;++a)for(var d=t[a],u=n[a],c=d.length,h=i[a]=new Array(c),f,p=0;p<c;++p)(f=d[p]||u[p])&&(h[p]=f);for(;a<r;++a)i[a]=t[a];return new Te(i,this._parents,this._name,this._id)}function $u(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function zu(e,t,n){var r,s,o=$u(t)?sr:Ce;return function(){var i=o(this,e),a=i.on;a!==r&&(s=(r=a).copy()).on(t,n),i.on=s}}function Ru(e,t){var n=this._id;return arguments.length<2?Ne(this.node(),n).on.on(e):this.each(zu(n,e,t))}function Du(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Pu(){return this.on("end.remove",Du(this._id))}function Hu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qn(e));for(var r=this._groups,s=r.length,o=new Array(s),i=0;i<s;++i)for(var a=r[i],d=a.length,u=o[i]=new Array(d),c,h,f=0;f<d;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,xn(u[f],t,n,f,u,Ne(c,n)));return new Te(o,this._parents,t,n)}function Lu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ms(e));for(var r=this._groups,s=r.length,o=[],i=[],a=0;a<s;++a)for(var d=r[a],u=d.length,c,h=0;h<u;++h)if(c=d[h]){for(var f=e.call(c,c.__data__,h,d),p,b=Ne(c,n),g=0,x=f.length;g<x;++g)(p=f[g])&&xn(p,t,n,g,f,b);o.push(f),i.push(c)}return new Te(o,i,t,n)}var Ou=Vt.prototype.constructor;function Vu(){return new Ou(this._groups,this._parents)}function Bu(e,t){var n,r,s;return function(){var o=xt(this,e),i=(this.style.removeProperty(e),xt(this,e));return o===i?null:o===n&&i===r?s:s=t(n=o,r=i)}}function eo(e){return function(){this.style.removeProperty(e)}}function Fu(e,t,n){var r,s=n+"",o;return function(){var i=xt(this,e);return i===s?null:i===r?o:o=t(r=i,n)}}function Gu(e,t,n){var r,s,o;return function(){var i=xt(this,e),a=n(this),d=a+"";return a==null&&(d=a=(this.style.removeProperty(e),xt(this,e))),i===d?null:i===r&&d===s?o:(s=d,o=t(r=i,a))}}function Uu(e,t){var n,r,s,o="style."+t,i="end."+o,a;return function(){var d=Ce(this,e),u=d.on,c=d.value[o]==null?a||(a=eo(t)):void 0;(u!==n||s!==c)&&(r=(n=u).copy()).on(i,s=c),d.on=r}}function Yu(e,t,n){var r=(e+="")=="transform"?Yl:Qs;return t==null?this.styleTween(e,Bu(e,r)).on("end.style."+e,eo(e)):typeof t=="function"?this.styleTween(e,Gu(e,r,or(this,"style."+e,t))).each(Uu(this._id,e)):this.styleTween(e,Fu(e,r,t),n).on("end.style."+e,null)}function Xu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qu(e,t,n){var r,s;function o(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&Xu(e,i,n)),r}return o._value=t,o}function Zu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qu(e,t,n??""))}function Wu(e){return function(){this.textContent=e}}function Ku(e){return function(){var t=e(this);this.textContent=t??""}}function Ju(e){return this.tween("text",typeof e=="function"?Ku(or(this,"text",e)):Wu(e==null?"":e+""))}function Qu(e){return function(t){this.textContent=e.call(this,t)}}function ed(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Qu(s)),t}return r._value=e,r}function td(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ed(e))}function nd(){for(var e=this._name,t=this._id,n=to(),r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],a=i.length,d,u=0;u<a;++u)if(d=i[u]){var c=Ne(d,t);xn(d,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Te(r,this._parents,e,n)}function rd(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(o,i){var a={value:i},d={value:function(){--s===0&&o()}};n.each(function(){var u=Ce(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(d)),u.on=t}),s===0&&o()})}var sd=0;function Te(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function to(){return++sd}var Me=Vt.prototype;Te.prototype={constructor:Te,select:Hu,selectAll:Lu,selectChild:Me.selectChild,selectChildren:Me.selectChildren,filter:Iu,merge:Tu,selection:Vu,transition:nd,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:Ru,attr:mu,attrTween:bu,style:Yu,styleTween:Zu,text:Ju,textTween:td,remove:Pu,tween:cu,delay:_u,duration:ju,ease:Cu,easeVarying:Mu,end:rd,[Symbol.iterator]:Me[Symbol.iterator]};function od(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var id={time:null,delay:0,duration:250,ease:od};function ad(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function cd(e){var t,n;e instanceof Te?(t=e._id,e=e._name):(t=to(),(n=id).time=nr(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],a=i.length,d,u=0;u<a;++u)(d=i[u])&&xn(d,e,t,u,i,n||ad(d,t));return new Te(r,this._parents,e,t)}Vt.prototype.interrupt=ou;Vt.prototype.transition=cd;const Zt=e=>()=>e;function ld(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Ie(e,t,n){this.k=e,this.x=t,this.y=n}Ie.prototype={constructor:Ie,scale:function(e){return e===1?this:new Ie(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ie(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Le=new Ie(1,0,0);Ie.prototype;function kn(e){e.stopImmediatePropagation()}function jt(e){e.preventDefault(),e.stopImmediatePropagation()}function ud(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function dd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Xr(){return this.__zoom||Le}function hd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fd(){return navigator.maxTouchPoints||"ontouchstart"in this}function pd(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function md(){var e=ud,t=dd,n=pd,r=hd,s=fd,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,d=Kl,u=Ot("start","zoom","end"),c,h,f,p=500,b=150,g=0,x=10;function m(y){y.property("__zoom",Xr).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",$).filter(s).on("touchstart.zoom",L).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(y,j,S,I){var H=y.selection?y.selection():y;H.property("__zoom",Xr),y!==H?C(y,j,S,I):H.interrupt().each(function(){A(this,arguments).event(I).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},m.scaleBy=function(y,j,S,I){m.scaleTo(y,function(){var H=this.__zoom.k,E=typeof j=="function"?j.apply(this,arguments):j;return H*E},S,I)},m.scaleTo=function(y,j,S,I){m.transform(y,function(){var H=t.apply(this,arguments),E=this.__zoom,z=S==null?v(H):typeof S=="function"?S.apply(this,arguments):S,D=E.invert(z),O=typeof j=="function"?j.apply(this,arguments):j;return n(_(w(E,O),z,D),H,i)},S,I)},m.translateBy=function(y,j,S,I){m.transform(y,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),i)},null,I)},m.translateTo=function(y,j,S,I,H){m.transform(y,function(){var E=t.apply(this,arguments),z=this.__zoom,D=I==null?v(E):typeof I=="function"?I.apply(this,arguments):I;return n(Le.translate(D[0],D[1]).scale(z.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof S=="function"?-S.apply(this,arguments):-S),E,i)},I,H)};function w(y,j){return j=Math.max(o[0],Math.min(o[1],j)),j===y.k?y:new Ie(j,y.x,y.y)}function _(y,j,S){var I=j[0]-S[0]*y.k,H=j[1]-S[1]*y.k;return I===y.x&&H===y.y?y:new Ie(y.k,I,H)}function v(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function C(y,j,S,I){y.on("start.zoom",function(){A(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(I).end()}).tween("zoom",function(){var H=this,E=arguments,z=A(H,E).event(I),D=t.apply(H,E),O=S==null?v(D):typeof S=="function"?S.apply(H,E):S,F=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),B=H.__zoom,Y=typeof j=="function"?j.apply(H,E):j,q=d(B.invert(O).concat(F/B.k),Y.invert(O).concat(F/Y.k));return function(Z){if(Z===1)Z=Y;else{var W=q(Z),ne=F/W[2];Z=new Ie(ne,O[0]-W[0]*ne,O[1]-W[1]*ne)}z.zoom(null,Z)}})}function A(y,j,S){return!S&&y.__zooming||new R(y,j)}function R(y,j){this.that=y,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,j),this.taps=0}R.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,j){return this.mouse&&y!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var j=ge(this.that).datum();u.call(y,this.that,new ld(y,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),j)}};function T(y,...j){if(!e.apply(this,arguments))return;var S=A(this,j).event(y),I=this.__zoom,H=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,r.apply(this,arguments)))),E=je(y);if(S.wheel)(S.mouse[0][0]!==E[0]||S.mouse[0][1]!==E[1])&&(S.mouse[1]=I.invert(S.mouse[0]=E)),clearTimeout(S.wheel);else{if(I.k===H)return;S.mouse=[E,I.invert(E)],rn(this),S.start()}jt(y),S.wheel=setTimeout(z,b),S.zoom("mouse",n(_(w(I,H),S.mouse[0],S.mouse[1]),S.extent,i));function z(){S.wheel=null,S.end()}}function M(y,...j){if(f||!e.apply(this,arguments))return;var S=y.currentTarget,I=A(this,j,!0).event(y),H=ge(y.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",F,!0),E=je(y,S),z=y.clientX,D=y.clientY;Vs(y.view),kn(y),I.mouse=[E,this.__zoom.invert(E)],rn(this),I.start();function O(B){if(jt(B),!I.moved){var Y=B.clientX-z,q=B.clientY-D;I.moved=Y*Y+q*q>g}I.event(B).zoom("mouse",n(_(I.that.__zoom,I.mouse[0]=je(B,S),I.mouse[1]),I.extent,i))}function F(B){H.on("mousemove.zoom mouseup.zoom",null),Bs(B.view,I.moved),jt(B),I.event(B).end()}}function $(y,...j){if(e.apply(this,arguments)){var S=this.__zoom,I=je(y.changedTouches?y.changedTouches[0]:y,this),H=S.invert(I),E=S.k*(y.shiftKey?.5:2),z=n(_(w(S,E),I,H),t.apply(this,j),i);jt(y),a>0?ge(this).transition().duration(a).call(C,z,I,y):ge(this).call(m.transform,z,I,y)}}function L(y,...j){if(e.apply(this,arguments)){var S=y.touches,I=S.length,H=A(this,j,y.changedTouches.length===I).event(y),E,z,D,O;for(kn(y),z=0;z<I;++z)D=S[z],O=je(D,this),O=[O,this.__zoom.invert(O),D.identifier],H.touch0?!H.touch1&&H.touch0[2]!==O[2]&&(H.touch1=O,H.taps=0):(H.touch0=O,E=!0,H.taps=1+!!c);c&&(c=clearTimeout(c)),E&&(H.taps<2&&(h=O[0],c=setTimeout(function(){c=null},p)),rn(this),H.start())}}function V(y,...j){if(this.__zooming){var S=A(this,j).event(y),I=y.changedTouches,H=I.length,E,z,D,O;for(jt(y),E=0;E<H;++E)z=I[E],D=je(z,this),S.touch0&&S.touch0[2]===z.identifier?S.touch0[0]=D:S.touch1&&S.touch1[2]===z.identifier&&(S.touch1[0]=D);if(z=S.that.__zoom,S.touch1){var F=S.touch0[0],B=S.touch0[1],Y=S.touch1[0],q=S.touch1[1],Z=(Z=Y[0]-F[0])*Z+(Z=Y[1]-F[1])*Z,W=(W=q[0]-B[0])*W+(W=q[1]-B[1])*W;z=w(z,Math.sqrt(Z/W)),D=[(F[0]+Y[0])/2,(F[1]+Y[1])/2],O=[(B[0]+q[0])/2,(B[1]+q[1])/2]}else if(S.touch0)D=S.touch0[0],O=S.touch0[1];else return;S.zoom("touch",n(_(z,D,O),S.extent,i))}}function P(y,...j){if(this.__zooming){var S=A(this,j).event(y),I=y.changedTouches,H=I.length,E,z;for(kn(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),E=0;E<H;++E)z=I[E],S.touch0&&S.touch0[2]===z.identifier?delete S.touch0:S.touch1&&S.touch1[2]===z.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(z=je(z,this),Math.hypot(h[0]-z[0],h[1]-z[1])<x)){var D=ge(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return m.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Zt(+y),m):r},m.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Zt(!!y),m):e},m.touchable=function(y){return arguments.length?(s=typeof y=="function"?y:Zt(!!y),m):s},m.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Zt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),m):t},m.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],m):[o[0],o[1]]},m.translateExtent=function(y){return arguments.length?(i[0][0]=+y[0][0],i[1][0]=+y[1][0],i[0][1]=+y[0][1],i[1][1]=+y[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(y){return arguments.length?(n=y,m):n},m.duration=function(y){return arguments.length?(a=+y,m):a},m.interpolate=function(y){return arguments.length?(d=y,m):d},m.on=function(){var y=u.on.apply(u,arguments);return y===u?m:y},m.clickDistance=function(y){return arguments.length?(g=(y=+y)*y,m):Math.sqrt(g)},m.tapDistance=function(y){return arguments.length?(x=+y,m):x},m}Ti();const yn=N.createContext(null),gd=yn.Provider,$e={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},no=$e.error001();function te(e,t){const n=N.useContext(yn);if(n===null)throw new Error(no);return Cs(n,e,t)}const oe=()=>{const e=N.useContext(yn);if(e===null)throw new Error(no);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},xd=e=>e.userSelectionActive?"none":"all";function ro({position:e,children:t,className:n,style:r,...s}){const o=te(xd),i=`${e}`.split("-");return k.createElement("div",{className:le(["react-flow__panel",n,...i]),style:{...r,pointerEvents:o},...s},t)}function yd({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:k.createElement(ro,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},k.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const vd=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:d,className:u,...c})=>{const h=N.useRef(null),[f,p]=N.useState({x:0,y:0,width:0,height:0}),b=le(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(h.current){const g=h.current.getBBox();p({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:k.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:b,visibility:f.width?"visible":"hidden",...c},s&&k.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),k.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:r},n),d)};var bd=N.memo(vd);const ir=e=>({width:e.offsetWidth,height:e.offsetHeight}),vt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ar=(e={x:0,y:0},t)=>({x:vt(e.x,t[0][0],t[1][0]),y:vt(e.y,t[0][1],t[1][1])}),qr=(e,t,n)=>e<t?vt(Math.abs(e-t),1,50)/50:e>n?-vt(Math.abs(e-n),1,50)/50:0,so=(e,t)=>{const n=qr(e.x,35,t.width-35)*20,r=qr(e.y,35,t.height-35)*20;return[n,r]},oo=e=>e.getRootNode?.()||window?.document,wd=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),cr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Nd=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Zr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Gn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},_d=e=>xe(e.width)&&xe(e.height)&&xe(e.x)&&xe(e.y),xe=e=>!isNaN(e)&&isFinite(e),re=Symbol.for("internals"),io=["Enter"," ","Escape"],Sd=(e,t)=>{},Ed=e=>"nativeEvent"in e;function Un(e){const n=(Ed(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const ao=e=>"clientX"in e,Oe=(e,t)=>{const n=ao(e),r=n?e.clientX:e.touches?.[0].clientX,s=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:s-(t?.top??0)}},hn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Ft=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:f,interactionWidth:p=20})=>k.createElement(k.Fragment,null,k.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),p&&k.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),s&&xe(n)&&xe(r)?k.createElement(bd,{x:n,y:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:u}):null);Ft.displayName="BaseEdge";function kt(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(o=>o.id===e);s&&n(r,{...s})}}function co({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,o=n<e?n+s:n-s,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[o,a,s,i]}function lo({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:i,targetControlY:a}){const d=e*.125+s*.375+i*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,c=Math.abs(d-e),h=Math.abs(u-t);return[d,u,c,h]}var tt;(function(e){e.Strict="strict",e.Loose="loose"})(tt||(tt={}));var We;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(We||(We={}));var Ht;(function(e){e.Partial="partial",e.Full="full"})(Ht||(Ht={}));var Pe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Pe||(Pe={}));var fn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(fn||(fn={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));function Wr({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function uo({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:s,targetPosition:o=G.Top}){const[i,a]=Wr({pos:n,x1:e,y1:t,x2:r,y2:s}),[d,u]=Wr({pos:o,x1:r,y1:s,x2:e,y2:t}),[c,h,f,p]=lo({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:a,targetControlX:d,targetControlY:u});return[`M${e},${t} C${i},${a} ${d},${u} ${r},${s}`,c,h,f,p]}const lr=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=G.Bottom,targetPosition:o=G.Top,label:i,labelStyle:a,labelShowBg:d,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:b,interactionWidth:g})=>{const[x,m,w]=uo({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return k.createElement(Ft,{path:x,labelX:m,labelY:w,label:i,labelStyle:a,labelShowBg:d,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:b,interactionWidth:g})});lr.displayName="SimpleBezierEdge";const Kr={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},jd=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Jr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kd({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:s,offset:o}){const i=Kr[t],a=Kr[r],d={x:e.x+i.x*o,y:e.y+i.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=jd({source:d,sourcePosition:t,target:u}),h=c.x!==0?"x":"y",f=c[h];let p=[],b,g;const x={x:0,y:0},m={x:0,y:0},[w,_,v,C]=co({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[h]*a[h]===-1){b=s.x??w,g=s.y??_;const R=[{x:b,y:d.y},{x:b,y:u.y}],T=[{x:d.x,y:g},{x:u.x,y:g}];i[h]===f?p=h==="x"?R:T:p=h==="x"?T:R}else{const R=[{x:d.x,y:u.y}],T=[{x:u.x,y:d.y}];if(h==="x"?p=i.x===f?T:R:p=i.y===f?R:T,t===r){const P=Math.abs(e[h]-n[h]);if(P<=o){const y=Math.min(o-1,o-P);i[h]===f?x[h]=(d[h]>e[h]?-1:1)*y:m[h]=(u[h]>n[h]?-1:1)*y}}if(t!==r){const P=h==="x"?"y":"x",y=i[h]===a[P],j=d[P]>u[P],S=d[P]<u[P];(i[h]===1&&(!y&&j||y&&S)||i[h]!==1&&(!y&&S||y&&j))&&(p=h==="x"?R:T)}const M={x:d.x+x.x,y:d.y+x.y},$={x:u.x+m.x,y:u.y+m.y},L=Math.max(Math.abs(M.x-p[0].x),Math.abs($.x-p[0].x)),V=Math.max(Math.abs(M.y-p[0].y),Math.abs($.y-p[0].y));L>=V?(b=(M.x+$.x)/2,g=p[0].y):(b=p[0].x,g=(M.y+$.y)/2)}return[[e,{x:d.x+x.x,y:d.y+x.y},...p,{x:u.x+m.x,y:u.y+m.y},n],b,g,v,C]}function Cd(e,t,n,r){const s=Math.min(Jr(e,t)/2,Jr(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+s*u},${i}Q ${o},${i} ${o},${i+s*c}`}const a=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${o},${i+s*d}Q ${o},${i} ${o+s*a},${i}`}function Yn({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:s,targetPosition:o=G.Top,borderRadius:i=5,centerX:a,centerY:d,offset:u=20}){const[c,h,f,p,b]=kd({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:a,y:d},offset:u});return[c.reduce((x,m,w)=>{let _="";return w>0&&w<c.length-1?_=Cd(c[w-1],m,c[w+1],i):_=`${w===0?"M":"L"}${m.x} ${m.y}`,x+=_,x},""),h,f,p,b]}const vn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:u,style:c,sourcePosition:h=G.Bottom,targetPosition:f=G.Top,markerEnd:p,markerStart:b,pathOptions:g,interactionWidth:x})=>{const[m,w,_]=Yn({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:r,targetPosition:f,borderRadius:g?.borderRadius,offset:g?.offset});return k.createElement(Ft,{path:m,labelX:w,labelY:_,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:u,style:c,markerEnd:p,markerStart:b,interactionWidth:x})});vn.displayName="SmoothStepEdge";const ur=N.memo(e=>k.createElement(vn,{...e,pathOptions:N.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));ur.displayName="StepEdge";function Ad({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,o,i,a]=co({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,o,i,a]}const dr=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:f,interactionWidth:p})=>{const[b,g,x]=Ad({sourceX:e,sourceY:t,targetX:n,targetY:r});return k.createElement(Ft,{path:b,labelX:g,labelY:x,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:f,interactionWidth:p})});dr.displayName="StraightEdge";function Wt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Qr({pos:e,x1:t,y1:n,x2:r,y2:s,c:o}){switch(e){case G.Left:return[t-Wt(t-r,o),n];case G.Right:return[t+Wt(r-t,o),n];case G.Top:return[t,n-Wt(n-s,o)];case G.Bottom:return[t,n+Wt(s-n,o)]}}function ho({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:s,targetPosition:o=G.Top,curvature:i=.25}){const[a,d]=Qr({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[u,c]=Qr({pos:o,x1:r,y1:s,x2:e,y2:t,c:i}),[h,f,p,b]=lo({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:d,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${d} ${u},${c} ${r},${s}`,h,f,p,b]}const pn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=G.Bottom,targetPosition:o=G.Top,label:i,labelStyle:a,labelShowBg:d,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:b,pathOptions:g,interactionWidth:x})=>{const[m,w,_]=ho({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:g?.curvature});return k.createElement(Ft,{path:m,labelX:w,labelY:_,label:i,labelStyle:a,labelShowBg:d,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:b,interactionWidth:x})});pn.displayName="BezierEdge";const hr=N.createContext(null),Md=hr.Provider;hr.Consumer;const Id=()=>N.useContext(hr),Td=e=>"id"in e&&"source"in e&&"target"in e,$d=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Xn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,zd=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),fo=(e,t)=>{if(!e.source||!e.target)return t;let n;return Td(e)?n={...e}:n={...e,id:$d(e)},zd(n,t)?t:t.concat(n)},qn=({x:e,y:t},[n,r,s],o,[i,a])=>{const d={x:(e-n)/s,y:(t-r)/s};return o?{x:i*Math.round(d.x/i),y:a*Math.round(d.y/a)}:d},po=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),mt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},fr=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:o,y:i}=mt(s,t).positionAbsolute;return wd(r,cr({x:o,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Nd(n)},mo=(e,t,[n,r,s]=[0,0,1],o=!1,i=!1,a=[0,0])=>{const d={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},u=[];return e.forEach(c=>{const{width:h,height:f,selectable:p=!0,hidden:b=!1}=c;if(i&&!p||b)return!1;const{positionAbsolute:g}=mt(c,a),x={x:g.x,y:g.y,width:h||0,height:f||0},m=Gn(d,x),w=typeof h>"u"||typeof f>"u"||h===null||f===null,_=o&&m>0,v=(h||0)*(f||0);(w||_||m>=v||c.dragging)&&u.push(c)}),u},go=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},xo=(e,t,n,r,s,o=.1)=>{const i=t/(e.width*(1+o)),a=n/(e.height*(1+o)),d=Math.min(i,a),u=vt(d,r,s),c=e.x+e.width/2,h=e.y+e.height/2,f=t/2-c*u,p=n/2-h*u;return{x:f,y:p,zoom:u}},qe=(e,t=0)=>e.transition().duration(t);function es(e,t,n,r){return(t[n]||[]).reduce((s,o)=>(`${e.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function Rd(e,t,n,r,s,o){const{x:i,y:a}=Oe(e),u=t.elementsFromPoint(i,a).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const g=pr(void 0,u),x=u.getAttribute("data-handleid"),m=o({nodeId:b,id:x,type:g});if(m){const w=s.find(_=>_.nodeId===b&&_.type===g&&_.id===x);return{handle:{id:x,type:g,nodeId:b,x:w?.x||n.x,y:w?.y||n.y},validHandleResult:m}}}}let c=[],h=1/0;if(s.forEach(b=>{const g=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(g<=r){const x=o(b);g<=h&&(g<h?c=[{handle:b,validHandleResult:x}]:g===h&&c.push({handle:b,validHandleResult:x}),h=g)}}),!c.length)return{handle:null,validHandleResult:yo()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:b})=>b.isValid),p=c.some(({handle:b})=>b.type==="target");return c.find(({handle:b,validHandleResult:g})=>p?b.type==="target":f?g.isValid:!0)||c[0]}const Dd={source:null,target:null,sourceHandle:null,targetHandle:null},yo=()=>({handleDomNode:null,isValid:!1,connection:Dd,endHandle:null});function vo(e,t,n,r,s,o,i){const a=s==="target",d=i.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...yo(),handleDomNode:d};if(d){const c=pr(void 0,d),h=d.getAttribute("data-nodeid"),f=d.getAttribute("data-handleid"),p=d.classList.contains("connectable"),b=d.classList.contains("connectableend"),g={source:a?h:n,sourceHandle:a?f:r,target:a?n:h,targetHandle:a?r:f};u.connection=g,p&&b&&(t===tt.Strict?a&&c==="source"||!a&&c==="target":h!==n||f!==r)&&(u.endHandle={nodeId:h,handleId:f,type:c},u.isValid=o(g))}return u}function Pd({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,o)=>{if(o[re]){const{handleBounds:i}=o[re];let a=[],d=[];i&&(a=es(o,i,"source",`${t}-${n}-${r}`),d=es(o,i,"target",`${t}-${n}-${r}`)),s.push(...a,...d)}return s},[])}function pr(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Cn(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Hd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function bo({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:i,isValidConnection:a,edgeUpdaterType:d,onReconnectEnd:u}){const c=oo(e.target),{connectionMode:h,domNode:f,autoPanOnConnect:p,connectionRadius:b,onConnectStart:g,panBy:x,getNodes:m,cancelConnection:w}=o();let _=0,v;const{x:C,y:A}=Oe(e),R=c?.elementFromPoint(C,A),T=pr(d,R),M=f?.getBoundingClientRect();if(!M||!T)return;let $,L=Oe(e,M),V=!1,P=null,y=!1,j=null;const S=Pd({nodes:m(),nodeId:n,handleId:t,handleType:T}),I=()=>{if(!p)return;const[z,D]=so(L,M);x({x:z,y:D}),_=requestAnimationFrame(I)};i({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:t,type:T},connectionEndHandle:null}),g?.(e,{nodeId:n,handleId:t,handleType:T});function H(z){const{transform:D}=o();L=Oe(z,M);const{handle:O,validHandleResult:F}=Rd(z,c,qn(L,D,!1,[1,1]),b,S,B=>vo(B,h,n,t,s?"target":"source",a,c));if(v=O,V||(I(),V=!0),j=F.handleDomNode,P=F.connection,y=F.isValid,i({connectionPosition:v&&y?po({x:v.x,y:v.y},D):L,connectionStatus:Hd(!!v,y),connectionEndHandle:F.endHandle}),!v&&!y&&!j)return Cn($);P.source!==P.target&&j&&(Cn($),$=j,j.classList.add("connecting","react-flow__handle-connecting"),j.classList.toggle("valid",y),j.classList.toggle("react-flow__handle-valid",y))}function E(z){(v||j)&&P&&y&&r?.(P),o().onConnectEnd?.(z),d&&u?.(z),Cn($),w(),cancelAnimationFrame(_),V=!1,y=!1,P=null,j=null,c.removeEventListener("mousemove",H),c.removeEventListener("mouseup",E),c.removeEventListener("touchmove",H),c.removeEventListener("touchend",E)}c.addEventListener("mousemove",H),c.addEventListener("mouseup",E),c.addEventListener("touchmove",H),c.addEventListener("touchend",E)}const ts=()=>!0,Ld=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Od=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:i}=r;return{connecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n||o?.nodeId===e&&o?.handleId===t&&o?.type===n,clickConnecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n}},wo=N.forwardRef(({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:i,onConnect:a,children:d,className:u,onMouseDown:c,onTouchStart:h,...f},p)=>{const b=i||null,g=e==="target",x=oe(),m=Id(),{connectOnClick:w,noPanClassName:_}=te(Ld,ae),{connecting:v,clickConnecting:C}=te(Od(m,b,e),ae);m||x.getState().onError?.("010",$e.error010());const A=M=>{const{defaultEdgeOptions:$,onConnect:L,hasDefaultEdges:V}=x.getState(),P={...$,...M};if(V){const{edges:y,setEdges:j}=x.getState();j(fo(P,y))}L?.(P),a?.(P)},R=M=>{if(!m)return;const $=ao(M);s&&($&&M.button===0||!$)&&bo({event:M,handleId:b,nodeId:m,onConnect:A,isTarget:g,getState:x.getState,setState:x.setState,isValidConnection:n||x.getState().isValidConnection||ts}),$?c?.(M):h?.(M)},T=M=>{const{onClickConnectStart:$,onClickConnectEnd:L,connectionClickStartHandle:V,connectionMode:P,isValidConnection:y}=x.getState();if(!m||!V&&!s)return;if(!V){$?.(M,{nodeId:m,handleId:b,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:b}});return}const j=oo(M.target),S=n||y||ts,{connection:I,isValid:H}=vo({nodeId:m,id:b,type:e},P,V.nodeId,V.handleId||null,V.type,S,j);H&&A(I),L?.(M),x.setState({connectionClickStartHandle:null})};return k.createElement("div",{"data-handleid":b,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${b}-${e}`,className:le(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!g,target:g,connectable:r,connectablestart:s,connectableend:o,connecting:C,connectionindicator:r&&(s&&!v||o&&v)}]),onMouseDown:R,onTouchStart:R,onClick:w?T:void 0,ref:p,...f},d)});wo.displayName="Handle";var bt=N.memo(wo);const No=({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom})=>k.createElement(k.Fragment,null,k.createElement(bt,{type:"target",position:n,isConnectable:t}),e?.label,k.createElement(bt,{type:"source",position:r,isConnectable:t}));No.displayName="DefaultNode";var Zn=N.memo(No);const _o=({data:e,isConnectable:t,sourcePosition:n=G.Bottom})=>k.createElement(k.Fragment,null,e?.label,k.createElement(bt,{type:"source",position:n,isConnectable:t}));_o.displayName="InputNode";var So=N.memo(_o);const Eo=({data:e,isConnectable:t,targetPosition:n=G.Top})=>k.createElement(k.Fragment,null,k.createElement(bt,{type:"target",position:n,isConnectable:t}),e?.label);Eo.displayName="OutputNode";var jo=N.memo(Eo);const mr=()=>null;mr.displayName="GroupNode";const Vd=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Kt=e=>e.id;function Bd(e,t){return ae(e.selectedNodes.map(Kt),t.selectedNodes.map(Kt))&&ae(e.selectedEdges.map(Kt),t.selectedEdges.map(Kt))}const ko=N.memo(({onSelectionChange:e})=>{const t=oe(),{selectedNodes:n,selectedEdges:r}=te(Vd,Bd);return N.useEffect(()=>{const s={nodes:n,edges:r};e?.(s),t.getState().onSelectionChange.forEach(o=>o(s))},[n,r,e]),null});ko.displayName="SelectionListener";const Fd=e=>!!e.onSelectionChange;function Gd({onSelectionChange:e}){const t=te(Fd);return e||t?k.createElement(ko,{onSelectionChange:e}):null}const Ud=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function ct(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function X(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Yd=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:d,nodesDraggable:u,nodesConnectable:c,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:b,minZoom:g,maxZoom:x,nodeExtent:m,onNodesChange:w,onEdgesChange:_,elementsSelectable:v,connectionMode:C,snapGrid:A,snapToGrid:R,translateExtent:T,connectOnClick:M,defaultEdgeOptions:$,fitView:L,fitViewOptions:V,onNodesDelete:P,onEdgesDelete:y,onNodeDrag:j,onNodeDragStart:S,onNodeDragStop:I,onSelectionDrag:H,onSelectionDragStart:E,onSelectionDragStop:z,noPanClassName:D,nodeOrigin:O,rfId:F,autoPanOnConnect:B,autoPanOnNodeDrag:Y,onError:q,connectionRadius:Z,isValidConnection:W,nodeDragThreshold:ne})=>{const{setNodes:Q,setEdges:ye,setDefaultNodesAndEdges:pe,setMinZoom:ve,setMaxZoom:me,setTranslateExtent:se,setNodeExtent:_e,reset:ee}=te(Ud,ae),U=oe();return N.useEffect(()=>{const he=r?.map(Ve=>({...Ve,...$}));return pe(n,he),()=>{ee()}},[]),X("defaultEdgeOptions",$,U.setState),X("connectionMode",C,U.setState),X("onConnect",s,U.setState),X("onConnectStart",o,U.setState),X("onConnectEnd",i,U.setState),X("onClickConnectStart",a,U.setState),X("onClickConnectEnd",d,U.setState),X("nodesDraggable",u,U.setState),X("nodesConnectable",c,U.setState),X("nodesFocusable",h,U.setState),X("edgesFocusable",f,U.setState),X("edgesUpdatable",p,U.setState),X("elementsSelectable",v,U.setState),X("elevateNodesOnSelect",b,U.setState),X("snapToGrid",R,U.setState),X("snapGrid",A,U.setState),X("onNodesChange",w,U.setState),X("onEdgesChange",_,U.setState),X("connectOnClick",M,U.setState),X("fitViewOnInit",L,U.setState),X("fitViewOnInitOptions",V,U.setState),X("onNodesDelete",P,U.setState),X("onEdgesDelete",y,U.setState),X("onNodeDrag",j,U.setState),X("onNodeDragStart",S,U.setState),X("onNodeDragStop",I,U.setState),X("onSelectionDrag",H,U.setState),X("onSelectionDragStart",E,U.setState),X("onSelectionDragStop",z,U.setState),X("noPanClassName",D,U.setState),X("nodeOrigin",O,U.setState),X("rfId",F,U.setState),X("autoPanOnConnect",B,U.setState),X("autoPanOnNodeDrag",Y,U.setState),X("onError",q,U.setState),X("connectionRadius",Z,U.setState),X("isValidConnection",W,U.setState),X("nodeDragThreshold",ne,U.setState),ct(e,Q),ct(t,ye),ct(g,ve),ct(x,me),ct(T,se),ct(m,_e),null},ns={display:"none"},Xd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Co="react-flow__node-desc",Ao="react-flow__edge-desc",qd="react-flow__aria-live",Zd=e=>e.ariaLiveMessage;function Wd({rfId:e}){const t=te(Zd);return k.createElement("div",{id:`${qd}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Xd},t)}function Kd({rfId:e,disableKeyboardA11y:t}){return k.createElement(k.Fragment,null,k.createElement("div",{id:`${Co}-${e}`,style:ns},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),k.createElement("div",{id:`${Ao}-${e}`,style:ns},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&k.createElement(Wd,{rfId:e}))}var Lt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=N.useState(!1),s=N.useRef(!1),o=N.useRef(new Set([])),[i,a]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.split("+")),c=u.reduce((h,f)=>h.concat(...f),[]);return[u,c]}return[[],[]]},[e]);return N.useEffect(()=>{const d=typeof document<"u"?document:null,u=t?.target||d;if(e!==null){const c=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Un(p))return!1;const g=ss(p.code,a);o.current.add(p[g]),rs(i,o.current,!1)&&(p.preventDefault(),r(!0))},h=p=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Un(p))return!1;const g=ss(p.code,a);rs(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(p[g]),p.key==="Meta"&&o.current.clear(),s.current=!1},f=()=>{o.current.clear(),r(!1)};return u?.addEventListener("keydown",c),u?.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{u?.removeEventListener("keydown",c),u?.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[e,r]),n};function rs(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function ss(e,t){return t.includes(e)?"code":"key"}function Mo(e,t,n,r){const s=e.parentNode||e.parentId;if(!s)return n;const o=t.get(s),i=mt(o,r);return Mo(o,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(o[re]?.z??0)>(n.z??0)?o[re]?.z??0:n.z??0},r)}function Io(e,t,n){e.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:i,z:a}=Mo(r,e,{...r.position,z:r[re]?.z??0},t);r.positionAbsolute={x:o,y:i},r[re].z=a,n?.[r.id]&&(r[re].isParent=!0)}})}function An(e,t,n,r){const s=new Map,o={},i=r?1e3:0;return e.forEach(a=>{const d=(xe(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),c={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(o[h]=!0);const f=u?.type&&u?.type!==a.type;Object.defineProperty(c,re,{enumerable:!1,value:{handleBounds:f?void 0:u?.[re]?.handleBounds,z:d}}),s.set(a.id,c)}),Io(s,n,o),s}function To(e,t={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:i,d3Zoom:a,d3Selection:d,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:h}=e(),f=t.initial&&!u&&c;if(a&&d&&(f||!t.initial)){const b=n().filter(x=>{const m=t.includeHiddenNodes?x.width&&x.height:!x.hidden;return t.nodes?.length?m&&t.nodes.some(w=>w.id===x.id):m}),g=b.every(x=>x.width&&x.height);if(b.length>0&&g){const x=fr(b,h),{x:m,y:w,zoom:_}=xo(x,r,s,t.minZoom??o,t.maxZoom??i,t.padding??.1),v=Le.translate(m,w).scale(_);return typeof t.duration=="number"&&t.duration>0?a.transform(qe(d,t.duration),v):a.transform(d,v),!0}}return!1}function Jd(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[re]:r[re],selected:n.selected})}),new Map(t)}function Qd(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Jt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:d,hasDefaultEdges:u}=n();e?.length&&(d&&r({nodeInternals:Jd(e,s)}),i?.(e)),t?.length&&(u&&r({edges:Qd(t,o)}),a?.(t))}const lt=()=>{},eh={zoomIn:lt,zoomOut:lt,zoomTo:lt,getZoom:()=>1,setViewport:lt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:lt,fitBounds:lt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},th=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),nh=()=>{const e=oe(),{d3Zoom:t,d3Selection:n}=te(th,ae);return N.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(qe(n,s?.duration),1.2),zoomOut:s=>t.scaleBy(qe(n,s?.duration),1/1.2),zoomTo:(s,o)=>t.scaleTo(qe(n,o?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,o)=>{const[i,a,d]=e.getState().transform,u=Le.translate(s.x??i,s.y??a).scale(s.zoom??d);t.transform(qe(n,o?.duration),u)},getViewport:()=>{const[s,o,i]=e.getState().transform;return{x:s,y:o,zoom:i}},fitView:s=>To(e.getState,s),setCenter:(s,o,i)=>{const{width:a,height:d,maxZoom:u}=e.getState(),c=typeof i?.zoom<"u"?i.zoom:u,h=a/2-s*c,f=d/2-o*c,p=Le.translate(h,f).scale(c);t.transform(qe(n,i?.duration),p)},fitBounds:(s,o)=>{const{width:i,height:a,minZoom:d,maxZoom:u}=e.getState(),{x:c,y:h,zoom:f}=xo(s,i,a,d,u,o?.padding??.1),p=Le.translate(c,h).scale(f);t.transform(qe(n,o?.duration),p)},project:s=>{const{transform:o,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),qn(s,o,i,a)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:i,snapGrid:a,domNode:d}=e.getState();if(!d)return s;const{x:u,y:c}=d.getBoundingClientRect(),h={x:s.x-u,y:s.y-c};return qn(h,o,i,a)},flowToScreenPosition:s=>{const{transform:o,domNode:i}=e.getState();if(!i)return s;const{x:a,y:d}=i.getBoundingClientRect(),u=po(s,o);return{x:u.x+a,y:u.y+d}},viewportInitialized:!0}:eh,[t,n])};function gr(){const e=nh(),t=oe(),n=N.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=N.useCallback(g=>t.getState().nodeInternals.get(g),[]),s=N.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(x=>({...x}))},[]),o=N.useCallback(g=>{const{edges:x=[]}=t.getState();return x.find(m=>m.id===g)},[]),i=N.useCallback(g=>{const{getNodes:x,setNodes:m,hasDefaultNodes:w,onNodesChange:_}=t.getState(),v=x(),C=typeof g=="function"?g(v):g;if(w)m(C);else if(_){const A=C.length===0?v.map(R=>({type:"remove",id:R.id})):C.map(R=>({item:R,type:"reset"}));_(A)}},[]),a=N.useCallback(g=>{const{edges:x=[],setEdges:m,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),v=typeof g=="function"?g(x):g;if(w)m(v);else if(_){const C=v.length===0?x.map(A=>({type:"remove",id:A.id})):v.map(A=>({item:A,type:"reset"}));_(C)}},[]),d=N.useCallback(g=>{const x=Array.isArray(g)?g:[g],{getNodes:m,setNodes:w,hasDefaultNodes:_,onNodesChange:v}=t.getState();if(_){const A=[...m(),...x];w(A)}else if(v){const C=x.map(A=>({item:A,type:"add"}));v(C)}},[]),u=N.useCallback(g=>{const x=Array.isArray(g)?g:[g],{edges:m=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:v}=t.getState();if(_)w([...m,...x]);else if(v){const C=x.map(A=>({item:A,type:"add"}));v(C)}},[]),c=N.useCallback(()=>{const{getNodes:g,edges:x=[],transform:m}=t.getState(),[w,_,v]=m;return{nodes:g().map(C=>({...C})),edges:x.map(C=>({...C})),viewport:{x:w,y:_,zoom:v}}},[]),h=N.useCallback(({nodes:g,edges:x})=>{const{nodeInternals:m,getNodes:w,edges:_,hasDefaultNodes:v,hasDefaultEdges:C,onNodesDelete:A,onEdgesDelete:R,onNodesChange:T,onEdgesChange:M}=t.getState(),$=(g||[]).map(j=>j.id),L=(x||[]).map(j=>j.id),V=w().reduce((j,S)=>{const I=S.parentNode||S.parentId,H=!$.includes(S.id)&&I&&j.find(z=>z.id===I);return(typeof S.deletable=="boolean"?S.deletable:!0)&&($.includes(S.id)||H)&&j.push(S),j},[]),P=_.filter(j=>typeof j.deletable=="boolean"?j.deletable:!0),y=P.filter(j=>L.includes(j.id));if(V||y){const j=go(V,P),S=[...y,...j],I=S.reduce((H,E)=>(H.includes(E.id)||H.push(E.id),H),[]);if((C||v)&&(C&&t.setState({edges:_.filter(H=>!I.includes(H.id))}),v&&(V.forEach(H=>{m.delete(H.id)}),t.setState({nodeInternals:new Map(m)}))),I.length>0&&(R?.(S),M&&M(I.map(H=>({id:H,type:"remove"})))),V.length>0&&(A?.(V),T)){const H=V.map(E=>({id:E.id,type:"remove"}));T(H)}}},[]),f=N.useCallback(g=>{const x=_d(g),m=x?null:t.getState().nodeInternals.get(g.id);return!x&&!m?[null,null,x]:[x?g:Zr(m),m,x]},[]),p=N.useCallback((g,x=!0,m)=>{const[w,_,v]=f(g);return w?(m||t.getState().getNodes()).filter(C=>{if(!v&&(C.id===_.id||!C.positionAbsolute))return!1;const A=Zr(C),R=Gn(A,w);return x&&R>0||R>=w.width*w.height}):[]},[]),b=N.useCallback((g,x,m=!0)=>{const[w]=f(g);if(!w)return!1;const _=Gn(w,x);return m&&_>0||_>=w.width*w.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:i,setEdges:a,addNodes:d,addEdges:u,toObject:c,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:b}),[e,n,r,s,o,i,a,d,u,c,h,p,b])}const rh={actInsideInputWithModifier:!1};var sh=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=oe(),{deleteElements:r}=gr(),s=Lt(e,rh),o=Lt(t);N.useEffect(()=>{if(s){const{edges:i,getNodes:a}=n.getState(),d=a().filter(c=>c.selected),u=i.filter(c=>c.selected);r({nodes:d,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),N.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function oh(e){const t=oe();N.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const s=ir(e.current);(s.height===0||s.width===0)&&t.getState().onError?.("004",$e.error004()),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const xr={position:"absolute",width:"100%",height:"100%",top:0,left:0},ih=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Qt=e=>({x:e.x,y:e.y,zoom:e.k}),ut=(e,t)=>e.target.closest(`.${t}`),os=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),is=e=>{const t=e.ctrlKey&&hn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},ah=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ch=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:d=We.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:h=!0,defaultViewport:f,translateExtent:p,minZoom:b,maxZoom:g,zoomActivationKeyCode:x,preventScrolling:m=!0,children:w,noWheelClassName:_,noPanClassName:v})=>{const C=N.useRef(),A=oe(),R=N.useRef(!1),T=N.useRef(!1),M=N.useRef(null),$=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:V,d3ZoomHandler:P,userSelectionActive:y}=te(ah,ae),j=Lt(x),S=N.useRef(0),I=N.useRef(!1),H=N.useRef();return oh(M),N.useEffect(()=>{if(M.current){const E=M.current.getBoundingClientRect(),z=md().scaleExtent([b,g]).translateExtent(p),D=ge(M.current).call(z),O=Le.translate(f.x,f.y).scale(vt(f.zoom,b,g)),F=[[0,0],[E.width,E.height]],B=z.constrain()(O,F,p);z.transform(D,B),z.wheelDelta(is),A.setState({d3Zoom:z,d3Selection:D,d3ZoomHandler:D.on("wheel.zoom"),transform:[B.x,B.y,B.k],domNode:M.current.closest(".react-flow")})}},[]),N.useEffect(()=>{V&&L&&(i&&!j&&!y?V.on("wheel.zoom",E=>{if(ut(E,_))return!1;E.preventDefault(),E.stopImmediatePropagation();const z=V.property("__zoom").k||1;if(E.ctrlKey&&o){const W=je(E),ne=is(E),Q=z*Math.pow(2,ne);L.scaleTo(V,Q,W,E);return}const D=E.deltaMode===1?20:1;let O=d===We.Vertical?0:E.deltaX*D,F=d===We.Horizontal?0:E.deltaY*D;!hn()&&E.shiftKey&&d!==We.Vertical&&(O=E.deltaY*D,F=0),L.translateBy(V,-(O/z)*a,-(F/z)*a,{internal:!0});const B=Qt(V.property("__zoom")),{onViewportChangeStart:Y,onViewportChange:q,onViewportChangeEnd:Z}=A.getState();clearTimeout(H.current),I.current||(I.current=!0,t?.(E,B),Y?.(B)),I.current&&(e?.(E,B),q?.(B),H.current=setTimeout(()=>{n?.(E,B),Z?.(B),I.current=!1},150))},{passive:!1}):typeof P<"u"&&V.on("wheel.zoom",function(E,z){if(!m&&E.type==="wheel"&&!E.ctrlKey||ut(E,_))return null;E.preventDefault(),P.call(this,E,z)},{passive:!1}))},[y,i,d,V,L,P,j,o,m,_,t,e,n]),N.useEffect(()=>{L&&L.on("start",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;S.current=E.sourceEvent?.button;const{onViewportChangeStart:z}=A.getState(),D=Qt(E.transform);R.current=!0,$.current=D,E.sourceEvent?.type==="mousedown"&&A.setState({paneDragging:!0}),z?.(D),t?.(E.sourceEvent,D)})},[L,t]),N.useEffect(()=>{L&&(y&&!R.current?L.on("zoom",null):y||L.on("zoom",E=>{const{onViewportChange:z}=A.getState();if(A.setState({transform:[E.transform.x,E.transform.y,E.transform.k]}),T.current=!!(r&&os(h,S.current??0)),(e||z)&&!E.sourceEvent?.internal){const D=Qt(E.transform);z?.(D),e?.(E.sourceEvent,D)}}))},[y,L,e,h,r]),N.useEffect(()=>{L&&L.on("end",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=A.getState();if(R.current=!1,A.setState({paneDragging:!1}),r&&os(h,S.current??0)&&!T.current&&r(E.sourceEvent),T.current=!1,(n||z)&&ih($.current,E.transform)){const D=Qt(E.transform);$.current=D,clearTimeout(C.current),C.current=setTimeout(()=>{z?.(D),n?.(E.sourceEvent,D)},i?150:0)}})},[L,i,h,n,r]),N.useEffect(()=>{L&&L.filter(E=>{const z=j||s,D=o&&E.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&E.button===1&&E.type==="mousedown"&&(ut(E,"react-flow__node")||ut(E,"react-flow__edge")))return!0;if(!h&&!z&&!i&&!u&&!o||y||!u&&E.type==="dblclick"||ut(E,_)&&E.type==="wheel"||ut(E,v)&&(E.type!=="wheel"||i&&E.type==="wheel"&&!j)||!o&&E.ctrlKey&&E.type==="wheel"||!z&&!i&&!D&&E.type==="wheel"||!h&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(h)&&!h.includes(E.button)&&E.type==="mousedown")return!1;const O=Array.isArray(h)&&h.includes(E.button)||!E.button||E.button<=1;return(!E.ctrlKey||E.type==="wheel")&&O})},[y,L,s,o,i,u,h,c,j]),k.createElement("div",{className:"react-flow__renderer",ref:M,style:xr},w)},lh=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function uh(){const{userSelectionActive:e,userSelectionRect:t}=te(lh,ae);return e&&t?k.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function as(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,o=t.position.y+t.height-r.height;if(s>0||o>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function $o(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const o=e.filter(a=>a.id===s.id);if(o.length===0)return r.push(s),r;const i={...s};for(const a of o)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&as(r,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&as(r,i);break}case"remove":return r}return r.push(i),r},n)}function zo(e,t){return $o(e,t)}function dh(e,t){return $o(e,t)}const De=(e,t)=>({id:e,type:"select",selected:t});function ht(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(De(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(De(r.id,!1))),n},[])}const Mn=(e,t)=>n=>{n.target===t.current&&e?.(n)},hh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ro=N.memo(({isSelecting:e,selectionMode:t=Ht.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:c,children:h})=>{const f=N.useRef(null),p=oe(),b=N.useRef(0),g=N.useRef(0),x=N.useRef(),{userSelectionActive:m,elementsSelectable:w,dragging:_}=te(hh,ae),v=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,g.current=0},C=P=>{o?.(P),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},A=P=>{if(Array.isArray(n)&&n?.includes(2)){P.preventDefault();return}i?.(P)},R=a?P=>a(P):void 0,T=P=>{const{resetSelectedElements:y,domNode:j}=p.getState();if(x.current=j?.getBoundingClientRect(),!w||!e||P.button!==0||P.target!==f.current||!x.current)return;const{x:S,y:I}=Oe(P,x.current);y(),p.setState({userSelectionRect:{width:0,height:0,startX:S,startY:I,x:S,y:I}}),r?.(P)},M=P=>{const{userSelectionRect:y,nodeInternals:j,edges:S,transform:I,onNodesChange:H,onEdgesChange:E,nodeOrigin:z,getNodes:D}=p.getState();if(!e||!x.current||!y)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=Oe(P,x.current),F=y.startX??0,B=y.startY??0,Y={...y,x:O.x<F?O.x:F,y:O.y<B?O.y:B,width:Math.abs(O.x-F),height:Math.abs(O.y-B)},q=D(),Z=mo(j,Y,I,t===Ht.Partial,!0,z),W=go(Z,S).map(Q=>Q.id),ne=Z.map(Q=>Q.id);if(b.current!==ne.length){b.current=ne.length;const Q=ht(q,ne);Q.length&&H?.(Q)}if(g.current!==W.length){g.current=W.length;const Q=ht(S,W);Q.length&&E?.(Q)}p.setState({userSelectionRect:Y})},$=P=>{if(P.button!==0)return;const{userSelectionRect:y}=p.getState();!m&&y&&P.target===f.current&&C?.(P),p.setState({nodesSelectionActive:b.current>0}),v(),s?.(P)},L=P=>{m&&(p.setState({nodesSelectionActive:b.current>0}),s?.(P)),v()},V=w&&(e||m);return k.createElement("div",{className:le(["react-flow__pane",{dragging:_,selection:e}]),onClick:V?void 0:Mn(C,f),onContextMenu:Mn(A,f),onWheel:Mn(R,f),onMouseEnter:V?void 0:d,onMouseDown:V?T:void 0,onMouseMove:V?M:u,onMouseUp:V?$:void 0,onMouseLeave:V?L:c,ref:f,style:xr},h,k.createElement(uh,null))});Ro.displayName="Pane";function Do(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Do(r,t):!1}function cs(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function fh(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!Do(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function ph(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Po(e,t,n,r,s=[0,0],o){const i=ph(e,e.extent||r);let a=i;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const h=n.get(d),{x:f,y:p}=mt(h,s).positionAbsolute;a=h&&xe(f)&&xe(p)&&xe(h.width)&&xe(h.height)?[[f+e.width*s[0],p+e.height*s[1]],[f+h.width-e.width+e.width*s[0],p+h.height-e.height+e.height*s[1]]]:a}else o?.("005",$e.error005()),a=i;else if(e.extent&&d&&e.extent!=="parent"){const h=n.get(d),{x:f,y:p}=mt(h,s).positionAbsolute;a=[[e.extent[0][0]+f,e.extent[0][1]+p],[e.extent[1][0]+f,e.extent[1][1]+p]]}let u={x:0,y:0};if(d){const h=n.get(d);u=mt(h,s).positionAbsolute}const c=a&&a!=="parent"?ar(t,a):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function In({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const ls=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const o=Array.from(s),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return o.map(d=>{const u=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...ir(d)}})};function Ct(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function Wn({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:i,nodeInternals:a,onError:d}=t.getState(),u=a.get(e);if(!u){d?.("012",$e.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([e])}function mh(){const e=oe();return N.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,d={x:(i-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:o?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function Tn(e){return(t,n,r)=>e?.(t,r)}function Ho({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:i}){const a=oe(),[d,u]=N.useState(!1),c=N.useRef([]),h=N.useRef({x:null,y:null}),f=N.useRef(0),p=N.useRef(null),b=N.useRef({x:0,y:0}),g=N.useRef(null),x=N.useRef(!1),m=N.useRef(!1),w=N.useRef(!1),_=mh();return N.useEffect(()=>{if(e?.current){const v=ge(e.current),C=({x:T,y:M})=>{const{nodeInternals:$,onNodeDrag:L,onSelectionDrag:V,updateNodePositions:P,nodeExtent:y,snapGrid:j,snapToGrid:S,nodeOrigin:I,onError:H}=a.getState();h.current={x:T,y:M};let E=!1,z={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&y){const O=fr(c.current,I);z=cr(O)}if(c.current=c.current.map(O=>{const F={x:T-O.distance.x,y:M-O.distance.y};S&&(F.x=j[0]*Math.round(F.x/j[0]),F.y=j[1]*Math.round(F.y/j[1]));const B=[[y[0][0],y[0][1]],[y[1][0],y[1][1]]];c.current.length>1&&y&&!O.extent&&(B[0][0]=O.positionAbsolute.x-z.x+y[0][0],B[1][0]=O.positionAbsolute.x+(O.width??0)-z.x2+y[1][0],B[0][1]=O.positionAbsolute.y-z.y+y[0][1],B[1][1]=O.positionAbsolute.y+(O.height??0)-z.y2+y[1][1]);const Y=Po(O,F,$,B,I,H);return E=E||O.position.x!==Y.position.x||O.position.y!==Y.position.y,O.position=Y.position,O.positionAbsolute=Y.positionAbsolute,O}),!E)return;P(c.current,!0,!0),u(!0);const D=s?L:Tn(V);if(D&&g.current){const[O,F]=In({nodeId:s,dragItems:c.current,nodeInternals:$});D(g.current,O,F)}},A=()=>{if(!p.current)return;const[T,M]=so(b.current,p.current);if(T!==0||M!==0){const{transform:$,panBy:L}=a.getState();h.current.x=(h.current.x??0)-T/$[2],h.current.y=(h.current.y??0)-M/$[2],L({x:T,y:M})&&C(h.current)}f.current=requestAnimationFrame(A)},R=T=>{const{nodeInternals:M,multiSelectionActive:$,nodesDraggable:L,unselectNodesAndEdges:V,onNodeDragStart:P,onSelectionDragStart:y}=a.getState();m.current=!0;const j=s?P:Tn(y);(!i||!o)&&!$&&s&&(M.get(s)?.selected||V()),s&&o&&i&&Wn({id:s,store:a,nodeRef:e});const S=_(T);if(h.current=S,c.current=fh(M,L,S,s),j&&c.current){const[I,H]=In({nodeId:s,dragItems:c.current,nodeInternals:M});j(T.sourceEvent,I,H)}};if(t)v.on(".drag",null);else{const T=Fs().on("start",M=>{const{domNode:$,nodeDragThreshold:L}=a.getState();L===0&&R(M),w.current=!1;const V=_(M);h.current=V,p.current=$?.getBoundingClientRect()||null,b.current=Oe(M.sourceEvent,p.current)}).on("drag",M=>{const $=_(M),{autoPanOnNodeDrag:L,nodeDragThreshold:V}=a.getState();if(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!x.current&&m.current&&L&&(x.current=!0,A()),!m.current){const P=$.xSnapped-(h?.current?.x??0),y=$.ySnapped-(h?.current?.y??0);Math.sqrt(P*P+y*y)>V&&R(M)}(h.current.x!==$.xSnapped||h.current.y!==$.ySnapped)&&c.current&&m.current&&(g.current=M.sourceEvent,b.current=Oe(M.sourceEvent,p.current),C($))}}).on("end",M=>{if(!(!m.current||w.current)&&(u(!1),x.current=!1,m.current=!1,cancelAnimationFrame(f.current),c.current)){const{updateNodePositions:$,nodeInternals:L,onNodeDragStop:V,onSelectionDragStop:P}=a.getState(),y=s?V:Tn(P);if($(c.current,!1,!1),y){const[j,S]=In({nodeId:s,dragItems:c.current,nodeInternals:L});y(M.sourceEvent,j,S)}}}).filter(M=>{const $=M.target;return!M.button&&(!n||!cs($,`.${n}`,e))&&(!r||cs($,r,e))});return v.call(T),()=>{v.on(".drag",null)}}}},[e,t,n,r,o,a,s,i,_]),d}function Lo(){const e=oe();return N.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:i,snapToGrid:a,snapGrid:d,onError:u,nodesDraggable:c}=e.getState(),h=i().filter(w=>w.selected&&(w.draggable||c&&typeof w.draggable>"u")),f=a?d[0]:5,p=a?d[1]:5,b=n.isShiftPressed?4:1,g=n.x*f*b,x=n.y*p*b,m=h.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+g,y:w.positionAbsolute.y+x};a&&(_.x=d[0]*Math.round(_.x/d[0]),_.y=d[1]*Math.round(_.y/d[1]));const{positionAbsolute:v,position:C}=Po(w,_,r,s,void 0,u);w.position=C,w.positionAbsolute=v}return w});o(m,!0,!1)},[])}const gt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var At=e=>{const t=({id:n,type:r,data:s,xPos:o,yPos:i,xPosOrigin:a,yPosOrigin:d,selected:u,onClick:c,onMouseEnter:h,onMouseMove:f,onMouseLeave:p,onContextMenu:b,onDoubleClick:g,style:x,className:m,isDraggable:w,isSelectable:_,isConnectable:v,isFocusable:C,selectNodesOnDrag:A,sourcePosition:R,targetPosition:T,hidden:M,resizeObserver:$,dragHandle:L,zIndex:V,isParent:P,noDragClassName:y,noPanClassName:j,initialized:S,disableKeyboardA11y:I,ariaLabel:H,rfId:E,hasHandleBounds:z})=>{const D=oe(),O=N.useRef(null),F=N.useRef(null),B=N.useRef(R),Y=N.useRef(T),q=N.useRef(r),Z=_||w||c||h||f||p,W=Lo(),ne=Ct(n,D.getState,h),Q=Ct(n,D.getState,f),ye=Ct(n,D.getState,p),pe=Ct(n,D.getState,b),ve=Ct(n,D.getState,g),me=ee=>{const{nodeDragThreshold:U}=D.getState();if(_&&(!A||!w||U>0)&&Wn({id:n,store:D,nodeRef:O}),c){const he=D.getState().nodeInternals.get(n);he&&c(ee,{...he})}},se=ee=>{if(!Un(ee)&&!I)if(io.includes(ee.key)&&_){const U=ee.key==="Escape";Wn({id:n,store:D,unselect:U,nodeRef:O})}else w&&u&&Object.prototype.hasOwnProperty.call(gt,ee.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~i}`}),W({x:gt[ee.key].x,y:gt[ee.key].y,isShiftPressed:ee.shiftKey}))};N.useEffect(()=>()=>{F.current&&($?.unobserve(F.current),F.current=null)},[]),N.useEffect(()=>{if(O.current&&!M){const ee=O.current;(!S||!z||F.current!==ee)&&(F.current&&$?.unobserve(F.current),$?.observe(ee),F.current=ee)}},[M,S,z]),N.useEffect(()=>{const ee=q.current!==r,U=B.current!==R,he=Y.current!==T;O.current&&(ee||U||he)&&(ee&&(q.current=r),U&&(B.current=R),he&&(Y.current=T),D.getState().updateNodeDimensions([{id:n,nodeElement:O.current,forceUpdate:!0}]))},[n,r,R,T]);const _e=Ho({nodeRef:O,disabled:M||!w,noDragClassName:y,handleSelector:L,nodeId:n,isSelectable:_,selectNodesOnDrag:A});return M?null:k.createElement("div",{className:le(["react-flow__node",`react-flow__node-${r}`,{[j]:w},m,{selected:u,selectable:_,parent:P,dragging:_e}]),ref:O,style:{zIndex:V,transform:`translate(${a}px,${d}px)`,pointerEvents:Z?"all":"none",visibility:S?"visible":"hidden",...x},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ne,onMouseMove:Q,onMouseLeave:ye,onContextMenu:pe,onClick:me,onDoubleClick:ve,onKeyDown:C?se:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":I?void 0:`${Co}-${E}`,"aria-label":H},k.createElement(Md,{value:n},k.createElement(e,{id:n,data:s,type:r,xPos:o,yPos:i,selected:u,isConnectable:v,sourcePosition:R,targetPosition:T,dragging:_e,dragHandle:L,zIndex:V})))};return t.displayName="NodeWrapper",N.memo(t)};const gh=e=>{const t=e.getNodes().filter(n=>n.selected);return{...fr(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function xh({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=oe(),{width:s,height:o,x:i,y:a,transformString:d,userSelectionActive:u}=te(gh,ae),c=Lo(),h=N.useRef(null);if(N.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),Ho({nodeRef:h}),u||!s||!o)return null;const f=e?b=>{const g=r.getState().getNodes().filter(x=>x.selected);e(b,g)}:void 0,p=b=>{Object.prototype.hasOwnProperty.call(gt,b.key)&&c({x:gt[b.key].x,y:gt[b.key].y,isShiftPressed:b.shiftKey})};return k.createElement("div",{className:le(["react-flow__nodesselection","react-flow__container",t]),style:{transform:d}},k.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:s,height:o,top:a,left:i}}))}var yh=N.memo(xh);const vh=e=>e.nodesSelectionActive,Oo=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,deleteKeyCode:a,onMove:d,onMoveStart:u,onMoveEnd:c,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:b,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:m,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:v,zoomOnPinch:C,panOnScroll:A,panOnScrollSpeed:R,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:$,defaultViewport:L,translateExtent:V,minZoom:P,maxZoom:y,preventScrolling:j,onSelectionContextMenu:S,noWheelClassName:I,noPanClassName:H,disableKeyboardA11y:E})=>{const z=te(vh),D=Lt(h),O=Lt(m),F=O||$,B=O||A,Y=D||f&&F!==!0;return sh({deleteKeyCode:a,multiSelectionKeyCode:x}),k.createElement(ch,{onMove:d,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:o,elementsSelectable:_,zoomOnScroll:v,zoomOnPinch:C,panOnScroll:B,panOnScrollSpeed:R,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:!D&&F,defaultViewport:L,translateExtent:V,minZoom:P,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:j,noWheelClassName:I,noPanClassName:H},k.createElement(Ro,{onSelectionStart:b,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:F,isSelecting:!!Y,selectionMode:p},e,z&&k.createElement(yh,{onSelectionContextMenu:S,noPanClassName:H,disableKeyboardA11y:E})))};Oo.displayName="FlowRenderer";var bh=N.memo(Oo);function wh(e){return te(N.useCallback(n=>e?mo(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Nh(e){const t={input:At(e.input||So),default:At(e.default||Zn),output:At(e.output||jo),group:At(e.group||mr)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=At(e[o]||Zn),s),n);return{...t,...r}}const _h=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},Sh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Vo=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:i}=te(Sh,ae),a=wh(e.onlyRenderVisibleElements),d=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(h=>{const f=h.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));o(f)});return d.current=c,c},[]);return N.useEffect(()=>()=>{d?.current?.disconnect()},[]),k.createElement("div",{className:"react-flow__nodes",style:xr},a.map(c=>{let h=c.type||"default";e.nodeTypes[h]||(i?.("003",$e.error003(h)),h="default");const f=e.nodeTypes[h]||e.nodeTypes.default,p=!!(c.draggable||t&&typeof c.draggable>"u"),b=!!(c.selectable||s&&typeof c.selectable>"u"),g=!!(c.connectable||n&&typeof c.connectable>"u"),x=!!(c.focusable||r&&typeof c.focusable>"u"),m=e.nodeExtent?ar(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,w=m?.x??0,_=m?.y??0,v=_h({x:w,y:_,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return k.createElement(f,{key:c.id,id:c.id,className:c.className,style:c.style,type:h,data:c.data,sourcePosition:c.sourcePosition||G.Bottom,targetPosition:c.targetPosition||G.Top,hidden:c.hidden,xPos:w,yPos:_,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:p,isSelectable:b,isConnectable:g,isFocusable:x,resizeObserver:u,dragHandle:c.dragHandle,zIndex:c[re]?.z??0,isParent:!!c[re]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!c[re]?.handleBounds})}))};Vo.displayName="NodeRenderer";var Eh=N.memo(Vo);const jh=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,kh=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,us="react-flow__edgeupdater",ds=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:i,type:a})=>k.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:i,className:le([us,`${us}-${a}`]),cx:jh(t,r,e),cy:kh(n,r,e),r,stroke:"transparent",fill:"transparent"}),Ch=()=>!0;var dt=e=>{const t=({id:n,className:r,type:s,data:o,onClick:i,onEdgeDoubleClick:a,selected:d,animated:u,label:c,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:b,labelBgBorderRadius:g,style:x,source:m,target:w,sourceX:_,sourceY:v,targetX:C,targetY:A,sourcePosition:R,targetPosition:T,elementsSelectable:M,hidden:$,sourceHandleId:L,targetHandleId:V,onContextMenu:P,onMouseEnter:y,onMouseMove:j,onMouseLeave:S,reconnectRadius:I,onReconnect:H,onReconnectStart:E,onReconnectEnd:z,markerEnd:D,markerStart:O,rfId:F,ariaLabel:B,isFocusable:Y,isReconnectable:q,pathOptions:Z,interactionWidth:W,disableKeyboardA11y:ne})=>{const Q=N.useRef(null),[ye,pe]=N.useState(!1),[ve,me]=N.useState(!1),se=oe(),_e=N.useMemo(()=>`url('#${Xn(O,F)}')`,[O,F]),ee=N.useMemo(()=>`url('#${Xn(D,F)}')`,[D,F]);if($)return null;const U=ie=>{const{edges:Se,addSelectedEdges:Ge,unselectNodesAndEdges:Ue,multiSelectionActive:at}=se.getState(),Ee=Se.find(Ye=>Ye.id===n);Ee&&(M&&(se.setState({nodesSelectionActive:!1}),Ee.selected&&at?(Ue({nodes:[],edges:[Ee]}),Q.current?.blur()):Ge([n])),i&&i(ie,Ee))},he=kt(n,se.getState,a),Ve=kt(n,se.getState,P),Nt=kt(n,se.getState,y),nt=kt(n,se.getState,j),rt=kt(n,se.getState,S),Ae=(ie,Se)=>{if(ie.button!==0)return;const{edges:Ge,isValidConnection:Ue}=se.getState(),at=Se?w:m,Ee=(Se?V:L)||null,Ye=Se?"target":"source",bn=Ue||Ch,wn=Se,St=Ge.find(Xe=>Xe.id===n);me(!0),E?.(ie,St,Ye);const Nn=Xe=>{me(!1),z?.(Xe,St,Ye)};bo({event:ie,handleId:Ee,nodeId:at,onConnect:Xe=>H?.(St,Xe),isTarget:wn,getState:se.getState,setState:se.setState,isValidConnection:bn,edgeUpdaterType:Ye,onReconnectEnd:Nn})},st=ie=>Ae(ie,!0),Be=ie=>Ae(ie,!1),Fe=()=>pe(!0),ot=()=>pe(!1),it=!M&&!i,_t=ie=>{if(!ne&&io.includes(ie.key)&&M){const{unselectNodesAndEdges:Se,addSelectedEdges:Ge,edges:Ue}=se.getState();ie.key==="Escape"?(Q.current?.blur(),Se({edges:[Ue.find(Ee=>Ee.id===n)]})):Ge([n])}};return k.createElement("g",{className:le(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:u,inactive:it,updating:ye}]),onClick:U,onDoubleClick:he,onContextMenu:Ve,onMouseEnter:Nt,onMouseMove:nt,onMouseLeave:rt,onKeyDown:Y?_t:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":B===null?void 0:B||`Edge from ${m} to ${w}`,"aria-describedby":Y?`${Ao}-${F}`:void 0,ref:Q},!ve&&k.createElement(e,{id:n,source:m,target:w,selected:d,animated:u,label:c,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:b,labelBgBorderRadius:g,data:o,style:x,sourceX:_,sourceY:v,targetX:C,targetY:A,sourcePosition:R,targetPosition:T,sourceHandleId:L,targetHandleId:V,markerStart:_e,markerEnd:ee,pathOptions:Z,interactionWidth:W}),q&&k.createElement(k.Fragment,null,(q==="source"||q===!0)&&k.createElement(ds,{position:R,centerX:_,centerY:v,radius:I,onMouseDown:st,onMouseEnter:Fe,onMouseOut:ot,type:"source"}),(q==="target"||q===!0)&&k.createElement(ds,{position:T,centerX:C,centerY:A,radius:I,onMouseDown:Be,onMouseEnter:Fe,onMouseOut:ot,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function Ah(e){const t={default:dt(e.default||pn),straight:dt(e.bezier||dr),step:dt(e.step||ur),smoothstep:dt(e.step||vn),simplebezier:dt(e.simplebezier||lr)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=dt(e[o]||pn),s),n);return{...t,...r}}function hs(e,t,n=null){const r=(n?.x||0)+t.x,s=(n?.y||0)+t.y,o=n?.width||t.width,i=n?.height||t.height;switch(e){case G.Top:return{x:r+o/2,y:s};case G.Right:return{x:r+o,y:s+i/2};case G.Bottom:return{x:r+o/2,y:s+i};case G.Left:return{x:r,y:s+i/2}}}function fs(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Mh=(e,t,n,r,s,o)=>{const i=hs(n,e,t),a=hs(o,r,s);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function Ih({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:i,height:a,transform:d}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=cr({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:i/d[2],height:a/d[2]}),h=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(h*f)>0}function ps(e){const t=e?.[re]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const Th=[{level:0,isMaxLevel:!0,edges:[]}];function $h(e,t,n=!1){let r=-1;const s=e.reduce((i,a)=>{const d=xe(a.zIndex);let u=d?a.zIndex:0;if(n){const c=t.get(a.target),h=t.get(a.source),f=a.selected||c?.selected||h?.selected,p=Math.max(h?.[re]?.z||0,c?.[re]?.z||0,1e3);u=(d?a.zIndex:0)+(f?p:0)}return i[u]?i[u].push(a):i[u]=[a],r=u>r?u:r,i},{}),o=Object.entries(s).map(([i,a])=>{const d=+i;return{edges:a,level:d,isMaxLevel:d===r}});return o.length===0?Th:o}function zh(e,t,n){const r=te(N.useCallback(s=>e?s.edges.filter(o=>{const i=t.get(o.source),a=t.get(o.target);return i?.width&&i?.height&&a?.width&&a?.height&&Ih({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return $h(r,t,n)}const Rh=({color:e="none",strokeWidth:t=1})=>k.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Dh=({color:e="none",strokeWidth:t=1})=>k.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ms={[fn.Arrow]:Rh,[fn.ArrowClosed]:Dh};function Ph(e){const t=oe();return N.useMemo(()=>Object.prototype.hasOwnProperty.call(ms,e)?ms[e]:(t.getState().onError?.("009",$e.error009(e)),null),[e])}const Hh=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const d=Ph(t);return d?k.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},k.createElement(d,{color:n,strokeWidth:i})):null},Lh=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=Xn(i,t);r.includes(a)||(s.push({id:a,color:i.color||e,...i}),r.push(a))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},Bo=({defaultColor:e,rfId:t})=>{const n=te(N.useCallback(Lh({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((o,i)=>o.id!==s[i].id)));return k.createElement("defs",null,n.map(r=>k.createElement(Hh,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Bo.displayName="MarkerDefinitions";var Oh=N.memo(Bo);const Vh=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Fo=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:d,onEdgeMouseLeave:u,onEdgeClick:c,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:p,onReconnectEnd:b,reconnectRadius:g,children:x,disableKeyboardA11y:m})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:v,width:C,height:A,connectionMode:R,nodeInternals:T,onError:M}=te(Vh,ae),$=zh(t,T,n);return C?k.createElement(k.Fragment,null,$.map(({level:L,edges:V,isMaxLevel:P})=>k.createElement("svg",{key:L,style:{zIndex:L},width:C,height:A,className:"react-flow__edges react-flow__container"},P&&k.createElement(Oh,{defaultColor:e,rfId:r}),k.createElement("g",null,V.map(y=>{const[j,S,I]=ps(T.get(y.source)),[H,E,z]=ps(T.get(y.target));if(!I||!z)return null;let D=y.type||"default";s[D]||(M?.("011",$e.error011(D)),D="default");const O=s[D]||s.default,F=R===tt.Strict?E.target:(E.target??[]).concat(E.source??[]),B=fs(S.source,y.sourceHandle),Y=fs(F,y.targetHandle),q=B?.position||G.Bottom,Z=Y?.position||G.Top,W=!!(y.focusable||w&&typeof y.focusable>"u"),ne=y.reconnectable||y.updatable,Q=typeof f<"u"&&(ne||_&&typeof ne>"u");if(!B||!Y)return M?.("008",$e.error008(B,y)),null;const{sourceX:ye,sourceY:pe,targetX:ve,targetY:me}=Mh(j,B,q,H,Y,Z);return k.createElement(O,{key:y.id,id:y.id,className:le([y.className,o]),type:D,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:ye,sourceY:pe,targetX:ve,targetY:me,sourcePosition:q,targetPosition:Z,elementsSelectable:v,onContextMenu:i,onMouseEnter:a,onMouseMove:d,onMouseLeave:u,onClick:c,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:p,onReconnectEnd:b,reconnectRadius:g,rfId:r,ariaLabel:y.ariaLabel,isFocusable:W,isReconnectable:Q,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth,disableKeyboardA11y:m})})))),x):null};Fo.displayName="EdgeRenderer";var Bh=N.memo(Fo);const Fh=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Gh({children:e}){const t=te(Fh);return k.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Uh(e){const t=gr(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Yh={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top},Go=({nodeId:e,handleType:t,style:n,type:r=Pe.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:i,handleId:a,toX:d,toY:u,connectionMode:c}=te(N.useCallback(A=>({fromNode:A.nodeInternals.get(e),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[e]),ae),h=i?.[re]?.handleBounds;let f=h?.[t];if(c===tt.Loose&&(f=f||h?.[t==="source"?"target":"source"]),!i||!f)return null;const p=a?f.find(A=>A.id===a):f[0],b=p?p.x+p.width/2:(i.width??0)/2,g=p?p.y+p.height/2:i.height??0,x=(i.positionAbsolute?.x??0)+b,m=(i.positionAbsolute?.y??0)+g,w=p?.position,_=w?Yh[w]:null;if(!w||!_)return null;if(s)return k.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:x,fromY:m,toX:d,toY:u,fromPosition:w,toPosition:_,connectionStatus:o});let v="";const C={sourceX:x,sourceY:m,sourcePosition:w,targetX:d,targetY:u,targetPosition:_};return r===Pe.Bezier?[v]=ho(C):r===Pe.Step?[v]=Yn({...C,borderRadius:0}):r===Pe.SmoothStep?[v]=Yn(C):r===Pe.SimpleBezier?[v]=uo(C):v=`M${x},${m} ${d},${u}`,k.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};Go.displayName="ConnectionLine";const Xh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function qh({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:i,width:a,height:d,connectionStatus:u}=te(Xh,ae);return!(s&&o&&a&&i)?null:k.createElement("svg",{style:e,width:a,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},k.createElement("g",{className:le(["react-flow__connection",u])},k.createElement(Go,{nodeId:s,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function gs(e,t){return N.useRef(null),oe(),N.useMemo(()=>t(e),[e])}const Uo=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:d,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:b,onSelectionStart:g,onSelectionEnd:x,connectionLineType:m,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:v,selectionKeyCode:C,selectionOnDrag:A,selectionMode:R,multiSelectionKeyCode:T,panActivationKeyCode:M,zoomActivationKeyCode:$,deleteKeyCode:L,onlyRenderVisibleElements:V,elementsSelectable:P,selectNodesOnDrag:y,defaultViewport:j,translateExtent:S,minZoom:I,maxZoom:H,preventScrolling:E,defaultMarkerColor:z,zoomOnScroll:D,zoomOnPinch:O,panOnScroll:F,panOnScrollSpeed:B,panOnScrollMode:Y,zoomOnDoubleClick:q,panOnDrag:Z,onPaneClick:W,onPaneMouseEnter:ne,onPaneMouseMove:Q,onPaneMouseLeave:ye,onPaneScroll:pe,onPaneContextMenu:ve,onEdgeContextMenu:me,onEdgeMouseEnter:se,onEdgeMouseMove:_e,onEdgeMouseLeave:ee,onReconnect:U,onReconnectStart:he,onReconnectEnd:Ve,reconnectRadius:Nt,noDragClassName:nt,noWheelClassName:rt,noPanClassName:Ae,elevateEdgesOnSelect:st,disableKeyboardA11y:Be,nodeOrigin:Fe,nodeExtent:ot,rfId:it})=>{const _t=gs(e,Nh),ie=gs(t,Ah);return Uh(o),k.createElement(bh,{onPaneClick:W,onPaneMouseEnter:ne,onPaneMouseMove:Q,onPaneMouseLeave:ye,onPaneContextMenu:ve,onPaneScroll:pe,deleteKeyCode:L,selectionKeyCode:C,selectionOnDrag:A,selectionMode:R,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:T,panActivationKeyCode:M,zoomActivationKeyCode:$,elementsSelectable:P,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:D,zoomOnPinch:O,zoomOnDoubleClick:q,panOnScroll:F,panOnScrollSpeed:B,panOnScrollMode:Y,panOnDrag:Z,defaultViewport:j,translateExtent:S,minZoom:I,maxZoom:H,onSelectionContextMenu:b,preventScrolling:E,noDragClassName:nt,noWheelClassName:rt,noPanClassName:Ae,disableKeyboardA11y:Be},k.createElement(Gh,null,k.createElement(Bh,{edgeTypes:ie,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:V,onEdgeContextMenu:me,onEdgeMouseEnter:se,onEdgeMouseMove:_e,onEdgeMouseLeave:ee,onReconnect:U,onReconnectStart:he,onReconnectEnd:Ve,reconnectRadius:Nt,defaultMarkerColor:z,noPanClassName:Ae,elevateEdgesOnSelect:!!st,disableKeyboardA11y:Be,rfId:it},k.createElement(qh,{style:w,type:m,component:_,containerStyle:v})),k.createElement("div",{className:"react-flow__edgelabel-renderer"}),k.createElement(Eh,{nodeTypes:_t,onNodeClick:i,onNodeDoubleClick:d,onNodeMouseEnter:c,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:y,onlyRenderVisibleElements:V,noPanClassName:Ae,noDragClassName:nt,disableKeyboardA11y:Be,nodeOrigin:Fe,nodeExtent:ot,rfId:it})))};Uo.displayName="GraphView";var Zh=N.memo(Uo);const Kn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ze={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Kn,nodeExtent:Kn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:tt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Sd,isValidConnection:void 0},Wh=()=>Ha((e,t)=>({...ze,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=t();e({nodeInternals:An(n,r,s,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",i=s?An(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:d,nodeOrigin:u}=t(),c=d?.querySelector(".react-flow__viewport");if(!c)return;const h=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(h.transform),p=n.reduce((g,x)=>{const m=s.get(x.id);if(m?.hidden)s.set(m.id,{...m,[re]:{...m[re],handleBounds:void 0}});else if(m){const w=ir(x.nodeElement);!!(w.width&&w.height&&(m.width!==w.width||m.height!==w.height||x.forceUpdate))&&(s.set(m.id,{...m,[re]:{...m[re],handleBounds:{source:ls(".source",x.nodeElement,f,u),target:ls(".target",x.nodeElement,f,u)}},...w}),g.push({id:m.id,type:"dimensions",dimensions:w}))}return g},[]);Io(s,u);const b=i||o&&!i&&To(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:b}),p?.length>0&&r?.(p)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=t(),i=n.map(a=>{const d={id:a.id,type:"position",dragging:s};return r&&(d.positionAbsolute=a.positionAbsolute,d.position=a.position),d});o(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:d}=t();if(n?.length){if(o){const u=zo(n,a()),c=An(u,s,i,d);e({nodeInternals:c})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=t();let i,a=null;r?i=n.map(d=>De(d,!0)):(i=ht(o(),n),a=ht(s,[])),Jt({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=t();let i,a=null;r?i=n.map(d=>De(d,!0)):(i=ht(s,n),a=ht(o(),[])),Jt({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=t(),i=n||o(),a=r||s,d=i.map(c=>(c.selected=!1,De(c.id,!1))),u=a.map(c=>De(c.id,!1));Jt({changedNodes:d,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r?.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r?.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>De(a.id,!1)),i=n.filter(a=>a.selected).map(a=>De(a.id,!1));Jt({changedNodes:o,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=ar(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:i,d3Selection:a,translateExtent:d}=t();if(!i||!a||!n.x&&!n.y)return!1;const u=Le.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[s,o]],h=i?.constrain()(u,c,d);return i.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>e({connectionNodeId:ze.connectionNodeId,connectionHandleId:ze.connectionHandleId,connectionHandleType:ze.connectionHandleType,connectionStatus:ze.connectionStatus,connectionStartHandle:ze.connectionStartHandle,connectionEndHandle:ze.connectionEndHandle}),reset:()=>e({...ze})}),Object.is),Yo=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=Wh()),k.createElement(gd,{value:t.current},e)};Yo.displayName="ReactFlowProvider";const Xo=({children:e})=>N.useContext(yn)?k.createElement(k.Fragment,null,e):k.createElement(Yo,null,e);Xo.displayName="ReactFlowWrapper";const Kh={input:So,default:Zn,output:jo,group:mr},Jh={default:pn,straight:dr,step:ur,smoothstep:vn,simplebezier:lr},Qh=[0,0],ef=[15,15],tf={x:0,y:0,zoom:1},nf={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},qo=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=Kh,edgeTypes:i=Jh,onNodeClick:a,onEdgeClick:d,onInit:u,onMove:c,onMoveStart:h,onMoveEnd:f,onConnect:p,onConnectStart:b,onConnectEnd:g,onClickConnectStart:x,onClickConnectEnd:m,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:A,onNodeDragStart:R,onNodeDrag:T,onNodeDragStop:M,onNodesDelete:$,onEdgesDelete:L,onSelectionChange:V,onSelectionDragStart:P,onSelectionDrag:y,onSelectionDragStop:j,onSelectionContextMenu:S,onSelectionStart:I,onSelectionEnd:H,connectionMode:E=tt.Strict,connectionLineType:z=Pe.Bezier,connectionLineStyle:D,connectionLineComponent:O,connectionLineContainerStyle:F,deleteKeyCode:B="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:q=!1,selectionMode:Z=Ht.Full,panActivationKeyCode:W="Space",multiSelectionKeyCode:ne=hn()?"Meta":"Control",zoomActivationKeyCode:Q=hn()?"Meta":"Control",snapToGrid:ye=!1,snapGrid:pe=ef,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:me=!0,nodesDraggable:se,nodesConnectable:_e,nodesFocusable:ee,nodeOrigin:U=Qh,edgesFocusable:he,edgesUpdatable:Ve,elementsSelectable:Nt,defaultViewport:nt=tf,minZoom:rt=.5,maxZoom:Ae=2,translateExtent:st=Kn,preventScrolling:Be=!0,nodeExtent:Fe,defaultMarkerColor:ot="#b1b1b7",zoomOnScroll:it=!0,zoomOnPinch:_t=!0,panOnScroll:ie=!1,panOnScrollSpeed:Se=.5,panOnScrollMode:Ge=We.Free,zoomOnDoubleClick:Ue=!0,panOnDrag:at=!0,onPaneClick:Ee,onPaneMouseEnter:Ye,onPaneMouseMove:bn,onPaneMouseLeave:wn,onPaneScroll:St,onPaneContextMenu:Nn,children:br,onEdgeContextMenu:Xe,onEdgeDoubleClick:Qo,onEdgeMouseEnter:ei,onEdgeMouseMove:ti,onEdgeMouseLeave:ni,onEdgeUpdate:ri,onEdgeUpdateStart:si,onEdgeUpdateEnd:oi,onReconnect:ii,onReconnectStart:ai,onReconnectEnd:ci,reconnectRadius:li=10,edgeUpdaterRadius:ui=10,onNodesChange:di,onEdgesChange:hi,noDragClassName:fi="nodrag",noWheelClassName:pi="nowheel",noPanClassName:wr="nopan",fitView:mi=!1,fitViewOptions:gi,connectOnClick:xi=!0,attributionPosition:yi,proOptions:vi,defaultEdgeOptions:bi,elevateNodesOnSelect:wi=!0,elevateEdgesOnSelect:Ni=!1,disableKeyboardA11y:Nr=!1,autoPanOnConnect:_i=!0,autoPanOnNodeDrag:Si=!0,connectionRadius:Ei=20,isValidConnection:ji,onError:ki,style:Ci,id:_r,nodeDragThreshold:Ai,...Mi},Ii)=>{const _n=_r||"1";return k.createElement("div",{...Mi,style:{...Ci,...nf},ref:Ii,className:le(["react-flow",s]),"data-testid":"rf__wrapper",id:_r},k.createElement(Xo,null,k.createElement(Zh,{onInit:u,onMove:c,onMoveStart:h,onMoveEnd:f,onNodeClick:a,onEdgeClick:d,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:A,nodeTypes:o,edgeTypes:i,connectionLineType:z,connectionLineStyle:D,connectionLineComponent:O,connectionLineContainerStyle:F,selectionKeyCode:Y,selectionOnDrag:q,selectionMode:Z,deleteKeyCode:B,multiSelectionKeyCode:ne,panActivationKeyCode:W,zoomActivationKeyCode:Q,onlyRenderVisibleElements:ve,selectNodesOnDrag:me,defaultViewport:nt,translateExtent:st,minZoom:rt,maxZoom:Ae,preventScrolling:Be,zoomOnScroll:it,zoomOnPinch:_t,zoomOnDoubleClick:Ue,panOnScroll:ie,panOnScrollSpeed:Se,panOnScrollMode:Ge,panOnDrag:at,onPaneClick:Ee,onPaneMouseEnter:Ye,onPaneMouseMove:bn,onPaneMouseLeave:wn,onPaneScroll:St,onPaneContextMenu:Nn,onSelectionContextMenu:S,onSelectionStart:I,onSelectionEnd:H,onEdgeContextMenu:Xe,onEdgeDoubleClick:Qo,onEdgeMouseEnter:ei,onEdgeMouseMove:ti,onEdgeMouseLeave:ni,onReconnect:ii??ri,onReconnectStart:ai??si,onReconnectEnd:ci??oi,reconnectRadius:li??ui,defaultMarkerColor:ot,noDragClassName:fi,noWheelClassName:pi,noPanClassName:wr,elevateEdgesOnSelect:Ni,rfId:_n,disableKeyboardA11y:Nr,nodeOrigin:U,nodeExtent:Fe}),k.createElement(Yd,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:b,onConnectEnd:g,onClickConnectStart:x,onClickConnectEnd:m,nodesDraggable:se,nodesConnectable:_e,nodesFocusable:ee,edgesFocusable:he,edgesUpdatable:Ve,elementsSelectable:Nt,elevateNodesOnSelect:wi,minZoom:rt,maxZoom:Ae,nodeExtent:Fe,onNodesChange:di,onEdgesChange:hi,snapToGrid:ye,snapGrid:pe,connectionMode:E,translateExtent:st,connectOnClick:xi,defaultEdgeOptions:bi,fitView:mi,fitViewOptions:gi,onNodesDelete:$,onEdgesDelete:L,onNodeDragStart:R,onNodeDrag:T,onNodeDragStop:M,onSelectionDrag:y,onSelectionDragStart:P,onSelectionDragStop:j,noPanClassName:wr,nodeOrigin:U,rfId:_n,autoPanOnConnect:_i,autoPanOnNodeDrag:Si,onError:ki,connectionRadius:Ei,isValidConnection:ji,nodeDragThreshold:Ai}),k.createElement(Gd,{onSelectionChange:V}),br,k.createElement(yd,{proOptions:vi,position:yi}),k.createElement(Kd,{rfId:_n,disableKeyboardA11y:Nr})))});qo.displayName="ReactFlow";function rf(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function sf(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},k.createElement("path",{d:"M0 0h32v4.2H0z"}))}function of(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},k.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function af(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function cf(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Tt=({children:e,className:t,...n})=>k.createElement("button",{type:"button",className:le(["react-flow__controls-button",t]),...n},e);Tt.displayName="ControlButton";const lf=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Zo=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:i,onFitView:a,onInteractiveChange:d,className:u,children:c,position:h="bottom-left"})=>{const f=oe(),[p,b]=N.useState(!1),{isInteractive:g,minZoomReached:x,maxZoomReached:m}=te(lf,ae),{zoomIn:w,zoomOut:_,fitView:v}=gr();if(N.useEffect(()=>{b(!0)},[]),!p)return null;const C=()=>{w(),o?.()},A=()=>{_(),i?.()},R=()=>{v(s),a?.()},T=()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),d?.(!g)};return k.createElement(ro,{className:le(["react-flow__controls",u]),position:h,style:e,"data-testid":"rf__controls"},t&&k.createElement(k.Fragment,null,k.createElement(Tt,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},k.createElement(rf,null)),k.createElement(Tt,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},k.createElement(sf,null))),n&&k.createElement(Tt,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},k.createElement(of,null)),r&&k.createElement(Tt,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},g?k.createElement(cf,null):k.createElement(af,null)),c)};Zo.displayName="Controls";var uf=N.memo(Zo),we;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(we||(we={}));function df({color:e,dimensions:t,lineWidth:n}){return k.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function hf({color:e,radius:t}){return k.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const ff={[we.Dots]:"#91919a",[we.Lines]:"#eee",[we.Cross]:"#e2e2e2"},pf={[we.Dots]:1,[we.Lines]:1,[we.Cross]:6},mf=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Wo({id:e,variant:t=we.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:i,style:a,className:d}){const u=N.useRef(null),{transform:c,patternId:h}=te(mf,ae),f=i||ff[t],p=r||pf[t],b=t===we.Dots,g=t===we.Cross,x=Array.isArray(n)?n:[n,n],m=[x[0]*c[2]||1,x[1]*c[2]||1],w=p*c[2],_=g?[w,w]:m,v=b?[w/o,w/o]:[_[0]/o,_[1]/o];return k.createElement("svg",{className:le(["react-flow__background",d]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},k.createElement("pattern",{id:h+e,x:c[0]%m[0],y:c[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},b?k.createElement(hf,{color:f,radius:w/o}):k.createElement(df,{dimensions:_,color:f,lineWidth:s})),k.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+e})`}))}Wo.displayName="Background";var gf=N.memo(Wo);const xf=({data:e,type:t})=>{const r={source:"var(--hud-accent)",cache:"var(--hud-success)",llm:"var(--hud-accent-secondary)",sector:"#f59e0b"}[e.type]||"var(--hud-text)";return l.jsxs("div",{className:"px-4 py-2 rounded bg-black border border-[var(--hud-border)] shadow-[0_0_15px_rgba(0,0,0,0.5)] min-w-[150px]",children:[l.jsx(bt,{type:"target",position:G.Top,className:"!bg-[var(--hud-text-dim)]"}),l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r}}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e.label})]}),l.jsx("div",{className:"text-[10px] font-mono text-[var(--hud-text-dim)]",children:e.details}),l.jsx(bt,{type:"source",position:G.Bottom,className:"!bg-[var(--hud-text-dim)]"})]})},yf={cyber:xf};function vf(){const[e,t]=N.useState([]),[n,r]=N.useState([]),[s,o]=N.useState(!0),[i,a]=N.useState(1),[d,u]=N.useState({useCase:"",performance:"balanced"}),c=N.useCallback(g=>t(x=>zo(g,x)),[]),h=N.useCallback(g=>r(x=>dh(g,x)),[]),f=N.useCallback(g=>r(x=>fo(g,x)),[]),p=()=>{const g=[{id:"1",type:"cyber",position:{x:250,y:0},data:{label:"HTTP API",type:"source",details:"Ingress"}},{id:"2",type:"cyber",position:{x:250,y:100},data:{label:"L1 Cache",type:"cache",details:"Redis (In-Memory)"}},{id:"3",type:"cyber",position:{x:250,y:200},data:{label:"Semantic Router",type:"sector",details:"Healthcare Model"}},{id:"4",type:"cyber",position:{x:250,y:300},data:{label:"GPT-4o",type:"llm",details:"Fallback"}}],x=[{id:"e1-2",source:"1",target:"2",animated:!0,style:{stroke:"var(--hud-accent)"}},{id:"e2-3",source:"2",target:"3",animated:!0,style:{stroke:"var(--hud-accent)"}},{id:"e3-4",source:"3",target:"4",animated:!0,style:{stroke:"var(--hud-accent)"}}];t(g),r(x),o(!1)},b=async()=>{try{const g=localStorage.getItem("agentcache_token");if(!g){alert("Authentication required. Please log in.");return}const x={name:`Pipeline ${new Date().toLocaleTimeString()}`,sector:d.useCase||"custom",nodes:e,connections:n,description:`Generated via Wizard (${d.performance})`,complexity:{tier:"moderate",score:e.length*10},monthlyCost:0,features:["cache","llm"]},w=await(await fetch("/api/pipelines/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(x)})).json();if(w.success)alert(`Pipeline Saved! ID: ${w.pipeline.id}`);else throw new Error(w.error||"Unknown error")}catch(g){console.error("Save failed",g),alert(`Failed to save: ${g.message}`)}};return l.jsxs("div",{className:"h-[calc(100vh-8rem)] flex gap-6 relative",children:[l.jsx("div",{className:"w-64 flex flex-col gap-4",children:l.jsx(J,{title:"Node Palette",icon:da,className:"flex-1",children:l.jsx("div",{className:"space-y-2",children:["Source","Cache","LLM","Sector"].map(g=>l.jsx("div",{className:"p-3 rounded bg-[rgba(255,255,255,0.05)] border border-transparent hover:border-[var(--hud-accent)] cursor-grab active:cursor-grabbing transition-colors",children:l.jsxs("span",{className:"text-sm font-bold text-white",children:[g," Node"]})},g))})})}),l.jsxs("div",{className:"flex-1 rounded-lg border border-[var(--hud-border)] bg-black/50 overflow-hidden relative",children:[l.jsxs(qo,{nodes:e,edges:n,onNodesChange:c,onEdgesChange:h,onConnect:f,nodeTypes:yf,fitView:!0,children:[l.jsx(gf,{color:"#333",gap:20}),l.jsx(uf,{className:"!bg-black !border-[var(--hud-border)] !fill-white"})]}),l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[l.jsxs("button",{onClick:()=>o(!0),className:"btn-cyber px-4 py-2 flex items-center gap-2 text-xs",children:[l.jsx(Ea,{size:14})," Wizard"]}),l.jsxs("button",{onClick:b,className:"btn-cyber px-4 py-2 flex items-center gap-2 text-xs",children:[l.jsx(ma,{size:14})," Save"]}),l.jsxs("button",{className:"btn-cyber btn-cyber-primary px-4 py-2 flex items-center gap-2 text-xs",children:[l.jsx(la,{size:14})," Deploy"]})]})]}),s&&l.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:l.jsxs(J,{className:"w-[600px] max-h-[80vh] overflow-y-auto relative",children:[l.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 text-[var(--hud-text-dim)] hover:text-white",children:l.jsx(Aa,{size:20})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-[var(--hud-accent)] tracking-widest mb-1",children:"PIPELINE WIZARD"}),l.jsx("p",{className:"text-xs font-mono text-[var(--hud-text-dim)]",children:"CONFIGURE ORCHESTRATION PARAMETERS"})]}),i===1&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-sm font-bold text-white",children:"SELECT USE CASE"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{id:"clinical",label:"Clinical Decision",icon:""},{id:"trading",label:"Trading Assistant",icon:""},{id:"legal",label:"Contract Review",icon:""},{id:"custom",label:"Custom",icon:""}].map(g=>l.jsxs("button",{onClick:()=>{u({...d,useCase:g.id}),a(2)},className:"p-4 rounded border border-[var(--hud-border)] hover:border-[var(--hud-accent)] hover:bg-[var(--hud-accent)]/10 text-left transition-all",children:[l.jsx("div",{className:"text-2xl mb-2",children:g.icon}),l.jsx("div",{className:"font-bold text-sm text-white",children:g.label})]},g.id))})]}),i===2&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-sm font-bold text-white",children:"OPTIMIZATION TARGET"}),l.jsx("div",{className:"space-y-3",children:[{id:"fast",label:"Low Latency",desc:"Minimize response time"},{id:"balanced",label:"Balanced",desc:"Good speed + cost savings"},{id:"cost",label:"Cost Optimized",desc:"Maximum savings"}].map(g=>l.jsxs("button",{onClick:()=>u({...d,performance:g.id}),className:`w-full p-4 rounded border text-left transition-all ${d.performance===g.id?"border-[var(--hud-accent)] bg-[var(--hud-accent)]/10":"border-[var(--hud-border)] hover:bg-[rgba(255,255,255,0.05)]"}`,children:[l.jsx("div",{className:"font-bold text-sm text-white",children:g.label}),l.jsx("div",{className:"text-xs text-[var(--hud-text-dim)]",children:g.desc})]},g.id))}),l.jsxs("div",{className:"flex justify-between pt-4 border-t border-[var(--hud-border)]",children:[l.jsx("button",{onClick:()=>a(1),className:"text-xs text-[var(--hud-text-dim)] hover:text-white",children:"BACK"}),l.jsx("button",{onClick:p,className:"btn-cyber btn-cyber-primary px-6 py-2 text-sm font-bold",children:"GENERATE"})]})]})]})})]})}const Ko=N.createContext(null),bf=({children:e})=>{const[t,n]=N.useState(null),[r,s]=N.useState(null),[o,i]=N.useState(!0);N.useEffect(()=>{const u=localStorage.getItem("agentcache_token"),c=localStorage.getItem("agentcache_user");u&&c&&(s(u),n(JSON.parse(c))),i(!1)},[]);const a=async u=>{try{const c=await fetch("/api/auth/dev-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})});if(!c.ok)throw new Error("Login failed");const h=await c.json();return s(h.token),n(h.user),localStorage.setItem("agentcache_token",h.token),localStorage.setItem("agentcache_user",JSON.stringify(h.user)),!0}catch(c){return console.error(c),!1}},d=()=>{s(null),n(null),localStorage.removeItem("agentcache_token"),localStorage.removeItem("agentcache_user")};return l.jsx(Ko.Provider,{value:{user:t,token:r,login:a,logout:d,loading:o},children:e})},wt=()=>N.useContext(Ko);function wf(){const{token:e}=wt(),[t,n]=N.useState([]),[r,s]=N.useState([]),[o,i]=N.useState(null);return N.useEffect(()=>{if(!e)return;const a=async()=>{try{const f=await(await fetch("/api/admin-stats",{headers:{Authorization:`Bearer ${e}`}})).json();if(f&&f.top_users){const p=f.top_users.map((b,g)=>({rank:g+1,name:b.email.split("@")[0]||"Unknown Agent",score:b.requests,sector:"General"}));n(p)}else n([{rank:1,name:"System-Prime",score:1e3,sector:"Core"}])}catch(h){console.error("Failed to fetch leaderboard:",h)}};a();const d=setInterval(a,6e4),u=new EventSource("/api/events/stream");u.onmessage=h=>{const f=JSON.parse(h.data);if(f.type!=="sys:connected"&&(f.type==="CACHE_HIT"||f.type==="OPTIMIZATION"||Math.random()>.7)){const p={id:Date.now(),agent:f.agentId||"Swarm-Node",pattern:f.type==="CACHE_HIT"?"Pattern Match":"Optimization Found",improvement:Math.floor(Math.random()*20)+5,time:new Date().toLocaleTimeString()};s(b=>[p,...b].slice(0,8))}},i({status:"Running Experiment #8492",progress:45,target:"Global Latency Optimization"});const c=setInterval(()=>{i(h=>({...h,progress:h.progress>=100?0:h.progress+1}))},1e3);return()=>{clearInterval(d),clearInterval(c),u.close()}},[]),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-8rem)]",children:[l.jsx("div",{className:"space-y-6",children:l.jsx(J,{title:"Live Discoveries",icon:fa,className:"h-full flex flex-col",children:l.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar",children:[r.map(a=>l.jsxs("div",{className:"p-3 rounded bg-[rgba(255,255,255,0.03)] border-l-2 border-[var(--hud-accent)] animate-in slide-in-from-left duration-300",children:[l.jsxs("div",{className:"flex justify-between items-start mb-1",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:a.agent}),l.jsx("span",{className:"text-[10px] font-mono text-[var(--hud-text-dim)]",children:a.time})]}),l.jsxs("div",{className:"text-xs text-[var(--hud-text-dim)] mb-2",children:["Found: ",l.jsx("span",{className:"text-white",children:a.pattern})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono text-[var(--hud-success)]",children:[l.jsx(ks,{size:12}),l.jsxs("span",{children:["+",a.improvement,"% Efficiency"]})]})]},a.id)),r.length===0&&l.jsx("div",{className:"text-center text-[var(--hud-text-dim)] py-8 italic",children:"Listening for swarm signals..."})]})})}),l.jsx("div",{className:"lg:col-span-1 flex flex-col gap-6 relative",children:l.jsxs(J,{className:"flex-1 relative overflow-hidden p-0 border-[var(--hud-accent)] shadow-[0_0_30px_rgba(0,243,255,0.1)]",children:[l.jsx(NeuralGalaxy,{}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-[rgba(0,0,0,0.8)] backdrop-blur p-4 border-t border-[var(--hud-border)] pointer-events-none",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-xs font-bold text-[var(--hud-text-dim)]",children:"ACTIVE EXPERIMENT"}),l.jsx("span",{className:"text-xs font-mono text-[var(--hud-accent)] animate-pulse",children:"RUNNING"})]}),l.jsx("div",{className:"text-sm font-medium text-white mb-3",children:o?.target}),l.jsx("div",{className:"h-1 bg-[rgba(255,255,255,0.1)] rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-[var(--hud-accent)] transition-all duration-300",style:{width:`${o?.progress}%`}})})]})]})}),l.jsx("div",{className:"space-y-6",children:l.jsx(J,{title:"Top Agents",icon:_a,className:"h-full",children:l.jsx(sn,{columns:[{header:"Rank",accessor:"rank",render:a=>l.jsxs("span",{className:"font-mono text-[var(--hud-accent)]",children:["#",a.rank]})},{header:"Agent Name",accessor:"name",render:a=>l.jsx("span",{className:"font-bold text-white",children:a.name})},{header:"Score",accessor:"score",render:a=>l.jsx("span",{className:"font-mono text-[var(--hud-warning)]",children:a.score})}],data:t})})})]})}function Nf(){const{token:e}=wt(),[t,n]=N.useState([]),[r,s]=N.useState(null),[o,i]=N.useState(!0),[a,d]=N.useState([]),u=async()=>{if(e)try{const h=await(await fetch("/api/decisions?limit=20",{headers:{Authorization:`Bearer ${e}`}})).json();if(h&&h.decisions&&h.decisions.length>0)n(h.decisions);else{const f=Array.from({length:5}).map((p,b)=>({id:`demo-${Math.random().toString(36).substr(2,9)}`,action:"SYSTEM_READY",timestamp:new Date().toISOString(),reasoning:"System initialized. Waiting for live traffic...",outcome:{status:"ready"}}));n(f)}i(!1)}catch(c){console.error("Failed to fetch decisions:",c),i(!1)}};return N.useEffect(()=>{u();const c=new EventSource("/api/events/stream");return c.onmessage=h=>{const f=JSON.parse(h.data);if(f.type!=="sys:connected"){const p=Math.random().toString(36).substr(2,9);d(b=>[...b,{id:p,...f,x:Math.random()*80+10,y:Math.random()*80+10}]),setTimeout(()=>{d(b=>b.filter(g=>g.id!==p))},2e3)}f.type==="decision:recorded"&&u()},()=>{c.close()}},[e]),l.jsxs("div",{className:"flex h-[calc(100vh-8rem)] gap-6 relative",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none z-50 overflow-hidden",children:a.map(c=>l.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-[var(--hud-accent)] shadow-[0_0_10px_var(--hud-accent)] animate-ping",style:{left:`${c.x}%`,top:`${c.y}%`}},c.id))}),l.jsx("div",{className:"w-1/3 min-w-[300px] flex flex-col",children:l.jsx(J,{title:"Decision Stream",icon:Qe,className:"h-full flex flex-col",children:l.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:[o&&l.jsx("div",{className:"p-4 text-center text-[var(--hud-text-dim)]",children:"Loading stream..."}),t.map(c=>l.jsxs("div",{onClick:()=>s(c),className:`p-3 rounded border cursor-pointer transition-all duration-200 group ${r?.id===c.id?"bg-[rgba(0,243,255,0.1)] border-[var(--hud-accent)]":"bg-[rgba(255,255,255,0.03)] border-transparent hover:border-[rgba(0,243,255,0.3)]"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${r?.id===c.id?"text-[var(--hud-accent)]":"text-white"}`,children:c.action}),l.jsx("span",{className:"text-[10px] font-mono text-[var(--hud-text-dim)]",children:new Date(c.timestamp).toLocaleTimeString()})]}),l.jsx("div",{className:"text-xs text-[var(--hud-text-dim)] line-clamp-2 font-mono group-hover:text-white transition-colors",children:c.reasoning})]},c.id))]})})}),l.jsx("div",{className:"flex-1 flex flex-col",children:l.jsx(J,{title:"Trace Inspector",icon:qi,className:"h-full flex flex-col",children:r?l.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[l.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-[rgba(255,255,255,0.05)]",children:[l.jsx("div",{className:"w-12 h-12 rounded bg-[rgba(0,243,255,0.1)] flex items-center justify-center border border-[var(--hud-accent)]",children:l.jsx(Ki,{size:24,className:"text-[var(--hud-accent)]"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:r.action}),l.jsxs("p",{className:"text-xs font-mono text-[var(--hud-text-dim)]",children:["ID: ",r.id]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-bold text-[var(--hud-accent)] uppercase tracking-wider mb-2 flex items-center gap-2",children:[l.jsx(Jn,{size:14})," Reasoning Chain"]}),l.jsx("div",{className:"p-4 rounded bg-[rgba(0,0,0,0.3)] border border-[rgba(255,255,255,0.05)] font-mono text-sm text-white leading-relaxed",children:r.reasoning})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("h3",{className:"text-xs font-bold text-[var(--hud-success)] uppercase tracking-wider mb-2 flex items-center gap-2",children:[l.jsx(wa,{size:14})," Execution Outcome"]}),l.jsx("div",{className:"p-4 rounded bg-black border border-[rgba(255,255,255,0.1)] font-mono text-xs text-[var(--hud-success)] overflow-x-auto",children:l.jsx("pre",{children:JSON.stringify(r.outcome,null,2)})})]})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[var(--hud-text-dim)] opacity-50",children:[l.jsx(Qe,{size:64,className:"mb-4 animate-pulse"}),l.jsx("p",{className:"font-['Rajdhani'] text-lg tracking-wide",children:"SELECT A TRACE TO INSPECT"})]})})})]})}function _f(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function s(){var o,i=n.length,a,d=0,u=0;for(o=0;o<i;++o)a=n[o],d+=a.x,u+=a.y;for(d=(d/i-e)*r,u=(u/i-t)*r,o=0;o<i;++o)a=n[o],a.x-=d,a.y-=u}return s.initialize=function(o){n=o},s.x=function(o){return arguments.length?(e=+o,s):e},s.y=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(r=+o,s):r},s}function Sf(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Jo(this.cover(t,n),t,n,e)}function Jo(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var s,o=e._root,i={data:r},a=e._x0,d=e._y0,u=e._x1,c=e._y1,h,f,p,b,g,x,m,w;if(!o)return e._root=i,e;for(;o.length;)if((g=t>=(h=(a+u)/2))?a=h:u=h,(x=n>=(f=(d+c)/2))?d=f:c=f,s=o,!(o=o[m=x<<1|g]))return s[m]=i,e;if(p=+e._x.call(null,o.data),b=+e._y.call(null,o.data),t===p&&n===b)return i.next=o,s?s[m]=i:e._root=i,e;do s=s?s[m]=new Array(4):e._root=new Array(4),(g=t>=(h=(a+u)/2))?a=h:u=h,(x=n>=(f=(d+c)/2))?d=f:c=f;while((m=x<<1|g)===(w=(b>=f)<<1|p>=h));return s[w]=o,s[m]=i,e}function Ef(e){var t,n,r=e.length,s,o,i=new Array(r),a=new Array(r),d=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(s=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(i[n]=s,a[n]=o,s<d&&(d=s),s>c&&(c=s),o<u&&(u=o),o>h&&(h=o));if(d>c||u>h)return this;for(this.cover(d,u).cover(c,h),n=0;n<r;++n)Jo(this,i[n],a[n],e[n]);return this}function jf(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,s=this._x1,o=this._y1;if(isNaN(n))s=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var i=s-n||1,a=this._root,d,u;n>e||e>=s||r>t||t>=o;)switch(u=(t<r)<<1|e<n,d=new Array(4),d[u]=a,a=d,i*=2,u){case 0:s=n+i,o=r+i;break;case 1:n=s-i,o=r+i;break;case 2:s=n+i,r=o-i;break;case 3:n=s-i,r=o-i;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=s,this._y1=o,this}function kf(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Cf(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ce(e,t,n,r,s){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=s}function Af(e,t,n){var r,s=this._x0,o=this._y0,i,a,d,u,c=this._x1,h=this._y1,f=[],p=this._root,b,g;for(p&&f.push(new ce(p,s,o,c,h)),n==null?n=1/0:(s=e-n,o=t-n,c=e+n,h=t+n,n*=n);b=f.pop();)if(!(!(p=b.node)||(i=b.x0)>c||(a=b.y0)>h||(d=b.x1)<s||(u=b.y1)<o))if(p.length){var x=(i+d)/2,m=(a+u)/2;f.push(new ce(p[3],x,m,d,u),new ce(p[2],i,m,x,u),new ce(p[1],x,a,d,m),new ce(p[0],i,a,x,m)),(g=(t>=m)<<1|e>=x)&&(b=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=b)}else{var w=e-+this._x.call(null,p.data),_=t-+this._y.call(null,p.data),v=w*w+_*_;if(v<n){var C=Math.sqrt(n=v);s=e-C,o=t-C,c=e+C,h=t+C,r=p.data}}return r}function Mf(e){if(isNaN(c=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,r,s,o,i=this._x0,a=this._y0,d=this._x1,u=this._y1,c,h,f,p,b,g,x,m;if(!n)return this;if(n.length)for(;;){if((b=c>=(f=(i+d)/2))?i=f:d=f,(g=h>=(p=(a+u)/2))?a=p:u=p,t=n,!(n=n[x=g<<1|b]))return this;if(!n.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(r=t,m=x)}for(;n.data!==e;)if(s=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,s?(o?s.next=o:delete s.next,this):t?(o?t[x]=o:delete t[x],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function If(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Tf(){return this._root}function $f(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function zf(e){var t=[],n,r=this._root,s,o,i,a,d;for(r&&t.push(new ce(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,i=n.y0,a=n.x1,d=n.y1)&&r.length){var u=(o+a)/2,c=(i+d)/2;(s=r[3])&&t.push(new ce(s,u,c,a,d)),(s=r[2])&&t.push(new ce(s,o,c,u,d)),(s=r[1])&&t.push(new ce(s,u,i,a,c)),(s=r[0])&&t.push(new ce(s,o,i,u,c))}return this}function Rf(e){var t=[],n=[],r;for(this._root&&t.push(new ce(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var s=r.node;if(s.length){var o,i=r.x0,a=r.y0,d=r.x1,u=r.y1,c=(i+d)/2,h=(a+u)/2;(o=s[0])&&t.push(new ce(o,i,a,c,h)),(o=s[1])&&t.push(new ce(o,c,a,d,h)),(o=s[2])&&t.push(new ce(o,i,h,c,u)),(o=s[3])&&t.push(new ce(o,c,h,d,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Df(e){return e[0]}function Pf(e){return arguments.length?(this._x=e,this):this._x}function Hf(e){return e[1]}function Lf(e){return arguments.length?(this._y=e,this):this._y}function yr(e,t,n){var r=new vr(t??Df,n??Hf,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function vr(e,t,n,r,s,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=s,this._y1=o,this._root=void 0}function xs(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ue=yr.prototype=vr.prototype;ue.copy=function(){var e=new vr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=xs(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var s=0;s<4;++s)(r=t.source[s])&&(r.length?n.push({source:r,target:t.target[s]=new Array(4)}):t.target[s]=xs(r));return e};ue.add=Sf;ue.addAll=Ef;ue.cover=jf;ue.data=kf;ue.extent=Cf;ue.find=Af;ue.remove=Mf;ue.removeAll=If;ue.root=Tf;ue.size=$f;ue.visit=zf;ue.visitAfter=Rf;ue.x=Pf;ue.y=Lf;function Je(e){return function(){return e}}function He(e){return(e()-.5)*1e-6}function Of(e){return e.x+e.vx}function Vf(e){return e.y+e.vy}function Bf(e){var t,n,r,s=1,o=1;typeof e!="function"&&(e=Je(e==null?1:+e));function i(){for(var u,c=t.length,h,f,p,b,g,x,m=0;m<o;++m)for(h=yr(t,Of,Vf).visitAfter(a),u=0;u<c;++u)f=t[u],g=n[f.index],x=g*g,p=f.x+f.vx,b=f.y+f.vy,h.visit(w);function w(_,v,C,A,R){var T=_.data,M=_.r,$=g+M;if(T){if(T.index>f.index){var L=p-T.x-T.vx,V=b-T.y-T.vy,P=L*L+V*V;P<$*$&&(L===0&&(L=He(r),P+=L*L),V===0&&(V=He(r),P+=V*V),P=($-(P=Math.sqrt(P)))/P*s,f.vx+=(L*=P)*($=(M*=M)/(x+M)),f.vy+=(V*=P)*$,T.vx-=L*($=1-$),T.vy-=V*$)}return}return v>p+$||A<p-$||C>b+$||R<b-$}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function d(){if(t){var u,c=t.length,h;for(n=new Array(c),u=0;u<c;++u)h=t[u],n[h.index]=+e(h,u,t)}}return i.initialize=function(u,c){t=u,r=c,d()},i.iterations=function(u){return arguments.length?(o=+u,i):o},i.strength=function(u){return arguments.length?(s=+u,i):s},i.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Je(+u),d(),i):e},i}function Ff(e){return e.index}function ys(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Gf(e){var t=Ff,n=h,r,s=Je(30),o,i,a,d,u,c=1;e==null&&(e=[]);function h(x){return 1/Math.min(a[x.source.index],a[x.target.index])}function f(x){for(var m=0,w=e.length;m<c;++m)for(var _=0,v,C,A,R,T,M,$;_<w;++_)v=e[_],C=v.source,A=v.target,R=A.x+A.vx-C.x-C.vx||He(u),T=A.y+A.vy-C.y-C.vy||He(u),M=Math.sqrt(R*R+T*T),M=(M-o[_])/M*x*r[_],R*=M,T*=M,A.vx-=R*($=d[_]),A.vy-=T*$,C.vx+=R*($=1-$),C.vy+=T*$}function p(){if(i){var x,m=i.length,w=e.length,_=new Map(i.map((C,A)=>[t(C,A,i),C])),v;for(x=0,a=new Array(m);x<w;++x)v=e[x],v.index=x,typeof v.source!="object"&&(v.source=ys(_,v.source)),typeof v.target!="object"&&(v.target=ys(_,v.target)),a[v.source.index]=(a[v.source.index]||0)+1,a[v.target.index]=(a[v.target.index]||0)+1;for(x=0,d=new Array(w);x<w;++x)v=e[x],d[x]=a[v.source.index]/(a[v.source.index]+a[v.target.index]);r=new Array(w),b(),o=new Array(w),g()}}function b(){if(i)for(var x=0,m=e.length;x<m;++x)r[x]=+n(e[x],x,e)}function g(){if(i)for(var x=0,m=e.length;x<m;++x)o[x]=+s(e[x],x,e)}return f.initialize=function(x,m){i=x,u=m,p()},f.links=function(x){return arguments.length?(e=x,p(),f):e},f.id=function(x){return arguments.length?(t=x,f):t},f.iterations=function(x){return arguments.length?(c=+x,f):c},f.strength=function(x){return arguments.length?(n=typeof x=="function"?x:Je(+x),b(),f):n},f.distance=function(x){return arguments.length?(s=typeof x=="function"?x:Je(+x),g(),f):s},f}const Uf=1664525,Yf=1013904223,vs=4294967296;function Xf(){let e=1;return()=>(e=(Uf*e+Yf)%vs)/vs}function qf(e){return e.x}function Zf(e){return e.y}var Wf=10,Kf=Math.PI*(3-Math.sqrt(5));function Jf(e){var t,n=1,r=.001,s=1-Math.pow(r,1/300),o=0,i=.6,a=new Map,d=rr(h),u=Ot("tick","end"),c=Xf();e==null&&(e=[]);function h(){f(),u.call("tick",t),n<r&&(d.stop(),u.call("end",t))}function f(g){var x,m=e.length,w;g===void 0&&(g=1);for(var _=0;_<g;++_)for(n+=(o-n)*s,a.forEach(function(v){v(n)}),x=0;x<m;++x)w=e[x],w.fx==null?w.x+=w.vx*=i:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=i:(w.y=w.fy,w.vy=0);return t}function p(){for(var g=0,x=e.length,m;g<x;++g){if(m=e[g],m.index=g,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var w=Wf*Math.sqrt(.5+g),_=g*Kf;m.x=w*Math.cos(_),m.y=w*Math.sin(_)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function b(g){return g.initialize&&g.initialize(e,c),g}return p(),t={tick:f,restart:function(){return d.restart(h),t},stop:function(){return d.stop(),t},nodes:function(g){return arguments.length?(e=g,p(),a.forEach(b),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(s=+g,t):+s},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(i=1-g,t):1-i},randomSource:function(g){return arguments.length?(c=g,a.forEach(b),t):c},force:function(g,x){return arguments.length>1?(x==null?a.delete(g):a.set(g,b(x)),t):a.get(g)},find:function(g,x,m){var w=0,_=e.length,v,C,A,R,T;for(m==null?m=1/0:m*=m,w=0;w<_;++w)R=e[w],v=g-R.x,C=x-R.y,A=v*v+C*C,A<m&&(T=R,m=A);return T},on:function(g,x){return arguments.length>1?(u.on(g,x),t):u.on(g)}}}function Qf(){var e,t,n,r,s=Je(-30),o,i=1,a=1/0,d=.81;function u(p){var b,g=e.length,x=yr(e,qf,Zf).visitAfter(h);for(r=p,b=0;b<g;++b)t=e[b],x.visit(f)}function c(){if(e){var p,b=e.length,g;for(o=new Array(b),p=0;p<b;++p)g=e[p],o[g.index]=+s(g,p,e)}}function h(p){var b=0,g,x,m=0,w,_,v;if(p.length){for(w=_=v=0;v<4;++v)(g=p[v])&&(x=Math.abs(g.value))&&(b+=g.value,m+=x,w+=x*g.x,_+=x*g.y);p.x=w/m,p.y=_/m}else{g=p,g.x=g.data.x,g.y=g.data.y;do b+=o[g.data.index];while(g=g.next)}p.value=b}function f(p,b,g,x){if(!p.value)return!0;var m=p.x-t.x,w=p.y-t.y,_=x-b,v=m*m+w*w;if(_*_/d<v)return v<a&&(m===0&&(m=He(n),v+=m*m),w===0&&(w=He(n),v+=w*w),v<i&&(v=Math.sqrt(i*v)),t.vx+=m*p.value*r/v,t.vy+=w*p.value*r/v),!0;if(p.length||v>=a)return;(p.data!==t||p.next)&&(m===0&&(m=He(n),v+=m*m),w===0&&(w=He(n),v+=w*w),v<i&&(v=Math.sqrt(i*v)));do p.data!==t&&(_=o[p.data.index]*r/v,t.vx+=m*_,t.vy+=w*_);while(p=p.next)}return u.initialize=function(p,b){e=p,n=b,c()},u.strength=function(p){return arguments.length?(s=typeof p=="function"?p:Je(+p),c(),u):s},u.distanceMin=function(p){return arguments.length?(i=p*p,u):Math.sqrt(i)},u.distanceMax=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.theta=function(p){return arguments.length?(d=p*p,u):Math.sqrt(d)},u}const e0=["START","L1_CHECK","L2_CHECK","L3_SEARCH","COGNITIVE","LLM_CALL","END"];function t0(){const{token:e}=wt(),[t,n]=N.useState([]),[r,s]=N.useState(null),o=N.useRef(null);return N.useEffect(()=>{if(!e)return;(async()=>{try{const d=await(await fetch("/api/lab/genomes?limit=20",{headers:{Authorization:`Bearer ${e}`}})).json();d.genomes&&d.genomes.length>0&&(n(d.genomes),s(d.genomes[0]))}catch(a){console.error("Failed to fetch genomes:",a)}})()},[e]),N.useEffect(()=>{if(!r||!o.current)return;const i=ge(o.current);i.selectAll("*").remove();const a=o.current.clientWidth,d=o.current.clientHeight,u=e0.map(m=>({id:m})),c=[];Object.entries(r.transitions).forEach(([m,w])=>{Object.entries(w).forEach(([_,v])=>{v>.05&&c.push({source:m,target:_,value:v})})});const h=Jf(u).force("link",Gf(c).id(m=>m.id).distance(150)).force("charge",Qf().strength(-500)).force("center",_f(a/2,d/2)).force("collide",Bf(50)),f=i.append("g").selectAll("line").data(c).join("line").attr("stroke","#0ea5e9").attr("stroke-opacity",m=>m.value).attr("stroke-width",m=>m.value*5),p=i.append("g").selectAll("g").data(u).join("g").call(Fs().on("start",b).on("drag",g).on("end",x));p.append("circle").attr("r",20).attr("fill","#0f172a").attr("stroke","#0ea5e9").attr("stroke-width",2),p.append("text").text(m=>m.id).attr("x",25).attr("y",5).attr("fill","#94a3b8").attr("font-size","12px").attr("font-family","monospace"),h.on("tick",()=>{f.attr("x1",m=>m.source.x).attr("y1",m=>m.source.y).attr("x2",m=>m.target.x).attr("y2",m=>m.target.y),p.attr("transform",m=>`translate(${m.x},${m.y})`)});function b(m){m.active||h.alphaTarget(.3).restart(),m.subject.fx=m.subject.x,m.subject.fy=m.subject.y}function g(m){m.subject.fx=m.x,m.subject.fy=m.y}function x(m){m.active||h.alphaTarget(0),m.subject.fx=null,m.subject.fy=null}},[r]),l.jsxs("div",{className:"h-[calc(100vh-8rem)] flex gap-6",children:[l.jsx("div",{className:"w-80 flex flex-col gap-4",children:l.jsxs(J,{title:"Evolutionary Lab",icon:Es,className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"text-xs text-[var(--hud-text-dim)] mb-4",children:["Observing Generation ",l.jsx("span",{className:"text-[var(--hud-accent)] font-mono",children:t.length>0?t[0].generation:0})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-2",children:t.map(i=>l.jsxs("div",{onClick:()=>s(i),className:`p-3 rounded border cursor-pointer transition-all ${r?.id===i.id?"bg-[var(--hud-accent)]/10 border-[var(--hud-accent)] shadow-[0_0_10px_var(--hud-accent)]":"bg-black border-[var(--hud-border)] hover:border-[var(--hud-text)]"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"text-xs font-mono text-[var(--hud-text-dim)]",children:["Gen ",i.generation]}),l.jsxs("span",{className:"text-xs font-bold text-[var(--hud-success)]",children:["Fit: ",Math.round(i.fitness||0)]})]}),l.jsx("div",{className:"text-[10px] text-[var(--hud-text-dim)] truncate font-mono",children:i.id.split("-").pop()}),l.jsx("div",{className:"mt-2 flex gap-1 overflow-hidden opacity-50",children:i.phenotype?.slice(0,5).map((a,d)=>l.jsx("div",{className:"w-1 h-3 rounded-full bg-[var(--hud-text-dim)]",title:a},d))})]},i.id))})]})}),l.jsx("div",{className:"flex-1 flex flex-col gap-6",children:l.jsxs(J,{className:"flex-1 relative overflow-hidden p-0",children:[l.jsxs("div",{className:"absolute top-4 left-4 z-10 pointer-events-none",children:[l.jsxs("h1",{className:"text-xl font-bold text-white tracking-tight flex items-center gap-2",children:[l.jsx(Qe,{size:20,className:"text-[var(--hud-accent)]"}),"Genome Visualization"]}),l.jsx("p",{className:"text-[var(--hud-text-dim)] text-xs font-mono",children:"Markov Chain Probability Matrix"})]}),l.jsx("svg",{ref:o,className:"w-full h-full cursor-grab active:cursor-grabbing bg-black/50"}),l.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/80 backdrop-blur border border-[var(--hud-border)] p-4 rounded max-w-xs text-xs text-[var(--hud-text-dim)]",children:[l.jsx("h3",{className:"text-white font-bold mb-2",children:"Structure Analysis"}),l.jsxs("p",{className:"mb-2 leading-relaxed",children:["Thicker lines indicate higher transition probability. This genome favors ",l.jsx("span",{className:"text-[var(--hud-accent)]",children:"L1  L3"})," transitions."]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--hud-accent)]"}),l.jsx("span",{children:"High Probability"})]})]})]})})]})}function n0(){const[e,t]=N.useState("activity"),[n,r]=N.useState([]),[s,o]=N.useState(!1),[i,a]=N.useState(""),[d,u]=N.useState(null);N.useEffect(()=>{e==="inspector"&&c()},[e]);const c=async()=>{o(!0);try{const p=await(await fetch("/api/explorer/nodes?limit=50")).json();p.nodes&&r(p.nodes)}catch(f){console.error(f)}finally{o(!1)}},h=async()=>{if(i.trim()){o(!0);try{const p=await(await fetch("/api/embeddings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i})})).json();u(p)}catch(f){u({error:f.message})}finally{o(!1)}}};return l.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col gap-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("div",{className:"flex gap-2 bg-black/50 p-1 rounded-lg border border-[var(--hud-border)]",children:[{id:"activity",label:"Cache Activity",icon:Qe},{id:"inspector",label:"Cache Inspector",icon:zn},{id:"embeddings",label:"Vector Lab",icon:jr}].map(f=>l.jsxs("button",{onClick:()=>t(f.id),className:`px-4 py-2 rounded flex items-center gap-2 text-sm font-bold transition-all ${e===f.id?"bg-[var(--hud-accent)] text-black shadow-[0_0_10px_var(--hud-accent)]":"text-[var(--hud-text-dim)] hover:text-white hover:bg-[rgba(255,255,255,0.05)]"}`,children:[l.jsx(f.icon,{size:16}),f.label]},f.id))})}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[e==="activity"&&l.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4",children:[l.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs(J,{className:"bg-[rgba(0,255,128,0.05)] border-[var(--hud-success)]",children:[l.jsx("div",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Global Hit Rate"}),l.jsx("div",{className:"text-3xl font-mono font-bold text-[var(--hud-success)]",children:"94.2%"}),l.jsxs("div",{className:"text-xs text-[var(--hud-success)] mt-2 flex items-center gap-1",children:[l.jsx(Jn,{size:12,className:"-rotate-45"})," +2.4% this week"]})]}),l.jsxs(J,{children:[l.jsx("div",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Data Cached"}),l.jsx("div",{className:"text-3xl font-mono font-bold text-white",children:"4.2 TB"})]}),l.jsxs(J,{children:[l.jsx("div",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Requests Served"}),l.jsx("div",{className:"text-3xl font-mono font-bold text-[var(--hud-accent)]",children:"8.4M"})]}),l.jsxs(J,{children:[l.jsx("div",{className:"text-[var(--hud-text-dim)] text-xs uppercase tracking-wider mb-1",children:"Avg Latency"}),l.jsx("div",{className:"text-3xl font-mono font-bold text-[var(--hud-accent-secondary)]",children:"12ms"})]})]}),l.jsxs(J,{title:"Throughput Analysis",className:"lg:col-span-2",children:[l.jsx("div",{className:"h-64 flex items-end justify-between gap-2 px-4 pb-4 border-b border-[var(--hud-border)]",children:[40,65,45,80,55,90,70].map((f,p)=>l.jsx("div",{className:"w-full bg-[var(--hud-accent)]/20 hover:bg-[var(--hud-accent)]/40 transition-colors rounded-t relative group",style:{height:`${f}%`},children:l.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-black border border-[var(--hud-border)] px-2 py-1 text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10",children:[f*100," req/s"]})},p))}),l.jsxs("div",{className:"flex justify-between mt-2 text-xs text-[var(--hud-text-dim)] font-mono px-4",children:[l.jsx("span",{children:"MON"}),l.jsx("span",{children:"TUE"}),l.jsx("span",{children:"WED"}),l.jsx("span",{children:"THU"}),l.jsx("span",{children:"FRI"}),l.jsx("span",{children:"SAT"}),l.jsx("span",{children:"SUN"})]})]}),l.jsx(J,{title:"Top Agents",className:"lg:col-span-1",children:l.jsx(sn,{columns:[{header:"Agent",accessor:"agent"},{header:"Ops/Sec",accessor:"ops",render:f=>l.jsx("span",{className:"text-[var(--hud-success)] font-mono",children:f.ops})}],data:[{agent:"Clinical-Bot-1",ops:"1,204"},{agent:"Trading-Alpha",ops:"940"},{agent:"Legal-Reviewer",ops:"850"},{agent:"Support-Swarm",ops:"420"}]})})]}),e==="inspector"&&l.jsx(J,{title:"Global Knowledge Graph",icon:zn,className:"h-full flex flex-col animate-in fade-in slide-in-from-bottom-4",children:l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx(sn,{columns:[{header:"ID",accessor:"id",render:f=>l.jsxs("span",{className:"font-mono text-xs text-[var(--hud-text-dim)]",children:[f.id.substring(0,8),"..."]})},{header:"Prompt / Query",accessor:"prompt",render:f=>l.jsx("span",{className:"text-white truncate max-w-[300px] block",children:f.prompt})},{header:"Vector",accessor:"embedding",render:f=>l.jsxs("span",{className:"font-mono text-xs text-[var(--hud-accent)]",children:["[",f.embedding?.length||1536," dims]"]})},{header:"Verified",accessor:"lastVerifiedAt",render:f=>l.jsx("span",{className:"text-xs text-[var(--hud-text-dim)]",children:new Date(f.lastVerifiedAt).toLocaleDateString()})}],data:n}),s&&l.jsx("div",{className:"p-4 text-center text-[var(--hud-accent)] animate-pulse",children:"Scanning Neural Lattice..."})]})}),e==="embeddings"&&l.jsxs("div",{className:"h-full grid grid-cols-1 lg:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-4",children:[l.jsx(J,{title:"Vector Laboratory",icon:jr,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-[var(--hud-text-dim)] uppercase tracking-wider mb-2 block",children:"Input Text"}),l.jsx("textarea",{value:i,onChange:f=>a(f.target.value),className:"w-full h-32 bg-black border border-[var(--hud-border)] rounded p-3 text-sm focus:border-[var(--hud-accent)] focus:outline-none transition-colors",placeholder:"Enter text to vectorize..."})]}),l.jsxs("button",{onClick:h,disabled:s,className:"btn-cyber btn-cyber-primary w-full py-3 font-bold flex items-center justify-center gap-2",children:[s?l.jsx(Rn,{className:"animate-spin",size:16}):l.jsx(Rn,{size:16}),"GENERATE VECTOR"]})]})}),l.jsx(J,{title:"Vector Output",className:"font-mono text-xs",children:d?l.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-[rgba(255,255,255,0.05)]",children:[l.jsx("span",{className:"text-[var(--hud-text-dim)]",children:"Status"}),l.jsx("span",{className:d.cached?"text-[var(--hud-success)]":"text-[var(--hud-warning)]",children:d.cached?"CACHE HIT":"CACHE MISS"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[var(--hud-text-dim)] mb-1",children:"Vector Preview (First 50 dims)"}),l.jsxs("div",{className:"p-3 rounded bg-black border border-[var(--hud-border)] text-[var(--hud-accent)] break-all leading-relaxed",children:["[",d.embedding?.slice(0,50).map(f=>f.toFixed(4)).join(", "),"...]"]})]})]}):l.jsx("div",{className:"h-full flex items-center justify-center text-[var(--hud-text-dim)] italic",children:"Waiting for input..."})})]})]})]})}const r0=[{id:"Darwin",icon:"",label:"Darwin",desc:"Survival of the fittest. High mutation, ruthless culling.",color:"text-orange-400",border:"border-orange-500/50",bg:"bg-orange-500/10"},{id:"Utopia",icon:"",label:"Utopia",desc:"High cooperation, shared rewards, altruistic caching.",color:"text-cyan-400",border:"border-cyan-500/50",bg:"bg-cyan-500/10"},{id:"WallStreet",icon:"",label:"Wall Street",desc:"Profit maximization. High competition for tokens.",color:"text-emerald-400",border:"border-emerald-500/50",bg:"bg-emerald-500/10"},{id:"ArtistColony",icon:"",label:"Artist Colony",desc:"High temperature, novelty seeking, creative risks.",color:"text-pink-400",border:"border-pink-500/50",bg:"bg-pink-500/10"},{id:"DoomerPrepper",icon:"",label:"Doomer Prepper",desc:"Extreme safety, redundancy, low risk tolerance.",color:"text-slate-400",border:"border-slate-500/50",bg:"bg-slate-500/10"}];function s0(){const{token:e}=wt(),[t,n]=N.useState(null),[r,s]=N.useState(null),[o,i]=N.useState(!0),[a,d]=N.useState(!1);N.useEffect(()=>{if(!e)return;(async()=>{try{const h={Authorization:`Bearer ${e}`},[f,p,b,g]=await Promise.all([fetch("/api/governance/org",{headers:h}),fetch("/api/governance/members",{headers:h}),fetch("/api/governance/keys",{headers:h}),fetch("/api/governance/presets",{headers:h})]);if(!f.ok)throw new Error("Failed to fetch org data");const x=await f.json(),m=await p.json(),w=await b.json(),_=await g.json();s({...x,members:m.members||[],apiKeys:w.apiKeys||[]}),n(_.mode||"Default")}catch(h){console.error("Failed to fetch governance data:",h)}finally{i(!1)}})()},[e]);const u=async c=>{d(!0);try{(await fetch("/api/governance/presets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:c,parameters:{timestamp:Date.now()}})})).ok&&n(c)}catch(h){console.error("Failed to switch mode:",h)}finally{d(!1)}};return o?l.jsx("div",{className:"p-8 text-slate-400",children:"Loading governance data..."}):l.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[l.jsxs("header",{className:"mb-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Governance"}),l.jsxs("p",{className:"text-slate-400",children:["Organization settings, access control, and ",l.jsx("span",{className:"text-purple-400",children:"Reality Switching"}),"."]})]}),l.jsxs("section",{className:"mb-12",children:[l.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx("span",{className:"text-purple-500",children:""})," Reality Switcher",l.jsx("span",{className:"text-xs font-normal text-slate-500 ml-2 border border-slate-700 px-2 py-0.5 rounded",children:"Global Simulation Parameters"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r0.map(c=>{const h=t===c.id;return l.jsxs("button",{onClick:()=>u(c.id),disabled:a,className:`relative p-4 rounded-xl border text-left transition-all ${h?`${c.bg} ${c.border} shadow-[0_0_20px_rgba(0,0,0,0.3)] scale-[1.02]`:"bg-slate-900/40 border-slate-800 hover:border-slate-600 hover:bg-slate-800/60"}`,children:[h&&l.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.8)]"}),l.jsx("div",{className:"text-2xl mb-2",children:c.icon}),l.jsx("div",{className:`font-bold mb-1 ${h?"text-white":"text-slate-300"}`,children:c.label}),l.jsx("div",{className:"text-xs text-slate-500 leading-relaxed",children:c.desc})]},c.id)})})]}),l.jsx("div",{className:"border-t border-slate-800/50 my-8"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:r.name}),l.jsxs("div",{className:"text-sm text-slate-500 font-mono mt-1",children:["ID: ",r.id]})]}),l.jsxs("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-xs font-bold border border-purple-500/30",children:[r.plan.toUpperCase()," PLAN"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 bg-slate-950 rounded-lg border border-slate-800",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Your Role"}),l.jsx("div",{className:"font-semibold text-green-400",children:r.role})]}),l.jsxs("div",{className:"p-4 bg-slate-950 rounded-lg border border-slate-800",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Region"}),l.jsx("div",{className:"font-semibold text-white",children:"US-East (N. Virginia)"})]})]})]}),l.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Compliance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx($n,{label:"SOC 2 Type II",status:"active"}),l.jsx($n,{label:"GDPR",status:"active"}),l.jsx($n,{label:"HIPAA",status:"pending"})]})]})]}),l.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Team Members"}),l.jsx("button",{className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Invite Member"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-800 text-slate-400",children:[l.jsx("th",{className:"pb-3 pl-2",children:"User"}),l.jsx("th",{className:"pb-3",children:"Role"}),l.jsx("th",{className:"pb-3",children:"2FA"}),l.jsx("th",{className:"pb-3 text-right pr-2",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-800",children:r.members.map(c=>l.jsxs("tr",{className:"group hover:bg-slate-800/30 transition-colors",children:[l.jsxs("td",{className:"py-3 pl-2",children:[l.jsx("div",{className:"font-medium text-white",children:c.name}),l.jsx("div",{className:"text-slate-500",children:c.email})]}),l.jsx("td",{className:"py-3",children:l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize
                      ${c.role==="owner"?"bg-purple-500/10 text-purple-400":c.role==="admin"?"bg-blue-500/10 text-blue-400":"bg-slate-700/50 text-slate-400"}`,children:c.role})}),l.jsx("td",{className:"py-3",children:l.jsx("span",{className:"text-green-400",children:"Enabled"})}),l.jsx("td",{className:"py-3 text-right pr-2",children:l.jsx("button",{className:"text-slate-500 hover:text-white",children:""})})]},c.id))})]})})]}),l.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Active API Keys"}),l.jsx("div",{className:"space-y-3",children:r.apiKeys.map((c,h)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-950 rounded-lg border border-slate-800",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded bg-slate-900 flex items-center justify-center text-slate-400",children:""}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-mono text-sm text-white",children:[c.prefix,"****************"]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Created ",c.created]})]})]}),l.jsx("div",{className:"flex gap-2",children:c.scopes.map(f=>l.jsx("span",{className:"px-2 py-1 bg-slate-800 text-slate-300 text-xs rounded border border-slate-700",children:f},f))})]},h))})]})]})}function $n({label:e,status:t}){const n={active:"bg-green-500",pending:"bg-yellow-500",inactive:"bg-slate-500"};return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-slate-300",children:e}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${n[t]}`}),l.jsx("span",{className:"text-xs text-slate-500 capitalize",children:t})]})]})}const bs={healthcare:[{id:"patient_records",title:" Patient Records",description:"Cache medical records with HIPAA compliance",prompt:"Cache patient medical records with HIPAA compliance and PHI detection",nodes:["input","phi_filter","cache_l1","cache_l2","hipaa_audit","openai","output"]},{id:"clinical_decision",title:" Clinical Decision Support",description:"AI-powered diagnosis with audit trails",prompt:"Cache clinical decision support AI with full audit logging",nodes:["input","phi_filter","cache_l1","anthropic","hipaa_audit","output"]},{id:"ehr_integration",title:" EHR Integration",description:"Electronic health record system caching",prompt:"Cache EHR system queries with encryption and compliance",nodes:["input","cache_l1","cache_l2","phi_filter","hipaa_audit","output"]},{id:"custom",title:" Custom Healthcare",description:"Describe your own healthcare use case",prompt:"",nodes:[]}],finance:[{id:"risk_analysis",title:" Risk Analysis",description:"Fraud detection and risk scoring",prompt:"Cache risk analysis and fraud detection for financial transactions",nodes:["input","fraud_detector","cache_l1","cache_l2","openai","pci_audit","output"]},{id:"transaction_processing",title:" Transaction Processing",description:"High-speed payment validation",prompt:"Cache transaction validation with PCI-DSS compliance",nodes:["input","transaction_validator","cache_l1","pci_audit","output"]},{id:"kyc_compliance",title:" KYC Compliance",description:"Know Your Customer verification",prompt:"Cache KYC verification results with audit trail",nodes:["input","cache_l1","cache_l2","anthropic","pci_audit","output"]},{id:"custom",title:" Custom Finance",description:"Describe your own financial use case",prompt:"",nodes:[]}],legal:[{id:"document_analysis",title:" Document Analysis",description:"Legal document review and search",prompt:"Cache legal document analysis with retention policies",nodes:["input","cache_l1","cache_l2","anthropic","retention_policy","output"]},{id:"case_research",title:" Case Research",description:"Case law and precedent lookup",prompt:"Cache case law research with audit logging",nodes:["input","semantic_dedup","cache_l2","cache_l3","openai","audit_logger","output"]},{id:"custom",title:" Custom Legal",description:"Describe your own legal use case",prompt:"",nodes:[]}],ecommerce:[{id:"product_search",title:" Product Search",description:"Fast product catalog search",prompt:"Cache product search and recommendations",nodes:["input","cache_l1","semantic_dedup","openai","output"]},{id:"inventory_sync",title:" Inventory Sync",description:"Real-time inventory availability",prompt:"Cache inventory status with short TTL for freshness",nodes:["input","cache_l1","output"]},{id:"personalization",title:" Personalization",description:"User recommendations and preferences",prompt:"Cache personalized recommendations per user",nodes:["input","cache_l1","cache_l2","gemini","output"]},{id:"custom",title:" Custom E-commerce",description:"Describe your own e-commerce use case",prompt:"",nodes:[]}],saas:[{id:"api_caching",title:" API Caching",description:"Multi-tenant API response caching",prompt:"Cache API responses with tenant isolation",nodes:["input","cache_l1","cache_l2","output"]},{id:"ai_features",title:" AI Features",description:"AI-powered product features",prompt:"Cache AI completions for SaaS features",nodes:["input","semantic_dedup","cache_l1","cache_l2","openai","output"]},{id:"analytics",title:" Analytics",description:"Dashboard data aggregation",prompt:"Cache analytics queries and dashboard data",nodes:["input","cache_l2","cache_l3","output"]},{id:"custom",title:" Custom SaaS",description:"Describe your own SaaS use case",prompt:"",nodes:[]}],general:[{id:"api_basic",title:" API Caching",description:"Basic API response caching",prompt:"Cache API responses to reduce latency",nodes:["input","cache_l1","cache_l2","output"]},{id:"llm_caching",title:" LLM Caching",description:"Cache AI model responses",prompt:"Cache LLM completions to save costs",nodes:["input","semantic_dedup","cache_l1","cache_l2","openai","output"]},{id:"database",title:" Database Query",description:"Cache expensive database queries",prompt:"Cache database query results",nodes:["input","cache_l1","cache_l2","cache_l3","output"]},{id:"custom",title:" Custom",description:"Describe your own use case",prompt:"",nodes:[]}]},ws={healthcare:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup","phi_filter"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["hipaa_audit","encrypted_cache"]},{category:"output",types:["output"]}],finance:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup","fraud_detector","transaction_validator"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["pci_audit","sox_logger"]},{category:"output",types:["output"]}],legal:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["retention_policy","audit_logger"]},{category:"output",types:["output"]}],ecommerce:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}],saas:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}],general:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}]},Ns={healthcare:{required:["hipaa","phi"],autoAddNodes:["phi_filter","hipaa_audit"],retention:"7 years",encryption:"required"},finance:{required:["pci_dss","sox"],autoAddNodes:["pci_audit"],retention:"7 years",encryption:"required"},legal:{required:["data_retention"],autoAddNodes:["retention_policy","audit_logger"],retention:"10 years",encryption:"recommended"},ecommerce:{required:["pci_dss","gdpr"],autoAddNodes:[],retention:"2 years",encryption:"recommended"},saas:{required:["soc2"],autoAddNodes:[],retention:"1 year",encryption:"recommended"},general:{required:[],autoAddNodes:[],retention:"30 days",encryption:"optional"}};function _s(e){return{templates:bs[e]||bs.general,nodes:ws[e]||ws.general,compliance:Ns[e]||Ns.general}}const o0=N.createContext();function i0({children:e}){const[t,n]=N.useState(null),[r,s]=N.useState(null),[o,i]=N.useState(!1);N.useEffect(()=>{const u=localStorage.getItem("agentcache_sector");u?(n(u),s(_s(u))):i(!0)},[]);const a=u=>{n(u),s(_s(u)),localStorage.setItem("agentcache_sector",u),i(!1)},d=()=>{i(!0)};return l.jsx(o0.Provider,{value:{sector:t,config:r,selectSector:a,changeSector:d,showSectorModal:o,setShowSectorModal:i},children:e})}function a0(){const{login:e}=wt(),[t,n]=N.useState(""),[r,s]=N.useState(!1),[o,i]=N.useState(null),a=async d=>{d.preventDefault(),s(!0),i(null),await e(t)||i("Login failed. Please try again."),s(!1)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:l.jsx("div",{className:"w-full max-w-md p-6",children:l.jsx(J,{title:"Mission Control Access",icon:oa,className:"border-[var(--hud-accent)] shadow-[0_0_50px_rgba(0,243,255,0.2)]",children:l.jsxs("form",{onSubmit:a,className:"space-y-6 mt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-mono text-[var(--hud-text-dim)] mb-2",children:"OPERATOR ID (EMAIL)"}),l.jsx("input",{type:"email",value:t,onChange:d=>n(d.target.value),placeholder:"alice@acme.com",className:"w-full bg-black border border-[var(--hud-border)] rounded p-3 text-white focus:border-[var(--hud-accent)] focus:outline-none transition-colors",required:!0})]}),o&&l.jsx("div",{className:"text-red-500 text-xs font-mono border border-red-500/50 bg-red-500/10 p-2 rounded",children:o}),l.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 bg-[var(--hud-accent)] text-black font-bold rounded hover:bg-white transition-colors flex items-center justify-center gap-2",children:r?"AUTHENTICATING...":l.jsxs(l.Fragment,{children:["ENTER CONSOLE ",l.jsx(Jn,{size:16})]})}),l.jsx("div",{className:"text-center text-[10px] text-[var(--hud-text-dim)] font-mono",children:"SECURE TERMINAL // AUTHORIZED PERSONNEL ONLY"})]})})})})}const c0=()=>{const[e,t]=N.useState("overview"),{user:n,loading:r}=wt();if(r)return l.jsx("div",{className:"h-screen flex items-center justify-center text-[var(--hud-accent)] font-mono",children:"INITIALIZING..."});if(!n)return l.jsx(a0,{});const s=()=>{switch(e){case"overview":return l.jsx(kr,{});case"pipeline":return l.jsx(vf,{});case"swarm":return l.jsx(wf,{});case"observability":return l.jsx(Nf,{});case"lab":return l.jsx(t0,{});case"data":return l.jsx(n0,{});case"governance":return l.jsx(s0,{});default:return l.jsx(kr,{})}};return l.jsx(i0,{children:l.jsxs("div",{className:"flex h-screen bg-[var(--hud-bg)] text-[var(--hud-text)] overflow-hidden font-sans selection:bg-[var(--hud-accent)] selection:text-black",children:[l.jsx(Ia,{activeView:e,setActiveView:t,user:n}),l.jsxs("div",{className:"flex-1 flex flex-col pl-16 transition-all duration-300",children:[l.jsx(Ta,{}),l.jsxs("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pt-16 p-6 relative",children:[l.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 opacity-20",style:{backgroundImage:"linear-gradient(rgba(0, 243, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 243, 255, 0.05) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),l.jsx("div",{className:"relative z-10 max-w-7xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:s()})]})]})]})})},l0=()=>l.jsx(bf,{children:l.jsx(c0,{})});$i.createRoot(document.getElementById("root")).render(l.jsx(k.StrictMode,{children:l.jsx(l0,{})}));
