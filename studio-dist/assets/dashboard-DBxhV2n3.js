import"./modulepreload-polyfill-B5Qt9EMX.js";import{j as e,r as o,R as O,a as G}from"./client-BeBNXGLe.js";function K({activeView:t,onViewChange:i}){const s=[{id:"overview",label:"Overview",icon:"ðŸ“Š"},{id:"pipelines",label:"Pipelines",icon:"âš¡"},{id:"swarm",label:"Swarm",icon:"ðŸŒŒ"},{id:"data",label:"Data Explorer",icon:"ðŸ’¾"},{id:"governance",label:"Governance",icon:"âš–ï¸"}];return e.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-800 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent",children:"AgentCache"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Mission Control"})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:s.map(a=>e.jsxs("button",{onClick:()=>i(a.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${t===a.id?"bg-green-500/10 text-green-400 border border-green-500/20":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}`,children:[e.jsx("span",{children:a.icon}),a.label]},a.id))}),e.jsx("div",{className:"p-4 border-t border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-xs font-bold text-white",children:"AC"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Admin"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Pro Plan"})]})]})})]})}function k(){const[t,i]=o.useState(null),[s,a]=o.useState(!0);return o.useEffect(()=>{const n=async()=>{try{const r=localStorage.getItem("ac_api_key");if(!r)return;const c=await fetch("/api/stats",{headers:{"X-API-Key":r}});if(c.ok){const u=await c.json();i(u)}}catch(r){console.error(r)}finally{a(!1)}};n();const l=setInterval(n,5e3);return()=>clearInterval(l)},[]),s?e.jsx("div",{className:"p-8 text-slate-400",children:"Loading stats..."}):e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Overview"}),e.jsx("p",{className:"text-slate-400",children:"Real-time platform metrics"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 flex flex-col items-center justify-center relative overflow-hidden",children:[e.jsx("h3",{className:"text-slate-400 text-sm font-medium absolute top-6 left-6",children:"Cache Hit Rate"}),e.jsxs("div",{className:"relative w-48 h-24 mt-8",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 200 100",children:[e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"#1e293b",strokeWidth:"20",strokeLinecap:"round"}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"#4ade80",strokeWidth:"20",strokeLinecap:"round",strokeDasharray:"251.2",strokeDashoffset:251.2*(1-(t?.hitRate||0)/100),className:"transition-all duration-1000 ease-out"})]}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 text-center",children:e.jsxs("div",{className:"text-4xl font-bold text-white",children:[t?.hitRate||0,"%"]})})]}),e.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:[t?.hits||0," hits / ",t?.misses||0," misses"]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-slate-400 text-sm font-medium mb-4",children:"Request Traffic (24h)"}),e.jsx("div",{className:"h-48 w-full flex items-end gap-1",children:[...Array(24)].map((n,l)=>{const r=Math.random()*80+20;return e.jsx("div",{className:"flex-1 bg-slate-800 hover:bg-cyan-500/50 transition-colors rounded-t-sm relative group",style:{height:`${r}%`},children:e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-slate-900 text-xs text-white px-2 py-1 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-10 border border-slate-700",children:[Math.floor(r*10)," reqs"]})},l)})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-600 mt-2",children:[e.jsx("span",{children:"24h ago"}),e.jsx("span",{children:"12h ago"}),e.jsx("span",{children:"Now"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(_,{label:"Requests Today",value:t?.requestsToday||0,sub:`${(t?.monthlyQuota||1e4)-(t?.used||0)} remaining`,icon:"ðŸ“‰"}),e.jsx(_,{label:"Money Saved",value:`$${(t?.costSaved||0).toFixed(2)}`,valueColor:"text-green-400",sub:"This month",icon:"ðŸ’°"}),e.jsx(_,{label:"Avg Latency",value:`${t?.avgLatency||0}ms`,valueColor:"text-cyan-400",sub:`P95: ${t?.latencyP95||0}ms`,icon:"âš¡"})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Cache Freshness Distribution"}),e.jsxs("div",{className:"flex h-4 rounded-full overflow-hidden mb-4",children:[e.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${(t?.freshness?.fresh||0)/((t?.freshness?.fresh||1)+(t?.freshness?.stale||0)+(t?.freshness?.expired||0))*100}%`}}),e.jsx("div",{className:"bg-yellow-500 h-full transition-all duration-500",style:{width:`${(t?.freshness?.stale||0)/((t?.freshness?.fresh||1)+(t?.freshness?.stale||0)+(t?.freshness?.expired||0))*100}%`}}),e.jsx("div",{className:"bg-red-500 h-full transition-all duration-500",style:{width:`${(t?.freshness?.expired||0)/((t?.freshness?.fresh||1)+(t?.freshness?.stale||0)+(t?.freshness?.expired||0))*100}%`}})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:t?.freshness?.fresh||0}),e.jsx("div",{className:"text-xs text-slate-400",children:"Fresh"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:t?.freshness?.stale||0}),e.jsx("div",{className:"text-xs text-slate-400",children:"Stale"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:t?.freshness?.expired||0}),e.jsx("div",{className:"text-xs text-slate-400",children:"Expired"})]})]})]})]})}function _({label:t,value:i,sub:s,valueColor:a="text-white",icon:n}){return e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 relative overflow-hidden group hover:border-slate-700 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity text-4xl grayscale",children:n}),e.jsx("div",{className:"text-sm text-slate-400 mb-2",children:t}),e.jsx("div",{className:`text-3xl font-bold mb-1 ${a}`,children:i}),e.jsx("div",{className:"text-xs text-slate-500",children:s})]})}function B(){const[t,i]=o.useState([]),[s,a]=o.useState([]),[n,l]=o.useState(null);return o.useEffect(()=>{i([{rank:1,name:"Alpha-Zero-Cache",score:9850,sector:"Finance"},{rank:2,name:"Medi-Bot-V9",score:8720,sector:"Healthcare"},{rank:3,name:"Deep-Seeker",score:8100,sector:"Research"}]);const r=setInterval(()=>{const c={id:Date.now(),agent:["Alpha","Beta","Gamma"][Math.floor(Math.random()*3)],pattern:"L1-L3-Hybrid",improvement:Math.floor(Math.random()*20)+5,time:new Date().toLocaleTimeString()};a(u=>[c,...u].slice(0,5))},5e3);return l({status:"Running Experiment #8492",progress:45,target:"Optimize Latency (Healthcare)"}),()=>clearInterval(r)},[]),e.jsxs("div",{className:"relative w-full h-full bg-black overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl animate-pulse",children:"ðŸŒŒ"}),e.jsx("p",{className:"mt-4",children:"Neural Galaxy Visualization"})]})})}),e.jsx("div",{className:"absolute top-6 left-6 z-10 w-80",children:e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-xs font-bold text-sky-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"animate-pulse",children:"â—"})," Live Discoveries"]}),e.jsxs("div",{className:"space-y-3",children:[s.map(r=>e.jsxs("div",{className:"text-xs border-l-2 border-emerald-500 pl-3 animate-in slide-in-from-left duration-500",children:[e.jsxs("div",{className:"text-slate-300 font-medium",children:[r.agent," found pattern"]}),e.jsxs("div",{className:"text-emerald-400",children:["+",r.improvement,"% Efficiency"]}),e.jsx("div",{className:"text-slate-600 text-[10px]",children:r.time})]},r.id)),s.length===0&&e.jsx("div",{className:"text-slate-500 text-xs italic",children:"Listening for signals..."})]})]})}),e.jsx("div",{className:"absolute top-6 right-6 z-10 w-64",children:e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-xs font-bold text-amber-400 uppercase tracking-wider mb-3",children:"ðŸ† Top Agents"}),e.jsx("div",{className:"space-y-2",children:t.map(r=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono text-slate-500",children:["#",r.rank]}),e.jsx("span",{className:"text-slate-200",children:r.name})]}),e.jsx("span",{className:"font-mono text-amber-500",children:r.score})]},r.rank))})]})}),e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-10 w-96",children:e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"ACTIVE EXPERIMENT"}),e.jsx("span",{className:"text-xs font-mono text-sky-400",children:"RUNNING"})]}),e.jsx("div",{className:"text-sm font-medium text-white mb-3",children:n?.target}),e.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-sky-500 to-emerald-500 transition-all duration-1000",style:{width:`${n?.progress}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-[10px] text-slate-500 font-mono",children:[e.jsx("span",{children:"STEP 4/10"}),e.jsxs("span",{children:[n?.progress,"% COMPLETE"]})]})]})})]})}function U(){const[t,i]=o.useState(""),[s,a]=o.useState(null),[n,l]=o.useState(!1),r=async()=>{if(t.trim()){l(!0),a(null);try{const c=localStorage.getItem("ac_api_key"),m=await(await fetch("/api/embeddings",{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":c||""},body:JSON.stringify({text:t})})).json();a(m)}catch(c){console.error(c),a({error:c.message})}finally{l(!1)}}};return e.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Data Explorer"}),e.jsx("p",{className:"text-slate-400",children:"Inspect L3 Cache and test Embeddings"})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Embedding Generator"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx("input",{type:"text",value:t,onChange:c=>i(c.target.value),placeholder:"Enter text to vectorize...",className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-green-500",onKeyDown:c=>c.key==="Enter"&&r()}),e.jsx("button",{onClick:r,disabled:n,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white font-semibold rounded-lg disabled:opacity-50",children:n?"Generating...":"Generate"})]}),s&&e.jsxs("div",{className:"bg-slate-950 rounded-lg p-4 border border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${s.cached?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:s.cached?"CACHE HIT":"CACHE MISS"}),e.jsx("span",{className:"text-xs text-slate-500",children:s.model})]}),s.embedding?e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Vector (first 5 dims):"}),e.jsxs("code",{className:"text-cyan-400 text-sm",children:["[",s.embedding.slice(0,5).map(c=>c.toFixed(4)).join(", "),", ...]"]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Total dimensions: ",s.embedding.length]})]}):e.jsx("div",{className:"text-red-400",children:s.error})]})]})]})}function J(){const[t,i]=o.useState(null),[s,a]=o.useState(!0);return o.useEffect(()=>{setTimeout(()=>{i({name:"Acme Corp",id:"org_123456789",plan:"Professional",role:"Owner",members:[{id:"u_1",name:"Alice Admin",email:"alice@acme.com",role:"owner"},{id:"u_2",name:"Bob Builder",email:"bob@acme.com",role:"member"},{id:"u_3",name:"Charlie Cache",email:"charlie@acme.com",role:"viewer"}],apiKeys:[{prefix:"ac_live_",created:"2025-11-01",scopes:["cache:read","cache:write"]},{prefix:"ac_test_",created:"2025-11-15",scopes:["cache:read"]}]}),a(!1)},800)},[]),s?e.jsx("div",{className:"p-8 text-slate-400",children:"Loading governance data..."}):e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Governance"}),e.jsx("p",{className:"text-slate-400",children:"Organization settings, access control, and security policies"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t.name}),e.jsxs("div",{className:"text-sm text-slate-500 font-mono mt-1",children:["ID: ",t.id]})]}),e.jsxs("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-xs font-bold border border-purple-500/30",children:[t.plan.toUpperCase()," PLAN"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-950 rounded-lg border border-slate-800",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Your Role"}),e.jsx("div",{className:"font-semibold text-green-400",children:t.role})]}),e.jsxs("div",{className:"p-4 bg-slate-950 rounded-lg border border-slate-800",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Region"}),e.jsx("div",{className:"font-semibold text-white",children:"US-East (N. Virginia)"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Compliance"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{label:"SOC 2 Type II",status:"active"}),e.jsx(S,{label:"GDPR",status:"active"}),e.jsx(S,{label:"HIPAA",status:"pending"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Team Members"}),e.jsx("button",{className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Invite Member"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-800 text-slate-400",children:[e.jsx("th",{className:"pb-3 pl-2",children:"User"}),e.jsx("th",{className:"pb-3",children:"Role"}),e.jsx("th",{className:"pb-3",children:"2FA"}),e.jsx("th",{className:"pb-3 text-right pr-2",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:t.members.map(n=>e.jsxs("tr",{className:"group hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"py-3 pl-2",children:[e.jsx("div",{className:"font-medium text-white",children:n.name}),e.jsx("div",{className:"text-slate-500",children:n.email})]}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize
                      ${n.role==="owner"?"bg-purple-500/10 text-purple-400":n.role==="admin"?"bg-blue-500/10 text-blue-400":"bg-slate-700/50 text-slate-400"}`,children:n.role})}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:"text-green-400",children:"Enabled"})}),e.jsx("td",{className:"py-3 text-right pr-2",children:e.jsx("button",{className:"text-slate-500 hover:text-white",children:"â€¢â€¢â€¢"})})]},n.id))})]})})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Active API Keys"}),e.jsx("div",{className:"space-y-3",children:t.apiKeys.map((n,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-950 rounded-lg border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-slate-900 flex items-center justify-center text-slate-400",children:"ðŸ”‘"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-mono text-sm text-white",children:[n.prefix,"****************"]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Created ",n.created]})]})]}),e.jsx("div",{className:"flex gap-2",children:n.scopes.map(r=>e.jsx("span",{className:"px-2 py-1 bg-slate-800 text-slate-300 text-xs rounded border border-slate-700",children:r},r))})]},l))})]})]})}function S({label:t,status:i}){const s={active:"bg-green-500",pending:"bg-yellow-500",inactive:"bg-slate-500"};return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s[i]}`}),e.jsx("span",{className:"text-xs text-slate-500 capitalize",children:i})]})]})}const D={healthcare:[{id:"patient_records",title:"âš•ï¸ Patient Records",description:"Cache medical records with HIPAA compliance",prompt:"Cache patient medical records with HIPAA compliance and PHI detection",nodes:["input","phi_filter","cache_l1","cache_l2","hipaa_audit","openai","output"]},{id:"clinical_decision",title:"ðŸ”¬ Clinical Decision Support",description:"AI-powered diagnosis with audit trails",prompt:"Cache clinical decision support AI with full audit logging",nodes:["input","phi_filter","cache_l1","anthropic","hipaa_audit","output"]},{id:"ehr_integration",title:"ðŸ¥ EHR Integration",description:"Electronic health record system caching",prompt:"Cache EHR system queries with encryption and compliance",nodes:["input","cache_l1","cache_l2","phi_filter","hipaa_audit","output"]},{id:"custom",title:"âœï¸ Custom Healthcare",description:"Describe your own healthcare use case",prompt:"",nodes:[]}],finance:[{id:"risk_analysis",title:"ðŸ“Š Risk Analysis",description:"Fraud detection and risk scoring",prompt:"Cache risk analysis and fraud detection for financial transactions",nodes:["input","fraud_detector","cache_l1","cache_l2","openai","pci_audit","output"]},{id:"transaction_processing",title:"ðŸ’³ Transaction Processing",description:"High-speed payment validation",prompt:"Cache transaction validation with PCI-DSS compliance",nodes:["input","transaction_validator","cache_l1","pci_audit","output"]},{id:"kyc_compliance",title:"ðŸ” KYC Compliance",description:"Know Your Customer verification",prompt:"Cache KYC verification results with audit trail",nodes:["input","cache_l1","cache_l2","anthropic","pci_audit","output"]},{id:"custom",title:"âœï¸ Custom Finance",description:"Describe your own financial use case",prompt:"",nodes:[]}],legal:[{id:"document_analysis",title:"ðŸ“„ Document Analysis",description:"Legal document review and search",prompt:"Cache legal document analysis with retention policies",nodes:["input","cache_l1","cache_l2","anthropic","retention_policy","output"]},{id:"case_research",title:"âš–ï¸ Case Research",description:"Case law and precedent lookup",prompt:"Cache case law research with audit logging",nodes:["input","semantic_dedup","cache_l2","cache_l3","openai","audit_logger","output"]},{id:"custom",title:"âœï¸ Custom Legal",description:"Describe your own legal use case",prompt:"",nodes:[]}],ecommerce:[{id:"product_search",title:"ðŸ” Product Search",description:"Fast product catalog search",prompt:"Cache product search and recommendations",nodes:["input","cache_l1","semantic_dedup","openai","output"]},{id:"inventory_sync",title:"ðŸ“¦ Inventory Sync",description:"Real-time inventory availability",prompt:"Cache inventory status with short TTL for freshness",nodes:["input","cache_l1","output"]},{id:"personalization",title:"âœ¨ Personalization",description:"User recommendations and preferences",prompt:"Cache personalized recommendations per user",nodes:["input","cache_l1","cache_l2","gemini","output"]},{id:"custom",title:"âœï¸ Custom E-commerce",description:"Describe your own e-commerce use case",prompt:"",nodes:[]}],saas:[{id:"api_caching",title:"ðŸ”Œ API Caching",description:"Multi-tenant API response caching",prompt:"Cache API responses with tenant isolation",nodes:["input","cache_l1","cache_l2","output"]},{id:"ai_features",title:"ðŸ¤– AI Features",description:"AI-powered product features",prompt:"Cache AI completions for SaaS features",nodes:["input","semantic_dedup","cache_l1","cache_l2","openai","output"]},{id:"analytics",title:"ðŸ“Š Analytics",description:"Dashboard data aggregation",prompt:"Cache analytics queries and dashboard data",nodes:["input","cache_l2","cache_l3","output"]},{id:"custom",title:"âœï¸ Custom SaaS",description:"Describe your own SaaS use case",prompt:"",nodes:[]}],general:[{id:"api_basic",title:"ðŸ”Œ API Caching",description:"Basic API response caching",prompt:"Cache API responses to reduce latency",nodes:["input","cache_l1","cache_l2","output"]},{id:"llm_caching",title:"ðŸ¤– LLM Caching",description:"Cache AI model responses",prompt:"Cache LLM completions to save costs",nodes:["input","semantic_dedup","cache_l1","cache_l2","openai","output"]},{id:"database",title:"ðŸ—„ï¸ Database Query",description:"Cache expensive database queries",prompt:"Cache database query results",nodes:["input","cache_l1","cache_l2","cache_l3","output"]},{id:"custom",title:"âœï¸ Custom",description:"Describe your own use case",prompt:"",nodes:[]}]},M={healthcare:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup","phi_filter"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["hipaa_audit","encrypted_cache"]},{category:"output",types:["output"]}],finance:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup","fraud_detector","transaction_validator"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["pci_audit","sox_logger"]},{category:"output",types:["output"]}],legal:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["retention_policy","audit_logger"]},{category:"output",types:["output"]}],ecommerce:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}],saas:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}],general:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}]},$={healthcare:{required:["hipaa","phi"],autoAddNodes:["phi_filter","hipaa_audit"],retention:"7 years",encryption:"required"},finance:{required:["pci_dss","sox"],autoAddNodes:["pci_audit"],retention:"7 years",encryption:"required"},legal:{required:["data_retention"],autoAddNodes:["retention_policy","audit_logger"],retention:"10 years",encryption:"recommended"},ecommerce:{required:["pci_dss","gdpr"],autoAddNodes:[],retention:"2 years",encryption:"recommended"},saas:{required:["soc2"],autoAddNodes:[],retention:"1 year",encryption:"recommended"},general:{required:[],autoAddNodes:[],retention:"30 days",encryption:"optional"}};function R(t){return{templates:D[t]||D.general,nodes:M[t]||M.general,compliance:$[t]||$.general}}const T=o.createContext();function W({children:t}){const[i,s]=o.useState(null),[a,n]=o.useState(null),[l,r]=o.useState(!1);o.useEffect(()=>{const m=localStorage.getItem("agentcache_sector");m?(s(m),n(R(m))):r(!0)},[]);const c=m=>{s(m),n(R(m)),localStorage.setItem("agentcache_sector",m),r(!1)},u=()=>{r(!0)};return e.jsx(T.Provider,{value:{sector:i,config:a,selectSector:c,changeSector:u,showSectorModal:l,setShowSectorModal:r},children:t})}function Y(){const t=o.useContext(T);if(!t)throw new Error("useSector must be used within SectorProvider");return t}class x extends Error{constructor(i,s=null){super(i),this.name="ValidationError",this.field=s}}function L(t){if(!t||typeof t!="object")throw new x("Pipeline must be an object");if(!t.name||typeof t.name!="string")throw new x("Pipeline must have a valid name","name");if(t.name.length>255)throw new x("Pipeline name must be less than 255 characters","name");if(!Array.isArray(t.nodes))throw new x("Pipeline must have a nodes array","nodes");if(t.nodes.length===0)throw new x("Pipeline must have at least one node","nodes");if(!Array.isArray(t.edges))throw new x("Pipeline must have an edges array","edges");const i=new Set;for(const a of t.nodes){if(!a.id)throw new x("All nodes must have an ID","nodes");if(i.has(a.id))throw new x(`Duplicate node ID found: ${a.id}`,"nodes");i.add(a.id)}for(const a of t.edges){if(!a.source||!a.target)throw new x("All edges must have source and target","edges");if(!i.has(a.source))throw new x(`Edge references non-existent source node: ${a.source}`,"edges");if(!i.has(a.target))throw new x(`Edge references non-existent target node: ${a.target}`,"edges")}if(X(t.nodes,t.edges))throw new x("Pipeline contains circular dependencies","edges");const s=["healthcare","finance","legal","ecommerce","saas","general"];if(t.sector&&!s.includes(t.sector))throw new x(`Invalid sector: ${t.sector}`,"sector");return!0}function X(t,i){const s={};t.forEach(r=>{s[r.id]=[]}),i.forEach(r=>{s[r.source].push(r.target)});const a=new Set,n=new Set;function l(r){a.add(r),n.add(r);for(const c of s[r]||[])if(a.has(c)){if(n.has(c))return!0}else if(l(c))return!0;return n.delete(r),!1}for(const r of Object.keys(s))if(!a.has(r)&&l(r))return!0;return!1}function Q(t){return typeof t!="string"?"":t.replace(/<[^>]*>/g,"").replace(/[\x00-\x1F\x7F]/g,"").slice(0,255).trim()}const N=2,b="agentcache_",f=5*1024*1024;class w{static save(i,s){try{const a=b+i,n=JSON.stringify(s);return n.length>f?{success:!1,error:"quota",message:"Data exceeds 5MB storage limit. Consider deleting old pipelines.",size:n.length}:(localStorage.setItem(a,n),{success:!0,size:n.length})}catch(a){return a.name==="QuotaExceededError"?{success:!1,error:"quota",message:"Storage quota exceeded. Clear old data to continue.",cause:a}:{success:!1,error:"storage",message:`Failed to save data: ${a.message}`,cause:a}}}static load(i,s=null){try{const a=b+i,n=localStorage.getItem(a);return n===null?s:JSON.parse(n)}catch(a){return console.error(`Failed to load ${i}:`,a),s}}static remove(i){try{const s=b+i;return localStorage.removeItem(s),!0}catch(s){return console.error(`Failed to remove ${i}:`,s),!1}}static getStorageStats(){try{let i=0,s=0;for(let a=0;a<localStorage.length;a++){const n=localStorage.key(a);if(n.startsWith(b)){const l=localStorage.getItem(n);i+=l?l.length:0,s++}}return{totalSize:i,itemCount:s,percentUsed:i/f*100,maxSize:f,available:f-i}}catch(i){return console.error("Failed to get storage stats:",i),{totalSize:0,itemCount:0,percentUsed:0,maxSize:f,available:f}}}static clearAll(){try{const i=[];for(let s=0;s<localStorage.length;s++){const a=localStorage.key(s);a.startsWith(b)&&i.push(a)}return i.forEach(s=>localStorage.removeItem(s)),!0}catch(i){return console.error("Failed to clear storage:",i),!1}}}class j{static savePipeline(i){try{i.name=Q(i.name),L(i);const s={...i,_v:N,savedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},a=this.loadAllPipelines(),n=a.findIndex(r=>r.name===i.name);n!==-1?a[n]={...s,savedAt:a[n].savedAt}:a.push(s);const l=w.save("pipelines",a);return l.success?{success:!0,pipeline:s,isNew:n===-1}:l}catch(s){return{success:!1,error:"validation",message:s.message,field:s.field||null}}}static loadAllPipelines(){return w.load("pipelines",[]).map(s=>this.migratePipeline(s))}static loadPipeline(i){return this.loadAllPipelines().find(a=>a.name===i)||null}static deletePipeline(i){try{const s=this.loadAllPipelines(),a=s.filter(l=>l.name!==i);return a.length===s.length?{success:!1,error:"not_found",message:`Pipeline "${i}" not found`}:w.save("pipelines",a)}catch(s){return{success:!1,error:"storage",message:s.message}}}static migratePipeline(i){return i._v?(i._v===N,i):{...i,_v:N,updatedAt:i.savedAt||new Date().toISOString()}}static getPipelineStats(){const i=this.loadAllPipelines(),s={total:i.length,active:i.filter(a=>a.isActive).length,inactive:i.filter(a=>!a.isActive).length,bySector:{}};return i.forEach(a=>{const n=a.sector||"general";s.bySector[n]=(s.bySector[n]||0)+1}),s}static exportPipelines(i=null){const s=this.loadAllPipelines(),a=i?s.filter(n=>i.includes(n.name)):s;return JSON.stringify({version:N,exportedAt:new Date().toISOString(),pipelines:a},null,2)}static importPipelines(i){try{const s=JSON.parse(i);if(!s.pipelines||!Array.isArray(s.pipelines))return{success:!1,error:"invalid_format",message:"Invalid import format"};const a=this.loadAllPipelines();let n=0,l=0;for(const c of s.pipelines)try{L(c),a.find(u=>u.name===c.name)?l++:(a.push(this.migratePipeline(c)),n++)}catch(u){console.warn(`Skipping invalid pipeline: ${u.message}`),l++}const r=w.save("pipelines",a);return r.success?{success:!0,imported:n,skipped:l}:r}catch(s){return{success:!1,error:"parse_error",message:`Failed to parse JSON: ${s.message}`}}}}const Z=O.memo(({pipeline:t,formatDate:i,onLoad:s,onToggleStatus:a,onDuplicate:n,onDelete:l})=>e.jsxs("div",{className:"pipeline-card",children:[e.jsxs("div",{className:`status-indicator ${t.isActive?"active":"inactive"}`,children:[e.jsx("div",{className:"status-dot"}),t.isActive?"Active":"Inactive"]}),e.jsxs("div",{className:"card-content",onClick:()=>s(t),children:[e.jsx("h3",{className:"pipeline-name",children:t.name}),e.jsxs("div",{className:"pipeline-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Nodes"}),e.jsx("span",{className:"stat-value",children:t.nodes?.length||0})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Est. Savings"}),e.jsx("span",{className:"stat-value savings",children:t.estimatedSavings})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Modified"}),e.jsx("span",{className:"stat-value",children:i(t.lastModified)})]})]}),e.jsxs("div",{className:"node-preview",children:[t.nodes?.slice(0,5).map((r,c)=>e.jsx("div",{className:`node-thumb ${r.type||"default"}`,children:r.type?.replace(/_/g," ").substring(0,3).toUpperCase()},c)),t.nodes?.length>5&&e.jsxs("div",{className:"node-thumb more",children:["+",t.nodes.length-5]})]})]}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:`btn-toggle ${t.isActive?"active":""}`,onClick:r=>{r.stopPropagation(),a(t.name)},title:t.isActive?"Deactivate":"Activate",children:t.isActive?"â¸":"â–¶"}),e.jsx("button",{className:"btn-action",onClick:r=>{r.stopPropagation(),s(t)},title:"Edit",children:"âœï¸"}),e.jsx("button",{className:"btn-action",onClick:r=>{r.stopPropagation(),n(t)},title:"Duplicate",children:"ðŸ“‹"}),e.jsx("button",{className:"btn-action danger",onClick:r=>{r.stopPropagation(),l(t.name)},title:"Delete",children:"ðŸ—‘ï¸"})]})]}));function ee({onLoadPipeline:t,onNewPipeline:i}){const{sector:s}=Y(),[a,n]=o.useState([]),[l,r]=o.useState("all"),[c,u]=o.useState("recent"),[m,C]=o.useState("grid");o.useEffect(()=>{g()},[s]);const g=o.useCallback(()=>{try{const d=j.loadAllPipelines().filter(p=>p.sector===s).map(p=>({...p,isActive:p.isActive!==void 0?p.isActive:!1,lastModified:p.updatedAt||p.savedAt||new Date().toISOString()}));n(d)}catch(h){console.error("Failed to load pipelines:",h),alert("Error loading pipelines. Please refresh the page.")}},[s]);o.useMemo(()=>h=>`$${((h.nodes?.filter(p=>p.type?.includes("cache")||p.id?.includes("cache")).length||0)*800+400).toLocaleString()}/mo`,[]);const F=o.useCallback(h=>{try{const d=j.loadPipeline(h);if(!d){alert("Pipeline not found");return}d.isActive=!d.isActive;const p=j.savePipeline(d);if(!p.success){alert(`Failed to update pipeline: ${p.message}`);return}g()}catch(d){console.error("Failed to toggle pipeline status:",d),alert("Error updating pipeline status")}},[s,g]),z=o.useCallback(h=>{if(confirm(`Delete pipeline "${h}"? This cannot be undone.`))try{const d=j.deletePipeline(h);if(!d.success){alert(`Failed to delete pipeline: ${d.message}`);return}g()}catch(d){console.error("Failed to delete pipeline:",d),alert("Error deleting pipeline")}},[g]),q=o.useCallback(h=>{try{const d={...h,name:`${h.name} (Copy)`,isActive:!1},p=j.savePipeline(d);if(!p.success){p.error==="quota"?alert(`Storage quota exceeded: ${p.message}`):p.error==="validation"?alert(`Validation error: ${p.message}`):alert(`Failed to duplicate pipeline: ${p.message}`);return}g()}catch(d){console.error("Failed to duplicate pipeline:",d),alert("Error duplicating pipeline")}},[g]),A=o.useMemo(()=>{let h=[...a];return l==="active"?h=h.filter(d=>d.isActive):l==="inactive"&&(h=h.filter(d=>!d.isActive)),c==="name"?h.sort((d,p)=>d.name.localeCompare(p.name)):c==="savings"?h.sort((d,p)=>{const v=parseInt((d.estimatedSavings||"0").replace(/[^0-9]/g,""));return parseInt((p.estimatedSavings||"0").replace(/[^0-9]/g,""))-v}):h.sort((d,p)=>new Date(p.lastModified)-new Date(d.lastModified)),h},[a,l,c]),H=o.useCallback(h=>{const d=new Date(h),v=new Date-d,y=Math.floor(v/6e4),I=Math.floor(v/36e5),E=Math.floor(v/864e5);return y<1?"Just now":y<60?`${y}m ago`:I<24?`${I}h ago`:E<7?`${E}d ago`:d.toLocaleDateString()},[]),P=o.useMemo(()=>a.filter(h=>h.isActive).length,[a]),V=o.useMemo(()=>a.filter(h=>!h.isActive).length,[a]);return e.jsxs("div",{className:"workspace-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"dashboard-title-section",children:[e.jsx("h1",{children:"ðŸ—‚ï¸ My Workspaces"}),e.jsxs("p",{className:"dashboard-subtitle",children:[a.length," pipeline",a.length!==1?"s":""," in ",s," â€¢ ",P," active"]})]}),e.jsx("button",{className:"btn-new-pipeline",onClick:i,children:"âž• New Pipeline"})]}),e.jsxs("div",{className:"dashboard-controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx("label",{children:"Filter:"}),e.jsxs("div",{className:"button-group",children:[e.jsxs("button",{className:l==="all"?"active":"",onClick:()=>r("all"),children:["All (",a.length,")"]}),e.jsxs("button",{className:l==="active"?"active":"",onClick:()=>r("active"),children:["Active (",P,")"]}),e.jsxs("button",{className:l==="inactive"?"active":"",onClick:()=>r("inactive"),children:["Inactive (",V,")"]})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:c==="recent"?"active":"",onClick:()=>u("recent"),children:"ðŸ“… Recent"}),e.jsx("button",{className:c==="name"?"active":"",onClick:()=>u("name"),children:"ðŸ”¤ Name"}),e.jsx("button",{className:c==="savings"?"active":"",onClick:()=>u("savings"),children:"ðŸ’° Savings"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsx("label",{children:"View:"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:m==="grid"?"active":"",onClick:()=>C("grid"),children:"âŠž Grid"}),e.jsx("button",{className:m==="list"?"active":"",onClick:()=>C("list"),children:"â˜° List"})]})]})]}),e.jsx("div",{className:`pipeline-container ${m}`,children:A.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ“¦"}),e.jsx("h3",{children:"No pipelines found"}),e.jsx("p",{children:l!=="all"?`No ${l} pipelines. Try changing the filter.`:"Get started by creating a new pipeline or loading a preset."}),e.jsx("button",{className:"btn-primary",onClick:i,children:"âž• Create Your First Pipeline"})]}):A.map(h=>e.jsx(Z,{pipeline:h,formatDate:H,onLoad:t,onToggleStatus:F,onDuplicate:q,onDelete:z},h.name))})]})}function te(){const[t,i]=o.useState("swarm"),s=()=>{switch(t){case"overview":return e.jsx(k,{});case"pipelines":return e.jsx(W,{children:e.jsx(ee,{onLoadPipeline:a=>window.location.href=`/studio.html?pipeline=${a.id}`,onNewPipeline:()=>window.location.href="/studio.html?new=true"})});case"swarm":return e.jsx(B,{});case"data":return e.jsx(U,{});case"governance":return e.jsx(J,{});default:return e.jsx(k,{})}};return e.jsxs("div",{className:"flex h-screen bg-slate-950 text-slate-200 font-sans overflow-hidden",children:[e.jsx(K,{activeView:t,onViewChange:i}),e.jsx("main",{className:"flex-1 overflow-auto relative",children:s()})]})}G.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx(te,{})}));
