import{r as l,j as e,b as C,R as S}from"./client-CJWdlQ9l.js";function z({onClose:n,onComplete:m}){const[t,r]=l.useState(1),[j,h]=l.useState(!1),[p,o]=l.useState(null),[s,x]=l.useState({name:"",sector:"general",contact_email:"",contact_name:""}),[g,v]=l.useState("single_tenant"),[c,u]=l.useState("starter"),[d,N]=l.useState("auto"),[A,f]=l.useState([]),y=async()=>{if(t===1){if(!s.name.trim()){o("Please enter your Organization Name");return}if(!s.contact_email.trim()||!s.contact_email.includes("@")){o("Please enter a valid contact email");return}o(null),r(2)}else t===2?r(3):t===3&&(r(4),await w())},w=async()=>{h(!0),o(null);try{const a=localStorage.getItem("agentcache_token");if(!a)throw new Error("Not authenticated");const i=await(await fetch("/api/onboarding/complete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({sector:s.sector,useCase:`${s.name} - ${s.sector} organization`,priority:"balanced",wizardPrompt:`Setup for ${s.name} in ${s.sector} sector`})})).json();if(i.success)h(!1),m&&m({organization:i.organization,pipeline:i.pipeline,apiKey:i.apiKey,projectedSavings:i.projectedSavings,dashboard_url:"/studio.html"});else throw new Error(i.error||"Failed to complete onboarding")}catch(a){o(a.message),h(!1),r(3)}},k=[{id:"filestorage",name:"File Storage & CDN",icon:"üíæ",description:"Content delivery, file management, Seagate Lyve integration"},{id:"healthcare",name:"Healthcare & Medical",icon:"üè•",description:"HIPAA-compliant EHR, patient data, clinical workflows"},{id:"finance",name:"Financial Services",icon:"üìà",description:"Trading, market data, PCI-DSS compliance"},{id:"legal",name:"Legal & Compliance",icon:"‚öñÔ∏è",description:"Document review, privilege protection, matter tracking"},{id:"general",name:"General Purpose",icon:"‚ö°",description:"Standard caching for any application"}];return e.jsx("div",{className:"wizard-overlay-customer",onClick:n,children:e.jsxs("div",{className:"wizard-modal-customer",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"wizard-header-customer",children:[e.jsxs("div",{className:"wizard-brand",children:[e.jsx("div",{className:"wizard-icon-customer",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"})]})}),e.jsxs("div",{children:[e.jsx("h2",{children:"Customer Onboarding"}),e.jsx("p",{className:"wizard-subtitle",children:"Set up your AgentCache organization in minutes"})]})]}),e.jsxs("div",{className:"wizard-controls",children:[e.jsxs("div",{className:"step-indicator",children:[e.jsx("span",{className:"step-number",children:t}),e.jsx("span",{className:"step-label",children:t===1?"Profile":t===2?"Use Case":t===3?"Namespaces":"Provision"}),e.jsx("span",{className:"step-total",children:"/ 4"})]}),e.jsx("button",{className:"close-btn-customer",onClick:n,children:"‚úï"})]})]}),e.jsxs("div",{className:"wizard-body-customer",children:[t===1&&e.jsxs("div",{className:"wizard-step-customer",children:[e.jsx("div",{className:"step-header",children:e.jsxs("div",{children:[e.jsx("h3",{children:"Organization Profile"}),e.jsx("p",{children:"Tell us about your organization to customize your experience."})]})}),e.jsxs("div",{className:"customer-input-group",children:[e.jsxs("label",{children:["Organization Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",className:"customer-input",placeholder:"e.g. JettyThunder, Acme Corp",value:s.name,onChange:a=>x({...s,name:a.target.value})})]}),e.jsxs("div",{className:"customer-input-group",children:[e.jsxs("label",{children:["Contact Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",className:"customer-input",placeholder:"Your full name",value:s.contact_name,onChange:a=>x({...s,contact_name:a.target.value})})]}),e.jsxs("div",{className:"customer-input-group",children:[e.jsxs("label",{children:["Contact Email ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"email",className:"customer-input",placeholder:"you@company.com",value:s.contact_email,onChange:a=>x({...s,contact_email:a.target.value})})]}),p&&e.jsx("div",{className:"text-red-400 text-sm mt-2",children:p})]}),t===2&&e.jsxs("div",{className:"wizard-step-customer",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Industry & Scale"}),e.jsx("p",{children:"Select your sector and deployment scale for optimized configuration."})]}),e.jsx("div",{className:"section-label",children:"Industry Sector"}),e.jsx("div",{className:"customer-grid",children:k.map(a=>e.jsxs("button",{className:`customer-card ${s.sector===a.id?"selected":""}`,onClick:()=>x({...s,sector:a.id}),children:[e.jsx("div",{className:"card-icon",children:a.icon}),e.jsxs("div",{className:"card-content",children:[e.jsx("h4",{children:a.name}),e.jsx("p",{children:a.description})]}),s.sector===a.id&&e.jsx("div",{className:"selection-indicator",children:e.jsx("div",{className:"selection-dot"})})]},a.id))}),e.jsx("div",{className:"section-label mt-6",children:"Deployment Scale"}),e.jsxs("div",{className:"scale-options",children:[e.jsxs("button",{className:`scale-option ${g==="single_tenant"?"selected":""}`,onClick:()=>v("single_tenant"),children:[e.jsxs("div",{className:"scale-header",children:[e.jsx("span",{className:"scale-icon",children:"üè¢"}),e.jsx("h4",{children:"Single Tenant"})]}),e.jsx("p",{children:"One organization, direct access to all resources"})]}),e.jsxs("button",{className:`scale-option ${g==="multi_customer"?"selected":""}`,onClick:()=>v("multi_customer"),children:[e.jsxs("div",{className:"scale-header",children:[e.jsx("span",{className:"scale-icon",children:"üè≠"}),e.jsx("h4",{children:"Multi-Customer"})]}),e.jsx("p",{children:"Serve multiple customers with tenant isolation"})]})]}),e.jsx("div",{className:"section-label mt-6",children:"Plan Tier"}),e.jsxs("div",{className:"plan-tier-options",children:[e.jsxs("button",{className:`plan-tier-card ${c==="starter"?"selected":""}`,onClick:()=>u("starter"),children:[e.jsx("h4",{children:"Starter"}),e.jsx("p",{className:"plan-price",children:"$49/mo"}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"5 namespaces"}),e.jsx("li",{children:"3 API keys"}),e.jsx("li",{children:"100GB cache"})]})]}),e.jsxs("button",{className:`plan-tier-card ${c==="professional"?"selected":""}`,onClick:()=>u("professional"),children:[e.jsx("div",{className:"recommended-badge-small",children:"Recommended"}),e.jsx("h4",{children:"Professional"}),e.jsx("p",{className:"plan-price",children:"$199/mo"}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"20 namespaces"}),e.jsx("li",{children:"10 API keys"}),e.jsx("li",{children:"1TB cache"})]})]}),e.jsxs("button",{className:`plan-tier-card ${c==="enterprise"?"selected":""}`,onClick:()=>u("enterprise"),children:[e.jsx("h4",{children:"Enterprise"}),e.jsx("p",{className:"plan-price",children:"Custom"}),e.jsxs("ul",{className:"plan-features",children:[e.jsx("li",{children:"100+ namespaces"}),e.jsx("li",{children:"50+ API keys"}),e.jsx("li",{children:"Unlimited cache"})]})]})]})]}),t===3&&e.jsxs("div",{className:"wizard-step-customer",children:[e.jsxs("div",{className:"step-header",children:[e.jsx("h3",{children:"Namespace Strategy"}),e.jsx("p",{children:"Choose how to organize your cache namespaces."})]}),e.jsxs("div",{className:"namespace-strategy-options",children:[e.jsxs("button",{className:`namespace-strategy-card ${d==="auto"?"selected":""}`,onClick:()=>N("auto"),children:[e.jsx("div",{className:"strategy-icon",children:"ü§ñ"}),e.jsxs("div",{className:"strategy-content",children:[e.jsx("h4",{children:"AI-Recommended (Default)"}),e.jsx("p",{children:"We'll create optimal namespaces based on your sector and scale"}),e.jsxs("div",{className:"strategy-preview",children:[s.sector==="filestorage"&&e.jsx("span",{className:"badge-list",children:"storage ‚Ä¢ cdn ‚Ä¢ metadata"}),s.sector==="healthcare"&&e.jsx("span",{className:"badge-list",children:"patients ‚Ä¢ clinical ‚Ä¢ admin"}),s.sector==="finance"&&e.jsx("span",{className:"badge-list",children:"trading ‚Ä¢ research ‚Ä¢ compliance"}),s.sector==="legal"&&e.jsx("span",{className:"badge-list",children:"matters ‚Ä¢ research ‚Ä¢ billing"}),s.sector==="general"&&e.jsx("span",{className:"badge-list",children:"production ‚Ä¢ staging"})]})]}),d==="auto"&&e.jsx("div",{className:"selection-indicator",children:e.jsx("div",{className:"selection-dot"})})]}),e.jsxs("button",{className:`namespace-strategy-card ${d==="custom"?"selected":""}`,onClick:()=>N("custom"),children:[e.jsx("div",{className:"strategy-icon",children:"‚öôÔ∏è"}),e.jsxs("div",{className:"strategy-content",children:[e.jsx("h4",{children:"Custom Namespaces"}),e.jsx("p",{children:"Define your own namespace structure (advanced)"})]}),d==="custom"&&e.jsx("div",{className:"selection-indicator",children:e.jsx("div",{className:"selection-dot"})})]})]}),d==="custom"&&e.jsxs("div",{className:"custom-namespace-input mt-4",children:[e.jsx("label",{children:"Custom Namespaces (comma-separated)"}),e.jsx("input",{type:"text",className:"customer-input",placeholder:"e.g. prod, staging, dev, customer-a, customer-b",onChange:a=>{const b=a.target.value.split(",").map(i=>i.trim()).filter(Boolean);f(b)}}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Max ",c==="starter"?"5":c==="professional"?"20":"100"," namespaces on your plan"]})]}),p&&e.jsx("div",{className:"text-red-400 text-sm mt-4",children:p})]}),t===4&&e.jsx("div",{className:"wizard-step-customer",children:j?e.jsxs("div",{className:"loading-state-customer",children:[e.jsx("div",{className:"spinner-customer"}),e.jsx("p",{children:"Provisioning Your Organization..."}),e.jsx("span",{className:"loading-subtitle-customer",children:"Creating namespaces, generating API keys, configuring sector nodes"})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-500/20 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to AgentCache! üéâ"}),e.jsx("p",{className:"text-slate-400 mb-8",children:"Your organization is ready. Start caching in seconds."}),e.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl text-left max-w-md mx-auto border border-slate-800",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Organization"}),e.jsx("span",{className:"text-white font-medium",children:s.name})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Sector"}),e.jsx("span",{className:"text-sky-400 font-mono",children:s.sector})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Plan"}),e.jsx("span",{className:"text-emerald-400 capitalize",children:c})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Namespaces"}),e.jsx("span",{className:"text-emerald-400",children:"Ready"})]})]})]})})]}),e.jsxs("div",{className:"wizard-footer-customer",children:[e.jsxs("div",{className:"footer-hint",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),e.jsx("span",{children:"Your data is encrypted and isolated in your own namespace."})]}),e.jsxs("div",{className:"footer-actions",children:[t>1&&t<4&&e.jsx("button",{className:"btn-customer btn-secondary-customer",onClick:()=>r(t-1),children:"Back"}),t<4&&e.jsx("button",{className:"btn-customer btn-primary-customer",onClick:y,children:e.jsx("span",{children:t===3?"Create Organization":"Next"})}),t===4&&!j&&e.jsx("button",{className:"btn-customer btn-primary-customer",onClick:n,children:"Go to Dashboard"})]})]})]})})}const P=localStorage.getItem("agentcache_token");P||(window.location.href="/login.html?redirect=/onboarding.html");function $(n){console.log("Onboarding completed:",n);const m=`
        <div id="successModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm">
          <div class="w-full max-w-lg rounded-2xl border border-emerald-500/50 bg-slate-900 shadow-2xl">
            <div class="border-b border-slate-800 bg-gradient-to-r from-emerald-600/20 to-sky-600/20 px-6 py-4">
              <h2 class="text-2xl font-bold text-white">üéâ Welcome to AgentCache!</h2>
              <p class="text-sm text-slate-300 mt-1">Your workspace is ready</p>
            </div>
            
            <div class="p-6 space-y-4">
              <div class="rounded-xl border border-emerald-500/40 bg-emerald-500/10 p-4">
                <p class="text-sm font-semibold text-emerald-300 mb-2">üí∞ Projected Savings</p>
                <p class="text-3xl font-bold text-emerald-400">$${n.projectedSavings.toLocaleString()}<span class="text-lg text-slate-400">/month</span></p>
              </div>
              
              <div>
                <p class="text-sm font-semibold text-slate-300 mb-2">üìã Your Starter Pipeline</p>
                <p class="text-sm text-slate-400">${n.pipeline.description}</p>
                <div class="mt-2 flex flex-wrap gap-1">
                  ${n.pipeline.nodes.map(t=>`<span class="inline-flex items-center rounded-full bg-slate-700/50 px-2 py-1 text-xs text-slate-300">${t.label}</span>`).join("")}
                </div>
              </div>
              
              <div class="rounded-xl border border-sky-500/40 bg-slate-800/50 p-4">
                <div class="flex items-center justify-between mb-2">
                  <p class="text-sm font-semibold text-sky-300">üîë Your API Key</p>
                  <button onclick="copyToClipboard('${n.apiKey}')" class="text-xs text-sky-400 hover:text-sky-300">Copy</button>
                </div>
                <code class="block text-xs font-mono text-slate-300 break-all bg-slate-900 p-2 rounded">${n.apiKey}</code>
                <p class="text-xs text-amber-300 mt-2">‚ö†Ô∏è Save this key now - it won't be shown again!</p>
              </div>
              
              <div class="grid grid-cols-3 gap-3 text-center">
                <div>
                  <p class="text-xs text-slate-500">Hit Rate</p>
                  <p class="text-lg font-bold text-emerald-400">${Math.round(n.pipeline.estimatedHitRate*100)}%</p>
                </div>
                <div>
                  <p class="text-xs text-slate-500">Latency</p>
                  <p class="text-lg font-bold text-sky-400">${n.pipeline.avgLatency}ms</p>
                </div>
                <div>
                  <p class="text-xs text-slate-500">Compliance</p>
                  <p class="text-lg font-bold text-purple-400">${n.pipeline.compliance?.join(", ")||"Standard"}</p>
                </div>
              </div>
            </div>
            
            <div class="border-t border-slate-800 px-6 py-4 bg-slate-900/50">
              <a href="${n.dashboard_url}" class="block w-full px-4 py-3 bg-gradient-to-r from-emerald-600 to-sky-600 rounded-lg text-center text-sm font-semibold text-white hover:from-emerald-500 hover:to-sky-500">
                Go to Workspace ‚Üí
              </a>
            </div>
          </div>
        </div>
      `;document.body.insertAdjacentHTML("beforeend",m)}function _(){window.location.href="/studio.html"}window.copyToClipboard=function(n){navigator.clipboard.writeText(n),alert("API key copied to clipboard!")};const T=C.createRoot(document.getElementById("onboarding-root"));T.render(S.createElement(z,{onComplete:$,onClose:_}));
