import{u as Fc,R as X,r as Oc,a as I,j as f,M as Lc,b as Gc,c as Bc,U as Wc,S as Hc,d as Ha,e as $c,C as mn,V as $a,f as Xc,g as js,I as Yc,h as qc,B as $r,i as Kc,T as Zc,L as ko,k as Jc,l as To,D as Qc,P as Xa,m as el,_ as tl,n as nl,o as sl,O as al,p as Xr,A as Yr,q as ol}from"./Stars-DAk6bJme.js";function He(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let a=0,r;a<e.length;a++)(r=He(e[a]))!==""&&(t+=(t&&" ")+r);else for(let a in e)e[a]&&(t+=(t&&" ")+a);return t}const rl={},Vo=e=>{let t;const a=new Set,r=(u,d)=>{const m=typeof u=="function"?u(t):u;if(!Object.is(m,t)){const h=t;t=d??(typeof m!="object"||m===null)?m:Object.assign({},t,m),a.forEach(v=>v(t,h))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>l,subscribe:u=>(a.add(u),()=>a.delete(u)),destroy:()=>{(rl?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},l=t=e(r,s,i);return i},il=e=>e?Vo(e):Vo,{useDebugValue:cl}=X,{useSyncExternalStoreWithSelector:ll}=Fc,ul=e=>e;function qr(e,t=ul,a){const r=ll(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return cl(r),r}const Po=(e,t)=>{const a=il(e),r=(s,n=t)=>qr(a,s,n);return Object.assign(r,a),r},dl=(e,t)=>e?Po(e,t):Po;function ze(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(const r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var ml={value:()=>{}};function Fs(){for(var e=0,t=arguments.length,a={},r;e<t;++e){if(!(r=arguments[e]+"")||r in a||/[\s.]/.test(r))throw new Error("illegal type: "+r);a[r]=[]}return new Ds(a)}function Ds(e){this._=e}function fl(e,t){return e.trim().split(/^|\s+/).map(function(a){var r="",s=a.indexOf(".");if(s>=0&&(r=a.slice(s+1),a=a.slice(0,s)),a&&!t.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:r}})}Ds.prototype=Fs.prototype={constructor:Ds,on:function(e,t){var a=this._,r=fl(e+"",a),s,n=-1,o=r.length;if(arguments.length<2){for(;++n<o;)if((s=(e=r[n]).type)&&(s=hl(a[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<o;)if(s=(e=r[n]).type)a[s]=Ro(a[s],e.name,t);else if(t==null)for(s in a)a[s]=Ro(a[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var a in t)e[a]=t[a].slice();return new Ds(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var a=new Array(s),r=0,s,n;r<s;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],r=0,s=n.length;r<s;++r)n[r].value.apply(t,a)},apply:function(e,t,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,n=r.length;s<n;++s)r[s].value.apply(t,a)}};function hl(e,t){for(var a=0,r=e.length,s;a<r;++a)if((s=e[a]).name===t)return s.value}function Ro(e,t,a){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=ml,e=e.slice(0,r).concat(e.slice(r+1));break}return a!=null&&e.push({name:t,value:a}),e}var _a="http://www.w3.org/1999/xhtml";const Io={svg:"http://www.w3.org/2000/svg",xhtml:_a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Os(e){var t=e+="",a=t.indexOf(":");return a>=0&&(t=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),Io.hasOwnProperty(t)?{space:Io[t],local:e}:e}function pl(e){return function(){var t=this.ownerDocument,a=this.namespaceURI;return a===_a&&t.documentElement.namespaceURI===_a?t.createElement(e):t.createElementNS(a,e)}}function gl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Kr(e){var t=Os(e);return(t.local?gl:pl)(t)}function vl(){}function Ya(e){return e==null?vl:function(){return this.querySelector(e)}}function yl(e){typeof e!="function"&&(e=Ya(e));for(var t=this._groups,a=t.length,r=new Array(a),s=0;s<a;++s)for(var n=t[s],o=n.length,c=r[s]=new Array(o),i,l,u=0;u<o;++u)(i=n[u])&&(l=e.call(i,i.__data__,u,n))&&("__data__"in i&&(l.__data__=i.__data__),c[u]=l);return new Je(r,this._parents)}function Nl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function xl(){return[]}function Zr(e){return e==null?xl:function(){return this.querySelectorAll(e)}}function bl(e){return function(){return Nl(e.apply(this,arguments))}}function wl(e){typeof e=="function"?e=bl(e):e=Zr(e);for(var t=this._groups,a=t.length,r=[],s=[],n=0;n<a;++n)for(var o=t[n],c=o.length,i,l=0;l<c;++l)(i=o[l])&&(r.push(e.call(i,i.__data__,l,o)),s.push(i));return new Je(r,s)}function Jr(e){return function(){return this.matches(e)}}function Qr(e){return function(t){return t.matches(e)}}var Dl=Array.prototype.find;function _l(e){return function(){return Dl.call(this.children,e)}}function El(){return this.firstElementChild}function Sl(e){return this.select(e==null?El:_l(typeof e=="function"?e:Qr(e)))}var Cl=Array.prototype.filter;function Ul(){return Array.from(this.children)}function jl(e){return function(){return Cl.call(this.children,e)}}function Ml(e){return this.selectAll(e==null?Ul:jl(typeof e=="function"?e:Qr(e)))}function Al(e){typeof e!="function"&&(e=Jr(e));for(var t=this._groups,a=t.length,r=new Array(a),s=0;s<a;++s)for(var n=t[s],o=n.length,c=r[s]=[],i,l=0;l<o;++l)(i=n[l])&&e.call(i,i.__data__,l,n)&&c.push(i);return new Je(r,this._parents)}function ei(e){return new Array(e.length)}function kl(){return new Je(this._enter||this._groups.map(ei),this._parents)}function Ms(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ms.prototype={constructor:Ms,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Tl(e){return function(){return e}}function Vl(e,t,a,r,s,n){for(var o=0,c,i=t.length,l=n.length;o<l;++o)(c=t[o])?(c.__data__=n[o],r[o]=c):a[o]=new Ms(e,n[o]);for(;o<i;++o)(c=t[o])&&(s[o]=c)}function Pl(e,t,a,r,s,n,o){var c,i,l=new Map,u=t.length,d=n.length,m=new Array(u),h;for(c=0;c<u;++c)(i=t[c])&&(m[c]=h=o.call(i,i.__data__,c,t)+"",l.has(h)?s[c]=i:l.set(h,i));for(c=0;c<d;++c)h=o.call(e,n[c],c,n)+"",(i=l.get(h))?(r[c]=i,i.__data__=n[c],l.delete(h)):a[c]=new Ms(e,n[c]);for(c=0;c<u;++c)(i=t[c])&&l.get(m[c])===i&&(s[c]=i)}function Rl(e){return e.__data__}function Il(e,t){if(!arguments.length)return Array.from(this,Rl);var a=t?Pl:Vl,r=this._parents,s=this._groups;typeof e!="function"&&(e=Tl(e));for(var n=s.length,o=new Array(n),c=new Array(n),i=new Array(n),l=0;l<n;++l){var u=r[l],d=s[l],m=d.length,h=zl(e.call(u,u&&u.__data__,l,r)),v=h.length,g=c[l]=new Array(v),y=o[l]=new Array(v),x=i[l]=new Array(m);a(u,d,g,y,x,h,t);for(var w=0,_=0,N,U;w<v;++w)if(N=g[w]){for(w>=_&&(_=w+1);!(U=y[_])&&++_<v;);N._next=U||null}}return o=new Je(o,r),o._enter=c,o._exit=i,o}function zl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fl(){return new Je(this._exit||this._groups.map(ei),this._parents)}function Ol(e,t,a){var r=this.enter(),s=this,n=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),a==null?n.remove():a(n),r&&s?r.merge(s).order():s}function Ll(e){for(var t=e.selection?e.selection():e,a=this._groups,r=t._groups,s=a.length,n=r.length,o=Math.min(s,n),c=new Array(s),i=0;i<o;++i)for(var l=a[i],u=r[i],d=l.length,m=c[i]=new Array(d),h,v=0;v<d;++v)(h=l[v]||u[v])&&(m[v]=h);for(;i<s;++i)c[i]=a[i];return new Je(c,this._parents)}function Gl(){for(var e=this._groups,t=-1,a=e.length;++t<a;)for(var r=e[t],s=r.length-1,n=r[s],o;--s>=0;)(o=r[s])&&(n&&o.compareDocumentPosition(n)^4&&n.parentNode.insertBefore(o,n),n=o);return this}function Bl(e){e||(e=Wl);function t(d,m){return d&&m?e(d.__data__,m.__data__):!d-!m}for(var a=this._groups,r=a.length,s=new Array(r),n=0;n<r;++n){for(var o=a[n],c=o.length,i=s[n]=new Array(c),l,u=0;u<c;++u)(l=o[u])&&(i[u]=l);i.sort(t)}return new Je(s,this._parents).order()}function Wl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $l(){return Array.from(this)}function Xl(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],s=0,n=r.length;s<n;++s){var o=r[s];if(o)return o}return null}function Yl(){let e=0;for(const t of this)++e;return e}function ql(){return!this.node()}function Kl(e){for(var t=this._groups,a=0,r=t.length;a<r;++a)for(var s=t[a],n=0,o=s.length,c;n<o;++n)(c=s[n])&&e.call(c,c.__data__,n,s);return this}function Zl(e){return function(){this.removeAttribute(e)}}function Jl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ql(e,t){return function(){this.setAttribute(e,t)}}function eu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tu(e,t){return function(){var a=t.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function nu(e,t){return function(){var a=t.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function su(e,t){var a=Os(e);if(arguments.length<2){var r=this.node();return a.local?r.getAttributeNS(a.space,a.local):r.getAttribute(a)}return this.each((t==null?a.local?Jl:Zl:typeof t=="function"?a.local?nu:tu:a.local?eu:Ql)(a,t))}function ti(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function au(e){return function(){this.style.removeProperty(e)}}function ou(e,t,a){return function(){this.style.setProperty(e,t,a)}}function ru(e,t,a){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,a)}}function iu(e,t,a){return arguments.length>1?this.each((t==null?au:typeof t=="function"?ru:ou)(e,t,a??"")):ln(this.node(),e)}function ln(e,t){return e.style.getPropertyValue(t)||ti(e).getComputedStyle(e,null).getPropertyValue(t)}function cu(e){return function(){delete this[e]}}function lu(e,t){return function(){this[e]=t}}function uu(e,t){return function(){var a=t.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function du(e,t){return arguments.length>1?this.each((t==null?cu:typeof t=="function"?uu:lu)(e,t)):this.node()[e]}function ni(e){return e.trim().split(/^|\s+/)}function qa(e){return e.classList||new si(e)}function si(e){this._node=e,this._names=ni(e.getAttribute("class")||"")}si.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ai(e,t){for(var a=qa(e),r=-1,s=t.length;++r<s;)a.add(t[r])}function oi(e,t){for(var a=qa(e),r=-1,s=t.length;++r<s;)a.remove(t[r])}function mu(e){return function(){ai(this,e)}}function fu(e){return function(){oi(this,e)}}function hu(e,t){return function(){(t.apply(this,arguments)?ai:oi)(this,e)}}function pu(e,t){var a=ni(e+"");if(arguments.length<2){for(var r=qa(this.node()),s=-1,n=a.length;++s<n;)if(!r.contains(a[s]))return!1;return!0}return this.each((typeof t=="function"?hu:t?mu:fu)(a,t))}function gu(){this.textContent=""}function vu(e){return function(){this.textContent=e}}function yu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Nu(e){return arguments.length?this.each(e==null?gu:(typeof e=="function"?yu:vu)(e)):this.node().textContent}function xu(){this.innerHTML=""}function bu(e){return function(){this.innerHTML=e}}function wu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Du(e){return arguments.length?this.each(e==null?xu:(typeof e=="function"?wu:bu)(e)):this.node().innerHTML}function _u(){this.nextSibling&&this.parentNode.appendChild(this)}function Eu(){return this.each(_u)}function Su(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cu(){return this.each(Su)}function Uu(e){var t=typeof e=="function"?e:Kr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ju(){return null}function Mu(e,t){var a=typeof e=="function"?e:Kr(e),r=t==null?ju:typeof t=="function"?t:Ya(t);return this.select(function(){return this.insertBefore(a.apply(this,arguments),r.apply(this,arguments)||null)})}function Au(){var e=this.parentNode;e&&e.removeChild(this)}function ku(){return this.each(Au)}function Tu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pu(e){return this.select(e?Vu:Tu)}function Ru(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Iu(e){return function(t){e.call(this,t,this.__data__)}}function zu(e){return e.trim().split(/^|\s+/).map(function(t){var a="",r=t.indexOf(".");return r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),{type:t,name:a}})}function Fu(e){return function(){var t=this.__on;if(t){for(var a=0,r=-1,s=t.length,n;a<s;++a)n=t[a],(!e.type||n.type===e.type)&&n.name===e.name?this.removeEventListener(n.type,n.listener,n.options):t[++r]=n;++r?t.length=r:delete this.__on}}}function Ou(e,t,a){return function(){var r=this.__on,s,n=Iu(t);if(r){for(var o=0,c=r.length;o<c;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=n,s.options=a),s.value=t;return}}this.addEventListener(e.type,n,a),s={type:e.type,name:e.name,value:t,listener:n,options:a},r?r.push(s):this.__on=[s]}}function Lu(e,t,a){var r=zu(e+""),s,n=r.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var i=0,l=c.length,u;i<l;++i)for(s=0,u=c[i];s<n;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(c=t?Ou:Fu,s=0;s<n;++s)this.each(c(r[s],t,a));return this}function ri(e,t,a){var r=ti(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,a):(s=r.document.createEvent("Event"),a?(s.initEvent(t,a.bubbles,a.cancelable),s.detail=a.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Gu(e,t){return function(){return ri(this,e,t)}}function Bu(e,t){return function(){return ri(this,e,t.apply(this,arguments))}}function Wu(e,t){return this.each((typeof t=="function"?Bu:Gu)(e,t))}function*Hu(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],s=0,n=r.length,o;s<n;++s)(o=r[s])&&(yield o)}var ii=[null];function Je(e,t){this._groups=e,this._parents=t}function Jn(){return new Je([[document.documentElement]],ii)}function $u(){return this}Je.prototype=Jn.prototype={constructor:Je,select:yl,selectAll:wl,selectChild:Sl,selectChildren:Ml,filter:Al,data:Il,enter:kl,exit:Fl,join:Ol,merge:Ll,selection:$u,order:Gl,sort:Bl,call:Hl,nodes:$l,node:Xl,size:Yl,empty:ql,each:Kl,attr:su,style:iu,property:du,classed:pu,text:Nu,html:Du,raise:Eu,lower:Cu,append:Uu,insert:Mu,remove:ku,clone:Pu,datum:Ru,on:Lu,dispatch:Wu,[Symbol.iterator]:Hu};function Qe(e){return typeof e=="string"?new Je([[document.querySelector(e)]],[document.documentElement]):new Je([[e]],ii)}function Xu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rt(e,t){if(e=Xu(e),t===void 0&&(t=e.currentTarget),t){var a=t.ownerSVGElement||t;if(a.createSVGPoint){var r=a.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Yu={passive:!1},Wn={capture:!0,passive:!1};function da(e){e.stopImmediatePropagation()}function on(e){e.preventDefault(),e.stopImmediatePropagation()}function ci(e){var t=e.document.documentElement,a=Qe(e).on("dragstart.drag",on,Wn);"onselectstart"in t?a.on("selectstart.drag",on,Wn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function li(e,t){var a=e.document.documentElement,r=Qe(e).on("dragstart.drag",null);t&&(r.on("click.drag",on,Wn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in a?r.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const us=e=>()=>e;function Ea(e,{sourceEvent:t,subject:a,target:r,identifier:s,active:n,x:o,y:c,dx:i,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:n,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:i,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Ea.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function qu(e){return!e.ctrlKey&&!e.button}function Ku(){return this.parentNode}function Zu(e,t){return t??{x:e.x,y:e.y}}function Ju(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qu(){var e=qu,t=Ku,a=Zu,r=Ju,s={},n=Fs("start","drag","end"),o=0,c,i,l,u,d=0;function m(N){N.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",x,Yu).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(N,U){if(!(u||!e.call(this,N,U))){var k=_(this,t.call(this,N,U),N,U,"mouse");k&&(Qe(N.view).on("mousemove.drag",v,Wn).on("mouseup.drag",g,Wn),ci(N.view),da(N),l=!1,c=N.clientX,i=N.clientY,k("start",N))}}function v(N){if(on(N),!l){var U=N.clientX-c,k=N.clientY-i;l=U*U+k*k>d}s.mouse("drag",N)}function g(N){Qe(N.view).on("mousemove.drag mouseup.drag",null),li(N.view,l),on(N),s.mouse("end",N)}function y(N,U){if(e.call(this,N,U)){var k=N.changedTouches,D=t.call(this,N,U),A=k.length,V,R;for(V=0;V<A;++V)(R=_(this,D,N,U,k[V].identifier,k[V]))&&(da(N),R("start",N,k[V]))}}function x(N){var U=N.changedTouches,k=U.length,D,A;for(D=0;D<k;++D)(A=s[U[D].identifier])&&(on(N),A("drag",N,U[D]))}function w(N){var U=N.changedTouches,k=U.length,D,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),D=0;D<k;++D)(A=s[U[D].identifier])&&(da(N),A("end",N,U[D]))}function _(N,U,k,D,A,V){var R=n.copy(),B=rt(V||k,U),j,P,p;if((p=a.call(N,new Ea("beforestart",{sourceEvent:k,target:m,identifier:A,active:o,x:B[0],y:B[1],dx:0,dy:0,dispatch:R}),D))!=null)return j=p.x-B[0]||0,P=p.y-B[1]||0,function C(E,L,G){var S=B,T;switch(E){case"start":s[A]=C,T=o++;break;case"end":delete s[A],--o;case"drag":B=rt(G||L,U),T=o;break}R.call(E,N,new Ea(E,{sourceEvent:L,subject:p,target:m,identifier:A,active:T,x:B[0]+j,y:B[1]+P,dx:B[0]-S[0],dy:B[1]-S[1],dispatch:R}),D)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:us(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:us(N),m):t},m.subject=function(N){return arguments.length?(a=typeof N=="function"?N:us(N),m):a},m.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:us(!!N),m):r},m.on=function(){var N=n.on.apply(n,arguments);return N===n?m:N},m.clickDistance=function(N){return arguments.length?(d=(N=+N)*N,m):Math.sqrt(d)},m}function Ka(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function ui(e,t){var a=Object.create(e.prototype);for(var r in t)a[r]=t[r];return a}function Qn(){}var Hn=.7,As=1/Hn,rn="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ed=/^#([0-9a-f]{3,8})$/,td=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),nd=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),sd=new RegExp(`^rgba\\(${rn},${rn},${rn},${$n}\\)$`),ad=new RegExp(`^rgba\\(${ht},${ht},${ht},${$n}\\)$`),od=new RegExp(`^hsl\\(${$n},${ht},${ht}\\)$`),rd=new RegExp(`^hsla\\(${$n},${ht},${ht},${$n}\\)$`),zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ka(Qn,Xn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fo,formatHex:Fo,formatHex8:id,formatHsl:cd,formatRgb:Oo,toString:Oo});function Fo(){return this.rgb().formatHex()}function id(){return this.rgb().formatHex8()}function cd(){return di(this).formatHsl()}function Oo(){return this.rgb().formatRgb()}function Xn(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=ed.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?Lo(t):a===3?new Ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?ds(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?ds(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=td.exec(e))?new Ye(t[1],t[2],t[3],1):(t=nd.exec(e))?new Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sd.exec(e))?ds(t[1],t[2],t[3],t[4]):(t=ad.exec(e))?ds(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=od.exec(e))?Wo(t[1],t[2]/100,t[3]/100,1):(t=rd.exec(e))?Wo(t[1],t[2]/100,t[3]/100,t[4]):zo.hasOwnProperty(e)?Lo(zo[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function Lo(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function ds(e,t,a,r){return r<=0&&(e=t=a=NaN),new Ye(e,t,a,r)}function ld(e){return e instanceof Qn||(e=Xn(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function Sa(e,t,a,r){return arguments.length===1?ld(e):new Ye(e,t,a,r??1)}function Ye(e,t,a,r){this.r=+e,this.g=+t,this.b=+a,this.opacity=+r}Ka(Ye,Sa,ui(Qn,{brighter(e){return e=e==null?As:Math.pow(As,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hn:Math.pow(Hn,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye(Rt(this.r),Rt(this.g),Rt(this.b),ks(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Go,formatHex:Go,formatHex8:ud,formatRgb:Bo,toString:Bo}));function Go(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}`}function ud(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}${Vt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bo(){const e=ks(this.opacity);return`${e===1?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${e===1?")":`, ${e})`}`}function ks(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vt(e){return e=Rt(e),(e<16?"0":"")+e.toString(16)}function Wo(e,t,a,r){return r<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new it(e,t,a,r)}function di(e){if(e instanceof it)return new it(e.h,e.s,e.l,e.opacity);if(e instanceof Qn||(e=Xn(e)),!e)return new it;if(e instanceof it)return e;e=e.rgb();var t=e.r/255,a=e.g/255,r=e.b/255,s=Math.min(t,a,r),n=Math.max(t,a,r),o=NaN,c=n-s,i=(n+s)/2;return c?(t===n?o=(a-r)/c+(a<r)*6:a===n?o=(r-t)/c+2:o=(t-a)/c+4,c/=i<.5?n+s:2-n-s,o*=60):c=i>0&&i<1?0:o,new it(o,c,i,e.opacity)}function dd(e,t,a,r){return arguments.length===1?di(e):new it(e,t,a,r??1)}function it(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}Ka(it,dd,ui(Qn,{brighter(e){return e=e==null?As:Math.pow(As,e),new it(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hn:Math.pow(Hn,e),new it(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*t,s=2*a-r;return new Ye(ma(e>=240?e-240:e+120,s,r),ma(e,s,r),ma(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new it(Ho(this.h),ms(this.s),ms(this.l),ks(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ks(this.opacity);return`${e===1?"hsl(":"hsla("}${Ho(this.h)}, ${ms(this.s)*100}%, ${ms(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ho(e){return e=(e||0)%360,e<0?e+360:e}function ms(e){return Math.max(0,Math.min(1,e||0))}function ma(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const mi=e=>()=>e;function md(e,t){return function(a){return e+a*t}}function fd(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(r){return Math.pow(e+r*t,a)}}function hd(e){return(e=+e)==1?fi:function(t,a){return a-t?fd(t,a,e):mi(isNaN(t)?a:t)}}function fi(e,t){var a=t-e;return a?md(e,a):mi(isNaN(e)?t:e)}const $o=(function e(t){var a=hd(t);function r(s,n){var o=a((s=Sa(s)).r,(n=Sa(n)).r),c=a(s.g,n.g),i=a(s.b,n.b),l=fi(s.opacity,n.opacity);return function(u){return s.r=o(u),s.g=c(u),s.b=i(u),s.opacity=l(u),s+""}}return r.gamma=e,r})(1);function Ct(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}var Ca=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fa=new RegExp(Ca.source,"g");function pd(e){return function(){return e}}function gd(e){return function(t){return e(t)+""}}function vd(e,t){var a=Ca.lastIndex=fa.lastIndex=0,r,s,n,o=-1,c=[],i=[];for(e=e+"",t=t+"";(r=Ca.exec(e))&&(s=fa.exec(t));)(n=s.index)>a&&(n=t.slice(a,n),c[o]?c[o]+=n:c[++o]=n),(r=r[0])===(s=s[0])?c[o]?c[o]+=s:c[++o]=s:(c[++o]=null,i.push({i:o,x:Ct(r,s)})),a=fa.lastIndex;return a<t.length&&(n=t.slice(a),c[o]?c[o]+=n:c[++o]=n),c.length<2?i[0]?gd(i[0].x):pd(t):(t=i.length,function(l){for(var u=0,d;u<t;++u)c[(d=i[u]).i]=d.x(l);return c.join("")})}var Xo=180/Math.PI,Ua={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hi(e,t,a,r,s,n){var o,c,i;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(i=e*a+t*r)&&(a-=e*i,r-=t*i),(c=Math.sqrt(a*a+r*r))&&(a/=c,r/=c,i/=c),e*r<t*a&&(e=-e,t=-t,i=-i,o=-o),{translateX:s,translateY:n,rotate:Math.atan2(t,e)*Xo,skewX:Math.atan(i)*Xo,scaleX:o,scaleY:c}}var fs;function yd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ua:hi(t.a,t.b,t.c,t.d,t.e,t.f)}function Nd(e){return e==null||(fs||(fs=document.createElementNS("http://www.w3.org/2000/svg","g")),fs.setAttribute("transform",e),!(e=fs.transform.baseVal.consolidate()))?Ua:(e=e.matrix,hi(e.a,e.b,e.c,e.d,e.e,e.f))}function pi(e,t,a,r){function s(l){return l.length?l.pop()+" ":""}function n(l,u,d,m,h,v){if(l!==d||u!==m){var g=h.push("translate(",null,t,null,a);v.push({i:g-4,x:Ct(l,d)},{i:g-2,x:Ct(u,m)})}else(d||m)&&h.push("translate("+d+t+m+a)}function o(l,u,d,m){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),m.push({i:d.push(s(d)+"rotate(",null,r)-2,x:Ct(l,u)})):u&&d.push(s(d)+"rotate("+u+r)}function c(l,u,d,m){l!==u?m.push({i:d.push(s(d)+"skewX(",null,r)-2,x:Ct(l,u)}):u&&d.push(s(d)+"skewX("+u+r)}function i(l,u,d,m,h,v){if(l!==d||u!==m){var g=h.push(s(h)+"scale(",null,",",null,")");v.push({i:g-4,x:Ct(l,d)},{i:g-2,x:Ct(u,m)})}else(d!==1||m!==1)&&h.push(s(h)+"scale("+d+","+m+")")}return function(l,u){var d=[],m=[];return l=e(l),u=e(u),n(l.translateX,l.translateY,u.translateX,u.translateY,d,m),o(l.rotate,u.rotate,d,m),c(l.skewX,u.skewX,d,m),i(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,m),l=u=null,function(h){for(var v=-1,g=m.length,y;++v<g;)d[(y=m[v]).i]=y.x(h);return d.join("")}}}var xd=pi(yd,"px, ","px)","deg)"),bd=pi(Nd,", ",")",")"),wd=1e-12;function Yo(e){return((e=Math.exp(e))+1/e)/2}function Dd(e){return((e=Math.exp(e))-1/e)/2}function _d(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ed=(function e(t,a,r){function s(n,o){var c=n[0],i=n[1],l=n[2],u=o[0],d=o[1],m=o[2],h=u-c,v=d-i,g=h*h+v*v,y,x;if(g<wd)x=Math.log(m/l)/t,y=function(D){return[c+D*h,i+D*v,l*Math.exp(t*D*x)]};else{var w=Math.sqrt(g),_=(m*m-l*l+r*g)/(2*l*a*w),N=(m*m-l*l-r*g)/(2*m*a*w),U=Math.log(Math.sqrt(_*_+1)-_),k=Math.log(Math.sqrt(N*N+1)-N);x=(k-U)/t,y=function(D){var A=D*x,V=Yo(U),R=l/(a*w)*(V*_d(t*A+U)-Dd(U));return[c+R*h,i+R*v,l*V/Yo(t*A+U)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return s.rho=function(n){var o=Math.max(.001,+n),c=o*o,i=c*c;return e(o,c,i)},s})(Math.SQRT2,2,4);var un=0,In=0,Mn=0,gi=1e3,Ts,zn,Vs=0,Ot=0,Ls=0,Yn=typeof performance=="object"&&performance.now?performance:Date,vi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Za(){return Ot||(vi(Sd),Ot=Yn.now()+Ls)}function Sd(){Ot=0}function Ps(){this._call=this._time=this._next=null}Ps.prototype=yi.prototype={constructor:Ps,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?Za():+a)+(t==null?0:+t),!this._next&&zn!==this&&(zn?zn._next=this:Ts=this,zn=this),this._call=e,this._time=a,ja()},stop:function(){this._call&&(this._call=null,this._time=1/0,ja())}};function yi(e,t,a){var r=new Ps;return r.restart(e,t,a),r}function Cd(){Za(),++un;for(var e=Ts,t;e;)(t=Ot-e._time)>=0&&e._call.call(void 0,t),e=e._next;--un}function qo(){Ot=(Vs=Yn.now())+Ls,un=In=0;try{Cd()}finally{un=0,jd(),Ot=0}}function Ud(){var e=Yn.now(),t=e-Vs;t>gi&&(Ls-=t,Vs=e)}function jd(){for(var e,t=Ts,a,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:Ts=a);zn=e,ja(r)}function ja(e){if(!un){In&&(In=clearTimeout(In));var t=e-Ot;t>24?(e<1/0&&(In=setTimeout(qo,e-Yn.now()-Ls)),Mn&&(Mn=clearInterval(Mn))):(Mn||(Vs=Yn.now(),Mn=setInterval(Ud,gi)),un=1,vi(qo))}}function Ko(e,t,a){var r=new Ps;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,a),r}var Md=Fs("start","end","cancel","interrupt"),Ad=[],Ni=0,Zo=1,Ma=2,_s=3,Jo=4,Aa=5,Es=6;function Gs(e,t,a,r,s,n){var o=e.__transition;if(!o)e.__transition={};else if(a in o)return;kd(e,a,{name:t,index:r,group:s,on:Md,tween:Ad,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:Ni})}function Ja(e,t){var a=ut(e,t);if(a.state>Ni)throw new Error("too late; already scheduled");return a}function pt(e,t){var a=ut(e,t);if(a.state>_s)throw new Error("too late; already running");return a}function ut(e,t){var a=e.__transition;if(!a||!(a=a[t]))throw new Error("transition not found");return a}function kd(e,t,a){var r=e.__transition,s;r[t]=a,a.timer=yi(n,0,a.time);function n(l){a.state=Zo,a.timer.restart(o,a.delay,a.time),a.delay<=l&&o(l-a.delay)}function o(l){var u,d,m,h;if(a.state!==Zo)return i();for(u in r)if(h=r[u],h.name===a.name){if(h.state===_s)return Ko(o);h.state===Jo?(h.state=Es,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=Es,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(Ko(function(){a.state===_s&&(a.state=Jo,a.timer.restart(c,a.delay,a.time),c(l))}),a.state=Ma,a.on.call("start",e,e.__data__,a.index,a.group),a.state===Ma){for(a.state=_s,s=new Array(m=a.tween.length),u=0,d=-1;u<m;++u)(h=a.tween[u].value.call(e,e.__data__,a.index,a.group))&&(s[++d]=h);s.length=d+1}}function c(l){for(var u=l<a.duration?a.ease.call(null,l/a.duration):(a.timer.restart(i),a.state=Aa,1),d=-1,m=s.length;++d<m;)s[d].call(e,u);a.state===Aa&&(a.on.call("end",e,e.__data__,a.index,a.group),i())}function i(){a.state=Es,a.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Ss(e,t){var a=e.__transition,r,s,n=!0,o;if(a){t=t==null?null:t+"";for(o in a){if((r=a[o]).name!==t){n=!1;continue}s=r.state>Ma&&r.state<Aa,r.state=Es,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[o]}n&&delete e.__transition}}function Td(e){return this.each(function(){Ss(this,e)})}function Vd(e,t){var a,r;return function(){var s=pt(this,e),n=s.tween;if(n!==a){r=a=n;for(var o=0,c=r.length;o<c;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function Pd(e,t,a){var r,s;if(typeof a!="function")throw new Error;return function(){var n=pt(this,e),o=n.tween;if(o!==r){s=(r=o).slice();for(var c={name:t,value:a},i=0,l=s.length;i<l;++i)if(s[i].name===t){s[i]=c;break}i===l&&s.push(c)}n.tween=s}}function Rd(e,t){var a=this._id;if(e+="",arguments.length<2){for(var r=ut(this.node(),a).tween,s=0,n=r.length,o;s<n;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?Vd:Pd)(a,e,t))}function Qa(e,t,a){var r=e._id;return e.each(function(){var s=pt(this,r);(s.value||(s.value={}))[t]=a.apply(this,arguments)}),function(s){return ut(s,r).value[t]}}function xi(e,t){var a;return(typeof t=="number"?Ct:t instanceof Xn?$o:(a=Xn(t))?(t=a,$o):vd)(e,t)}function Id(e){return function(){this.removeAttribute(e)}}function zd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fd(e,t,a){var r,s=a+"",n;return function(){var o=this.getAttribute(e);return o===s?null:o===r?n:n=t(r=o,a)}}function Od(e,t,a){var r,s=a+"",n;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?n:n=t(r=o,a)}}function Ld(e,t,a){var r,s,n;return function(){var o,c=a(this),i;return c==null?void this.removeAttribute(e):(o=this.getAttribute(e),i=c+"",o===i?null:o===r&&i===s?n:(s=i,n=t(r=o,c)))}}function Gd(e,t,a){var r,s,n;return function(){var o,c=a(this),i;return c==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),i=c+"",o===i?null:o===r&&i===s?n:(s=i,n=t(r=o,c)))}}function Bd(e,t){var a=Os(e),r=a==="transform"?bd:xi;return this.attrTween(e,typeof t=="function"?(a.local?Gd:Ld)(a,r,Qa(this,"attr."+e,t)):t==null?(a.local?zd:Id)(a):(a.local?Od:Fd)(a,r,t))}function Wd(e,t){return function(a){this.setAttribute(e,t.call(this,a))}}function Hd(e,t){return function(a){this.setAttributeNS(e.space,e.local,t.call(this,a))}}function $d(e,t){var a,r;function s(){var n=t.apply(this,arguments);return n!==r&&(a=(r=n)&&Hd(e,n)),a}return s._value=t,s}function Xd(e,t){var a,r;function s(){var n=t.apply(this,arguments);return n!==r&&(a=(r=n)&&Wd(e,n)),a}return s._value=t,s}function Yd(e,t){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;var r=Os(e);return this.tween(a,(r.local?$d:Xd)(r,t))}function qd(e,t){return function(){Ja(this,e).delay=+t.apply(this,arguments)}}function Kd(e,t){return t=+t,function(){Ja(this,e).delay=t}}function Zd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qd:Kd)(t,e)):ut(this.node(),t).delay}function Jd(e,t){return function(){pt(this,e).duration=+t.apply(this,arguments)}}function Qd(e,t){return t=+t,function(){pt(this,e).duration=t}}function em(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jd:Qd)(t,e)):ut(this.node(),t).duration}function tm(e,t){if(typeof t!="function")throw new Error;return function(){pt(this,e).ease=t}}function nm(e){var t=this._id;return arguments.length?this.each(tm(t,e)):ut(this.node(),t).ease}function sm(e,t){return function(){var a=t.apply(this,arguments);if(typeof a!="function")throw new Error;pt(this,e).ease=a}}function am(e){if(typeof e!="function")throw new Error;return this.each(sm(this._id,e))}function om(e){typeof e!="function"&&(e=Jr(e));for(var t=this._groups,a=t.length,r=new Array(a),s=0;s<a;++s)for(var n=t[s],o=n.length,c=r[s]=[],i,l=0;l<o;++l)(i=n[l])&&e.call(i,i.__data__,l,n)&&c.push(i);return new bt(r,this._parents,this._name,this._id)}function rm(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,a=e._groups,r=t.length,s=a.length,n=Math.min(r,s),o=new Array(r),c=0;c<n;++c)for(var i=t[c],l=a[c],u=i.length,d=o[c]=new Array(u),m,h=0;h<u;++h)(m=i[h]||l[h])&&(d[h]=m);for(;c<r;++c)o[c]=t[c];return new bt(o,this._parents,this._name,this._id)}function im(e){return(e+"").trim().split(/^|\s+/).every(function(t){var a=t.indexOf(".");return a>=0&&(t=t.slice(0,a)),!t||t==="start"})}function cm(e,t,a){var r,s,n=im(t)?Ja:pt;return function(){var o=n(this,e),c=o.on;c!==r&&(s=(r=c).copy()).on(t,a),o.on=s}}function lm(e,t){var a=this._id;return arguments.length<2?ut(this.node(),a).on.on(e):this.each(cm(a,e,t))}function um(e){return function(){var t=this.parentNode;for(var a in this.__transition)if(+a!==e)return;t&&t.removeChild(this)}}function dm(){return this.on("end.remove",um(this._id))}function mm(e){var t=this._name,a=this._id;typeof e!="function"&&(e=Ya(e));for(var r=this._groups,s=r.length,n=new Array(s),o=0;o<s;++o)for(var c=r[o],i=c.length,l=n[o]=new Array(i),u,d,m=0;m<i;++m)(u=c[m])&&(d=e.call(u,u.__data__,m,c))&&("__data__"in u&&(d.__data__=u.__data__),l[m]=d,Gs(l[m],t,a,m,l,ut(u,a)));return new bt(n,this._parents,t,a)}function fm(e){var t=this._name,a=this._id;typeof e!="function"&&(e=Zr(e));for(var r=this._groups,s=r.length,n=[],o=[],c=0;c<s;++c)for(var i=r[c],l=i.length,u,d=0;d<l;++d)if(u=i[d]){for(var m=e.call(u,u.__data__,d,i),h,v=ut(u,a),g=0,y=m.length;g<y;++g)(h=m[g])&&Gs(h,t,a,g,m,v);n.push(m),o.push(u)}return new bt(n,o,t,a)}var hm=Jn.prototype.constructor;function pm(){return new hm(this._groups,this._parents)}function gm(e,t){var a,r,s;return function(){var n=ln(this,e),o=(this.style.removeProperty(e),ln(this,e));return n===o?null:n===a&&o===r?s:s=t(a=n,r=o)}}function bi(e){return function(){this.style.removeProperty(e)}}function vm(e,t,a){var r,s=a+"",n;return function(){var o=ln(this,e);return o===s?null:o===r?n:n=t(r=o,a)}}function ym(e,t,a){var r,s,n;return function(){var o=ln(this,e),c=a(this),i=c+"";return c==null&&(i=c=(this.style.removeProperty(e),ln(this,e))),o===i?null:o===r&&i===s?n:(s=i,n=t(r=o,c))}}function Nm(e,t){var a,r,s,n="style."+t,o="end."+n,c;return function(){var i=pt(this,e),l=i.on,u=i.value[n]==null?c||(c=bi(t)):void 0;(l!==a||s!==u)&&(r=(a=l).copy()).on(o,s=u),i.on=r}}function xm(e,t,a){var r=(e+="")=="transform"?xd:xi;return t==null?this.styleTween(e,gm(e,r)).on("end.style."+e,bi(e)):typeof t=="function"?this.styleTween(e,ym(e,r,Qa(this,"style."+e,t))).each(Nm(this._id,e)):this.styleTween(e,vm(e,r,t),a).on("end.style."+e,null)}function bm(e,t,a){return function(r){this.style.setProperty(e,t.call(this,r),a)}}function wm(e,t,a){var r,s;function n(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&bm(e,o,a)),r}return n._value=t,n}function Dm(e,t,a){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,wm(e,t,a??""))}function _m(e){return function(){this.textContent=e}}function Em(e){return function(){var t=e(this);this.textContent=t??""}}function Sm(e){return this.tween("text",typeof e=="function"?Em(Qa(this,"text",e)):_m(e==null?"":e+""))}function Cm(e){return function(t){this.textContent=e.call(this,t)}}function Um(e){var t,a;function r(){var s=e.apply(this,arguments);return s!==a&&(t=(a=s)&&Cm(s)),t}return r._value=e,r}function jm(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Um(e))}function Mm(){for(var e=this._name,t=this._id,a=wi(),r=this._groups,s=r.length,n=0;n<s;++n)for(var o=r[n],c=o.length,i,l=0;l<c;++l)if(i=o[l]){var u=ut(i,t);Gs(i,e,a,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new bt(r,this._parents,e,a)}function Am(){var e,t,a=this,r=a._id,s=a.size();return new Promise(function(n,o){var c={value:o},i={value:function(){--s===0&&n()}};a.each(function(){var l=pt(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(i)),l.on=t}),s===0&&n()})}var km=0;function bt(e,t,a,r){this._groups=e,this._parents=t,this._name=a,this._id=r}function wi(){return++km}var yt=Jn.prototype;bt.prototype={constructor:bt,select:mm,selectAll:fm,selectChild:yt.selectChild,selectChildren:yt.selectChildren,filter:om,merge:rm,selection:pm,transition:Mm,call:yt.call,nodes:yt.nodes,node:yt.node,size:yt.size,empty:yt.empty,each:yt.each,on:lm,attr:Bd,attrTween:Yd,style:xm,styleTween:Dm,text:Sm,textTween:jm,remove:dm,tween:Rd,delay:Zd,duration:em,ease:nm,easeVarying:am,end:Am,[Symbol.iterator]:yt[Symbol.iterator]};function Tm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vm={time:null,delay:0,duration:250,ease:Tm};function Pm(e,t){for(var a;!(a=e.__transition)||!(a=a[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return a}function Rm(e){var t,a;e instanceof bt?(t=e._id,e=e._name):(t=wi(),(a=Vm).time=Za(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,n=0;n<s;++n)for(var o=r[n],c=o.length,i,l=0;l<c;++l)(i=o[l])&&Gs(i,e,t,l,o,a||Pm(i,t));return new bt(r,this._parents,e,t)}Jn.prototype.interrupt=Td;Jn.prototype.transition=Rm;const hs=e=>()=>e;function Im(e,{sourceEvent:t,target:a,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Nt(e,t,a){this.k=e,this.x=t,this.y=a}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xt=new Nt(1,0,0);Nt.prototype;function ha(e){e.stopImmediatePropagation()}function An(e){e.preventDefault(),e.stopImmediatePropagation()}function zm(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Fm(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qo(){return this.__zoom||xt}function Om(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Lm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gm(e,t,a){var r=e.invertX(t[0][0])-a[0][0],s=e.invertX(t[1][0])-a[1][0],n=e.invertY(t[0][1])-a[0][1],o=e.invertY(t[1][1])-a[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o))}function Di(){var e=zm,t=Fm,a=Gm,r=Om,s=Lm,n=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,i=Ed,l=Fs("start","zoom","end"),u,d,m,h=500,v=150,g=0,y=10;function x(p){p.property("__zoom",Qo).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",R).filter(s).on("touchstart.zoom",B).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(p,C,E,L){var G=p.selection?p.selection():p;G.property("__zoom",Qo),p!==G?U(p,C,E,L):G.interrupt().each(function(){k(this,arguments).event(L).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},x.scaleBy=function(p,C,E,L){x.scaleTo(p,function(){var G=this.__zoom.k,S=typeof C=="function"?C.apply(this,arguments):C;return G*S},E,L)},x.scaleTo=function(p,C,E,L){x.transform(p,function(){var G=t.apply(this,arguments),S=this.__zoom,T=E==null?N(G):typeof E=="function"?E.apply(this,arguments):E,b=S.invert(T),M=typeof C=="function"?C.apply(this,arguments):C;return a(_(w(S,M),T,b),G,o)},E,L)},x.translateBy=function(p,C,E,L){x.transform(p,function(){return a(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),o)},null,L)},x.translateTo=function(p,C,E,L,G){x.transform(p,function(){var S=t.apply(this,arguments),T=this.__zoom,b=L==null?N(S):typeof L=="function"?L.apply(this,arguments):L;return a(xt.translate(b[0],b[1]).scale(T.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof E=="function"?-E.apply(this,arguments):-E),S,o)},L,G)};function w(p,C){return C=Math.max(n[0],Math.min(n[1],C)),C===p.k?p:new Nt(C,p.x,p.y)}function _(p,C,E){var L=C[0]-E[0]*p.k,G=C[1]-E[1]*p.k;return L===p.x&&G===p.y?p:new Nt(p.k,L,G)}function N(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function U(p,C,E,L){p.on("start.zoom",function(){k(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(L).end()}).tween("zoom",function(){var G=this,S=arguments,T=k(G,S).event(L),b=t.apply(G,S),M=E==null?N(b):typeof E=="function"?E.apply(G,S):E,z=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),F=G.__zoom,O=typeof C=="function"?C.apply(G,S):C,$=i(F.invert(M).concat(z/F.k),O.invert(M).concat(z/O.k));return function(W){if(W===1)W=O;else{var Y=$(W),Z=z/Y[2];W=new Nt(Z,M[0]-Y[0]*Z,M[1]-Y[1]*Z)}T.zoom(null,W)}})}function k(p,C,E){return!E&&p.__zooming||new D(p,C)}function D(p,C){this.that=p,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,C),this.taps=0}D.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,C){return this.mouse&&p!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var C=Qe(this.that).datum();l.call(p,this.that,new Im(p,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:l}),C)}};function A(p,...C){if(!e.apply(this,arguments))return;var E=k(this,C).event(p),L=this.__zoom,G=Math.max(n[0],Math.min(n[1],L.k*Math.pow(2,r.apply(this,arguments)))),S=rt(p);if(E.wheel)(E.mouse[0][0]!==S[0]||E.mouse[0][1]!==S[1])&&(E.mouse[1]=L.invert(E.mouse[0]=S)),clearTimeout(E.wheel);else{if(L.k===G)return;E.mouse=[S,L.invert(S)],Ss(this),E.start()}An(p),E.wheel=setTimeout(T,v),E.zoom("mouse",a(_(w(L,G),E.mouse[0],E.mouse[1]),E.extent,o));function T(){E.wheel=null,E.end()}}function V(p,...C){if(m||!e.apply(this,arguments))return;var E=p.currentTarget,L=k(this,C,!0).event(p),G=Qe(p.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",z,!0),S=rt(p,E),T=p.clientX,b=p.clientY;ci(p.view),ha(p),L.mouse=[S,this.__zoom.invert(S)],Ss(this),L.start();function M(F){if(An(F),!L.moved){var O=F.clientX-T,$=F.clientY-b;L.moved=O*O+$*$>g}L.event(F).zoom("mouse",a(_(L.that.__zoom,L.mouse[0]=rt(F,E),L.mouse[1]),L.extent,o))}function z(F){G.on("mousemove.zoom mouseup.zoom",null),li(F.view,L.moved),An(F),L.event(F).end()}}function R(p,...C){if(e.apply(this,arguments)){var E=this.__zoom,L=rt(p.changedTouches?p.changedTouches[0]:p,this),G=E.invert(L),S=E.k*(p.shiftKey?.5:2),T=a(_(w(E,S),L,G),t.apply(this,C),o);An(p),c>0?Qe(this).transition().duration(c).call(U,T,L,p):Qe(this).call(x.transform,T,L,p)}}function B(p,...C){if(e.apply(this,arguments)){var E=p.touches,L=E.length,G=k(this,C,p.changedTouches.length===L).event(p),S,T,b,M;for(ha(p),T=0;T<L;++T)b=E[T],M=rt(b,this),M=[M,this.__zoom.invert(M),b.identifier],G.touch0?!G.touch1&&G.touch0[2]!==M[2]&&(G.touch1=M,G.taps=0):(G.touch0=M,S=!0,G.taps=1+!!u);u&&(u=clearTimeout(u)),S&&(G.taps<2&&(d=M[0],u=setTimeout(function(){u=null},h)),Ss(this),G.start())}}function j(p,...C){if(this.__zooming){var E=k(this,C).event(p),L=p.changedTouches,G=L.length,S,T,b,M;for(An(p),S=0;S<G;++S)T=L[S],b=rt(T,this),E.touch0&&E.touch0[2]===T.identifier?E.touch0[0]=b:E.touch1&&E.touch1[2]===T.identifier&&(E.touch1[0]=b);if(T=E.that.__zoom,E.touch1){var z=E.touch0[0],F=E.touch0[1],O=E.touch1[0],$=E.touch1[1],W=(W=O[0]-z[0])*W+(W=O[1]-z[1])*W,Y=(Y=$[0]-F[0])*Y+(Y=$[1]-F[1])*Y;T=w(T,Math.sqrt(W/Y)),b=[(z[0]+O[0])/2,(z[1]+O[1])/2],M=[(F[0]+$[0])/2,(F[1]+$[1])/2]}else if(E.touch0)b=E.touch0[0],M=E.touch0[1];else return;E.zoom("touch",a(_(T,b,M),E.extent,o))}}function P(p,...C){if(this.__zooming){var E=k(this,C).event(p),L=p.changedTouches,G=L.length,S,T;for(ha(p),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),S=0;S<G;++S)T=L[S],E.touch0&&E.touch0[2]===T.identifier?delete E.touch0:E.touch1&&E.touch1[2]===T.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(T=rt(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<y)){var b=Qe(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return x.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:hs(+p),x):r},x.filter=function(p){return arguments.length?(e=typeof p=="function"?p:hs(!!p),x):e},x.touchable=function(p){return arguments.length?(s=typeof p=="function"?p:hs(!!p),x):s},x.extent=function(p){return arguments.length?(t=typeof p=="function"?p:hs([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),x):t},x.scaleExtent=function(p){return arguments.length?(n[0]=+p[0],n[1]=+p[1],x):[n[0],n[1]]},x.translateExtent=function(p){return arguments.length?(o[0][0]=+p[0][0],o[1][0]=+p[1][0],o[0][1]=+p[0][1],o[1][1]=+p[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(p){return arguments.length?(a=p,x):a},x.duration=function(p){return arguments.length?(c=+p,x):c},x.interpolate=function(p){return arguments.length?(i=p,x):i},x.on=function(){var p=l.on.apply(l,arguments);return p===l?x:p},x.clickDistance=function(p){return arguments.length?(g=(p=+p)*p,x):Math.sqrt(g)},x.tapDistance=function(p){return arguments.length?(y=+p,x):y},x}Oc();const Bs=I.createContext(null),Bm=Bs.Provider,lt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},_i=lt.error001();function Ve(e,t){const a=I.useContext(Bs);if(a===null)throw new Error(_i);return qr(a,e,t)}const Fe=()=>{const e=I.useContext(Bs);if(e===null)throw new Error(_i);return I.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Wm=e=>e.userSelectionActive?"none":"all";function eo({position:e,children:t,className:a,style:r,...s}){const n=Ve(Wm),o=`${e}`.split("-");return X.createElement("div",{className:He(["react-flow__panel",a,...o]),style:{...r,pointerEvents:n},...s},t)}function Hm({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:X.createElement(eo,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},X.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const $m=({x:e,y:t,label:a,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:n={},labelBgPadding:o=[2,4],labelBgBorderRadius:c=2,children:i,className:l,...u})=>{const d=I.useRef(null),[m,h]=I.useState({x:0,y:0,width:0,height:0}),v=He(["react-flow__edge-textwrapper",l]);return I.useEffect(()=>{if(d.current){const g=d.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[a]),typeof a>"u"||!a?null:X.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:v,visibility:m.width?"visible":"hidden",...u},s&&X.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:n,rx:c,ry:c}),X.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:d,style:r},a),i)};var Xm=I.memo($m);const to=e=>({width:e.offsetWidth,height:e.offsetHeight}),dn=(e,t=0,a=1)=>Math.min(Math.max(e,t),a),no=(e={x:0,y:0},t)=>({x:dn(e.x,t[0][0],t[1][0]),y:dn(e.y,t[0][1],t[1][1])}),er=(e,t,a)=>e<t?dn(Math.abs(e-t),1,50)/50:e>a?-dn(Math.abs(e-a),1,50)/50:0,Ei=(e,t)=>{const a=er(e.x,35,t.width-35)*20,r=er(e.y,35,t.height-35)*20;return[a,r]},Si=e=>e.getRootNode?.()||window?.document,Ci=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),qn=({x:e,y:t,width:a,height:r})=>({x:e,y:t,x2:e+a,y2:t+r}),Ui=({x:e,y:t,x2:a,y2:r})=>({x:e,y:t,width:a-e,height:r-t}),tr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Ym=(e,t)=>Ui(Ci(qn(e),qn(t))),ka=(e,t)=>{const a=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(a*r)},qm=e=>et(e.width)&&et(e.height)&&et(e.x)&&et(e.y),et=e=>!isNaN(e)&&isFinite(e),Re=Symbol.for("internals"),ji=["Enter"," ","Escape"],Mi=(e,t)=>{console.warn(`[React Flow]: ${t} Help: https://reactflow.dev/error#${e}`)},Km=e=>"nativeEvent"in e;function Ta(e){const a=(Km(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(a?.nodeName)||a?.hasAttribute("contenteditable")||!!a?.closest(".nokey")}const Ai=e=>"clientX"in e,Mt=(e,t)=>{const a=Ai(e),r=a?e.clientX:e.touches?.[0].clientX,s=a?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:s-(t?.top??0)}},Rs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,fn=({id:e,path:t,labelX:a,labelY:r,label:s,labelStyle:n,labelShowBg:o,labelBgStyle:c,labelBgPadding:i,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:m,interactionWidth:h=20})=>X.createElement(X.Fragment,null,X.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:m}),h&&X.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),s&&et(a)&&et(r)?X.createElement(Xm,{x:a,y:r,label:s,labelStyle:n,labelShowBg:o,labelBgStyle:c,labelBgPadding:i,labelBgBorderRadius:l}):null);fn.displayName="BaseEdge";function kn(e,t,a){return a===void 0?a:r=>{const s=t().edges.find(n=>n.id===e);s&&a(r,{...s})}}function ki({sourceX:e,sourceY:t,targetX:a,targetY:r}){const s=Math.abs(a-e)/2,n=a<e?a+s:a-s,o=Math.abs(r-t)/2,c=r<t?r+o:r-o;return[n,c,s,o]}function Ti({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:s,sourceControlY:n,targetControlX:o,targetControlY:c}){const i=e*.125+s*.375+o*.375+a*.125,l=t*.125+n*.375+c*.375+r*.125,u=Math.abs(i-e),d=Math.abs(l-t);return[i,l,u,d]}var Lt;(function(e){e.Strict="strict",e.Loose="loose"})(Lt||(Lt={}));var Pt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pt||(Pt={}));var Kn;(function(e){e.Partial="partial",e.Full="full"})(Kn||(Kn={}));var jt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(jt||(jt={}));var Is;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Is||(Is={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));function nr({pos:e,x1:t,y1:a,x2:r,y2:s}){return e===he.Left||e===he.Right?[.5*(t+r),a]:[t,.5*(a+s)]}function Vi({sourceX:e,sourceY:t,sourcePosition:a=he.Bottom,targetX:r,targetY:s,targetPosition:n=he.Top}){const[o,c]=nr({pos:a,x1:e,y1:t,x2:r,y2:s}),[i,l]=nr({pos:n,x1:r,y1:s,x2:e,y2:t}),[u,d,m,h]=Ti({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:c,targetControlX:i,targetControlY:l});return[`M${e},${t} C${o},${c} ${i},${l} ${r},${s}`,u,d,m,h]}const so=I.memo(({sourceX:e,sourceY:t,targetX:a,targetY:r,sourcePosition:s=he.Bottom,targetPosition:n=he.Top,label:o,labelStyle:c,labelShowBg:i,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:v,interactionWidth:g})=>{const[y,x,w]=Vi({sourceX:e,sourceY:t,sourcePosition:s,targetX:a,targetY:r,targetPosition:n});return X.createElement(fn,{path:y,labelX:x,labelY:w,label:o,labelStyle:c,labelShowBg:i,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:v,interactionWidth:g})});so.displayName="SimpleBezierEdge";const sr={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},Zm=({source:e,sourcePosition:t=he.Bottom,target:a})=>t===he.Left||t===he.Right?e.x<a.x?{x:1,y:0}:{x:-1,y:0}:e.y<a.y?{x:0,y:1}:{x:0,y:-1},ar=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Jm({source:e,sourcePosition:t=he.Bottom,target:a,targetPosition:r=he.Top,center:s,offset:n}){const o=sr[t],c=sr[r],i={x:e.x+o.x*n,y:e.y+o.y*n},l={x:a.x+c.x*n,y:a.y+c.y*n},u=Zm({source:i,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",m=u[d];let h=[],v,g;const y={x:0,y:0},x={x:0,y:0},[w,_,N,U]=ki({sourceX:e.x,sourceY:e.y,targetX:a.x,targetY:a.y});if(o[d]*c[d]===-1){v=s.x??w,g=s.y??_;const D=[{x:v,y:i.y},{x:v,y:l.y}],A=[{x:i.x,y:g},{x:l.x,y:g}];o[d]===m?h=d==="x"?D:A:h=d==="x"?A:D}else{const D=[{x:i.x,y:l.y}],A=[{x:l.x,y:i.y}];if(d==="x"?h=o.x===m?A:D:h=o.y===m?D:A,t===r){const P=Math.abs(e[d]-a[d]);if(P<=n){const p=Math.min(n-1,n-P);o[d]===m?y[d]=(i[d]>e[d]?-1:1)*p:x[d]=(l[d]>a[d]?-1:1)*p}}if(t!==r){const P=d==="x"?"y":"x",p=o[d]===c[P],C=i[P]>l[P],E=i[P]<l[P];(o[d]===1&&(!p&&C||p&&E)||o[d]!==1&&(!p&&E||p&&C))&&(h=d==="x"?D:A)}const V={x:i.x+y.x,y:i.y+y.y},R={x:l.x+x.x,y:l.y+x.y},B=Math.max(Math.abs(V.x-h[0].x),Math.abs(R.x-h[0].x)),j=Math.max(Math.abs(V.y-h[0].y),Math.abs(R.y-h[0].y));B>=j?(v=(V.x+R.x)/2,g=h[0].y):(v=h[0].x,g=(V.y+R.y)/2)}return[[e,{x:i.x+y.x,y:i.y+y.y},...h,{x:l.x+x.x,y:l.y+x.y},a],v,g,N,U]}function Qm(e,t,a,r){const s=Math.min(ar(e,t)/2,ar(t,a)/2,r),{x:n,y:o}=t;if(e.x===n&&n===a.x||e.y===o&&o===a.y)return`L${n} ${o}`;if(e.y===o){const l=e.x<a.x?-1:1,u=e.y<a.y?1:-1;return`L ${n+s*l},${o}Q ${n},${o} ${n},${o+s*u}`}const c=e.x<a.x?1:-1,i=e.y<a.y?-1:1;return`L ${n},${o+s*i}Q ${n},${o} ${n+s*c},${o}`}function Va({sourceX:e,sourceY:t,sourcePosition:a=he.Bottom,targetX:r,targetY:s,targetPosition:n=he.Top,borderRadius:o=5,centerX:c,centerY:i,offset:l=20}){const[u,d,m,h,v]=Jm({source:{x:e,y:t},sourcePosition:a,target:{x:r,y:s},targetPosition:n,center:{x:c,y:i},offset:l});return[u.reduce((y,x,w)=>{let _="";return w>0&&w<u.length-1?_=Qm(u[w-1],x,u[w+1],o):_=`${w===0?"M":"L"}${x.x} ${x.y}`,y+=_,y},""),d,m,h,v]}const Ws=I.memo(({sourceX:e,sourceY:t,targetX:a,targetY:r,label:s,labelStyle:n,labelShowBg:o,labelBgStyle:c,labelBgPadding:i,labelBgBorderRadius:l,style:u,sourcePosition:d=he.Bottom,targetPosition:m=he.Top,markerEnd:h,markerStart:v,pathOptions:g,interactionWidth:y})=>{const[x,w,_]=Va({sourceX:e,sourceY:t,sourcePosition:d,targetX:a,targetY:r,targetPosition:m,borderRadius:g?.borderRadius,offset:g?.offset});return X.createElement(fn,{path:x,labelX:w,labelY:_,label:s,labelStyle:n,labelShowBg:o,labelBgStyle:c,labelBgPadding:i,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:v,interactionWidth:y})});Ws.displayName="SmoothStepEdge";const ao=I.memo(e=>X.createElement(Ws,{...e,pathOptions:I.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));ao.displayName="StepEdge";function ef({sourceX:e,sourceY:t,targetX:a,targetY:r}){const[s,n,o,c]=ki({sourceX:e,sourceY:t,targetX:a,targetY:r});return[`M ${e},${t}L ${a},${r}`,s,n,o,c]}const oo=I.memo(({sourceX:e,sourceY:t,targetX:a,targetY:r,label:s,labelStyle:n,labelShowBg:o,labelBgStyle:c,labelBgPadding:i,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:m,interactionWidth:h})=>{const[v,g,y]=ef({sourceX:e,sourceY:t,targetX:a,targetY:r});return X.createElement(fn,{path:v,labelX:g,labelY:y,label:s,labelStyle:n,labelShowBg:o,labelBgStyle:c,labelBgPadding:i,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:m,interactionWidth:h})});oo.displayName="StraightEdge";function ps(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function or({pos:e,x1:t,y1:a,x2:r,y2:s,c:n}){switch(e){case he.Left:return[t-ps(t-r,n),a];case he.Right:return[t+ps(r-t,n),a];case he.Top:return[t,a-ps(a-s,n)];case he.Bottom:return[t,a+ps(s-a,n)]}}function ro({sourceX:e,sourceY:t,sourcePosition:a=he.Bottom,targetX:r,targetY:s,targetPosition:n=he.Top,curvature:o=.25}){const[c,i]=or({pos:a,x1:e,y1:t,x2:r,y2:s,c:o}),[l,u]=or({pos:n,x1:r,y1:s,x2:e,y2:t,c:o}),[d,m,h,v]=Ti({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:c,sourceControlY:i,targetControlX:l,targetControlY:u});return[`M${e},${t} C${c},${i} ${l},${u} ${r},${s}`,d,m,h,v]}const zs=I.memo(({sourceX:e,sourceY:t,targetX:a,targetY:r,sourcePosition:s=he.Bottom,targetPosition:n=he.Top,label:o,labelStyle:c,labelShowBg:i,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:v,pathOptions:g,interactionWidth:y})=>{const[x,w,_]=ro({sourceX:e,sourceY:t,sourcePosition:s,targetX:a,targetY:r,targetPosition:n,curvature:g?.curvature});return X.createElement(fn,{path:x,labelX:w,labelY:_,label:o,labelStyle:c,labelShowBg:i,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:v,interactionWidth:y})});zs.displayName="BezierEdge";const io=I.createContext(null),tf=io.Provider;io.Consumer;const nf=()=>I.useContext(io),sf=e=>"id"in e&&"source"in e&&"target"in e,af=({source:e,sourceHandle:t,target:a,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${a}${r||""}`,Pa=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,of=(e,t)=>t.some(a=>a.source===e.source&&a.target===e.target&&(a.sourceHandle===e.sourceHandle||!a.sourceHandle&&!e.sourceHandle)&&(a.targetHandle===e.targetHandle||!a.targetHandle&&!e.targetHandle)),Pi=(e,t)=>{if(!e.source||!e.target)return Mi("006",lt.error006()),t;let a;return sf(e)?a={...e}:a={...e,id:af(e)},of(a,t)?t:t.concat(a)},Ra=({x:e,y:t},[a,r,s],n,[o,c])=>{const i={x:(e-a)/s,y:(t-r)/s};return n?{x:o*Math.round(i.x/o),y:c*Math.round(i.y/c)}:i},Ri=({x:e,y:t},[a,r,s])=>({x:e*s+a,y:t*s+r}),It=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const a=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-a,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-a,y:e.positionAbsolute.y-r}:s}},Hs=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const a=e.reduce((r,s)=>{const{x:n,y:o}=It(s,t).positionAbsolute;return Ci(r,qn({x:n,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ui(a)},Ii=(e,t,[a,r,s]=[0,0,1],n=!1,o=!1,c=[0,0])=>{const i={x:(t.x-a)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},l=[];return e.forEach(u=>{const{width:d,height:m,selectable:h=!0,hidden:v=!1}=u;if(o&&!h||v)return!1;const{positionAbsolute:g}=It(u,c),y={x:g.x,y:g.y,width:d||0,height:m||0},x=ka(i,y),w=typeof d>"u"||typeof m>"u"||d===null||m===null,_=n&&x>0,N=(d||0)*(m||0);(w||_||x>=N||u.dragging)&&l.push(u)}),l},zi=(e,t)=>{const a=e.map(r=>r.id);return t.filter(r=>a.includes(r.source)||a.includes(r.target))},Fi=(e,t,a,r,s,n=.1)=>{const o=t/(e.width*(1+n)),c=a/(e.height*(1+n)),i=Math.min(o,c),l=dn(i,r,s),u=e.x+e.width/2,d=e.y+e.height/2,m=t/2-u*l,h=a/2-d*l;return{x:m,y:h,zoom:l}},Tt=(e,t=0)=>e.transition().duration(t);function rr(e,t,a,r){return(t[a]||[]).reduce((s,n)=>(`${e.id}-${n.id}-${a}`!==r&&s.push({id:n.id||null,type:a,nodeId:e.id,x:(e.positionAbsolute?.x??0)+n.x+n.width/2,y:(e.positionAbsolute?.y??0)+n.y+n.height/2}),s),[])}function rf(e,t,a,r,s,n){const{x:o,y:c}=Mt(e),l=t.elementsFromPoint(o,c).find(v=>v.classList.contains("react-flow__handle"));if(l){const v=l.getAttribute("data-nodeid");if(v){const g=co(void 0,l),y=l.getAttribute("data-handleid"),x=n({nodeId:v,id:y,type:g});if(x){const w=s.find(_=>_.nodeId===v&&_.type===g&&_.id===y);return{handle:{id:y,type:g,nodeId:v,x:w?.x||a.x,y:w?.y||a.y},validHandleResult:x}}}}let u=[],d=1/0;if(s.forEach(v=>{const g=Math.sqrt((v.x-a.x)**2+(v.y-a.y)**2);if(g<=r){const y=n(v);g<=d&&(g<d?u=[{handle:v,validHandleResult:y}]:g===d&&u.push({handle:v,validHandleResult:y}),d=g)}}),!u.length)return{handle:null,validHandleResult:Oi()};if(u.length===1)return u[0];const m=u.some(({validHandleResult:v})=>v.isValid),h=u.some(({handle:v})=>v.type==="target");return u.find(({handle:v,validHandleResult:g})=>h?v.type==="target":m?g.isValid:!0)||u[0]}const cf={source:null,target:null,sourceHandle:null,targetHandle:null},Oi=()=>({handleDomNode:null,isValid:!1,connection:cf,endHandle:null});function Li(e,t,a,r,s,n,o){const c=s==="target",i=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...Oi(),handleDomNode:i};if(i){const u=co(void 0,i),d=i.getAttribute("data-nodeid"),m=i.getAttribute("data-handleid"),h=i.classList.contains("connectable"),v=i.classList.contains("connectableend"),g={source:c?d:a,sourceHandle:c?m:r,target:c?a:d,targetHandle:c?r:m};l.connection=g,h&&v&&(t===Lt.Strict?c&&u==="source"||!c&&u==="target":d!==a||m!==r)&&(l.endHandle={nodeId:d,handleId:m,type:u},l.isValid=n(g))}return l}function lf({nodes:e,nodeId:t,handleId:a,handleType:r}){return e.reduce((s,n)=>{if(n[Re]){const{handleBounds:o}=n[Re];let c=[],i=[];o&&(c=rr(n,o,"source",`${t}-${a}-${r}`),i=rr(n,o,"target",`${t}-${a}-${r}`)),s.push(...c,...i)}return s},[])}function co(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function pa(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function uf(e,t){let a=null;return t?a="valid":e&&!t&&(a="invalid"),a}function Gi({event:e,handleId:t,nodeId:a,onConnect:r,isTarget:s,getState:n,setState:o,isValidConnection:c,edgeUpdaterType:i,onReconnectEnd:l}){const u=Si(e.target),{connectionMode:d,domNode:m,autoPanOnConnect:h,connectionRadius:v,onConnectStart:g,panBy:y,getNodes:x,cancelConnection:w}=n();let _=0,N;const{x:U,y:k}=Mt(e),D=u?.elementFromPoint(U,k),A=co(i,D),V=m?.getBoundingClientRect();if(!V||!A)return;let R,B=Mt(e,V),j=!1,P=null,p=!1,C=null;const E=lf({nodes:x(),nodeId:a,handleId:t,handleType:A}),L=()=>{if(!h)return;const[T,b]=Ei(B,V);y({x:T,y:b}),_=requestAnimationFrame(L)};o({connectionPosition:B,connectionStatus:null,connectionNodeId:a,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:a,handleId:t,type:A},connectionEndHandle:null}),g?.(e,{nodeId:a,handleId:t,handleType:A});function G(T){const{transform:b}=n();B=Mt(T,V);const{handle:M,validHandleResult:z}=rf(T,u,Ra(B,b,!1,[1,1]),v,E,F=>Li(F,d,a,t,s?"target":"source",c,u));if(N=M,j||(L(),j=!0),C=z.handleDomNode,P=z.connection,p=z.isValid,o({connectionPosition:N&&p?Ri({x:N.x,y:N.y},b):B,connectionStatus:uf(!!N,p),connectionEndHandle:z.endHandle}),!N&&!p&&!C)return pa(R);P.source!==P.target&&C&&(pa(R),R=C,C.classList.add("connecting","react-flow__handle-connecting"),C.classList.toggle("valid",p),C.classList.toggle("react-flow__handle-valid",p))}function S(T){(N||C)&&P&&p&&r?.(P),n().onConnectEnd?.(T),i&&l?.(T),pa(R),w(),cancelAnimationFrame(_),j=!1,p=!1,P=null,C=null,u.removeEventListener("mousemove",G),u.removeEventListener("mouseup",S),u.removeEventListener("touchmove",G),u.removeEventListener("touchend",S)}u.addEventListener("mousemove",G),u.addEventListener("mouseup",S),u.addEventListener("touchmove",G),u.addEventListener("touchend",S)}const ir=()=>!0,df=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),mf=(e,t,a)=>r=>{const{connectionStartHandle:s,connectionEndHandle:n,connectionClickStartHandle:o}=r;return{connecting:s?.nodeId===e&&s?.handleId===t&&s?.type===a||n?.nodeId===e&&n?.handleId===t&&n?.type===a,clickConnecting:o?.nodeId===e&&o?.handleId===t&&o?.type===a}},Bi=I.forwardRef(({type:e="source",position:t=he.Top,isValidConnection:a,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:n=!0,id:o,onConnect:c,children:i,className:l,onMouseDown:u,onTouchStart:d,...m},h)=>{const v=o||null,g=e==="target",y=Fe(),x=nf(),{connectOnClick:w,noPanClassName:_}=Ve(df,ze),{connecting:N,clickConnecting:U}=Ve(mf(x,v,e),ze);x||y.getState().onError?.("010",lt.error010());const k=V=>{const{defaultEdgeOptions:R,onConnect:B,hasDefaultEdges:j}=y.getState(),P={...R,...V};if(j){const{edges:p,setEdges:C}=y.getState();C(Pi(P,p))}B?.(P),c?.(P)},D=V=>{if(!x)return;const R=Ai(V);s&&(R&&V.button===0||!R)&&Gi({event:V,handleId:v,nodeId:x,onConnect:k,isTarget:g,getState:y.getState,setState:y.setState,isValidConnection:a||y.getState().isValidConnection||ir}),R?u?.(V):d?.(V)},A=V=>{const{onClickConnectStart:R,onClickConnectEnd:B,connectionClickStartHandle:j,connectionMode:P,isValidConnection:p}=y.getState();if(!x||!j&&!s)return;if(!j){R?.(V,{nodeId:x,handleId:v,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:v}});return}const C=Si(V.target),E=a||p||ir,{connection:L,isValid:G}=Li({nodeId:x,id:v,type:e},P,j.nodeId,j.handleId||null,j.type,E,C);G&&k(L),B?.(V),y.setState({connectionClickStartHandle:null})};return X.createElement("div",{"data-handleid":v,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${v}-${e}`,className:He(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,l,{source:!g,target:g,connectable:r,connectablestart:s,connectableend:n,connecting:U,connectionindicator:r&&(s&&!N||n&&N)}]),onMouseDown:D,onTouchStart:D,onClick:w?A:void 0,ref:h,...m},i)});Bi.displayName="Handle";var zt=I.memo(Bi);const Wi=({data:e,isConnectable:t,targetPosition:a=he.Top,sourcePosition:r=he.Bottom})=>X.createElement(X.Fragment,null,X.createElement(zt,{type:"target",position:a,isConnectable:t}),e?.label,X.createElement(zt,{type:"source",position:r,isConnectable:t}));Wi.displayName="DefaultNode";var Ia=I.memo(Wi);const Hi=({data:e,isConnectable:t,sourcePosition:a=he.Bottom})=>X.createElement(X.Fragment,null,e?.label,X.createElement(zt,{type:"source",position:a,isConnectable:t}));Hi.displayName="InputNode";var $i=I.memo(Hi);const Xi=({data:e,isConnectable:t,targetPosition:a=he.Top})=>X.createElement(X.Fragment,null,X.createElement(zt,{type:"target",position:a,isConnectable:t}),e?.label);Xi.displayName="OutputNode";var Yi=I.memo(Xi);const lo=()=>null;lo.displayName="GroupNode";const ff=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),gs=e=>e.id;function hf(e,t){return ze(e.selectedNodes.map(gs),t.selectedNodes.map(gs))&&ze(e.selectedEdges.map(gs),t.selectedEdges.map(gs))}const qi=I.memo(({onSelectionChange:e})=>{const t=Fe(),{selectedNodes:a,selectedEdges:r}=Ve(ff,hf);return I.useEffect(()=>{const s={nodes:a,edges:r};e?.(s),t.getState().onSelectionChange.forEach(n=>n(s))},[a,r,e]),null});qi.displayName="SelectionListener";const pf=e=>!!e.onSelectionChange;function gf({onSelectionChange:e}){const t=Ve(pf);return e||t?X.createElement(qi,{onSelectionChange:e}):null}const vf=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Jt(e,t){I.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ee(e,t,a){I.useEffect(()=>{typeof t<"u"&&a({[e]:t})},[t])}const yf=({nodes:e,edges:t,defaultNodes:a,defaultEdges:r,onConnect:s,onConnectStart:n,onConnectEnd:o,onClickConnectStart:c,onClickConnectEnd:i,nodesDraggable:l,nodesConnectable:u,nodesFocusable:d,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:v,minZoom:g,maxZoom:y,nodeExtent:x,onNodesChange:w,onEdgesChange:_,elementsSelectable:N,connectionMode:U,snapGrid:k,snapToGrid:D,translateExtent:A,connectOnClick:V,defaultEdgeOptions:R,fitView:B,fitViewOptions:j,onNodesDelete:P,onEdgesDelete:p,onNodeDrag:C,onNodeDragStart:E,onNodeDragStop:L,onSelectionDrag:G,onSelectionDragStart:S,onSelectionDragStop:T,noPanClassName:b,nodeOrigin:M,rfId:z,autoPanOnConnect:F,autoPanOnNodeDrag:O,onError:$,connectionRadius:W,isValidConnection:Y,nodeDragThreshold:Z})=>{const{setNodes:Q,setEdges:J,setDefaultNodesAndEdges:q,setMinZoom:pe,setMaxZoom:ie,setTranslateExtent:ee,setNodeExtent:ae,reset:te}=Ve(vf,ze),H=Fe();return I.useEffect(()=>{const se=r?.map(re=>({...re,...R}));return q(a,se),()=>{te()}},[]),Ee("defaultEdgeOptions",R,H.setState),Ee("connectionMode",U,H.setState),Ee("onConnect",s,H.setState),Ee("onConnectStart",n,H.setState),Ee("onConnectEnd",o,H.setState),Ee("onClickConnectStart",c,H.setState),Ee("onClickConnectEnd",i,H.setState),Ee("nodesDraggable",l,H.setState),Ee("nodesConnectable",u,H.setState),Ee("nodesFocusable",d,H.setState),Ee("edgesFocusable",m,H.setState),Ee("edgesUpdatable",h,H.setState),Ee("elementsSelectable",N,H.setState),Ee("elevateNodesOnSelect",v,H.setState),Ee("snapToGrid",D,H.setState),Ee("snapGrid",k,H.setState),Ee("onNodesChange",w,H.setState),Ee("onEdgesChange",_,H.setState),Ee("connectOnClick",V,H.setState),Ee("fitViewOnInit",B,H.setState),Ee("fitViewOnInitOptions",j,H.setState),Ee("onNodesDelete",P,H.setState),Ee("onEdgesDelete",p,H.setState),Ee("onNodeDrag",C,H.setState),Ee("onNodeDragStart",E,H.setState),Ee("onNodeDragStop",L,H.setState),Ee("onSelectionDrag",G,H.setState),Ee("onSelectionDragStart",S,H.setState),Ee("onSelectionDragStop",T,H.setState),Ee("noPanClassName",b,H.setState),Ee("nodeOrigin",M,H.setState),Ee("rfId",z,H.setState),Ee("autoPanOnConnect",F,H.setState),Ee("autoPanOnNodeDrag",O,H.setState),Ee("onError",$,H.setState),Ee("connectionRadius",W,H.setState),Ee("isValidConnection",Y,H.setState),Ee("nodeDragThreshold",Z,H.setState),Jt(e,Q),Jt(t,J),Jt(g,pe),Jt(y,ie),Jt(A,ee),Jt(x,ae),null},cr={display:"none"},Nf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ki="react-flow__node-desc",Zi="react-flow__edge-desc",xf="react-flow__aria-live",bf=e=>e.ariaLiveMessage;function wf({rfId:e}){const t=Ve(bf);return X.createElement("div",{id:`${xf}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Nf},t)}function Df({rfId:e,disableKeyboardA11y:t}){return X.createElement(X.Fragment,null,X.createElement("div",{id:`${Ki}-${e}`,style:cr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),X.createElement("div",{id:`${Zi}-${e}`,style:cr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&X.createElement(wf,{rfId:e}))}var Zn=(e=null,t={actInsideInputWithModifier:!0})=>{const[a,r]=I.useState(!1),s=I.useRef(!1),n=I.useRef(new Set([])),[o,c]=I.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=l.reduce((d,m)=>d.concat(...m),[]);return[l,u]}return[[],[]]},[e]);return I.useEffect(()=>{const i=typeof document<"u"?document:null,l=t?.target||i;if(e!==null){const u=h=>{if(s.current=h.ctrlKey||h.metaKey||h.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Ta(h))return!1;const g=ur(h.code,c);n.current.add(h[g]),lr(o,n.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Ta(h))return!1;const g=ur(h.code,c);lr(o,n.current,!0)?(r(!1),n.current.clear()):n.current.delete(h[g]),h.key==="Meta"&&n.current.clear(),s.current=!1},m=()=>{n.current.clear(),r(!1)};return l?.addEventListener("keydown",u),l?.addEventListener("keyup",d),window.addEventListener("blur",m),()=>{l?.removeEventListener("keydown",u),l?.removeEventListener("keyup",d),window.removeEventListener("blur",m)}}},[e,r]),a};function lr(e,t,a){return e.filter(r=>a||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function ur(e,t){return t.includes(e)?"code":"key"}function Ji(e,t,a,r){const s=e.parentNode||e.parentId;if(!s)return a;const n=t.get(s),o=It(n,r);return Ji(n,t,{x:(a.x??0)+o.x,y:(a.y??0)+o.y,z:(n[Re]?.z??0)>(a.z??0)?n[Re]?.z??0:a.z??0},r)}function Qi(e,t,a){e.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||a?.[r.id]){const{x:n,y:o,z:c}=Ji(r,e,{...r.position,z:r[Re]?.z??0},t);r.positionAbsolute={x:n,y:o},r[Re].z=c,a?.[r.id]&&(r[Re].isParent=!0)}})}function ga(e,t,a,r){const s=new Map,n={},o=r?1e3:0;return e.forEach(c=>{const i=(et(c.zIndex)?c.zIndex:0)+(c.selected?o:0),l=t.get(c.id),u={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},d=c.parentNode||c.parentId;d&&(n[d]=!0);const m=l?.type&&l?.type!==c.type;Object.defineProperty(u,Re,{enumerable:!1,value:{handleBounds:m?void 0:l?.[Re]?.handleBounds,z:i}}),s.set(c.id,u)}),Qi(s,a,n),s}function ec(e,t={}){const{getNodes:a,width:r,height:s,minZoom:n,maxZoom:o,d3Zoom:c,d3Selection:i,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:d}=e(),m=t.initial&&!l&&u;if(c&&i&&(m||!t.initial)){const v=a().filter(y=>{const x=t.includeHiddenNodes?y.width&&y.height:!y.hidden;return t.nodes?.length?x&&t.nodes.some(w=>w.id===y.id):x}),g=v.every(y=>y.width&&y.height);if(v.length>0&&g){const y=Hs(v,d),{x,y:w,zoom:_}=Fi(y,r,s,t.minZoom??n,t.maxZoom??o,t.padding??.1),N=xt.translate(x,w).scale(_);return typeof t.duration=="number"&&t.duration>0?c.transform(Tt(i,t.duration),N):c.transform(i,N),!0}}return!1}function _f(e,t){return e.forEach(a=>{const r=t.get(a.id);r&&t.set(r.id,{...r,[Re]:r[Re],selected:a.selected})}),new Map(t)}function Ef(e,t){return t.map(a=>{const r=e.find(s=>s.id===a.id);return r&&(a.selected=r.selected),a})}function vs({changedNodes:e,changedEdges:t,get:a,set:r}){const{nodeInternals:s,edges:n,onNodesChange:o,onEdgesChange:c,hasDefaultNodes:i,hasDefaultEdges:l}=a();e?.length&&(i&&r({nodeInternals:_f(e,s)}),o?.(e)),t?.length&&(l&&r({edges:Ef(t,n)}),c?.(t))}const Qt=()=>{},Sf={zoomIn:Qt,zoomOut:Qt,zoomTo:Qt,getZoom:()=>1,setViewport:Qt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Qt,fitBounds:Qt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Cf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Uf=()=>{const e=Fe(),{d3Zoom:t,d3Selection:a}=Ve(Cf,ze);return I.useMemo(()=>a&&t?{zoomIn:s=>t.scaleBy(Tt(a,s?.duration),1.2),zoomOut:s=>t.scaleBy(Tt(a,s?.duration),1/1.2),zoomTo:(s,n)=>t.scaleTo(Tt(a,n?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,n)=>{const[o,c,i]=e.getState().transform,l=xt.translate(s.x??o,s.y??c).scale(s.zoom??i);t.transform(Tt(a,n?.duration),l)},getViewport:()=>{const[s,n,o]=e.getState().transform;return{x:s,y:n,zoom:o}},fitView:s=>ec(e.getState,s),setCenter:(s,n,o)=>{const{width:c,height:i,maxZoom:l}=e.getState(),u=typeof o?.zoom<"u"?o.zoom:l,d=c/2-s*u,m=i/2-n*u,h=xt.translate(d,m).scale(u);t.transform(Tt(a,o?.duration),h)},fitBounds:(s,n)=>{const{width:o,height:c,minZoom:i,maxZoom:l}=e.getState(),{x:u,y:d,zoom:m}=Fi(s,o,c,i,l,n?.padding??.1),h=xt.translate(u,d).scale(m);t.transform(Tt(a,n?.duration),h)},project:s=>{const{transform:n,snapToGrid:o,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ra(s,n,o,c)},screenToFlowPosition:s=>{const{transform:n,snapToGrid:o,snapGrid:c,domNode:i}=e.getState();if(!i)return s;const{x:l,y:u}=i.getBoundingClientRect(),d={x:s.x-l,y:s.y-u};return Ra(d,n,o,c)},flowToScreenPosition:s=>{const{transform:n,domNode:o}=e.getState();if(!o)return s;const{x:c,y:i}=o.getBoundingClientRect(),l=Ri(s,n);return{x:l.x+c,y:l.y+i}},viewportInitialized:!0}:Sf,[t,a])};function uo(){const e=Uf(),t=Fe(),a=I.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=I.useCallback(g=>t.getState().nodeInternals.get(g),[]),s=I.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(y=>({...y}))},[]),n=I.useCallback(g=>{const{edges:y=[]}=t.getState();return y.find(x=>x.id===g)},[]),o=I.useCallback(g=>{const{getNodes:y,setNodes:x,hasDefaultNodes:w,onNodesChange:_}=t.getState(),N=y(),U=typeof g=="function"?g(N):g;if(w)x(U);else if(_){const k=U.length===0?N.map(D=>({type:"remove",id:D.id})):U.map(D=>({item:D,type:"reset"}));_(k)}},[]),c=I.useCallback(g=>{const{edges:y=[],setEdges:x,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),N=typeof g=="function"?g(y):g;if(w)x(N);else if(_){const U=N.length===0?y.map(k=>({type:"remove",id:k.id})):N.map(k=>({item:k,type:"reset"}));_(U)}},[]),i=I.useCallback(g=>{const y=Array.isArray(g)?g:[g],{getNodes:x,setNodes:w,hasDefaultNodes:_,onNodesChange:N}=t.getState();if(_){const k=[...x(),...y];w(k)}else if(N){const U=y.map(k=>({item:k,type:"add"}));N(U)}},[]),l=I.useCallback(g=>{const y=Array.isArray(g)?g:[g],{edges:x=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:N}=t.getState();if(_)w([...x,...y]);else if(N){const U=y.map(k=>({item:k,type:"add"}));N(U)}},[]),u=I.useCallback(()=>{const{getNodes:g,edges:y=[],transform:x}=t.getState(),[w,_,N]=x;return{nodes:g().map(U=>({...U})),edges:y.map(U=>({...U})),viewport:{x:w,y:_,zoom:N}}},[]),d=I.useCallback(({nodes:g,edges:y})=>{const{nodeInternals:x,getNodes:w,edges:_,hasDefaultNodes:N,hasDefaultEdges:U,onNodesDelete:k,onEdgesDelete:D,onNodesChange:A,onEdgesChange:V}=t.getState(),R=(g||[]).map(C=>C.id),B=(y||[]).map(C=>C.id),j=w().reduce((C,E)=>{const L=E.parentNode||E.parentId,G=!R.includes(E.id)&&L&&C.find(T=>T.id===L);return(typeof E.deletable=="boolean"?E.deletable:!0)&&(R.includes(E.id)||G)&&C.push(E),C},[]),P=_.filter(C=>typeof C.deletable=="boolean"?C.deletable:!0),p=P.filter(C=>B.includes(C.id));if(j||p){const C=zi(j,P),E=[...p,...C],L=E.reduce((G,S)=>(G.includes(S.id)||G.push(S.id),G),[]);if((U||N)&&(U&&t.setState({edges:_.filter(G=>!L.includes(G.id))}),N&&(j.forEach(G=>{x.delete(G.id)}),t.setState({nodeInternals:new Map(x)}))),L.length>0&&(D?.(E),V&&V(L.map(G=>({id:G,type:"remove"})))),j.length>0&&(k?.(j),A)){const G=j.map(S=>({id:S.id,type:"remove"}));A(G)}}},[]),m=I.useCallback(g=>{const y=qm(g),x=y?null:t.getState().nodeInternals.get(g.id);return!y&&!x?[null,null,y]:[y?g:tr(x),x,y]},[]),h=I.useCallback((g,y=!0,x)=>{const[w,_,N]=m(g);return w?(x||t.getState().getNodes()).filter(U=>{if(!N&&(U.id===_.id||!U.positionAbsolute))return!1;const k=tr(U),D=ka(k,w);return y&&D>0||D>=w.width*w.height}):[]},[]),v=I.useCallback((g,y,x=!0)=>{const[w]=m(g);if(!w)return!1;const _=ka(w,y);return x&&_>0||_>=w.width*w.height},[]);return I.useMemo(()=>({...e,getNodes:a,getNode:r,getEdges:s,getEdge:n,setNodes:o,setEdges:c,addNodes:i,addEdges:l,toObject:u,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:v}),[e,a,r,s,n,o,c,i,l,u,d,h,v])}const jf={actInsideInputWithModifier:!1};var Mf=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const a=Fe(),{deleteElements:r}=uo(),s=Zn(e,jf),n=Zn(t);I.useEffect(()=>{if(s){const{edges:o,getNodes:c}=a.getState(),i=c().filter(u=>u.selected),l=o.filter(u=>u.selected);r({nodes:i,edges:l}),a.setState({nodesSelectionActive:!1})}},[s]),I.useEffect(()=>{a.setState({multiSelectionActive:n})},[n])};function Af(e){const t=Fe();I.useEffect(()=>{let a;const r=()=>{if(!e.current)return;const s=to(e.current);(s.height===0||s.width===0)&&t.getState().onError?.("004",lt.error004()),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(a=new ResizeObserver(()=>r()),a.observe(e.current)),()=>{window.removeEventListener("resize",r),a&&e.current&&a.unobserve(e.current)}},[])}const mo={position:"absolute",width:"100%",height:"100%",top:0,left:0},kf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ys=e=>({x:e.x,y:e.y,zoom:e.k}),en=(e,t)=>e.target.closest(`.${t}`),dr=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),mr=e=>{const t=e.ctrlKey&&Rs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Tf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Vf=({onMove:e,onMoveStart:t,onMoveEnd:a,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:i=Pt.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:m,translateExtent:h,minZoom:v,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:x=!0,children:w,noWheelClassName:_,noPanClassName:N})=>{const U=I.useRef(),k=Fe(),D=I.useRef(!1),A=I.useRef(!1),V=I.useRef(null),R=I.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:j,d3ZoomHandler:P,userSelectionActive:p}=Ve(Tf,ze),C=Zn(y),E=I.useRef(0),L=I.useRef(!1),G=I.useRef();return Af(V),I.useEffect(()=>{if(V.current){const S=V.current.getBoundingClientRect(),T=Di().scaleExtent([v,g]).translateExtent(h),b=Qe(V.current).call(T),M=xt.translate(m.x,m.y).scale(dn(m.zoom,v,g)),z=[[0,0],[S.width,S.height]],F=T.constrain()(M,z,h);T.transform(b,F),T.wheelDelta(mr),k.setState({d3Zoom:T,d3Selection:b,d3ZoomHandler:b.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:V.current.closest(".react-flow")})}},[]),I.useEffect(()=>{j&&B&&(o&&!C&&!p?j.on("wheel.zoom",S=>{if(en(S,_))return!1;S.preventDefault(),S.stopImmediatePropagation();const T=j.property("__zoom").k||1;if(S.ctrlKey&&n){const Y=rt(S),Z=mr(S),Q=T*Math.pow(2,Z);B.scaleTo(j,Q,Y,S);return}const b=S.deltaMode===1?20:1;let M=i===Pt.Vertical?0:S.deltaX*b,z=i===Pt.Horizontal?0:S.deltaY*b;!Rs()&&S.shiftKey&&i!==Pt.Vertical&&(M=S.deltaY*b,z=0),B.translateBy(j,-(M/T)*c,-(z/T)*c,{internal:!0});const F=ys(j.property("__zoom")),{onViewportChangeStart:O,onViewportChange:$,onViewportChangeEnd:W}=k.getState();clearTimeout(G.current),L.current||(L.current=!0,t?.(S,F),O?.(F)),L.current&&(e?.(S,F),$?.(F),G.current=setTimeout(()=>{a?.(S,F),W?.(F),L.current=!1},150))},{passive:!1}):typeof P<"u"&&j.on("wheel.zoom",function(S,T){if(!x&&S.type==="wheel"&&!S.ctrlKey||en(S,_))return null;S.preventDefault(),P.call(this,S,T)},{passive:!1}))},[p,o,i,j,B,P,C,n,x,_,t,e,a]),I.useEffect(()=>{B&&B.on("start",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;E.current=S.sourceEvent?.button;const{onViewportChangeStart:T}=k.getState(),b=ys(S.transform);D.current=!0,R.current=b,S.sourceEvent?.type==="mousedown"&&k.setState({paneDragging:!0}),T?.(b),t?.(S.sourceEvent,b)})},[B,t]),I.useEffect(()=>{B&&(p&&!D.current?B.on("zoom",null):p||B.on("zoom",S=>{const{onViewportChange:T}=k.getState();if(k.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),A.current=!!(r&&dr(d,E.current??0)),(e||T)&&!S.sourceEvent?.internal){const b=ys(S.transform);T?.(b),e?.(S.sourceEvent,b)}}))},[p,B,e,d,r]),I.useEffect(()=>{B&&B.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=k.getState();if(D.current=!1,k.setState({paneDragging:!1}),r&&dr(d,E.current??0)&&!A.current&&r(S.sourceEvent),A.current=!1,(a||T)&&kf(R.current,S.transform)){const b=ys(S.transform);R.current=b,clearTimeout(U.current),U.current=setTimeout(()=>{T?.(b),a?.(S.sourceEvent,b)},o?150:0)}})},[B,o,d,a,r]),I.useEffect(()=>{B&&B.filter(S=>{const T=C||s,b=n&&S.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&S.button===1&&S.type==="mousedown"&&(en(S,"react-flow__node")||en(S,"react-flow__edge")))return!0;if(!d&&!T&&!o&&!l&&!n||p||!l&&S.type==="dblclick"||en(S,_)&&S.type==="wheel"||en(S,N)&&(S.type!=="wheel"||o&&S.type==="wheel"&&!C)||!n&&S.ctrlKey&&S.type==="wheel"||!T&&!o&&!b&&S.type==="wheel"||!d&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(d)&&!d.includes(S.button)&&S.type==="mousedown")return!1;const M=Array.isArray(d)&&d.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&M})},[p,B,s,n,o,l,d,u,C]),X.createElement("div",{className:"react-flow__renderer",ref:V,style:mo},w)},Pf=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Rf(){const{userSelectionActive:e,userSelectionRect:t}=Ve(Pf,ze);return e&&t?X.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function fr(e,t){const a=t.parentNode||t.parentId,r=e.find(s=>s.id===a);if(r){const s=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(s>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),n>0&&(r.style.height+=n),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function tc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const a=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const n=e.filter(c=>c.id===s.id);if(n.length===0)return r.push(s),r;const o={...s};for(const c of n)if(c)switch(c.type){case"select":{o.selected=c.selected;break}case"position":{typeof c.position<"u"&&(o.position=c.position),typeof c.positionAbsolute<"u"&&(o.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(o.dragging=c.dragging),o.expandParent&&fr(r,o);break}case"dimensions":{typeof c.dimensions<"u"&&(o.width=c.dimensions.width,o.height=c.dimensions.height),typeof c.updateStyle<"u"&&(o.style={...o.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(o.resizing=c.resizing),o.expandParent&&fr(r,o);break}case"remove":return r}return r.push(o),r},a)}function nc(e,t){return tc(e,t)}function If(e,t){return tc(e,t)}const Ut=(e,t)=>({id:e,type:"select",selected:t});function an(e,t){return e.reduce((a,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,a.push(Ut(r.id,!0))):r.selected&&!s&&(r.selected=!1,a.push(Ut(r.id,!1))),a},[])}const va=(e,t)=>a=>{a.target===t.current&&e?.(a)},zf=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),sc=I.memo(({isSelecting:e,selectionMode:t=Kn.Full,panOnDrag:a,onSelectionStart:r,onSelectionEnd:s,onPaneClick:n,onPaneContextMenu:o,onPaneScroll:c,onPaneMouseEnter:i,onPaneMouseMove:l,onPaneMouseLeave:u,children:d})=>{const m=I.useRef(null),h=Fe(),v=I.useRef(0),g=I.useRef(0),y=I.useRef(),{userSelectionActive:x,elementsSelectable:w,dragging:_}=Ve(zf,ze),N=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,g.current=0},U=P=>{n?.(P),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},k=P=>{if(Array.isArray(a)&&a?.includes(2)){P.preventDefault();return}o?.(P)},D=c?P=>c(P):void 0,A=P=>{const{resetSelectedElements:p,domNode:C}=h.getState();if(y.current=C?.getBoundingClientRect(),!w||!e||P.button!==0||P.target!==m.current||!y.current)return;const{x:E,y:L}=Mt(P,y.current);p(),h.setState({userSelectionRect:{width:0,height:0,startX:E,startY:L,x:E,y:L}}),r?.(P)},V=P=>{const{userSelectionRect:p,nodeInternals:C,edges:E,transform:L,onNodesChange:G,onEdgesChange:S,nodeOrigin:T,getNodes:b}=h.getState();if(!e||!y.current||!p)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const M=Mt(P,y.current),z=p.startX??0,F=p.startY??0,O={...p,x:M.x<z?M.x:z,y:M.y<F?M.y:F,width:Math.abs(M.x-z),height:Math.abs(M.y-F)},$=b(),W=Ii(C,O,L,t===Kn.Partial,!0,T),Y=zi(W,E).map(Q=>Q.id),Z=W.map(Q=>Q.id);if(v.current!==Z.length){v.current=Z.length;const Q=an($,Z);Q.length&&G?.(Q)}if(g.current!==Y.length){g.current=Y.length;const Q=an(E,Y);Q.length&&S?.(Q)}h.setState({userSelectionRect:O})},R=P=>{if(P.button!==0)return;const{userSelectionRect:p}=h.getState();!x&&p&&P.target===m.current&&U?.(P),h.setState({nodesSelectionActive:v.current>0}),N(),s?.(P)},B=P=>{x&&(h.setState({nodesSelectionActive:v.current>0}),s?.(P)),N()},j=w&&(e||x);return X.createElement("div",{className:He(["react-flow__pane",{dragging:_,selection:e}]),onClick:j?void 0:va(U,m),onContextMenu:va(k,m),onWheel:va(D,m),onMouseEnter:j?void 0:i,onMouseDown:j?A:void 0,onMouseMove:j?V:l,onMouseUp:j?R:void 0,onMouseLeave:j?B:u,ref:m,style:mo},d,X.createElement(Rf,null))});sc.displayName="Pane";function ac(e,t){const a=e.parentNode||e.parentId;if(!a)return!1;const r=t.get(a);return r?r.selected?!0:ac(r,t):!1}function hr(e,t,a){let r=e;do{if(r?.matches(t))return!0;if(r===a.current)return!1;r=r.parentElement}while(r);return!1}function Ff(e,t,a,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!ac(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:a.x-(s.positionAbsolute?.x??0),y:a.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function Of(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function oc(e,t,a,r,s=[0,0],n){const o=Of(e,e.extent||r);let c=o;const i=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(i&&e.width&&e.height){const d=a.get(i),{x:m,y:h}=It(d,s).positionAbsolute;c=d&&et(m)&&et(h)&&et(d.width)&&et(d.height)?[[m+e.width*s[0],h+e.height*s[1]],[m+d.width-e.width+e.width*s[0],h+d.height-e.height+e.height*s[1]]]:c}else n?.("005",lt.error005()),c=o;else if(e.extent&&i&&e.extent!=="parent"){const d=a.get(i),{x:m,y:h}=It(d,s).positionAbsolute;c=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let l={x:0,y:0};if(i){const d=a.get(i);l=It(d,s).positionAbsolute}const u=c&&c!=="parent"?no(t,c):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function ya({nodeId:e,dragItems:t,nodeInternals:a}){const r=t.map(s=>({...a.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const pr=(e,t,a,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const n=Array.from(s),o=t.getBoundingClientRect(),c={x:o.width*r[0],y:o.height*r[1]};return n.map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),position:i.getAttribute("data-handlepos"),x:(l.left-o.left-c.x)/a,y:(l.top-o.top-c.y)/a,...to(i)}})};function Tn(e,t,a){return a===void 0?a:r=>{const s=t().nodeInternals.get(e);s&&a(r,{...s})}}function za({id:e,store:t,unselect:a=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:n,multiSelectionActive:o,nodeInternals:c,onError:i}=t.getState(),l=c.get(e);if(!l){i?.("012",lt.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(a||l.selected&&o)&&(n({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([e])}function Lf(){const e=Fe();return I.useCallback(({sourceEvent:a})=>{const{transform:r,snapGrid:s,snapToGrid:n}=e.getState(),o=a.touches?a.touches[0].clientX:a.clientX,c=a.touches?a.touches[0].clientY:a.clientY,i={x:(o-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:n?s[0]*Math.round(i.x/s[0]):i.x,ySnapped:n?s[1]*Math.round(i.y/s[1]):i.y,...i}},[])}function Na(e){return(t,a,r)=>e?.(t,r)}function rc({nodeRef:e,disabled:t=!1,noDragClassName:a,handleSelector:r,nodeId:s,isSelectable:n,selectNodesOnDrag:o}){const c=Fe(),[i,l]=I.useState(!1),u=I.useRef([]),d=I.useRef({x:null,y:null}),m=I.useRef(0),h=I.useRef(null),v=I.useRef({x:0,y:0}),g=I.useRef(null),y=I.useRef(!1),x=I.useRef(!1),w=I.useRef(!1),_=Lf();return I.useEffect(()=>{if(e?.current){const N=Qe(e.current),U=({x:A,y:V})=>{const{nodeInternals:R,onNodeDrag:B,onSelectionDrag:j,updateNodePositions:P,nodeExtent:p,snapGrid:C,snapToGrid:E,nodeOrigin:L,onError:G}=c.getState();d.current={x:A,y:V};let S=!1,T={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&p){const M=Hs(u.current,L);T=qn(M)}if(u.current=u.current.map(M=>{const z={x:A-M.distance.x,y:V-M.distance.y};E&&(z.x=C[0]*Math.round(z.x/C[0]),z.y=C[1]*Math.round(z.y/C[1]));const F=[[p[0][0],p[0][1]],[p[1][0],p[1][1]]];u.current.length>1&&p&&!M.extent&&(F[0][0]=M.positionAbsolute.x-T.x+p[0][0],F[1][0]=M.positionAbsolute.x+(M.width??0)-T.x2+p[1][0],F[0][1]=M.positionAbsolute.y-T.y+p[0][1],F[1][1]=M.positionAbsolute.y+(M.height??0)-T.y2+p[1][1]);const O=oc(M,z,R,F,L,G);return S=S||M.position.x!==O.position.x||M.position.y!==O.position.y,M.position=O.position,M.positionAbsolute=O.positionAbsolute,M}),!S)return;P(u.current,!0,!0),l(!0);const b=s?B:Na(j);if(b&&g.current){const[M,z]=ya({nodeId:s,dragItems:u.current,nodeInternals:R});b(g.current,M,z)}},k=()=>{if(!h.current)return;const[A,V]=Ei(v.current,h.current);if(A!==0||V!==0){const{transform:R,panBy:B}=c.getState();d.current.x=(d.current.x??0)-A/R[2],d.current.y=(d.current.y??0)-V/R[2],B({x:A,y:V})&&U(d.current)}m.current=requestAnimationFrame(k)},D=A=>{const{nodeInternals:V,multiSelectionActive:R,nodesDraggable:B,unselectNodesAndEdges:j,onNodeDragStart:P,onSelectionDragStart:p}=c.getState();x.current=!0;const C=s?P:Na(p);(!o||!n)&&!R&&s&&(V.get(s)?.selected||j()),s&&n&&o&&za({id:s,store:c,nodeRef:e});const E=_(A);if(d.current=E,u.current=Ff(V,B,E,s),C&&u.current){const[L,G]=ya({nodeId:s,dragItems:u.current,nodeInternals:V});C(A.sourceEvent,L,G)}};if(t)N.on(".drag",null);else{const A=Qu().on("start",V=>{const{domNode:R,nodeDragThreshold:B}=c.getState();B===0&&D(V),w.current=!1;const j=_(V);d.current=j,h.current=R?.getBoundingClientRect()||null,v.current=Mt(V.sourceEvent,h.current)}).on("drag",V=>{const R=_(V),{autoPanOnNodeDrag:B,nodeDragThreshold:j}=c.getState();if(V.sourceEvent.type==="touchmove"&&V.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!y.current&&x.current&&B&&(y.current=!0,k()),!x.current){const P=R.xSnapped-(d?.current?.x??0),p=R.ySnapped-(d?.current?.y??0);Math.sqrt(P*P+p*p)>j&&D(V)}(d.current.x!==R.xSnapped||d.current.y!==R.ySnapped)&&u.current&&x.current&&(g.current=V.sourceEvent,v.current=Mt(V.sourceEvent,h.current),U(R))}}).on("end",V=>{if(!(!x.current||w.current)&&(l(!1),y.current=!1,x.current=!1,cancelAnimationFrame(m.current),u.current)){const{updateNodePositions:R,nodeInternals:B,onNodeDragStop:j,onSelectionDragStop:P}=c.getState(),p=s?j:Na(P);if(R(u.current,!1,!1),p){const[C,E]=ya({nodeId:s,dragItems:u.current,nodeInternals:B});p(V.sourceEvent,C,E)}}}).filter(V=>{const R=V.target;return!V.button&&(!a||!hr(R,`.${a}`,e))&&(!r||hr(R,r,e))});return N.call(A),()=>{N.on(".drag",null)}}}},[e,t,a,r,n,c,s,o,_]),i}function ic(){const e=Fe();return I.useCallback(a=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:n,getNodes:o,snapToGrid:c,snapGrid:i,onError:l,nodesDraggable:u}=e.getState(),d=o().filter(w=>w.selected&&(w.draggable||u&&typeof w.draggable>"u")),m=c?i[0]:5,h=c?i[1]:5,v=a.isShiftPressed?4:1,g=a.x*m*v,y=a.y*h*v,x=d.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+g,y:w.positionAbsolute.y+y};c&&(_.x=i[0]*Math.round(_.x/i[0]),_.y=i[1]*Math.round(_.y/i[1]));const{positionAbsolute:N,position:U}=oc(w,_,r,s,void 0,l);w.position=U,w.positionAbsolute=N}return w});n(x,!0,!1)},[])}const cn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Vn=e=>{const t=({id:a,type:r,data:s,xPos:n,yPos:o,xPosOrigin:c,yPosOrigin:i,selected:l,onClick:u,onMouseEnter:d,onMouseMove:m,onMouseLeave:h,onContextMenu:v,onDoubleClick:g,style:y,className:x,isDraggable:w,isSelectable:_,isConnectable:N,isFocusable:U,selectNodesOnDrag:k,sourcePosition:D,targetPosition:A,hidden:V,resizeObserver:R,dragHandle:B,zIndex:j,isParent:P,noDragClassName:p,noPanClassName:C,initialized:E,disableKeyboardA11y:L,ariaLabel:G,rfId:S,hasHandleBounds:T})=>{const b=Fe(),M=I.useRef(null),z=I.useRef(null),F=I.useRef(D),O=I.useRef(A),$=I.useRef(r),W=_||w||u||d||m||h,Y=ic(),Z=Tn(a,b.getState,d),Q=Tn(a,b.getState,m),J=Tn(a,b.getState,h),q=Tn(a,b.getState,v),pe=Tn(a,b.getState,g),ie=te=>{const{nodeDragThreshold:H}=b.getState();if(_&&(!k||!w||H>0)&&za({id:a,store:b,nodeRef:M}),u){const se=b.getState().nodeInternals.get(a);se&&u(te,{...se})}},ee=te=>{if(!Ta(te)&&!L)if(ji.includes(te.key)&&_){const H=te.key==="Escape";za({id:a,store:b,unselect:H,nodeRef:M})}else w&&l&&Object.prototype.hasOwnProperty.call(cn,te.key)&&(b.setState({ariaLiveMessage:`Moved selected node ${te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~n}, y: ${~~o}`}),Y({x:cn[te.key].x,y:cn[te.key].y,isShiftPressed:te.shiftKey}))};I.useEffect(()=>()=>{z.current&&(R?.unobserve(z.current),z.current=null)},[]),I.useEffect(()=>{if(M.current&&!V){const te=M.current;(!E||!T||z.current!==te)&&(z.current&&R?.unobserve(z.current),R?.observe(te),z.current=te)}},[V,E,T]),I.useEffect(()=>{const te=$.current!==r,H=F.current!==D,se=O.current!==A;M.current&&(te||H||se)&&(te&&($.current=r),H&&(F.current=D),se&&(O.current=A),b.getState().updateNodeDimensions([{id:a,nodeElement:M.current,forceUpdate:!0}]))},[a,r,D,A]);const ae=rc({nodeRef:M,disabled:V||!w,noDragClassName:p,handleSelector:B,nodeId:a,isSelectable:_,selectNodesOnDrag:k});return V?null:X.createElement("div",{className:He(["react-flow__node",`react-flow__node-${r}`,{[C]:w},x,{selected:l,selectable:_,parent:P,dragging:ae}]),ref:M,style:{zIndex:j,transform:`translate(${c}px,${i}px)`,pointerEvents:W?"all":"none",visibility:E?"visible":"hidden",...y},"data-id":a,"data-testid":`rf__node-${a}`,onMouseEnter:Z,onMouseMove:Q,onMouseLeave:J,onContextMenu:q,onClick:ie,onDoubleClick:pe,onKeyDown:U?ee:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":L?void 0:`${Ki}-${S}`,"aria-label":G},X.createElement(tf,{value:a},X.createElement(e,{id:a,data:s,type:r,xPos:n,yPos:o,selected:l,isConnectable:N,sourcePosition:D,targetPosition:A,dragging:ae,dragHandle:B,zIndex:j})))};return t.displayName="NodeWrapper",I.memo(t)};const Gf=e=>{const t=e.getNodes().filter(a=>a.selected);return{...Hs(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Bf({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:a}){const r=Fe(),{width:s,height:n,x:o,y:c,transformString:i,userSelectionActive:l}=Ve(Gf,ze),u=ic(),d=I.useRef(null);if(I.useEffect(()=>{a||d.current?.focus({preventScroll:!0})},[a]),rc({nodeRef:d}),l||!s||!n)return null;const m=e?v=>{const g=r.getState().getNodes().filter(y=>y.selected);e(v,g)}:void 0,h=v=>{Object.prototype.hasOwnProperty.call(cn,v.key)&&u({x:cn[v.key].x,y:cn[v.key].y,isShiftPressed:v.shiftKey})};return X.createElement("div",{className:He(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i}},X.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:a?void 0:-1,onKeyDown:a?void 0:h,style:{width:s,height:n,top:c,left:o}}))}var Wf=I.memo(Bf);const Hf=e=>e.nodesSelectionActive,cc=({children:e,onPaneClick:t,onPaneMouseEnter:a,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:n,onPaneScroll:o,deleteKeyCode:c,onMove:i,onMoveStart:l,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:m,selectionMode:h,onSelectionStart:v,onSelectionEnd:g,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:N,zoomOnPinch:U,panOnScroll:k,panOnScrollSpeed:D,panOnScrollMode:A,zoomOnDoubleClick:V,panOnDrag:R,defaultViewport:B,translateExtent:j,minZoom:P,maxZoom:p,preventScrolling:C,onSelectionContextMenu:E,noWheelClassName:L,noPanClassName:G,disableKeyboardA11y:S})=>{const T=Ve(Hf),b=Zn(d),M=Zn(x),z=M||R,F=M||k,O=b||m&&z!==!0;return Mf({deleteKeyCode:c,multiSelectionKeyCode:y}),X.createElement(Vf,{onMove:i,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:n,elementsSelectable:_,zoomOnScroll:N,zoomOnPinch:U,panOnScroll:F,panOnScrollSpeed:D,panOnScrollMode:A,zoomOnDoubleClick:V,panOnDrag:!b&&z,defaultViewport:B,translateExtent:j,minZoom:P,maxZoom:p,zoomActivationKeyCode:w,preventScrolling:C,noWheelClassName:L,noPanClassName:G},X.createElement(sc,{onSelectionStart:v,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:a,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:n,onPaneScroll:o,panOnDrag:z,isSelecting:!!O,selectionMode:h},e,T&&X.createElement(Wf,{onSelectionContextMenu:E,noPanClassName:G,disableKeyboardA11y:S})))};cc.displayName="FlowRenderer";var $f=I.memo(cc);function Xf(e){return Ve(I.useCallback(a=>e?Ii(a.nodeInternals,{x:0,y:0,width:a.width,height:a.height},a.transform,!0):a.getNodes(),[e]))}function Yf(e){const t={input:Vn(e.input||$i),default:Vn(e.default||Ia),output:Vn(e.output||Yi),group:Vn(e.group||lo)},a={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,n)=>(s[n]=Vn(e[n]||Ia),s),a);return{...t,...r}}const qf=({x:e,y:t,width:a,height:r,origin:s})=>!a||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-a*s[0],y:t-r*s[1]},Kf=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),lc=e=>{const{nodesDraggable:t,nodesConnectable:a,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:n,onError:o}=Ve(Kf,ze),c=Xf(e.onlyRenderVisibleElements),i=I.useRef(),l=I.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const m=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));n(m)});return i.current=u,u},[]);return I.useEffect(()=>()=>{i?.current?.disconnect()},[]),X.createElement("div",{className:"react-flow__nodes",style:mo},c.map(u=>{let d=u.type||"default";e.nodeTypes[d]||(o?.("003",lt.error003(d)),d="default");const m=e.nodeTypes[d]||e.nodeTypes.default,h=!!(u.draggable||t&&typeof u.draggable>"u"),v=!!(u.selectable||s&&typeof u.selectable>"u"),g=!!(u.connectable||a&&typeof u.connectable>"u"),y=!!(u.focusable||r&&typeof u.focusable>"u"),x=e.nodeExtent?no(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,w=x?.x??0,_=x?.y??0,N=qf({x:w,y:_,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return X.createElement(m,{key:u.id,id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||he.Bottom,targetPosition:u.targetPosition||he.Top,hidden:u.hidden,xPos:w,yPos:_,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:h,isSelectable:v,isConnectable:g,isFocusable:y,resizeObserver:l,dragHandle:u.dragHandle,zIndex:u[Re]?.z??0,isParent:!!u[Re]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!u[Re]?.handleBounds})}))};lc.displayName="NodeRenderer";var Zf=I.memo(lc);const Jf=(e,t,a)=>a===he.Left?e-t:a===he.Right?e+t:e,Qf=(e,t,a)=>a===he.Top?e-t:a===he.Bottom?e+t:e,gr="react-flow__edgeupdater",vr=({position:e,centerX:t,centerY:a,radius:r=10,onMouseDown:s,onMouseEnter:n,onMouseOut:o,type:c})=>X.createElement("circle",{onMouseDown:s,onMouseEnter:n,onMouseOut:o,className:He([gr,`${gr}-${c}`]),cx:Jf(t,r,e),cy:Qf(a,r,e),r,stroke:"transparent",fill:"transparent"}),eh=()=>!0;var tn=e=>{const t=({id:a,className:r,type:s,data:n,onClick:o,onEdgeDoubleClick:c,selected:i,animated:l,label:u,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:g,style:y,source:x,target:w,sourceX:_,sourceY:N,targetX:U,targetY:k,sourcePosition:D,targetPosition:A,elementsSelectable:V,hidden:R,sourceHandleId:B,targetHandleId:j,onContextMenu:P,onMouseEnter:p,onMouseMove:C,onMouseLeave:E,reconnectRadius:L,onReconnect:G,onReconnectStart:S,onReconnectEnd:T,markerEnd:b,markerStart:M,rfId:z,ariaLabel:F,isFocusable:O,isReconnectable:$,pathOptions:W,interactionWidth:Y,disableKeyboardA11y:Z})=>{const Q=I.useRef(null),[J,q]=I.useState(!1),[pe,ie]=I.useState(!1),ee=Fe(),ae=I.useMemo(()=>`url('#${Pa(M,z)}')`,[M,z]),te=I.useMemo(()=>`url('#${Pa(b,z)}')`,[b,z]);if(R)return null;const H=be=>{const{edges:Ce,addSelectedEdges:Ne,unselectNodesAndEdges:xe,multiSelectionActive:de}=ee.getState(),Ue=Ce.find(Me=>Me.id===a);Ue&&(V&&(ee.setState({nodesSelectionActive:!1}),Ue.selected&&de?(xe({nodes:[],edges:[Ue]}),Q.current?.blur()):Ne([a])),o&&o(be,Ue))},se=kn(a,ee.getState,c),re=kn(a,ee.getState,P),K=kn(a,ee.getState,p),ve=kn(a,ee.getState,C),oe=kn(a,ee.getState,E),ce=(be,Ce)=>{if(be.button!==0)return;const{edges:Ne,isValidConnection:xe}=ee.getState(),de=Ce?w:x,Ue=(Ce?j:B)||null,Me=Ce?"target":"source",Oe=xe||eh,Ae=Ce,ge=Ne.find(Se=>Se.id===a);ie(!0),S?.(be,ge,Me);const je=Se=>{ie(!1),T?.(Se,ge,Me)};Gi({event:be,handleId:Ue,nodeId:de,onConnect:Se=>G?.(ge,Se),isTarget:Ae,getState:ee.getState,setState:ee.setState,isValidConnection:Oe,edgeUpdaterType:Me,onReconnectEnd:je})},ne=be=>ce(be,!0),De=be=>ce(be,!1),le=()=>q(!0),ue=()=>q(!1),me=!V&&!o,ye=be=>{if(!Z&&ji.includes(be.key)&&V){const{unselectNodesAndEdges:Ce,addSelectedEdges:Ne,edges:xe}=ee.getState();be.key==="Escape"?(Q.current?.blur(),Ce({edges:[xe.find(Ue=>Ue.id===a)]})):Ne([a])}};return X.createElement("g",{className:He(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:i,animated:l,inactive:me,updating:J}]),onClick:H,onDoubleClick:se,onContextMenu:re,onMouseEnter:K,onMouseMove:ve,onMouseLeave:oe,onKeyDown:O?ye:void 0,tabIndex:O?0:void 0,role:O?"button":"img","data-testid":`rf__edge-${a}`,"aria-label":F===null?void 0:F||`Edge from ${x} to ${w}`,"aria-describedby":O?`${Zi}-${z}`:void 0,ref:Q},!pe&&X.createElement(e,{id:a,source:x,target:w,selected:i,animated:l,label:u,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:g,data:n,style:y,sourceX:_,sourceY:N,targetX:U,targetY:k,sourcePosition:D,targetPosition:A,sourceHandleId:B,targetHandleId:j,markerStart:ae,markerEnd:te,pathOptions:W,interactionWidth:Y}),$&&X.createElement(X.Fragment,null,($==="source"||$===!0)&&X.createElement(vr,{position:D,centerX:_,centerY:N,radius:L,onMouseDown:ne,onMouseEnter:le,onMouseOut:ue,type:"source"}),($==="target"||$===!0)&&X.createElement(vr,{position:A,centerX:U,centerY:k,radius:L,onMouseDown:De,onMouseEnter:le,onMouseOut:ue,type:"target"})))};return t.displayName="EdgeWrapper",I.memo(t)};function th(e){const t={default:tn(e.default||zs),straight:tn(e.bezier||oo),step:tn(e.step||ao),smoothstep:tn(e.step||Ws),simplebezier:tn(e.simplebezier||so)},a={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,n)=>(s[n]=tn(e[n]||zs),s),a);return{...t,...r}}function yr(e,t,a=null){const r=(a?.x||0)+t.x,s=(a?.y||0)+t.y,n=a?.width||t.width,o=a?.height||t.height;switch(e){case he.Top:return{x:r+n/2,y:s};case he.Right:return{x:r+n,y:s+o/2};case he.Bottom:return{x:r+n/2,y:s+o};case he.Left:return{x:r,y:s+o/2}}}function Nr(e,t){return e?e.length===1||!t?e[0]:t&&e.find(a=>a.id===t)||null:null}const nh=(e,t,a,r,s,n)=>{const o=yr(a,e,t),c=yr(n,r,s);return{sourceX:o.x,sourceY:o.y,targetX:c.x,targetY:c.y}};function sh({sourcePos:e,targetPos:t,sourceWidth:a,sourceHeight:r,targetWidth:s,targetHeight:n,width:o,height:c,transform:i}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+a,t.x+s),y2:Math.max(e.y+r,t.y+n)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=qn({x:(0-i[0])/i[2],y:(0-i[1])/i[2],width:o/i[2],height:c/i[2]}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),m=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*m)>0}function xr(e){const t=e?.[Re]?.handleBounds||null,a=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!a]}const ah=[{level:0,isMaxLevel:!0,edges:[]}];function oh(e,t,a=!1){let r=-1;const s=e.reduce((o,c)=>{const i=et(c.zIndex);let l=i?c.zIndex:0;if(a){const u=t.get(c.target),d=t.get(c.source),m=c.selected||u?.selected||d?.selected,h=Math.max(d?.[Re]?.z||0,u?.[Re]?.z||0,1e3);l=(i?c.zIndex:0)+(m?h:0)}return o[l]?o[l].push(c):o[l]=[c],r=l>r?l:r,o},{}),n=Object.entries(s).map(([o,c])=>{const i=+o;return{edges:c,level:i,isMaxLevel:i===r}});return n.length===0?ah:n}function rh(e,t,a){const r=Ve(I.useCallback(s=>e?s.edges.filter(n=>{const o=t.get(n.source),c=t.get(n.target);return o?.width&&o?.height&&c?.width&&c?.height&&sh({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return oh(r,t,a)}const ih=({color:e="none",strokeWidth:t=1})=>X.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ch=({color:e="none",strokeWidth:t=1})=>X.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),br={[Is.Arrow]:ih,[Is.ArrowClosed]:ch};function lh(e){const t=Fe();return I.useMemo(()=>Object.prototype.hasOwnProperty.call(br,e)?br[e]:(t.getState().onError?.("009",lt.error009(e)),null),[e])}const uh=({id:e,type:t,color:a,width:r=12.5,height:s=12.5,markerUnits:n="strokeWidth",strokeWidth:o,orient:c="auto-start-reverse"})=>{const i=lh(t);return i?X.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:n,orient:c,refX:"0",refY:"0"},X.createElement(i,{color:a,strokeWidth:o})):null},dh=({defaultColor:e,rfId:t})=>a=>{const r=[];return a.edges.reduce((s,n)=>([n.markerStart,n.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const c=Pa(o,t);r.includes(c)||(s.push({id:c,color:o.color||e,...o}),r.push(c))}}),s),[]).sort((s,n)=>s.id.localeCompare(n.id))},uc=({defaultColor:e,rfId:t})=>{const a=Ve(I.useCallback(dh({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((n,o)=>n.id!==s[o].id)));return X.createElement("defs",null,a.map(r=>X.createElement(uh,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};uc.displayName="MarkerDefinitions";var mh=I.memo(uc);const fh=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),dc=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:a,rfId:r,edgeTypes:s,noPanClassName:n,onEdgeContextMenu:o,onEdgeMouseEnter:c,onEdgeMouseMove:i,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:m,onReconnectStart:h,onReconnectEnd:v,reconnectRadius:g,children:y,disableKeyboardA11y:x})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:N,width:U,height:k,connectionMode:D,nodeInternals:A,onError:V}=Ve(fh,ze),R=rh(t,A,a);return U?X.createElement(X.Fragment,null,R.map(({level:B,edges:j,isMaxLevel:P})=>X.createElement("svg",{key:B,style:{zIndex:B},width:U,height:k,className:"react-flow__edges react-flow__container"},P&&X.createElement(mh,{defaultColor:e,rfId:r}),X.createElement("g",null,j.map(p=>{const[C,E,L]=xr(A.get(p.source)),[G,S,T]=xr(A.get(p.target));if(!L||!T)return null;let b=p.type||"default";s[b]||(V?.("011",lt.error011(b)),b="default");const M=s[b]||s.default,z=D===Lt.Strict?S.target:(S.target??[]).concat(S.source??[]),F=Nr(E.source,p.sourceHandle),O=Nr(z,p.targetHandle),$=F?.position||he.Bottom,W=O?.position||he.Top,Y=!!(p.focusable||w&&typeof p.focusable>"u"),Z=p.reconnectable||p.updatable,Q=typeof m<"u"&&(Z||_&&typeof Z>"u");if(!F||!O)return V?.("008",lt.error008(F,p)),null;const{sourceX:J,sourceY:q,targetX:pe,targetY:ie}=nh(C,F,$,G,O,W);return X.createElement(M,{key:p.id,id:p.id,className:He([p.className,n]),type:b,data:p.data,selected:!!p.selected,animated:!!p.animated,hidden:!!p.hidden,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,style:p.style,source:p.source,target:p.target,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerEnd:p.markerEnd,markerStart:p.markerStart,sourceX:J,sourceY:q,targetX:pe,targetY:ie,sourcePosition:$,targetPosition:W,elementsSelectable:N,onContextMenu:o,onMouseEnter:c,onMouseMove:i,onMouseLeave:l,onClick:u,onEdgeDoubleClick:d,onReconnect:m,onReconnectStart:h,onReconnectEnd:v,reconnectRadius:g,rfId:r,ariaLabel:p.ariaLabel,isFocusable:Y,isReconnectable:Q,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth,disableKeyboardA11y:x})})))),y):null};dc.displayName="EdgeRenderer";var hh=I.memo(dc);const ph=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function gh({children:e}){const t=Ve(ph);return X.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function vh(e){const t=uo(),a=I.useRef(!1);I.useEffect(()=>{!a.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),a.current=!0)},[e,t.viewportInitialized])}const yh={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top},mc=({nodeId:e,handleType:t,style:a,type:r=jt.Bezier,CustomComponent:s,connectionStatus:n})=>{const{fromNode:o,handleId:c,toX:i,toY:l,connectionMode:u}=Ve(I.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),ze),d=o?.[Re]?.handleBounds;let m=d?.[t];if(u===Lt.Loose&&(m=m||d?.[t==="source"?"target":"source"]),!o||!m)return null;const h=c?m.find(k=>k.id===c):m[0],v=h?h.x+h.width/2:(o.width??0)/2,g=h?h.y+h.height/2:o.height??0,y=(o.positionAbsolute?.x??0)+v,x=(o.positionAbsolute?.y??0)+g,w=h?.position,_=w?yh[w]:null;if(!w||!_)return null;if(s)return X.createElement(s,{connectionLineType:r,connectionLineStyle:a,fromNode:o,fromHandle:h,fromX:y,fromY:x,toX:i,toY:l,fromPosition:w,toPosition:_,connectionStatus:n});let N="";const U={sourceX:y,sourceY:x,sourcePosition:w,targetX:i,targetY:l,targetPosition:_};return r===jt.Bezier?[N]=ro(U):r===jt.Step?[N]=Va({...U,borderRadius:0}):r===jt.SmoothStep?[N]=Va(U):r===jt.SimpleBezier?[N]=Vi(U):N=`M${y},${x} ${i},${l}`,X.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:a})};mc.displayName="ConnectionLine";const Nh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function xh({containerStyle:e,style:t,type:a,component:r}){const{nodeId:s,handleType:n,nodesConnectable:o,width:c,height:i,connectionStatus:l}=Ve(Nh,ze);return!(s&&n&&c&&o)?null:X.createElement("svg",{style:e,width:c,height:i,className:"react-flow__edges react-flow__connectionline react-flow__container"},X.createElement("g",{className:He(["react-flow__connection",l])},X.createElement(mc,{nodeId:s,handleType:n,style:t,type:a,CustomComponent:r,connectionStatus:l})))}function wr(e,t){const a=I.useRef(null),r=Fe();return I.useMemo(()=>{{const n=Object.keys(e);ze(a.current,n)&&r.getState().onError?.("002",lt.error002()),a.current=n}return t(e)},[e])}const fc=({nodeTypes:e,edgeTypes:t,onMove:a,onMoveStart:r,onMoveEnd:s,onInit:n,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:i,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:v,onSelectionStart:g,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:N,selectionKeyCode:U,selectionOnDrag:k,selectionMode:D,multiSelectionKeyCode:A,panActivationKeyCode:V,zoomActivationKeyCode:R,deleteKeyCode:B,onlyRenderVisibleElements:j,elementsSelectable:P,selectNodesOnDrag:p,defaultViewport:C,translateExtent:E,minZoom:L,maxZoom:G,preventScrolling:S,defaultMarkerColor:T,zoomOnScroll:b,zoomOnPinch:M,panOnScroll:z,panOnScrollSpeed:F,panOnScrollMode:O,zoomOnDoubleClick:$,panOnDrag:W,onPaneClick:Y,onPaneMouseEnter:Z,onPaneMouseMove:Q,onPaneMouseLeave:J,onPaneScroll:q,onPaneContextMenu:pe,onEdgeContextMenu:ie,onEdgeMouseEnter:ee,onEdgeMouseMove:ae,onEdgeMouseLeave:te,onReconnect:H,onReconnectStart:se,onReconnectEnd:re,reconnectRadius:K,noDragClassName:ve,noWheelClassName:oe,noPanClassName:ce,elevateEdgesOnSelect:ne,disableKeyboardA11y:De,nodeOrigin:le,nodeExtent:ue,rfId:me})=>{const ye=wr(e,Yf),be=wr(t,th);return vh(n),X.createElement($f,{onPaneClick:Y,onPaneMouseEnter:Z,onPaneMouseMove:Q,onPaneMouseLeave:J,onPaneContextMenu:pe,onPaneScroll:q,deleteKeyCode:B,selectionKeyCode:U,selectionOnDrag:k,selectionMode:D,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:V,zoomActivationKeyCode:R,elementsSelectable:P,onMove:a,onMoveStart:r,onMoveEnd:s,zoomOnScroll:b,zoomOnPinch:M,zoomOnDoubleClick:$,panOnScroll:z,panOnScrollSpeed:F,panOnScrollMode:O,panOnDrag:W,defaultViewport:C,translateExtent:E,minZoom:L,maxZoom:G,onSelectionContextMenu:v,preventScrolling:S,noDragClassName:ve,noWheelClassName:oe,noPanClassName:ce,disableKeyboardA11y:De},X.createElement(gh,null,X.createElement(hh,{edgeTypes:be,onEdgeClick:c,onEdgeDoubleClick:l,onlyRenderVisibleElements:j,onEdgeContextMenu:ie,onEdgeMouseEnter:ee,onEdgeMouseMove:ae,onEdgeMouseLeave:te,onReconnect:H,onReconnectStart:se,onReconnectEnd:re,reconnectRadius:K,defaultMarkerColor:T,noPanClassName:ce,elevateEdgesOnSelect:!!ne,disableKeyboardA11y:De,rfId:me},X.createElement(xh,{style:w,type:x,component:_,containerStyle:N})),X.createElement("div",{className:"react-flow__edgelabel-renderer"}),X.createElement(Zf,{nodeTypes:ye,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:p,onlyRenderVisibleElements:j,noPanClassName:ce,noDragClassName:ve,disableKeyboardA11y:De,nodeOrigin:le,nodeExtent:ue,rfId:me})))};fc.displayName="GraphView";var bh=I.memo(fc);const Fa=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],St={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Fa,nodeExtent:Fa,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Lt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Mi,isValidConnection:void 0},wh=()=>dl((e,t)=>({...St,setNodes:a=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:n}=t();e({nodeInternals:ga(a,r,s,n)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:a=>{const{defaultEdgeOptions:r={}}=t();e({edges:a.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(a,r)=>{const s=typeof a<"u",n=typeof r<"u",o=s?ga(a,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:n?r:[],hasDefaultNodes:s,hasDefaultEdges:n})},updateNodeDimensions:a=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:n,fitViewOnInitDone:o,fitViewOnInitOptions:c,domNode:i,nodeOrigin:l}=t(),u=i?.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:m}=new window.DOMMatrixReadOnly(d.transform),h=a.reduce((g,y)=>{const x=s.get(y.id);if(x?.hidden)s.set(x.id,{...x,[Re]:{...x[Re],handleBounds:void 0}});else if(x){const w=to(y.nodeElement);!!(w.width&&w.height&&(x.width!==w.width||x.height!==w.height||y.forceUpdate))&&(s.set(x.id,{...x,[Re]:{...x[Re],handleBounds:{source:pr(".source",y.nodeElement,m,l),target:pr(".target",y.nodeElement,m,l)}},...w}),g.push({id:x.id,type:"dimensions",dimensions:w}))}return g},[]);Qi(s,l);const v=o||n&&!o&&ec(t,{initial:!0,...c});e({nodeInternals:new Map(s),fitViewOnInitDone:v}),h?.length>0&&r?.(h)},updateNodePositions:(a,r=!0,s=!1)=>{const{triggerNodeChanges:n}=t(),o=a.map(c=>{const i={id:c.id,type:"position",dragging:s};return r&&(i.positionAbsolute=c.positionAbsolute,i.position=c.position),i});n(o)},triggerNodeChanges:a=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:n,nodeOrigin:o,getNodes:c,elevateNodesOnSelect:i}=t();if(a?.length){if(n){const l=nc(a,c()),u=ga(l,s,o,i);e({nodeInternals:u})}r?.(a)}},addSelectedNodes:a=>{const{multiSelectionActive:r,edges:s,getNodes:n}=t();let o,c=null;r?o=a.map(i=>Ut(i,!0)):(o=an(n(),a),c=an(s,[])),vs({changedNodes:o,changedEdges:c,get:t,set:e})},addSelectedEdges:a=>{const{multiSelectionActive:r,edges:s,getNodes:n}=t();let o,c=null;r?o=a.map(i=>Ut(i,!0)):(o=an(s,a),c=an(n(),[])),vs({changedNodes:c,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:a,edges:r}={})=>{const{edges:s,getNodes:n}=t(),o=a||n(),c=r||s,i=o.map(u=>(u.selected=!1,Ut(u.id,!1))),l=c.map(u=>Ut(u.id,!1));vs({changedNodes:i,changedEdges:l,get:t,set:e})},setMinZoom:a=>{const{d3Zoom:r,maxZoom:s}=t();r?.scaleExtent([a,s]),e({minZoom:a})},setMaxZoom:a=>{const{d3Zoom:r,minZoom:s}=t();r?.scaleExtent([s,a]),e({maxZoom:a})},setTranslateExtent:a=>{t().d3Zoom?.translateExtent(a),e({translateExtent:a})},resetSelectedElements:()=>{const{edges:a,getNodes:r}=t(),n=r().filter(c=>c.selected).map(c=>Ut(c.id,!1)),o=a.filter(c=>c.selected).map(c=>Ut(c.id,!1));vs({changedNodes:n,changedEdges:o,get:t,set:e})},setNodeExtent:a=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=no(s.position,a)}),e({nodeExtent:a,nodeInternals:new Map(r)})},panBy:a=>{const{transform:r,width:s,height:n,d3Zoom:o,d3Selection:c,translateExtent:i}=t();if(!o||!c||!a.x&&!a.y)return!1;const l=xt.translate(r[0]+a.x,r[1]+a.y).scale(r[2]),u=[[0,0],[s,n]],d=o?.constrain()(l,u,i);return o.transform(c,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:St.connectionNodeId,connectionHandleId:St.connectionHandleId,connectionHandleType:St.connectionHandleType,connectionStatus:St.connectionStatus,connectionStartHandle:St.connectionStartHandle,connectionEndHandle:St.connectionEndHandle}),reset:()=>e({...St})}),Object.is),hc=({children:e})=>{const t=I.useRef(null);return t.current||(t.current=wh()),X.createElement(Bm,{value:t.current},e)};hc.displayName="ReactFlowProvider";const pc=({children:e})=>I.useContext(Bs)?X.createElement(X.Fragment,null,e):X.createElement(hc,null,e);pc.displayName="ReactFlowWrapper";const Dh={input:$i,default:Ia,output:Yi,group:lo},_h={default:zs,straight:oo,step:ao,smoothstep:Ws,simplebezier:so},Eh=[0,0],Sh=[15,15],Ch={x:0,y:0,zoom:1},Uh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},gc=I.forwardRef(({nodes:e,edges:t,defaultNodes:a,defaultEdges:r,className:s,nodeTypes:n=Dh,edgeTypes:o=_h,onNodeClick:c,onEdgeClick:i,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:m,onConnect:h,onConnectStart:v,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:U,onNodeDoubleClick:k,onNodeDragStart:D,onNodeDrag:A,onNodeDragStop:V,onNodesDelete:R,onEdgesDelete:B,onSelectionChange:j,onSelectionDragStart:P,onSelectionDrag:p,onSelectionDragStop:C,onSelectionContextMenu:E,onSelectionStart:L,onSelectionEnd:G,connectionMode:S=Lt.Strict,connectionLineType:T=jt.Bezier,connectionLineStyle:b,connectionLineComponent:M,connectionLineContainerStyle:z,deleteKeyCode:F="Backspace",selectionKeyCode:O="Shift",selectionOnDrag:$=!1,selectionMode:W=Kn.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:Z=Rs()?"Meta":"Control",zoomActivationKeyCode:Q=Rs()?"Meta":"Control",snapToGrid:J=!1,snapGrid:q=Sh,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:ie=!0,nodesDraggable:ee,nodesConnectable:ae,nodesFocusable:te,nodeOrigin:H=Eh,edgesFocusable:se,edgesUpdatable:re,elementsSelectable:K,defaultViewport:ve=Ch,minZoom:oe=.5,maxZoom:ce=2,translateExtent:ne=Fa,preventScrolling:De=!0,nodeExtent:le,defaultMarkerColor:ue="#b1b1b7",zoomOnScroll:me=!0,zoomOnPinch:ye=!0,panOnScroll:be=!1,panOnScrollSpeed:Ce=.5,panOnScrollMode:Ne=Pt.Free,zoomOnDoubleClick:xe=!0,panOnDrag:de=!0,onPaneClick:Ue,onPaneMouseEnter:Me,onPaneMouseMove:Oe,onPaneMouseLeave:Ae,onPaneScroll:ge,onPaneContextMenu:je,children:tt,onEdgeContextMenu:Se,onEdgeDoubleClick:_e,onEdgeMouseEnter:Pe,onEdgeMouseMove:ke,onEdgeMouseLeave:we,onEdgeUpdate:Te,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:Le,onReconnect:Ie,onReconnectStart:qe,onReconnectEnd:dt,reconnectRadius:nt=10,edgeUpdaterRadius:mt=10,onNodesChange:gt,onEdgesChange:st,noDragClassName:Be="nodrag",noWheelClassName:vt="nowheel",noPanClassName:pn="nopan",fitView:gn=!1,fitViewOptions:Xs,connectOnClick:es=!0,attributionPosition:Gt,proOptions:vn,defaultEdgeOptions:Ys,elevateNodesOnSelect:ts=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Wt=!1,autoPanOnConnect:yn=!0,autoPanOnNodeDrag:fe=!0,connectionRadius:At=20,isValidConnection:qs,onError:Dt,style:Ht,id:Nn,nodeDragThreshold:xn,...$t},Xt)=>{const Yt=Nn||"1";return X.createElement("div",{...$t,style:{...Ht,...Uh},ref:Xt,className:He(["react-flow",s]),"data-testid":"rf__wrapper",id:Nn},X.createElement(pc,null,X.createElement(bh,{onInit:l,onMove:u,onMoveStart:d,onMoveEnd:m,onNodeClick:c,onEdgeClick:i,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:U,onNodeDoubleClick:k,nodeTypes:n,edgeTypes:o,connectionLineType:T,connectionLineStyle:b,connectionLineComponent:M,connectionLineContainerStyle:z,selectionKeyCode:O,selectionOnDrag:$,selectionMode:W,deleteKeyCode:F,multiSelectionKeyCode:Z,panActivationKeyCode:Y,zoomActivationKeyCode:Q,onlyRenderVisibleElements:pe,selectNodesOnDrag:ie,defaultViewport:ve,translateExtent:ne,minZoom:oe,maxZoom:ce,preventScrolling:De,zoomOnScroll:me,zoomOnPinch:ye,zoomOnDoubleClick:xe,panOnScroll:be,panOnScrollSpeed:Ce,panOnScrollMode:Ne,panOnDrag:de,onPaneClick:Ue,onPaneMouseEnter:Me,onPaneMouseMove:Oe,onPaneMouseLeave:Ae,onPaneScroll:ge,onPaneContextMenu:je,onSelectionContextMenu:E,onSelectionStart:L,onSelectionEnd:G,onEdgeContextMenu:Se,onEdgeDoubleClick:_e,onEdgeMouseEnter:Pe,onEdgeMouseMove:ke,onEdgeMouseLeave:we,onReconnect:Ie??Te,onReconnectStart:qe??Ge,onReconnectEnd:dt??Le,reconnectRadius:nt??mt,defaultMarkerColor:ue,noDragClassName:Be,noWheelClassName:vt,noPanClassName:pn,elevateEdgesOnSelect:Bt,rfId:Yt,disableKeyboardA11y:Wt,nodeOrigin:H,nodeExtent:le}),X.createElement(yf,{nodes:e,edges:t,defaultNodes:a,defaultEdges:r,onConnect:h,onConnectStart:v,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:ee,nodesConnectable:ae,nodesFocusable:te,edgesFocusable:se,edgesUpdatable:re,elementsSelectable:K,elevateNodesOnSelect:ts,minZoom:oe,maxZoom:ce,nodeExtent:le,onNodesChange:gt,onEdgesChange:st,snapToGrid:J,snapGrid:q,connectionMode:S,translateExtent:ne,connectOnClick:es,defaultEdgeOptions:Ys,fitView:gn,fitViewOptions:Xs,onNodesDelete:R,onEdgesDelete:B,onNodeDragStart:D,onNodeDrag:A,onNodeDragStop:V,onSelectionDrag:p,onSelectionDragStart:P,onSelectionDragStop:C,noPanClassName:pn,nodeOrigin:H,rfId:Yt,autoPanOnConnect:yn,autoPanOnNodeDrag:fe,onError:Dt,connectionRadius:At,isValidConnection:qs,nodeDragThreshold:xn}),X.createElement(gf,{onSelectionChange:j}),tt,X.createElement(Hm,{proOptions:vn,position:Gt}),X.createElement(Df,{rfId:Yt,disableKeyboardA11y:Wt})))});gc.displayName="ReactFlow";function vc(e){return t=>{const[a,r]=I.useState(t),s=I.useCallback(n=>r(o=>e(n,o)),[]);return[a,r,s]}}const jh=vc(nc),Mh=vc(If),yc=({id:e,x:t,y:a,width:r,height:s,style:n,color:o,strokeColor:c,strokeWidth:i,className:l,borderRadius:u,shapeRendering:d,onClick:m,selected:h})=>{const{background:v,backgroundColor:g}=n||{},y=o||v||g;return X.createElement("rect",{className:He(["react-flow__minimap-node",{selected:h},l]),x:t,y:a,rx:u,ry:u,width:r,height:s,fill:y,stroke:c,strokeWidth:i,shapeRendering:d,onClick:m?x=>m(x,e):void 0})};yc.displayName="MiniMapNode";var Ah=I.memo(yc);const kh=e=>e.nodeOrigin,Th=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),xa=e=>e instanceof Function?e:()=>e;function Vh({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:a="",nodeBorderRadius:r=5,nodeStrokeWidth:s=2,nodeComponent:n=Ah,onClick:o}){const c=Ve(Th,ze),i=Ve(kh),l=xa(t),u=xa(e),d=xa(a),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return X.createElement(X.Fragment,null,c.map(h=>{const{x:v,y:g}=It(h,i).positionAbsolute;return X.createElement(n,{key:h.id,x:v,y:g,width:h.width,height:h.height,style:h.style,selected:h.selected,className:d(h),color:l(h),borderRadius:r,strokeColor:u(h),strokeWidth:s,shapeRendering:m,onClick:o,id:h.id})}))}var Ph=I.memo(Vh);const Rh=200,Ih=150,zh=e=>{const t=e.getNodes(),a={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:a,boundingRect:t.length>0?Ym(Hs(t,e.nodeOrigin),a):a,rfId:e.rfId}},Fh="react-flow__minimap-desc";function Nc({style:e,className:t,nodeStrokeColor:a="transparent",nodeColor:r="#e2e2e2",nodeClassName:s="",nodeBorderRadius:n=5,nodeStrokeWidth:o=2,nodeComponent:c,maskColor:i="rgb(240, 240, 240, 0.6)",maskStrokeColor:l="none",maskStrokeWidth:u=1,position:d="bottom-right",onClick:m,onNodeClick:h,pannable:v=!1,zoomable:g=!1,ariaLabel:y="React Flow mini map",inversePan:x=!1,zoomStep:w=10,offsetScale:_=5}){const N=Fe(),U=I.useRef(null),{boundingRect:k,viewBB:D,rfId:A}=Ve(zh,ze),V=e?.width??Rh,R=e?.height??Ih,B=k.width/V,j=k.height/R,P=Math.max(B,j),p=P*V,C=P*R,E=_*P,L=k.x-(p-k.width)/2-E,G=k.y-(C-k.height)/2-E,S=p+E*2,T=C+E*2,b=`${Fh}-${A}`,M=I.useRef(0);M.current=P,I.useEffect(()=>{if(U.current){const O=Qe(U.current),$=Z=>{const{transform:Q,d3Selection:J,d3Zoom:q}=N.getState();if(Z.sourceEvent.type!=="wheel"||!J||!q)return;const pe=-Z.sourceEvent.deltaY*(Z.sourceEvent.deltaMode===1?.05:Z.sourceEvent.deltaMode?1:.002)*w,ie=Q[2]*Math.pow(2,pe);q.scaleTo(J,ie)},W=Z=>{const{transform:Q,d3Selection:J,d3Zoom:q,translateExtent:pe,width:ie,height:ee}=N.getState();if(Z.sourceEvent.type!=="mousemove"||!J||!q)return;const ae=M.current*Math.max(1,Q[2])*(x?-1:1),te={x:Q[0]-Z.sourceEvent.movementX*ae,y:Q[1]-Z.sourceEvent.movementY*ae},H=[[0,0],[ie,ee]],se=xt.translate(te.x,te.y).scale(Q[2]),re=q.constrain()(se,H,pe);q.transform(J,re)},Y=Di().on("zoom",v?W:null).on("zoom.wheel",g?$:null);return O.call(Y),()=>{O.on("zoom",null)}}},[v,g,x,w]);const z=m?O=>{const $=rt(O);m(O,{x:$[0],y:$[1]})}:void 0,F=h?(O,$)=>{const W=N.getState().nodeInternals.get($);h(O,W)}:void 0;return X.createElement(eo,{position:d,style:e,className:He(["react-flow__minimap",t]),"data-testid":"rf__minimap"},X.createElement("svg",{width:V,height:R,viewBox:`${L} ${G} ${S} ${T}`,role:"img","aria-labelledby":b,ref:U,onClick:z},y&&X.createElement("title",{id:b},y),X.createElement(Ph,{onClick:F,nodeColor:r,nodeStrokeColor:a,nodeBorderRadius:n,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:c}),X.createElement("path",{className:"react-flow__minimap-mask",d:`M${L-E},${G-E}h${S+E*2}v${T+E*2}h${-S-E*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:i,fillRule:"evenodd",stroke:l,strokeWidth:u,pointerEvents:"none"})))}Nc.displayName="MiniMap";var Oh=I.memo(Nc);function Lh(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},X.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Gh(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},X.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Bh(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},X.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Wh(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},X.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Hh(){return X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},X.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Fn=({children:e,className:t,...a})=>X.createElement("button",{type:"button",className:He(["react-flow__controls-button",t]),...a},e);Fn.displayName="ControlButton";const $h=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),xc=({style:e,showZoom:t=!0,showFitView:a=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:n,onZoomOut:o,onFitView:c,onInteractiveChange:i,className:l,children:u,position:d="bottom-left"})=>{const m=Fe(),[h,v]=I.useState(!1),{isInteractive:g,minZoomReached:y,maxZoomReached:x}=Ve($h,ze),{zoomIn:w,zoomOut:_,fitView:N}=uo();if(I.useEffect(()=>{v(!0)},[]),!h)return null;const U=()=>{w(),n?.()},k=()=>{_(),o?.()},D=()=>{N(s),c?.()},A=()=>{m.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),i?.(!g)};return X.createElement(eo,{className:He(["react-flow__controls",l]),position:d,style:e,"data-testid":"rf__controls"},t&&X.createElement(X.Fragment,null,X.createElement(Fn,{onClick:U,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},X.createElement(Lh,null)),X.createElement(Fn,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y},X.createElement(Gh,null))),a&&X.createElement(Fn,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},X.createElement(Bh,null)),r&&X.createElement(Fn,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},g?X.createElement(Hh,null):X.createElement(Wh,null)),u)};xc.displayName="Controls";var Xh=I.memo(xc),ct;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ct||(ct={}));function Yh({color:e,dimensions:t,lineWidth:a}){return X.createElement("path",{stroke:e,strokeWidth:a,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function qh({color:e,radius:t}){return X.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Kh={[ct.Dots]:"#91919a",[ct.Lines]:"#eee",[ct.Cross]:"#e2e2e2"},Zh={[ct.Dots]:1,[ct.Lines]:1,[ct.Cross]:6},Jh=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function bc({id:e,variant:t=ct.Dots,gap:a=20,size:r,lineWidth:s=1,offset:n=2,color:o,style:c,className:i}){const l=I.useRef(null),{transform:u,patternId:d}=Ve(Jh,ze),m=o||Kh[t],h=r||Zh[t],v=t===ct.Dots,g=t===ct.Cross,y=Array.isArray(a)?a:[a,a],x=[y[0]*u[2]||1,y[1]*u[2]||1],w=h*u[2],_=g?[w,w]:x,N=v?[w/n,w/n]:[_[0]/n,_[1]/n];return X.createElement("svg",{className:He(["react-flow__background",i]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,"data-testid":"rf__background"},X.createElement("pattern",{id:d+e,x:u[0]%x[0],y:u[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},v?X.createElement(qh,{color:m,radius:w/n}):X.createElement(Yh,{dimensions:_,color:m,lineWidth:s})),X.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}bc.displayName="Background";var Qh=I.memo(bc);const ep={input:{label:"Request Input",icon:""},cache_l1:{label:"L1 Memory",icon:""},cache_l2:{label:"L2 Redis",icon:""},cache_l3:{label:"L3 PostgreSQL",icon:""},semantic_dedup:{label:"Semantic Dedup",icon:""},phi_filter:{label:"PHI Filter",icon:""},fraud_detector:{label:"Fraud Detector",icon:""},transaction_validator:{label:"Transaction Validator",icon:""},openai:{label:"OpenAI GPT",icon:""},anthropic:{label:"Anthropic Claude",icon:""},gemini:{label:"Google Gemini",icon:""},hipaa_audit:{label:"HIPAA Audit",icon:""},pci_audit:{label:"PCI Audit",icon:""},sox_logger:{label:"SOX Logger",icon:""},retention_policy:{label:"Retention Policy",icon:""},audit_logger:{label:"Audit Logger",icon:""},encrypted_cache:{label:"Encrypted Cache",icon:""},output:{label:"Response Output",icon:""}},tp={input:"",cache:"",intelligence:"",llm:"",compliance:"",output:""};function np({sector:e,config:t}){const a=(t?.nodes||[]).map(({category:s,types:n})=>({title:`${tp[s]||""} ${s.charAt(0).toUpperCase()+s.slice(1)}`,nodes:n.map(o=>({type:o,...ep[o]}))})),r=(s,n)=>{s.dataTransfer.setData("application/reactflow",n),s.dataTransfer.effectAllowed="move"};return f.jsxDEV("aside",{className:"sidebar",children:[f.jsxDEV("div",{className:"sidebar-header",children:[f.jsxDEV("h2",{children:"Node Library"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:49,columnNumber:9},this),f.jsxDEV("p",{children:"Drag nodes to canvas"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:50,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:48,columnNumber:7},this),f.jsxDEV("div",{className:"node-categories",children:a.map(s=>f.jsxDEV("div",{className:"node-category",children:[f.jsxDEV("h3",{children:s.title},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:56,columnNumber:13},this),f.jsxDEV("div",{className:"node-list",children:s.nodes.map(n=>f.jsxDEV("div",{className:"node-item",draggable:!0,onDragStart:o=>r(o,n.type),children:[f.jsxDEV("span",{className:"node-item-icon",children:n.icon},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:65,columnNumber:19},this),f.jsxDEV("span",{className:"node-item-label",children:n.label},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:66,columnNumber:19},this)]},n.type,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:59,columnNumber:17},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:57,columnNumber:13},this)]},s.title,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:55,columnNumber:11},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:53,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/Sidebar.jsx",lineNumber:47,columnNumber:5},this)}const sp={healthcare:{name:"Healthcare & Life Sciences",icon:"",scenarios:[{id:"hipaa-compliant-rag",name:"HIPAA-Compliant RAG",description:"Medical knowledge retrieval with full audit trails for compliance",useCase:"clinical_decision_support",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"1GB",encryption:"AES-256"}},{type:"cache_l2",config:{ttl:3600,storage:"redis",audit_log:!0}},{type:"compliance_layer",config:{standard:"HIPAA",audit_retention:"7_years"}},{type:"pii_detection",config:{redaction:"automatic",phi_alerts:!0}},{type:"semantic_dedup",config:{threshold:.95}}],compliance:["HIPAA","HITRUST"],estimatedSavings:"$3,200/mo",complexity:"complex",reasoning:"Medical RAG systems require secure caching with full audit trails. PHI detection prevents data leaks. Multi-tier caching reduces EHR API load by 85%."},{id:"diagnostic-imaging-cache",name:"Diagnostic Imaging Analysis",description:"Cache AI-analyzed radiology reports and imaging interpretations",useCase:"diagnostic_imaging",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"2GB"}},{type:"cache_l2",config:{ttl:7200,storage:"redis"}},{type:"deduplication",config:{hash_algorithm:"perceptual",threshold:.92}},{type:"compliance_layer",config:{standard:"HIPAA"}}],compliance:["HIPAA","FDA 21 CFR Part 11"],estimatedSavings:"$4,800/mo",complexity:"moderate",reasoning:"Radiology AI models are expensive ($0.50-2.00 per image). Caching similar case interpretations saves 70% on redundant analyses."},{id:"patient-triage-assistant",name:"Patient Triage Assistant",description:"Cache symptom analysis and triage recommendations",useCase:"patient_triage",nodes:[{type:"cache_l1",config:{ttl:180,max_size:"500MB"}},{type:"semantic_cache",config:{similarity_threshold:.88}},{type:"compliance_layer",config:{standard:"HIPAA",log_all_access:!0}}],compliance:["HIPAA"],estimatedSavings:"$1,800/mo",complexity:"simple",reasoning:'Common symptoms generate repeated queries. Semantic caching handles symptom variations (e.g., "chest pain" vs "tightness in chest").'}]},finance:{name:"Finance & FinTech",icon:"",scenarios:[{id:"fraud-detection-cache",name:"Real-Time Fraud Detection",description:"Cache ML fraud scores with sub-50ms latency requirements",useCase:"fraud_detection",nodes:[{type:"cache_l1",config:{ttl:120,max_size:"1GB",strategy:"LRU"}},{type:"cache_l2",config:{ttl:600,storage:"redis"}},{type:"anomaly_detection",config:{alert_on_cache_miss:!0}},{type:"compliance_layer",config:{standard:"PCI-DSS",immutable_logs:!0}}],compliance:["PCI-DSS","SOC 2 Type II"],estimatedSavings:"$5,200/mo",complexity:"complex",reasoning:"Payment fraud models must respond <50ms. L1 cache ensures 95% hit rate on known patterns. Anomaly detection flags unusual transaction types for live scoring."},{id:"kyc-document-verification",name:"KYC Document Verification",description:"Cache ID verification results and risk assessments",useCase:"kyc_verification",nodes:[{type:"cache_l1",config:{ttl:3600,max_size:"500MB"}},{type:"cache_l2",config:{ttl:86400,storage:"postgresql"}},{type:"deduplication",config:{hash_fields:["document_id","customer_id"]}},{type:"compliance_layer",config:{standard:"KYC/AML",retention:"5_years"}}],compliance:["KYC/AML","GDPR"],estimatedSavings:"$3,600/mo",complexity:"moderate",reasoning:"Identity verification APIs cost $0.50-3.00 per check. Caching verified documents for returning customers saves 80% on redundant checks."},{id:"market-sentiment-analysis",name:"Market Sentiment Analysis",description:"Cache LLM-analyzed market sentiment from news/social",useCase:"sentiment_analysis",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"1GB"}},{type:"cache_l2",config:{ttl:1800,storage:"redis"}},{type:"semantic_dedup",config:{threshold:.9}},{type:"time_series_cache",config:{window:"15min",aggregate:"avg"}}],compliance:["SOC 2"],estimatedSavings:"$2,400/mo",complexity:"moderate",reasoning:"Trading firms analyze same news multiple times. Semantic caching handles paraphrased headlines. Time-series aggregation reduces duplicate sentiment calls."}]},education:{name:"Education & EdTech",icon:"",scenarios:[{id:"literacy-rag-system",name:"Science of Reading RAG",description:"Cache research-backed literacy guidance with source citations",useCase:"educational_rag",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"500MB"}},{type:"cache_l2",config:{ttl:7200,storage:"redis"}},{type:"semantic_cache",config:{similarity_threshold:.87}},{type:"citation_tracking",config:{store_sources:!0}},{type:"content_filtering",config:{age_appropriate:!0}}],compliance:["FERPA","COPPA"],estimatedSavings:"$1,600/mo",complexity:"moderate",reasoning:"Teachers ask similar questions about phonics, comprehension strategies. Semantic caching handles question variations. Citation tracking maintains research integrity."},{id:"personalized-tutoring",name:"AI Tutoring Personalization",description:"Cache student-specific learning recommendations",useCase:"adaptive_learning",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"1GB",partition_by:"student_id"}},{type:"cache_l2",config:{ttl:3600,storage:"redis"}},{type:"user_memory",config:{remember_preferences:!0,learning_style:!0}},{type:"compliance_layer",config:{standard:"FERPA",student_data_protection:!0}}],compliance:["FERPA","COPPA"],estimatedSavings:"$2,100/mo",complexity:"moderate",reasoning:"Personalized learning models are compute-intensive. Caching per-student recommendations reduces redundant model inference by 75%."},{id:"grading-automation",name:"Automated Essay Grading",description:"Cache grading rubrics and similar essay assessments",useCase:"automated_grading",nodes:[{type:"cache_l1",config:{ttl:3600,max_size:"500MB"}},{type:"semantic_dedup",config:{threshold:.93}},{type:"compliance_layer",config:{standard:"FERPA"}}],compliance:["FERPA"],estimatedSavings:"$1,200/mo",complexity:"simple",reasoning:"Similar essays get graded repeatedly. Semantic deduplication detects near-duplicate submissions, reducing LLM grading costs by 60%."}]},legal:{name:"Legal & Compliance",icon:"",scenarios:[{id:"contract-analysis",name:"Contract Review & Analysis",description:"Cache legal clause analysis and risk assessments",useCase:"contract_review",nodes:[{type:"cache_l1",config:{ttl:1800,max_size:"1GB"}},{type:"cache_l2",config:{ttl:86400,storage:"postgresql"}},{type:"semantic_cache",config:{similarity_threshold:.91}},{type:"versioning",config:{track_changes:!0}},{type:"compliance_layer",config:{standard:"SOC 2",attorney_client_privilege:!0}}],compliance:["SOC 2","ISO 27001"],estimatedSavings:"$4,200/mo",complexity:"complex",reasoning:"Legal AI models (GPT-4) cost $0.10+ per contract. Standard clauses appear repeatedly. Semantic caching handles clause variations, saving 70% on analysis."},{id:"regulatory-compliance-checks",name:"Regulatory Compliance Monitoring",description:"Cache regulation interpretations and compliance status",useCase:"compliance_monitoring",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"500MB"}},{type:"cache_l2",config:{ttl:3600,storage:"redis"}},{type:"compliance_layer",config:{standards:["SOC 2","ISO 27001","GDPR"],audit_trail:!0}}],compliance:["SOC 2","ISO 27001","GDPR"],estimatedSavings:"$2,800/mo",complexity:"moderate",reasoning:"Compliance teams query same regulations repeatedly. Caching regulation interpretations reduces LLM costs by 80%."}]},ecommerce:{name:"E-commerce & Retail",icon:"",scenarios:[{id:"product-recommendations",name:"AI Product Recommendations",description:"Cache personalized product suggestions and search results",useCase:"product_recommendations",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"2GB",partition_by:"user_segment"}},{type:"cache_l2",config:{ttl:3600,storage:"redis"}},{type:"semantic_cache",config:{similarity_threshold:.85}},{type:"ab_testing",config:{variant_caching:!0}}],compliance:["GDPR","CCPA"],estimatedSavings:"$3,400/mo",complexity:"moderate",reasoning:'Recommendation models run on every page load. Segment-based caching (e.g., "outdoor enthusiast") reduces per-user computation by 85%.'},{id:"customer-support-bot",name:"Customer Support Chatbot",description:"Cache common support queries and product knowledge",useCase:"customer_support",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"1GB"}},{type:"cache_l2",config:{ttl:7200,storage:"redis"}},{type:"semantic_cache",config:{similarity_threshold:.88}},{type:"user_memory",config:{remember_orders:!0,preferences:!0}}],compliance:["GDPR","CCPA"],estimatedSavings:"$2,600/mo",complexity:"moderate",reasoning:`Support bots answer 80% of the same questions. Semantic caching handles variations ("Where's my order?" vs "Track my shipment"). 90% hit rate.`}]},data_lakehouse:{name:"Data Lakehouse & Analytics",icon:"",scenarios:[{id:"databricks-rag-optimization",name:"Databricks RAG Optimization",description:"Cache LLM inference for lakehouse RAG pipelines with sub-50ms hits",useCase:"lakehouse_rag",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"2GB",strategy:"LRU"}},{type:"cache_l2",config:{ttl:3600,storage:"redis"}},{type:"cache_l3",config:{ttl:86400,storage:"delta_lake"}},{type:"semantic_dedup",config:{threshold:.92,use_embeddings:!0}},{type:"compliance_layer",config:{standards:["SOC 2","ISO 42001"],lineage_tracking:!0}},{type:"cost_allocation",config:{chargeback_by_namespace:!0}}],compliance:["SOC 2","ISO 42001","GDPR"],estimatedSavings:"$8,400/mo",complexity:"complex",reasoning:"Enterprise RAG systems query same data repeatedly. 3-tier caching (hot/warm/cold) reduces lakehouse LLM costs by 90%. Lineage tracking for AI governance."},{id:"snowflake-cortex-cache",name:"Snowflake Cortex AI Caching",description:"Cache Snowflake Cortex LLM responses with SQL integration",useCase:"snowflake_cortex",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"1GB"}},{type:"cache_l2",config:{ttl:7200,storage:"redis"}},{type:"semantic_cache",config:{threshold:.9}},{type:"cost_allocation",config:{by_warehouse:!0,by_schema:!0}}],compliance:["SOC 2","GDPR"],estimatedSavings:"$6,200/mo",complexity:"moderate",reasoning:"Snowflake Cortex charges per token. Caching SQL-triggered LLM calls reduces costs by 85%. Cost allocation maps to Snowflake warehouses for FinOps."},{id:"vector-search-cache",name:"Vector Search Optimization",description:"Cache vector similarity searches and embeddings",useCase:"vector_search",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"1GB"}},{type:"embedding_cache",config:{ttl:7200,model:"text-embedding-3-large"}},{type:"semantic_cache",config:{threshold:.93,vector_similarity:"cosine"}},{type:"deduplication",config:{hash_embeddings:!0}}],compliance:["SOC 2"],estimatedSavings:"$4,800/mo",complexity:"moderate",reasoning:"Vector DBs (Pinecone, Weaviate) charge per query. Caching embeddings avoids redundant OpenAI embedding API calls ($0.00013/1K tokens). 80% hit rate."}]},media:{name:"Media & Entertainment",icon:"",scenarios:[{id:"content-moderation",name:"AI Content Moderation",description:"Cache moderation decisions for user-generated content",useCase:"content_moderation",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"1GB"}},{type:"cache_l2",config:{ttl:7200,storage:"redis"}},{type:"perceptual_hash",config:{threshold:.95}},{type:"semantic_dedup",config:{threshold:.9}}],compliance:["COPPA","GDPR"],estimatedSavings:"$5,600/mo",complexity:"moderate",reasoning:"Moderation APIs cost $0.01-0.05 per item. Perceptual hashing detects duplicate images/videos. Semantic dedup catches text variations. 75% hit rate."},{id:"subtitle-generation",name:"AI Subtitle Generation",description:"Cache transcription and translation results",useCase:"subtitle_generation",nodes:[{type:"cache_l1",config:{ttl:3600,max_size:"2GB"}},{type:"cache_l2",config:{ttl:86400,storage:"postgresql"}},{type:"audio_fingerprint",config:{algorithm:"chromaprint"}},{type:"deduplication",config:{by_audio_hash:!0}}],compliance:["GDPR"],estimatedSavings:"$3,200/mo",complexity:"moderate",reasoning:"Transcription APIs (Whisper, Deepgram) cost $0.006-0.024 per minute. Audio fingerprinting detects re-uploads, avoiding redundant transcription."}]},manufacturing:{name:"Manufacturing & IoT",icon:"",scenarios:[{id:"predictive-maintenance",name:"Predictive Maintenance AI",description:"Cache equipment failure predictions and maintenance schedules",useCase:"predictive_maintenance",nodes:[{type:"cache_l1",config:{ttl:300,max_size:"500MB",partition_by:"equipment_id"}},{type:"cache_l2",config:{ttl:3600,storage:"redis"}},{type:"time_series_cache",config:{window:"1hour",aggregate:"latest"}},{type:"anomaly_detection",config:{alert_on_deviation:!0}}],compliance:["ISO 27001"],estimatedSavings:"$2,800/mo",complexity:"moderate",reasoning:"ML models analyze sensor data every 5 minutes. Caching stable predictions reduces redundant inference by 70%. Anomaly detection triggers fresh inference only when needed."},{id:"quality-control-vision",name:"Computer Vision QC",description:"Cache defect detection results from production line cameras",useCase:"quality_control",nodes:[{type:"cache_l1",config:{ttl:600,max_size:"1GB"}},{type:"perceptual_hash",config:{threshold:.93}},{type:"deduplication",config:{by_image_hash:!0}}],compliance:["ISO 9001"],estimatedSavings:"$4,200/mo",complexity:"simple",reasoning:'Vision models analyze thousands of images/hour. Perceptual hashing detects identical/similar products, caching "pass/fail" decisions. 85% hit rate on repetitive production.'}]}};function ap(e){return sp[e]?.scenarios||[]}const Oa={data:[],async loadDataset(){if(this.data.length>0)return this.data;try{const e=await fetch("/data/dataset_sample.json");if(!e.ok)throw new Error("Failed to load dataset");return this.data=await e.json(),console.log(`Loaded ${this.data.length} items from dataset`),this.data}catch(e){return console.error("Error loading dataset:",e),[]}},getData(){return this.data},getStats(){if(this.data.length===0)return null;const e={};let t=0;return this.data.forEach(a=>{e[a.category]=(e[a.category]||0)+1,t+=a.tokens}),{totalItems:this.data.length,avgTokens:Math.round(t/this.data.length),categories:e}}};function Dr({sector:e,config:t,onClose:a,onComplete:r}){const s=ap(e)||[],n=t?.templates||[],[o,c]=I.useState(1),[i,l]=I.useState(null),[u,d]=I.useState(""),[m,h]=I.useState("balanced"),[v,g]=I.useState(!1),[y,x]=I.useState(null),[w,_]=I.useState(null),N=[{icon:"",title:"Data Lakehouse RAG",description:"Optimize LLM inference for data lakehouse RAG pipelines with sub-50ms cache hits and full audit trails for compliance"},{icon:"",title:"AI Learning Platform",description:"Cache AI model inference results for educational platform with student learning analytics and response personalization"},{icon:"",title:"Media Asset Acceleration",description:"Accelerate content delivery for media assets with multi-region edge caching and 14x faster upload speeds"},{icon:"",title:"Enterprise AI Governance",description:"Cache reasoning model outputs (o1/DeepSeek) with governance controls for enterprise AI compliance and cost reduction"},{icon:"",title:"Vector Search",description:"Optimize vector search and embedding cache for production RAG systems with semantic similarity matching"}];I.useEffect(()=>{o===2&&Oa.loadDataset().then(()=>{_(Oa.getStats())})},[o]);const U=async()=>{if(o===1){if(!i){x("Please select a use case");return}if(i==="custom"&&!u.trim()){x("Please describe your use case");return}x(null),c(2)}else o===2?c(3):o===3&&(c(4),await k())},k=async()=>{g(!0),x(null);try{const D=s.find(p=>p.id===i),A=n.find(p=>p.id===i);let V,R,B;if(D){V=D.description,R=D.nodes.map((p,C)=>({id:`${p.type}-${C}`,type:p.type,position:{x:100+C*250,y:200},data:{label:p.type.replace(/_/g," ").toUpperCase(),config:p.config||{},metrics:{hitRate:0,latency:0,savings:0}}})),B=[];for(let p=0;p<R.length-1;p++)B.push({id:`e${p}`,source:R[p].id,target:R[p+1].id,animated:!0,style:{stroke:"#10b981"}});r({name:D.name,description:D.description,nodes:R,edges:B,sector:e,compliance:D.compliance,estimatedSavings:D.estimatedSavings,complexity:D.complexity,reasoning:D.reasoning}),g(!1);return}V=i==="custom"?u:A.prompt;const P=await(await fetch("/api/pipeline/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:V,sector:e,performance:m})})).json();if(P.success&&P.pipeline)r(P.pipeline);else throw new Error(P.error||"Failed to generate pipeline")}catch(D){x(D.message),g(!1),c(3)}};return f.jsxDEV("div",{className:"wizard-overlay-new",onClick:a,children:f.jsxDEV("div",{className:"wizard-modal-new",onClick:D=>D.stopPropagation(),children:[f.jsxDEV("div",{className:"wizard-header-new",children:[f.jsxDEV("div",{className:"wizard-brand",children:[f.jsxDEV("div",{className:"wizard-icon",children:f.jsxDEV("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsxDEV("path",{d:"M15 6l-6 6 6 6"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:166,columnNumber:17},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:165,columnNumber:15},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:164,columnNumber:13},this),f.jsxDEV("div",{children:[f.jsxDEV("h2",{children:"AI Pipeline Wizard"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:170,columnNumber:15},this),f.jsxDEV("p",{className:"wizard-subtitle",children:"Configure an end-to-end AI workflow for intelligent caching"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:171,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:169,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:163,columnNumber:11},this),f.jsxDEV("div",{className:"wizard-controls",children:[f.jsxDEV("div",{className:"step-indicator",children:[f.jsxDEV("span",{className:"step-number",children:o},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:177,columnNumber:15},this),f.jsxDEV("span",{className:"step-label",children:o===1?"Use case":o===2?"Analyze":o===3?"Optimize":"Generate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:178,columnNumber:15},this),f.jsxDEV("span",{className:"step-total",children:"/ 4"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:176,columnNumber:13},this),f.jsxDEV("button",{className:"close-btn-new",onClick:a,children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:175,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:162,columnNumber:9},this),f.jsxDEV("div",{className:"wizard-body-new",children:[o===1&&f.jsxDEV("div",{className:"wizard-step-new",children:[f.jsxDEV("div",{className:"step-header",children:[f.jsxDEV("div",{children:[f.jsxDEV("h3",{children:"Select Use Case"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:195,columnNumber:19},this),f.jsxDEV("p",{children:"Choose a starting point. You can refine settings in the next steps."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:196,columnNumber:19},this),f.jsxDEV("p",{className:"legend-hint",children:"Amounts shown are estimated monthly savings from caching, not fees."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:197,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:194,columnNumber:17},this),f.jsxDEV("div",{className:"recommended-badge",children:[f.jsxDEV("span",{className:"pulse-dot"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:200,columnNumber:19},this),f.jsxDEV("span",{children:"Recommended"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:201,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:199,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:193,columnNumber:15},this),f.jsxDEV("div",{className:"legend-bar",role:"note","aria-label":"Badge legend",children:[f.jsxDEV("span",{className:"legend-chip legend-savings",children:" Est. savings/mo"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:207,columnNumber:17},this),f.jsxDEV("span",{className:"legend-chip legend-compliance",children:" Compliance badges"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:208,columnNumber:17},this),f.jsxDEV("span",{className:"legend-chip legend-complexity",children:" Enterprise = complexity"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:206,columnNumber:15},this),f.jsxDEV("div",{className:"use-case-grid-new",children:[s.map(D=>f.jsxDEV("button",{className:`use-case-card-new ${i===D.id?"selected":""} ${D.complexity==="complex"?"recommended":""}`,onClick:()=>l(D.id),children:[f.jsxDEV("div",{className:"card-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:221,columnNumber:21},this),f.jsxDEV("div",{className:"card-content",children:[f.jsxDEV("div",{className:"card-title-row",children:[f.jsxDEV("h4",{children:D.name},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:224,columnNumber:25},this),D.complexity==="complex"&&f.jsxDEV("span",{className:"badge badge-advanced",title:"Complexity level",children:"Enterprise"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:226,columnNumber:27},this),D.estimatedSavings&&f.jsxDEV("span",{className:"badge badge-savings",title:"Estimated monthly savings vs no caching",children:D.estimatedSavings},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:229,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:223,columnNumber:23},this),f.jsxDEV("p",{children:D.description},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:232,columnNumber:23},this),D.compliance&&D.compliance.length>0&&f.jsxDEV("div",{className:"card-tags",children:D.compliance.slice(0,3).map((A,V)=>f.jsxDEV("span",{className:"tag",children:[" ",A]},V,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:236,columnNumber:29},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:234,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:222,columnNumber:21},this),i===D.id&&f.jsxDEV("div",{className:"selection-indicator",children:f.jsxDEV("div",{className:"selection-dot"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:243,columnNumber:25},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:242,columnNumber:23},this)]},D.id,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:215,columnNumber:19},this)),n.map(D=>f.jsxDEV("button",{className:`use-case-card-new ${i===D.id?"selected":""} ${D.recommended?"recommended":""}`,onClick:()=>l(D.id),children:[f.jsxDEV("div",{className:"card-icon",children:D.icon||""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:257,columnNumber:21},this),f.jsxDEV("div",{className:"card-content",children:[f.jsxDEV("div",{className:"card-title-row",children:[f.jsxDEV("h4",{children:D.title},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:260,columnNumber:25},this),D.popular&&f.jsxDEV("span",{className:"badge badge-popular",children:"Most popular"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:262,columnNumber:27},this),D.advanced&&f.jsxDEV("span",{className:"badge badge-advanced",children:"Advanced"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:265,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:259,columnNumber:23},this),f.jsxDEV("p",{children:D.description},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:268,columnNumber:23},this),D.tags&&f.jsxDEV("div",{className:"card-tags",children:D.tags.map((A,V)=>f.jsxDEV("span",{className:"tag",children:A},V,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:272,columnNumber:29},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:270,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:258,columnNumber:21},this),i===D.id&&f.jsxDEV("div",{className:"selection-indicator",children:f.jsxDEV("div",{className:"selection-dot"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:279,columnNumber:25},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:278,columnNumber:23},this)]},D.id,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:251,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:212,columnNumber:15},this),i==="custom"&&f.jsxDEV("div",{className:"custom-prompt-new",children:[f.jsxDEV("label",{children:"Describe your caching needs:"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:288,columnNumber:19},this),f.jsxDEV("textarea",{value:u,onChange:D=>d(D.target.value),placeholder:"Describe what you want to cache...",rows:4},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:289,columnNumber:19},this),f.jsxDEV("div",{className:"prompt-examples-new",children:[f.jsxDEV("p",{className:"examples-label",children:" Need inspiration? Try these:"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:296,columnNumber:21},this),f.jsxDEV("div",{className:"example-chips",children:N.map((D,A)=>f.jsxDEV("button",{type:"button",className:"example-chip-new",onClick:()=>d(D.description),children:[f.jsxDEV("span",{className:"chip-icon",children:D.icon},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:305,columnNumber:27},this),f.jsxDEV("span",{children:D.title},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:306,columnNumber:27},this)]},A,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:299,columnNumber:25},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:297,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:295,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:287,columnNumber:17},this),y&&f.jsxDEV("div",{className:"error-message-new",children:y},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:314,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:192,columnNumber:13},this),o===2&&f.jsxDEV("div",{className:"wizard-step-new",children:[f.jsxDEV("div",{className:"step-header",children:[f.jsxDEV("h3",{children:"Analyze Data"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:321,columnNumber:17},this),f.jsxDEV("p",{children:"Projected impact based on your dataset"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:322,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:320,columnNumber:15},this),w?f.jsxDEV("div",{className:"analysis-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",marginTop:"20px"},children:[f.jsxDEV("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:[f.jsxDEV("div",{style:{fontSize:"2rem",marginBottom:"5px"},children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:328,columnNumber:21},this),f.jsxDEV("h4",{style:{margin:"0 0 5px 0",color:"#aaa"},children:"Est. Hit Rate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:329,columnNumber:21},this),f.jsxDEV("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#00f3ff"},children:"42%"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:330,columnNumber:21},this),f.jsxDEV("p",{style:{fontSize:"0.9rem",color:"#666"},children:"Based on semantic clusters"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:331,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:327,columnNumber:19},this),f.jsxDEV("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:[f.jsxDEV("div",{style:{fontSize:"2rem",marginBottom:"5px"},children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:334,columnNumber:21},this),f.jsxDEV("h4",{style:{margin:"0 0 5px 0",color:"#aaa"},children:"Monthly Savings"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:335,columnNumber:21},this),f.jsxDEV("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#00ff9d"},children:"$120"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:336,columnNumber:21},this),f.jsxDEV("p",{style:{fontSize:"0.9rem",color:"#666"},children:"Est. token reduction"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:337,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:333,columnNumber:19},this),f.jsxDEV("div",{className:"stat-card",style:{background:"rgba(255,255,255,0.05)",padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:[f.jsxDEV("div",{style:{fontSize:"2rem",marginBottom:"5px"},children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:340,columnNumber:21},this),f.jsxDEV("h4",{style:{margin:"0 0 5px 0",color:"#aaa"},children:"Latency Drop"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:341,columnNumber:21},this),f.jsxDEV("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#ff0055"},children:"-85%"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:342,columnNumber:21},this),f.jsxDEV("p",{style:{fontSize:"0.9rem",color:"#666"},children:"2.5s  0.4s"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:343,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:339,columnNumber:19},this),f.jsxDEV("div",{style:{gridColumn:"1 / -1",marginTop:"20px",padding:"15px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"8px",border:"1px solid rgba(0, 243, 255, 0.2)"},children:[f.jsxDEV("h4",{style:{margin:"0 0 10px 0",color:"#00f3ff"},children:"Dataset Insights"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:347,columnNumber:21},this),f.jsxDEV("div",{style:{display:"flex",gap:"20px",fontSize:"0.9rem",color:"#ddd"},children:[f.jsxDEV("span",{children:[" ",f.jsxDEV("strong",{children:w.totalItems},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:349,columnNumber:32},this)," Samples"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:349,columnNumber:23},this),f.jsxDEV("span",{children:[" ",f.jsxDEV("strong",{children:w.avgTokens},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:350,columnNumber:32},this)," Avg Tokens"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:350,columnNumber:23},this),f.jsxDEV("span",{children:[" ",f.jsxDEV("strong",{children:Object.keys(w.categories).length},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:351,columnNumber:33},this)," Categories"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:351,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:348,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:346,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:326,columnNumber:17},this):f.jsxDEV("div",{className:"loading-state-new",children:[f.jsxDEV("div",{className:"spinner-new"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:357,columnNumber:19},this),f.jsxDEV("p",{children:"Analyzing dataset..."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:358,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:356,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:319,columnNumber:13},this),o===3&&f.jsxDEV("div",{className:"wizard-step-new",children:[f.jsxDEV("div",{className:"step-header",children:[f.jsxDEV("h3",{children:"Optimize For"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:367,columnNumber:17},this),f.jsxDEV("p",{children:"Choose your performance priority"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:368,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:366,columnNumber:15},this),f.jsxDEV("div",{className:"performance-options-new",children:[f.jsxDEV("button",{className:`perf-option-new ${m==="fast"?"selected":""}`,onClick:()=>h("fast"),children:[f.jsxDEV("div",{className:"perf-icon-new",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:376,columnNumber:19},this),f.jsxDEV("div",{className:"perf-info-new",children:[f.jsxDEV("h4",{children:"Low Latency"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:378,columnNumber:21},this),f.jsxDEV("p",{children:"Minimize response time  L1 only"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:379,columnNumber:21},this),f.jsxDEV("span",{className:"perf-metric-new",children:"~50ms p95"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:380,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:377,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:372,columnNumber:17},this),f.jsxDEV("button",{className:`perf-option-new ${m==="balanced"?"selected":""}`,onClick:()=>h("balanced"),children:[f.jsxDEV("div",{className:"perf-icon-new",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:388,columnNumber:19},this),f.jsxDEV("div",{className:"perf-info-new",children:[f.jsxDEV("h4",{children:"Balanced"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:390,columnNumber:21},this),f.jsxDEV("p",{children:"Good speed + savings  L1 + L2"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:391,columnNumber:21},this),f.jsxDEV("span",{className:"perf-metric-new perf-recommended",children:"Recommended"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:392,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:389,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:384,columnNumber:17},this),f.jsxDEV("button",{className:`perf-option-new ${m==="cost"?"selected":""}`,onClick:()=>h("cost"),children:[f.jsxDEV("div",{className:"perf-icon-new",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:400,columnNumber:19},this),f.jsxDEV("div",{className:"perf-info-new",children:[f.jsxDEV("h4",{children:"Cost Optimized"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:402,columnNumber:21},this),f.jsxDEV("p",{children:"Maximum savings  Multi-tier"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:403,columnNumber:21},this),f.jsxDEV("span",{className:"perf-metric-new",children:"$2.40/req saved"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:404,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:401,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:396,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:371,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:365,columnNumber:13},this),o===4&&f.jsxDEV("div",{className:"wizard-step-new",children:v?f.jsxDEV("div",{className:"loading-state-new",children:[f.jsxDEV("div",{className:"spinner-new"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:415,columnNumber:19},this),f.jsxDEV("p",{children:"AI is generating your pipeline..."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:416,columnNumber:19},this),f.jsxDEV("span",{className:"loading-subtitle-new",children:"Analyzing use case and optimizing nodes"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:417,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:414,columnNumber:17},this):y?f.jsxDEV("div",{className:"error-state-new",children:[f.jsxDEV("p",{children:y},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:423,columnNumber:19},this),f.jsxDEV("button",{className:"btn-new btn-secondary-new",onClick:()=>c(3),children:"Try Again"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:424,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:422,columnNumber:17},this):null},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:412,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:190,columnNumber:9},this),f.jsxDEV("div",{className:"wizard-footer-new",children:[f.jsxDEV("div",{className:"footer-hint",children:[f.jsxDEV("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:437,columnNumber:15},this),f.jsxDEV("line",{x1:"12",y1:"16",x2:"12",y2:"12"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:438,columnNumber:15},this),f.jsxDEV("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:439,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:436,columnNumber:13},this),f.jsxDEV("span",{children:"You can modify data sources, models, and latency targets in later steps."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:441,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:435,columnNumber:11},this),f.jsxDEV("div",{className:"footer-actions",children:[o>1&&o<4&&f.jsxDEV("button",{className:"btn-new btn-secondary-new",onClick:()=>c(o-1),children:"Back"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:445,columnNumber:15},this),o<4&&f.jsxDEV("button",{className:"btn-new btn-primary-new",onClick:U,children:[f.jsxDEV("span",{children:o===3?"Generate Pipeline":"Next"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:451,columnNumber:17},this),f.jsxDEV("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsxDEV("line",{x1:"5",y1:"12",x2:"19",y2:"12"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:453,columnNumber:19},this),f.jsxDEV("polyline",{points:"12 5 19 12 12 19"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:454,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:452,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:450,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:443,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:434,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:160,columnNumber:7},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WizardModalNew.jsx",lineNumber:159,columnNumber:5},this)}const op=[{id:"healthcare",icon:"",title:"Healthcare",description:"HIPAA compliance, PHI protection, medical records",compliance:["HIPAA","PHI Detection"],color:"#10b981"},{id:"finance",icon:"",title:"Finance",description:"PCI-DSS, fraud detection, transaction security",compliance:["PCI-DSS","SOX"],color:"#f59e0b"},{id:"legal",icon:"",title:"Legal",description:"Data retention, compliance, confidentiality",compliance:["Data Retention","Audit Logs"],color:"#8b5cf6"},{id:"ecommerce",icon:"",title:"E-commerce",description:"Product data, inventory, customer sessions",compliance:["PCI-DSS","GDPR"],color:"#3b82f6"},{id:"saas",icon:"",title:"SaaS",description:"API caching, multi-tenant, rate limiting",compliance:["SOC 2","Multi-tenant"],color:"#06b6d4"},{id:"general",icon:"",title:"General",description:"Standard caching, no special requirements",compliance:["Standard"],color:"#64748b"}];function rp({onComplete:e,onSkip:t}){const[a,r]=I.useState(null),s=()=>{a&&e(a)};return f.jsxDEV("div",{className:"wizard-overlay",children:f.jsxDEV("div",{className:"wizard-modal sector-modal",children:[f.jsxDEV("div",{className:"wizard-header",children:f.jsxDEV("div",{children:[f.jsxDEV("h2",{children:"Welcome to AgentCache Studio"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:69,columnNumber:13},this),f.jsxDEV("p",{className:"subtitle",children:"Choose your industry to customize your experience"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:68,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:67,columnNumber:9},this),f.jsxDEV("div",{className:"wizard-body",children:f.jsxDEV("div",{className:"sector-grid",children:op.map(n=>f.jsxDEV("div",{className:`sector-card ${a===n.id?"selected":""}`,onClick:()=>r(n.id),style:{"--sector-color":n.color},children:[f.jsxDEV("div",{className:"sector-icon",children:n.icon},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:83,columnNumber:17},this),f.jsxDEV("h3",{children:n.title},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:84,columnNumber:17},this),f.jsxDEV("p",{className:"sector-description",children:n.description},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:85,columnNumber:17},this),f.jsxDEV("div",{className:"sector-compliance",children:n.compliance.map(o=>f.jsxDEV("span",{className:"compliance-badge",children:o},o,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:88,columnNumber:21},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:86,columnNumber:17},this)]},n.id,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:77,columnNumber:15},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:75,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:74,columnNumber:9},this),f.jsxDEV("div",{className:"wizard-footer",children:[f.jsxDEV("button",{className:"btn btn-secondary",onClick:()=>t("general"),children:"Skip for now"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:97,columnNumber:11},this),f.jsxDEV("button",{className:"btn btn-primary",onClick:s,disabled:!a,children:"Continue"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:96,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:66,columnNumber:7},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/SectorModal.jsx",lineNumber:65,columnNumber:5},this)}function ip({selectedNode:e}){if(!e)return f.jsxDEV("aside",{className:"metrics-panel",children:f.jsxDEV("div",{className:"metrics-empty",children:f.jsxDEV("p",{children:"Click a node to view details"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:8,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:7,columnNumber:9},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:6,columnNumber:7},this);const{data:t}=e,{label:a,config:r={},metrics:s={}}=t;return f.jsxDEV("aside",{className:"metrics-panel",children:[f.jsxDEV("div",{className:"panel-header",children:f.jsxDEV("h3",{children:"Node Details"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:20,columnNumber:9},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:19,columnNumber:7},this),f.jsxDEV("div",{className:"panel-section",children:[f.jsxDEV("h4",{children:"Info"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:24,columnNumber:9},this),f.jsxDEV("div",{className:"info-grid",children:[f.jsxDEV("div",{className:"info-item",children:[f.jsxDEV("span",{className:"info-label",children:"Type"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:27,columnNumber:13},this),f.jsxDEV("span",{className:"info-value",children:e.type},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:28,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:26,columnNumber:11},this),f.jsxDEV("div",{className:"info-item",children:[f.jsxDEV("span",{className:"info-label",children:"Label"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:31,columnNumber:13},this),f.jsxDEV("span",{className:"info-value",children:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:32,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:30,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:25,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:23,columnNumber:7},this),Object.keys(r).length>0&&f.jsxDEV("div",{className:"panel-section",children:[f.jsxDEV("h4",{children:"Configuration"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:39,columnNumber:11},this),f.jsxDEV("div",{className:"config-list",children:Object.entries(r).map(([n,o])=>f.jsxDEV("div",{className:"config-item",children:[f.jsxDEV("span",{className:"config-key",children:n},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:43,columnNumber:17},this),f.jsxDEV("span",{className:"config-value",children:typeof o=="object"?JSON.stringify(o):String(o)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:44,columnNumber:17},this)]},n,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:42,columnNumber:15},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:40,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:38,columnNumber:9},this),Object.keys(s).length>0&&f.jsxDEV("div",{className:"panel-section",children:[f.jsxDEV("h4",{children:"Live Metrics"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:55,columnNumber:11},this),f.jsxDEV("div",{className:"metrics-grid",children:[s.hitRate>0&&f.jsxDEV("div",{className:"metric-card",children:[f.jsxDEV("span",{className:"metric-label",children:"Hit Rate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:59,columnNumber:17},this),f.jsxDEV("span",{className:"metric-value",children:[Math.round(s.hitRate*100),"%"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:60,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:58,columnNumber:15},this),s.latency>0&&f.jsxDEV("div",{className:"metric-card",children:[f.jsxDEV("span",{className:"metric-label",children:"Latency"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:65,columnNumber:17},this),f.jsxDEV("span",{className:"metric-value",children:[s.latency,"ms"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:66,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:64,columnNumber:15},this),s.savings>0&&f.jsxDEV("div",{className:"metric-card",children:[f.jsxDEV("span",{className:"metric-label",children:"Savings"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:71,columnNumber:17},this),f.jsxDEV("span",{className:"metric-value",children:["$",s.savings]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:72,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:70,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:56,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:54,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/MetricsPanel.jsx",lineNumber:18,columnNumber:5},this)}const _r={healthcare:[{id:"patient_records",title:" Patient Records",description:"Cache medical records with HIPAA compliance",prompt:"Cache patient medical records with HIPAA compliance and PHI detection",nodes:["input","phi_filter","cache_l1","cache_l2","hipaa_audit","openai","output"]},{id:"clinical_decision",title:" Clinical Decision Support",description:"AI-powered diagnosis with audit trails",prompt:"Cache clinical decision support AI with full audit logging",nodes:["input","phi_filter","cache_l1","anthropic","hipaa_audit","output"]},{id:"ehr_integration",title:" EHR Integration",description:"Electronic health record system caching",prompt:"Cache EHR system queries with encryption and compliance",nodes:["input","cache_l1","cache_l2","phi_filter","hipaa_audit","output"]},{id:"custom",title:" Custom Healthcare",description:"Describe your own healthcare use case",prompt:"",nodes:[]}],finance:[{id:"risk_analysis",title:" Risk Analysis",description:"Fraud detection and risk scoring",prompt:"Cache risk analysis and fraud detection for financial transactions",nodes:["input","fraud_detector","cache_l1","cache_l2","openai","pci_audit","output"]},{id:"transaction_processing",title:" Transaction Processing",description:"High-speed payment validation",prompt:"Cache transaction validation with PCI-DSS compliance",nodes:["input","transaction_validator","cache_l1","pci_audit","output"]},{id:"kyc_compliance",title:" KYC Compliance",description:"Know Your Customer verification",prompt:"Cache KYC verification results with audit trail",nodes:["input","cache_l1","cache_l2","anthropic","pci_audit","output"]},{id:"custom",title:" Custom Finance",description:"Describe your own financial use case",prompt:"",nodes:[]}],legal:[{id:"document_analysis",title:" Document Analysis",description:"Legal document review and search",prompt:"Cache legal document analysis with retention policies",nodes:["input","cache_l1","cache_l2","anthropic","retention_policy","output"]},{id:"case_research",title:" Case Research",description:"Case law and precedent lookup",prompt:"Cache case law research with audit logging",nodes:["input","semantic_dedup","cache_l2","cache_l3","openai","audit_logger","output"]},{id:"custom",title:" Custom Legal",description:"Describe your own legal use case",prompt:"",nodes:[]}],ecommerce:[{id:"product_search",title:" Product Search",description:"Fast product catalog search",prompt:"Cache product search and recommendations",nodes:["input","cache_l1","semantic_dedup","openai","output"]},{id:"inventory_sync",title:" Inventory Sync",description:"Real-time inventory availability",prompt:"Cache inventory status with short TTL for freshness",nodes:["input","cache_l1","output"]},{id:"personalization",title:" Personalization",description:"User recommendations and preferences",prompt:"Cache personalized recommendations per user",nodes:["input","cache_l1","cache_l2","gemini","output"]},{id:"custom",title:" Custom E-commerce",description:"Describe your own e-commerce use case",prompt:"",nodes:[]}],saas:[{id:"api_caching",title:" API Caching",description:"Multi-tenant API response caching",prompt:"Cache API responses with tenant isolation",nodes:["input","cache_l1","cache_l2","output"]},{id:"ai_features",title:" AI Features",description:"AI-powered product features",prompt:"Cache AI completions for SaaS features",nodes:["input","semantic_dedup","cache_l1","cache_l2","openai","output"]},{id:"analytics",title:" Analytics",description:"Dashboard data aggregation",prompt:"Cache analytics queries and dashboard data",nodes:["input","cache_l2","cache_l3","output"]},{id:"custom",title:" Custom SaaS",description:"Describe your own SaaS use case",prompt:"",nodes:[]}],general:[{id:"api_basic",title:" API Caching",description:"Basic API response caching",prompt:"Cache API responses to reduce latency",nodes:["input","cache_l1","cache_l2","output"]},{id:"llm_caching",title:" LLM Caching",description:"Cache AI model responses",prompt:"Cache LLM completions to save costs",nodes:["input","semantic_dedup","cache_l1","cache_l2","openai","output"]},{id:"database",title:" Database Query",description:"Cache expensive database queries",prompt:"Cache database query results",nodes:["input","cache_l1","cache_l2","cache_l3","output"]},{id:"custom",title:" Custom",description:"Describe your own use case",prompt:"",nodes:[]}]},Er={healthcare:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup","phi_filter"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["hipaa_audit","encrypted_cache"]},{category:"output",types:["output"]}],finance:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup","fraud_detector","transaction_validator"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["pci_audit","sox_logger"]},{category:"output",types:["output"]}],legal:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"compliance",types:["retention_policy","audit_logger"]},{category:"output",types:["output"]}],ecommerce:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}],saas:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}],general:[{category:"input",types:["input"]},{category:"cache",types:["cache_l1","cache_l2","cache_l3"]},{category:"intelligence",types:["semantic_dedup"]},{category:"llm",types:["openai","anthropic","gemini"]},{category:"output",types:["output"]}]},Sr={healthcare:{required:["hipaa","phi"],autoAddNodes:["phi_filter","hipaa_audit"],retention:"7 years",encryption:"required"},finance:{required:["pci_dss","sox"],autoAddNodes:["pci_audit"],retention:"7 years",encryption:"required"},legal:{required:["data_retention"],autoAddNodes:["retention_policy","audit_logger"],retention:"10 years",encryption:"recommended"},ecommerce:{required:["pci_dss","gdpr"],autoAddNodes:[],retention:"2 years",encryption:"recommended"},saas:{required:["soc2"],autoAddNodes:[],retention:"1 year",encryption:"recommended"},general:{required:[],autoAddNodes:[],retention:"30 days",encryption:"optional"}};function Cr(e){return{templates:_r[e]||_r.general,nodes:Er[e]||Er.general,compliance:Sr[e]||Sr.general}}const wc=I.createContext();function cp({children:e}){const[t,a]=I.useState(null),[r,s]=I.useState(null),[n,o]=I.useState(!1);I.useEffect(()=>{const l=localStorage.getItem("agentcache_sector");l?(a(l),s(Cr(l))):o(!0)},[]);const c=l=>{a(l),s(Cr(l)),localStorage.setItem("agentcache_sector",l),o(!1)},i=()=>{o(!0)};return f.jsxDEV(wc.Provider,{value:{sector:t,config:r,selectSector:c,changeSector:i,showSectorModal:n,setShowSectorModal:o},children:e},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/context/SectorContext.jsx",lineNumber:35,columnNumber:5},this)}function fo(){const e=I.useContext(wc);if(!e)throw new Error("useSector must be used within SectorProvider");return e}const Ur={healthcare:[{id:"hipaa_rag",name:"HIPAA-Compliant RAG",description:"Production RAG with PHI protection and audit logging",icon:"",tier:"enterprise",estimatedSavings:"$4,200/mo",metrics:{hitRate:.88,latency:67,savingsPerRequest:1.4},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"phi_filter",position:{x:350,y:200},config:{detection_threshold:.95,redaction_mode:"mask"}},{type:"cache_l1",position:{x:600,y:200},config:{ttl:300,max_size:"500MB"}},{type:"cache_l2",position:{x:850,y:200},config:{ttl:3600,storage:"redis"}},{type:"openai",position:{x:1100,y:200},config:{model:"gpt-4",temperature:.7}},{type:"hipaa_audit",position:{x:1350,y:200},config:{retention:"7 years",log_level:"full"}},{type:"output",position:{x:1600,y:200},config:{}}],edges:[{source:"input-0",target:"phi_filter-1"},{source:"phi_filter-1",target:"cache_l1-2"},{source:"cache_l1-2",target:"cache_l2-3",label:"MISS"},{source:"cache_l2-3",target:"openai-4",label:"MISS"},{source:"openai-4",target:"hipaa_audit-5"},{source:"hipaa_audit-5",target:"output-6"}],tags:["rag","hipaa","phi","audit"],useCase:"Clinical decision support, patient record retrieval",compliance:["HIPAA","PHI Detection"],recommended:!0},{id:"ehr_integration",name:"EHR System Cache",description:"High-performance caching for electronic health records",icon:"",tier:"professional",estimatedSavings:"$2,800/mo",metrics:{hitRate:.92,latency:45,savingsPerRequest:.95},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l1",position:{x:350,y:200},config:{ttl:600,max_size:"1GB"}},{type:"cache_l2",position:{x:600,y:200},config:{ttl:7200,storage:"redis"}},{type:"encrypted_cache",position:{x:850,y:200},config:{encryption:"AES-256"}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l1-1"},{source:"cache_l1-1",target:"cache_l2-2",label:"MISS"},{source:"cache_l2-2",target:"encrypted_cache-3",label:"MISS"},{source:"encrypted_cache-3",target:"output-4"}],tags:["ehr","performance","encryption"],useCase:"Fast EHR queries, patient lookup",compliance:["Encryption at Rest"]}],finance:[{id:"fraud_detection",name:"Real-Time Fraud Detection",description:"Sub-50ms fraud scoring with compliance audit",icon:"",tier:"enterprise",estimatedSavings:"$6,500/mo",metrics:{hitRate:.85,latency:38,savingsPerRequest:2.1},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"fraud_detector",position:{x:350,y:200},config:{threshold:.8,check_velocity:!0}},{type:"cache_l1",position:{x:600,y:200},config:{ttl:120,max_size:"500MB"}},{type:"openai",position:{x:850,y:200},config:{model:"gpt-4",temperature:.3}},{type:"pci_audit",position:{x:1100,y:200},config:{retention:"7 years"}},{type:"output",position:{x:1350,y:200},config:{}}],edges:[{source:"input-0",target:"fraud_detector-1"},{source:"fraud_detector-1",target:"cache_l1-2"},{source:"cache_l1-2",target:"openai-3",label:"MISS"},{source:"openai-3",target:"pci_audit-4"},{source:"pci_audit-4",target:"output-5"}],tags:["fraud","pci-dss","real-time"],useCase:"Transaction fraud scoring, risk analysis",compliance:["PCI-DSS","SOX"],recommended:!0},{id:"kyc_verification",name:"KYC Compliance Pipeline",description:"Know Your Customer verification with full audit trail",icon:"",tier:"enterprise",estimatedSavings:"$3,100/mo",metrics:{hitRate:.78,latency:95,savingsPerRequest:1.85},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l2",position:{x:350,y:200},config:{ttl:86400,storage:"postgresql"}},{type:"anthropic",position:{x:600,y:200},config:{model:"claude-3-opus"}},{type:"pci_audit",position:{x:850,y:200},config:{retention:"7 years",log_pii:!1}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l2-1"},{source:"cache_l2-1",target:"anthropic-2",label:"MISS"},{source:"anthropic-2",target:"pci_audit-3"},{source:"pci_audit-3",target:"output-4"}],tags:["kyc","compliance","identity"],useCase:"Customer verification, AML compliance",compliance:["KYC","AML"]}],legal:[{id:"contract_analysis",name:"Legal Contract Analysis",description:"AI-powered contract review with confidentiality protection",icon:"",tier:"enterprise",estimatedSavings:"$5,200/mo",metrics:{hitRate:.83,latency:78,savingsPerRequest:1.95},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l1",position:{x:350,y:200},config:{ttl:900,max_size:"750MB"}},{type:"cache_l2",position:{x:600,y:200},config:{ttl:7200,storage:"postgresql"}},{type:"anthropic",position:{x:850,y:200},config:{model:"claude-3-opus",temperature:.2}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l1-1"},{source:"cache_l1-1",target:"cache_l2-2",label:"MISS"},{source:"cache_l2-2",target:"anthropic-3",label:"MISS"},{source:"anthropic-3",target:"output-4"}],tags:["legal","contracts","compliance"],useCase:"Contract review, legal research, clause extraction",compliance:["Attorney-Client Privilege"],recommended:!0},{id:"case_law_search",name:"Case Law Search Cache",description:"Fast semantic search across legal precedents",icon:"",tier:"professional",estimatedSavings:"$2,400/mo",metrics:{hitRate:.91,latency:52,savingsPerRequest:1.1},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"semantic_dedup",position:{x:350,y:200},config:{threshold:.88}},{type:"cache_l2",position:{x:600,y:200},config:{ttl:14400,storage:"redis"}},{type:"openai",position:{x:850,y:200},config:{model:"gpt-4"}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"semantic_dedup-1"},{source:"semantic_dedup-1",target:"cache_l2-2"},{source:"cache_l2-2",target:"openai-3",label:"MISS"},{source:"openai-3",target:"output-4"}],tags:["legal","research","semantic-search"],useCase:"Case law research, precedent analysis",compliance:[]}],ecommerce:[{id:"product_recommendations",name:"AI Product Recommendations",description:"Personalized product suggestions with high-speed caching",icon:"",tier:"professional",estimatedSavings:"$4,100/mo",metrics:{hitRate:.94,latency:35,savingsPerRequest:.75},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l1",position:{x:350,y:200},config:{ttl:180,max_size:"1GB"}},{type:"cache_l2",position:{x:600,y:200},config:{ttl:1800,storage:"redis"}},{type:"openai",position:{x:850,y:200},config:{model:"gpt-3.5-turbo",temperature:.7}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l1-1"},{source:"cache_l1-1",target:"cache_l2-2",label:"MISS"},{source:"cache_l2-2",target:"openai-3",label:"MISS"},{source:"openai-3",target:"output-4"}],tags:["ecommerce","recommendations","personalization"],useCase:"Product recommendations, upselling, cross-selling",recommended:!0},{id:"customer_support",name:"E-commerce Support Bot",description:"AI customer support with order context caching",icon:"",tier:"starter",estimatedSavings:"$1,900/mo",metrics:{hitRate:.87,latency:48,savingsPerRequest:.65},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l1",position:{x:350,y:200},config:{ttl:300}},{type:"semantic_dedup",position:{x:600,y:200},config:{threshold:.9}},{type:"openai",position:{x:850,y:200},config:{model:"gpt-3.5-turbo"}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l1-1"},{source:"cache_l1-1",target:"semantic_dedup-2",label:"MISS"},{source:"semantic_dedup-2",target:"openai-3"},{source:"openai-3",target:"output-4"}],tags:["ecommerce","support","chatbot"],useCase:"Customer support, order status, FAQ",recommended:!0}],saas:[{id:"multi_tenant_api",name:"Multi-Tenant API Cache",description:"Isolated caching per tenant with cost allocation",icon:"",tier:"professional",estimatedSavings:"$3,800/mo",metrics:{hitRate:.89,latency:52,savingsPerRequest:1.25},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l1",position:{x:350,y:200},config:{ttl:300,namespace_isolation:!0}},{type:"cache_l2",position:{x:600,y:200},config:{ttl:1800,storage:"redis"}},{type:"semantic_dedup",position:{x:850,y:200},config:{threshold:.92}},{type:"openai",position:{x:1100,y:200},config:{model:"gpt-4"}},{type:"output",position:{x:1350,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l1-1"},{source:"cache_l1-1",target:"cache_l2-2",label:"MISS"},{source:"cache_l2-2",target:"semantic_dedup-3",label:"MISS"},{source:"semantic_dedup-3",target:"openai-4"},{source:"openai-4",target:"output-5"}],tags:["multi-tenant","saas","isolation"],useCase:"B2B SaaS AI features, per-customer caching",recommended:!0}],general:[{id:"basic_llm_cache",name:"Basic LLM Cache",description:"Simple, fast caching for any LLM API",icon:"",tier:"starter",estimatedSavings:"$1,200/mo",metrics:{hitRate:.82,latency:48,savingsPerRequest:.85},nodes:[{type:"input",position:{x:100,y:200},config:{}},{type:"cache_l1",position:{x:350,y:200},config:{ttl:600}},{type:"cache_l2",position:{x:600,y:200},config:{ttl:3600}},{type:"openai",position:{x:850,y:200},config:{}},{type:"output",position:{x:1100,y:200},config:{}}],edges:[{source:"input-0",target:"cache_l1-1"},{source:"cache_l1-1",target:"cache_l2-2",label:"MISS"},{source:"cache_l2-2",target:"openai-3",label:"MISS"},{source:"openai-3",target:"output-4"}],tags:["simple","starter","llm"],useCase:"Basic chatbots, simple API caching",recommended:!0}]};function Dc(e){return Ur[e]||Ur.general}function lp(e){return Dc(e).filter(a=>a.recommended)}function up({onLoadPreset:e,onClose:t}){const{sector:a}=fo(),[r,s]=I.useState("all"),n=Dc(a),o=r==="recommended"?lp(a):n,c=i=>{const l=i.nodes.map((d,m)=>({id:`${d.type}-${m}`,type:d.type,position:d.position,data:{label:d.type.replace(/_/g," ").toUpperCase(),config:d.config||{},metrics:i.metrics}})),u=i.edges.map((d,m)=>({id:`edge-${m}`,source:d.source,target:d.target,label:d.label,type:"smoothstep",animated:!0}));e({name:i.name,nodes:l,edges:u,metadata:{id:i.id,description:i.description,tier:i.tier,estimatedSavings:i.estimatedSavings,tags:i.tags,useCase:i.useCase,compliance:i.compliance}})};return f.jsxDEV("div",{className:"workspace-gallery-overlay",children:f.jsxDEV("div",{className:"workspace-gallery",children:[f.jsxDEV("div",{className:"gallery-header",children:[f.jsxDEV("div",{className:"gallery-title-section",children:[f.jsxDEV("h2",{children:" Pipeline Presets"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:63,columnNumber:13},this),f.jsxDEV("p",{className:"gallery-subtitle",children:["Production-ready pipelines for ",a]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:64,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:62,columnNumber:11},this),f.jsxDEV("button",{className:"close-btn",onClick:t,children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:68,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:61,columnNumber:9},this),f.jsxDEV("div",{className:"gallery-filters",children:[f.jsxDEV("button",{className:`filter-btn ${r==="all"?"active":""}`,onClick:()=>s("all"),children:["All Templates (",n.length,")"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:73,columnNumber:11},this),f.jsxDEV("button",{className:`filter-btn ${r==="recommended"?"active":""}`,onClick:()=>s("recommended"),children:" Recommended"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:79,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:72,columnNumber:9},this),f.jsxDEV("div",{className:"gallery-grid",children:o.map(i=>f.jsxDEV("div",{className:"preset-card",children:[i.recommended&&f.jsxDEV("div",{className:"recommended-badge",children:" Recommended"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:92,columnNumber:17},this),f.jsxDEV("div",{className:"preset-header",children:[f.jsxDEV("span",{className:"preset-icon",children:i.icon},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:96,columnNumber:17},this),f.jsxDEV("div",{className:"preset-title-section",children:[f.jsxDEV("h3",{children:i.name},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:98,columnNumber:19},this),f.jsxDEV("span",{className:`tier-badge tier-${i.tier}`,children:i.tier},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:99,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:97,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:95,columnNumber:15},this),f.jsxDEV("p",{className:"preset-description",children:i.description},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:105,columnNumber:15},this),f.jsxDEV("div",{className:"preset-metrics",children:[f.jsxDEV("div",{className:"metric",children:[f.jsxDEV("span",{className:"metric-label",children:"Hit Rate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:110,columnNumber:19},this),f.jsxDEV("span",{className:"metric-value",children:[(i.metrics.hitRate*100).toFixed(0),"%"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:111,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:109,columnNumber:17},this),f.jsxDEV("div",{className:"metric",children:[f.jsxDEV("span",{className:"metric-label",children:"Latency"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:116,columnNumber:19},this),f.jsxDEV("span",{className:"metric-value",children:[i.metrics.latency,"ms"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:117,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:115,columnNumber:17},this),f.jsxDEV("div",{className:"metric",children:[f.jsxDEV("span",{className:"metric-label",children:"Est. Savings"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:122,columnNumber:19},this),f.jsxDEV("span",{className:"metric-value savings",children:i.estimatedSavings},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:123,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:108,columnNumber:15},this),f.jsxDEV("div",{className:"preset-use-case",children:[f.jsxDEV("strong",{children:"Use Case:"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:131,columnNumber:17},this)," ",i.useCase]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:130,columnNumber:15},this),i.compliance&&i.compliance.length>0&&f.jsxDEV("div",{className:"compliance-badges",children:i.compliance.map(l=>f.jsxDEV("span",{className:"compliance-badge",children:l},l,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:138,columnNumber:21},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:136,columnNumber:17},this),f.jsxDEV("div",{className:"preset-tags",children:i.tags.map(l=>f.jsxDEV("span",{className:"tag",children:["#",l]},l,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:148,columnNumber:19},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:146,columnNumber:15},this),f.jsxDEV("button",{className:"load-preset-btn",onClick:()=>c(i),children:"Deploy Pipeline "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:155,columnNumber:15},this)]},i.id,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:90,columnNumber:13},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:88,columnNumber:9},this),o.length===0&&f.jsxDEV("div",{className:"no-presets",children:f.jsxDEV("p",{children:"No presets available for this filter."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:167,columnNumber:13},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:166,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:59,columnNumber:7},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/WorkspaceGallery.jsx",lineNumber:58,columnNumber:5},this)}function dp({onOpenWizard:e,onNewPipeline:t,pipelines:a=[]}){const{sector:r}=fo(),s=I.useRef(null),[n,o]=I.useState({totalPipelines:0,activePipelines:0,monthlySavings:0,cacheHitRate:87,avgLatency:52,requestsPerSec:1247});return I.useEffect(()=>{const c=s.current;if(!c)return;const i=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;const l=[],u=80,d=150;class m{constructor(){this.x=Math.random()*c.width,this.y=Math.random()*c.height,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.radius=Math.random()*2+1,this.opacity=Math.random()*.5+.3}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>c.width)&&(this.vx*=-1),(this.y<0||this.y>c.height)&&(this.vy*=-1)}draw(){i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle=`rgba(56, 189, 248, ${this.opacity})`,i.fill()}}for(let y=0;y<u;y++)l.push(new m);function h(){for(let y=0;y<l.length;y++)for(let x=y+1;x<l.length;x++){const w=l[y].x-l[x].x,_=l[y].y-l[x].y,N=Math.sqrt(w*w+_*_);if(N<d){const U=(1-N/d)*.2;i.beginPath(),i.moveTo(l[y].x,l[y].y),i.lineTo(l[x].x,l[x].y),i.strokeStyle=`rgba(56, 189, 248, ${U})`,i.lineWidth=1,i.stroke()}}}function v(){i.clearRect(0,0,c.width,c.height),l.forEach(y=>{y.update(),y.draw()}),h(),requestAnimationFrame(v)}v();const g=()=>{c.width=window.innerWidth,c.height=window.innerHeight};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),I.useEffect(()=>{const c=a.filter(u=>u.isActive).length,i=a.length,l=a.reduce((u,d)=>{const m=d.estimatedSavings?.match(/\$?([\d,]+)/);return u+(m?parseInt(m[1].replace(/,/g,"")):0)},0);o({totalPipelines:i,activePipelines:c,monthlySavings:l,cacheHitRate:87+Math.floor(Math.random()*8),avgLatency:48+Math.floor(Math.random()*10),requestsPerSec:1200+Math.floor(Math.random()*300)})},[a]),f.jsxDEV("div",{className:"command-center pro",children:[f.jsxDEV("canvas",{ref:s,className:"game-canvas"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:129,columnNumber:7},this),f.jsxDEV("div",{className:"canvas-overlay"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:132,columnNumber:7},this),f.jsxDEV("div",{className:"command-header",children:[f.jsxDEV("div",{className:"header-left",children:[f.jsxDEV("h1",{className:"command-title",children:[f.jsxDEV("span",{className:"title-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:138,columnNumber:13},this),"AgentCache Control"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:137,columnNumber:11},this),f.jsxDEV("p",{className:"subtitle",children:[r?`${r.charAt(0).toUpperCase()+r.slice(1)} sector`:"Multi-sector","  Intelligent inference orchestration"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:136,columnNumber:9},this),f.jsxDEV("div",{className:"header-right",children:f.jsxDEV("div",{className:"system-status",children:[f.jsxDEV("div",{className:"pulse-indicator"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:149,columnNumber:13},this),f.jsxDEV("span",{className:"status-text",children:"Operational"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:148,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:147,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:135,columnNumber:7},this),f.jsxDEV("div",{className:"kpi-strip",children:[f.jsxDEV("div",{className:"kpi",children:[f.jsxDEV("div",{className:"kpi-label",children:"Hit rate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:158,columnNumber:11},this),f.jsxDEV("div",{className:"kpi-value",children:[n.cacheHitRate,"%"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:159,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:157,columnNumber:9},this),f.jsxDEV("div",{className:"kpi",children:[f.jsxDEV("div",{className:"kpi-label",children:"P95 latency"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:162,columnNumber:11},this),f.jsxDEV("div",{className:"kpi-value",children:[n.avgLatency,"ms"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:163,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:161,columnNumber:9},this),f.jsxDEV("div",{className:"kpi",children:[f.jsxDEV("div",{className:"kpi-label",children:"Monthly savings"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:166,columnNumber:11},this),f.jsxDEV("div",{className:"kpi-value",children:["$",n.monthlySavings.toLocaleString()]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:167,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:165,columnNumber:9},this),f.jsxDEV("div",{className:"kpi",children:[f.jsxDEV("div",{className:"kpi-label",children:"Throughput"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:170,columnNumber:11},this),f.jsxDEV("div",{className:"kpi-value",children:[n.requestsPerSec.toLocaleString()," req/s"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:171,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:169,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:156,columnNumber:7},this),f.jsxDEV("div",{className:"control-grid",children:[f.jsxDEV("div",{className:"control-panel launch-panel",children:[f.jsxDEV("div",{className:"panel-header",children:[f.jsxDEV("h3",{children:"Quick actions"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:181,columnNumber:13},this),f.jsxDEV("div",{className:"panel-indicator"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:182,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:180,columnNumber:11},this),f.jsxDEV("div",{className:"launch-controls",children:[f.jsxDEV("button",{className:"launch-btn primary-launch",onClick:e,children:[f.jsxDEV("div",{className:"btn-glow"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:187,columnNumber:15},this),f.jsxDEV("div",{className:"btn-content",children:[f.jsxDEV("span",{className:"btn-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:189,columnNumber:17},this),f.jsxDEV("span",{className:"btn-label",children:"AI PIPELINE WIZARD"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:190,columnNumber:17},this),f.jsxDEV("span",{className:"btn-sublabel",children:"Generate pipeline in 30 seconds"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:191,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:188,columnNumber:15},this),f.jsxDEV("div",{className:"btn-pulse"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:193,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:186,columnNumber:13},this),f.jsxDEV("button",{className:"launch-btn secondary-launch",onClick:t,children:f.jsxDEV("div",{className:"btn-content",children:[f.jsxDEV("span",{className:"btn-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:198,columnNumber:17},this),f.jsxDEV("span",{className:"btn-label",children:"CUSTOM BUILDER"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:199,columnNumber:17},this),f.jsxDEV("span",{className:"btn-sublabel",children:"Build from scratch"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:200,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:197,columnNumber:15},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:196,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:185,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:179,columnNumber:9},this),f.jsxDEV("div",{className:"control-panel metrics-panel",children:[f.jsxDEV("div",{className:"panel-header",children:[f.jsxDEV("h3",{children:"Overview"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:209,columnNumber:13},this),f.jsxDEV("div",{className:"panel-indicator"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:210,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:208,columnNumber:11},this),f.jsxDEV("div",{className:"metrics-grid",children:[f.jsxDEV("div",{className:"metric-card",children:[f.jsxDEV("div",{className:"metric-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:215,columnNumber:15},this),f.jsxDEV("div",{className:"metric-value",children:n.totalPipelines},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:216,columnNumber:15},this),f.jsxDEV("div",{className:"metric-label",children:"Total Pipelines"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:217,columnNumber:15},this),f.jsxDEV("div",{className:"metric-bar",children:f.jsxDEV("div",{className:"bar-fill",style:{width:`${n.totalPipelines/10*100}%`}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:219,columnNumber:17},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:218,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:214,columnNumber:13},this),f.jsxDEV("div",{className:"metric-card active",children:[f.jsxDEV("div",{className:"metric-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:224,columnNumber:15},this),f.jsxDEV("div",{className:"metric-value",children:n.activePipelines},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:225,columnNumber:15},this),f.jsxDEV("div",{className:"metric-label",children:"Active"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:226,columnNumber:15},this),f.jsxDEV("div",{className:"metric-bar",children:f.jsxDEV("div",{className:"bar-fill",style:{width:`${n.activePipelines/n.totalPipelines*100||0}%`}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:228,columnNumber:17},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:227,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:223,columnNumber:13},this),f.jsxDEV("div",{className:"metric-card savings",children:[f.jsxDEV("div",{className:"metric-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:233,columnNumber:15},this),f.jsxDEV("div",{className:"metric-value",children:["$",n.monthlySavings.toLocaleString()]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:234,columnNumber:15},this),f.jsxDEV("div",{className:"metric-label",children:"Monthly Savings"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:235,columnNumber:15},this),f.jsxDEV("div",{className:"metric-bar",children:f.jsxDEV("div",{className:"bar-fill",style:{width:"75%"}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:237,columnNumber:17},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:213,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:207,columnNumber:9},this),f.jsxDEV("div",{className:"control-panel gauges-panel",children:[f.jsxDEV("div",{className:"panel-header",children:[f.jsxDEV("h3",{children:"Performance"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:246,columnNumber:13},this),f.jsxDEV("div",{className:"panel-indicator"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:247,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:245,columnNumber:11},this),f.jsxDEV("div",{className:"gauges-grid",children:[f.jsxDEV("div",{className:"gauge",children:[f.jsxDEV("div",{className:"gauge-display",children:f.jsxDEV("svg",{viewBox:"0 0 200 120",className:"gauge-svg",children:[f.jsxDEV("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"#1e293b",strokeWidth:"20",strokeLinecap:"round"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:254,columnNumber:19},this),f.jsxDEV("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"url(#cacheGradient)",strokeWidth:"20",strokeLinecap:"round",strokeDasharray:`${n.cacheHitRate*2.51} 251`,className:"gauge-arc"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:261,columnNumber:19},this),f.jsxDEV("defs",{children:f.jsxDEV("linearGradient",{id:"cacheGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsxDEV("stop",{offset:"0%",stopColor:"#10b981"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:272,columnNumber:23},this),f.jsxDEV("stop",{offset:"100%",stopColor:"#06b6d4"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:273,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:271,columnNumber:21},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:270,columnNumber:19},this),f.jsxDEV("text",{x:"100",y:"80",textAnchor:"middle",className:"gauge-value",children:[n.cacheHitRate,"%"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:276,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:253,columnNumber:17},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:252,columnNumber:15},this),f.jsxDEV("div",{className:"gauge-label",children:"Cache Hit Rate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:279,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:251,columnNumber:13},this),f.jsxDEV("div",{className:"gauge",children:[f.jsxDEV("div",{className:"gauge-display",children:f.jsxDEV("svg",{viewBox:"0 0 200 120",className:"gauge-svg",children:[f.jsxDEV("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"#1e293b",strokeWidth:"20",strokeLinecap:"round"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:285,columnNumber:19},this),f.jsxDEV("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"url(#latencyGradient)",strokeWidth:"20",strokeLinecap:"round",strokeDasharray:`${(100-n.avgLatency/100*100)*2.51} 251`,className:"gauge-arc"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:292,columnNumber:19},this),f.jsxDEV("defs",{children:f.jsxDEV("linearGradient",{id:"latencyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsxDEV("stop",{offset:"0%",stopColor:"#0ea5e9"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:303,columnNumber:23},this),f.jsxDEV("stop",{offset:"100%",stopColor:"#6366f1"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:304,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:302,columnNumber:21},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:301,columnNumber:19},this),f.jsxDEV("text",{x:"100",y:"80",textAnchor:"middle",className:"gauge-value",children:[n.avgLatency,"ms"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:307,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:284,columnNumber:17},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:283,columnNumber:15},this),f.jsxDEV("div",{className:"gauge-label",children:"Avg Latency (P95)"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:310,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:282,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:250,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:244,columnNumber:9},this),f.jsxDEV("div",{className:"control-panel quick-stats",children:[f.jsxDEV("div",{className:"panel-header",children:[f.jsxDEV("h3",{children:"Operations"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:318,columnNumber:13},this),f.jsxDEV("div",{className:"panel-indicator pulsing"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:319,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:317,columnNumber:11},this),f.jsxDEV("div",{className:"stats-list",children:[f.jsxDEV("div",{className:"stat-item",children:[f.jsxDEV("span",{className:"stat-dot active"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:324,columnNumber:15},this),f.jsxDEV("span",{className:"stat-text",children:"System Health: "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:325,columnNumber:15},this),f.jsxDEV("span",{className:"stat-badge success",children:"OPTIMAL"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:326,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:323,columnNumber:13},this),f.jsxDEV("div",{className:"stat-item",children:[f.jsxDEV("span",{className:"stat-dot active"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:329,columnNumber:15},this),f.jsxDEV("span",{className:"stat-text",children:"Edge Nodes: "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:330,columnNumber:15},this),f.jsxDEV("span",{className:"stat-badge info",children:"20 ONLINE"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:331,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:328,columnNumber:13},this),f.jsxDEV("div",{className:"stat-item",children:[f.jsxDEV("span",{className:"stat-dot active"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:334,columnNumber:15},this),f.jsxDEV("span",{className:"stat-text",children:"Requests/sec: "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:335,columnNumber:15},this),f.jsxDEV("span",{className:"stat-badge",children:"1,247"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:336,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:333,columnNumber:13},this),f.jsxDEV("div",{className:"stat-item",children:[f.jsxDEV("span",{className:"stat-dot active"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:339,columnNumber:15},this),f.jsxDEV("span",{className:"stat-text",children:"Uptime: "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:340,columnNumber:15},this),f.jsxDEV("span",{className:"stat-badge success",children:"99.97%"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:341,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:338,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:322,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:316,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:176,columnNumber:7},this),n.totalPipelines===0&&f.jsxDEV("div",{className:"floating-hint",children:f.jsxDEV("div",{className:"hint-content",children:[f.jsxDEV("div",{className:"hint-icon",children:""},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:351,columnNumber:13},this),f.jsxDEV("div",{className:"hint-text",children:[f.jsxDEV("strong",{children:"Get Started"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:353,columnNumber:15},this),f.jsxDEV("p",{children:'Click "AI Pipeline Wizard" to create your first intelligent caching pipeline'},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:354,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:352,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:350,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:349,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/CommandCenter.jsx",lineNumber:127,columnNumber:5},this)}function wt({data:e,icon:t,color:a,children:r,handles:s}){const{label:n,metrics:o={}}=e,{hitRate:c=0,latency:i=0,savings:l=0}=o;return f.jsxDEV("div",{className:"base-node",style:{borderColor:a},children:[s?.input!==!1&&f.jsxDEV(zt,{type:"target",position:he.Left,className:"node-handle",style:{background:a}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:11,columnNumber:9},this),f.jsxDEV("div",{className:"node-header",style:{background:a},children:[f.jsxDEV("span",{className:"node-icon",children:t},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:20,columnNumber:9},this),f.jsxDEV("span",{className:"node-label",children:n},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:21,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:19,columnNumber:7},this),o&&Object.keys(o).length>0&&f.jsxDEV("div",{className:"node-metrics",children:[c>0&&f.jsxDEV("div",{className:"metric",children:[f.jsxDEV("span",{className:"metric-label",children:"Hit Rate"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:28,columnNumber:15},this),f.jsxDEV("span",{className:"metric-value",children:[Math.round(c*100),"%"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:29,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:27,columnNumber:13},this),i>0&&f.jsxDEV("div",{className:"metric",children:[f.jsxDEV("span",{className:"metric-label",children:"Latency"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:34,columnNumber:15},this),f.jsxDEV("span",{className:"metric-value",children:[i,"ms"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:35,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:33,columnNumber:13},this),l>0&&f.jsxDEV("div",{className:"metric",children:[f.jsxDEV("span",{className:"metric-label",children:"Savings"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:40,columnNumber:15},this),f.jsxDEV("span",{className:"metric-value",children:["$",l]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:41,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:39,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:25,columnNumber:9},this),r,s?.output!==!1&&f.jsxDEV(f.Fragment,{children:[f.jsxDEV(zt,{type:"source",position:he.Right,id:"default",className:"node-handle",style:{background:a,top:"50%"}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:51,columnNumber:11},this),s?.miss&&f.jsxDEV(zt,{type:"source",position:he.Right,id:"miss",className:"node-handle",style:{background:"#f59e0b",top:"75%"}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:59,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:50,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/BaseNode.jsx",lineNumber:9,columnNumber:5},this)}function mp({data:e}){return f.jsxDEV(wt,{data:e,icon:"",color:"#3b82f6",handles:{input:!1,output:!0}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/InputNode.jsx",lineNumber:5,columnNumber:5},this)}function fp({data:e}){return f.jsxDEV(wt,{data:e,icon:"",color:"#10b981",handles:{input:!0,output:!0,miss:!0}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/CacheL1Node.jsx",lineNumber:5,columnNumber:5},this)}function hp({data:e}){return f.jsxDEV(wt,{data:e,icon:"",color:"#059669",handles:{input:!0,output:!0,miss:!0}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/CacheL2Node.jsx",lineNumber:5,columnNumber:5},this)}function pp({data:e}){const t={icon:"",color:"#047857"},a={input:!0,output:!0};return f.jsxDEV(wt,{data:e,...t,handles:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/CacheL3Node.jsx",lineNumber:17,columnNumber:10},this)}function gp({data:e}){const t={icon:"",color:"#8b5cf6"},a={input:!0,output:!0};return f.jsxDEV(wt,{data:e,...t,handles:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/OpenAINode.jsx",lineNumber:17,columnNumber:10},this)}function vp({data:e}){const t={icon:"",color:"#7c3aed"},a={input:!0,output:!0};return f.jsxDEV(wt,{data:e,...t,handles:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/AnthropicNode.jsx",lineNumber:17,columnNumber:10},this)}function yp({data:e}){const t={icon:"",color:"#a855f7"},a={input:!0,output:!0};return f.jsxDEV(wt,{data:e,...t,handles:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/GeminiNode.jsx",lineNumber:17,columnNumber:10},this)}function Np({data:e}){const t={icon:"",color:"#06b6d4"},a={input:!0,output:!0};return f.jsxDEV(wt,{data:e,...t,handles:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/SemanticDedupNode.jsx",lineNumber:17,columnNumber:10},this)}function xp({data:e}){const t={icon:"",color:"#3b82f6"},a={input:!0,output:!1};return f.jsxDEV(wt,{data:e,...t,handles:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/nodes/OutputNode.jsx",lineNumber:17,columnNumber:10},this)}const bp={input:mp,cache_l1:fp,cache_l2:hp,cache_l3:pp,openai:gp,anthropic:vp,gemini:yp,semantic_dedup:Np,output:xp},jr=[{name:"HIPAA-Compliant RAG",sector:"healthcare",isActive:!0,savedAt:new Date(Date.now()-1e3*60*60*2).toISOString(),estimatedSavings:"$4,200/mo",nodes:[{id:"input-0",type:"input",position:{x:100,y:200},data:{label:"INPUT",config:{},metrics:{hitRate:87,latency:48,savings:0}}},{id:"phi_filter-1",type:"phi_filter",position:{x:350,y:200},data:{label:"PHI FILTER",config:{threshold:.95,redaction:"mask"},metrics:{hitRate:87,latency:48,savings:0}}},{id:"cache_l1-2",type:"cache_l1",position:{x:600,y:200},data:{label:"CACHE L1",config:{ttl:300,max_size:"500MB"},metrics:{hitRate:88,latency:12,savings:1200}}},{id:"cache_l2-3",type:"cache_l2",position:{x:850,y:200},data:{label:"CACHE L2",config:{ttl:3600,storage:"redis"},metrics:{hitRate:85,latency:35,savings:1800}}},{id:"openai-4",type:"openai",position:{x:1100,y:200},data:{label:"OPENAI",config:{model:"gpt-4",temperature:.7},metrics:{hitRate:0,latency:850,savings:0}}},{id:"hipaa_audit-5",type:"hipaa_audit",position:{x:1350,y:200},data:{label:"HIPAA AUDIT",config:{retention:"7 years",log_level:"full"},metrics:{hitRate:0,latency:5,savings:0}}},{id:"output-6",type:"output",position:{x:1600,y:200},data:{label:"OUTPUT",config:{},metrics:{hitRate:87,latency:48,savings:0}}}],edges:[{id:"e0",source:"input-0",target:"phi_filter-1",animated:!0,type:"smoothstep"},{id:"e1",source:"phi_filter-1",target:"cache_l1-2",animated:!0,type:"smoothstep"},{id:"e2",source:"cache_l1-2",target:"cache_l2-3",label:"MISS",animated:!0,type:"smoothstep"},{id:"e3",source:"cache_l2-3",target:"openai-4",label:"MISS",animated:!0,type:"smoothstep"},{id:"e4",source:"openai-4",target:"hipaa_audit-5",animated:!0,type:"smoothstep"},{id:"e5",source:"hipaa_audit-5",target:"output-6",animated:!0,type:"smoothstep"}]},{name:"Real-Time Fraud Detection",sector:"finance",isActive:!0,savedAt:new Date(Date.now()-1e3*60*60*5).toISOString(),estimatedSavings:"$6,500/mo",nodes:[{id:"input-0",type:"input",position:{x:100,y:200},data:{label:"INPUT",config:{},metrics:{hitRate:85,latency:38,savings:0}}},{id:"fraud_detector-1",type:"fraud_detector",position:{x:350,y:200},data:{label:"FRAUD DETECTOR",config:{threshold:.8,check_velocity:!0},metrics:{hitRate:85,latency:38,savings:0}}},{id:"cache_l1-2",type:"cache_l1",position:{x:600,y:200},data:{label:"CACHE L1",config:{ttl:120,max_size:"500MB"},metrics:{hitRate:90,latency:8,savings:2200}}},{id:"openai-3",type:"openai",position:{x:850,y:200},data:{label:"OPENAI",config:{model:"gpt-4",temperature:.3},metrics:{hitRate:0,latency:780,savings:0}}},{id:"pci_audit-4",type:"pci_audit",position:{x:1100,y:200},data:{label:"PCI AUDIT",config:{retention:"7 years"},metrics:{hitRate:0,latency:3,savings:0}}},{id:"output-5",type:"output",position:{x:1350,y:200},data:{label:"OUTPUT",config:{},metrics:{hitRate:85,latency:38,savings:0}}}],edges:[{id:"e0",source:"input-0",target:"fraud_detector-1",animated:!0,type:"smoothstep"},{id:"e1",source:"fraud_detector-1",target:"cache_l1-2",animated:!0,type:"smoothstep"},{id:"e2",source:"cache_l1-2",target:"openai-3",label:"MISS",animated:!0,type:"smoothstep"},{id:"e3",source:"openai-3",target:"pci_audit-4",animated:!0,type:"smoothstep"},{id:"e4",source:"pci_audit-4",target:"output-5",animated:!0,type:"smoothstep"}]},{name:"Legal Contract Analysis",sector:"legal",isActive:!1,savedAt:new Date(Date.now()-1e3*60*60*24).toISOString(),estimatedSavings:"$5,200/mo",nodes:[{id:"input-0",type:"input",position:{x:100,y:200},data:{label:"INPUT",config:{},metrics:{hitRate:83,latency:78,savings:0}}},{id:"cache_l1-1",type:"cache_l1",position:{x:350,y:200},data:{label:"CACHE L1",config:{ttl:900,max_size:"750MB"},metrics:{hitRate:83,latency:15,savings:1600}}},{id:"cache_l2-2",type:"cache_l2",position:{x:600,y:200},data:{label:"CACHE L2",config:{ttl:7200,storage:"postgresql"},metrics:{hitRate:78,latency:45,savings:2400}}},{id:"anthropic-3",type:"anthropic",position:{x:850,y:200},data:{label:"ANTHROPIC",config:{model:"claude-3-opus",temperature:.2},metrics:{hitRate:0,latency:920,savings:0}}},{id:"output-4",type:"output",position:{x:1100,y:200},data:{label:"OUTPUT",config:{},metrics:{hitRate:83,latency:78,savings:0}}}],edges:[{id:"e0",source:"input-0",target:"cache_l1-1",animated:!0,type:"smoothstep"},{id:"e1",source:"cache_l1-1",target:"cache_l2-2",label:"MISS",animated:!0,type:"smoothstep"},{id:"e2",source:"cache_l2-2",target:"anthropic-3",label:"MISS",animated:!0,type:"smoothstep"},{id:"e3",source:"anthropic-3",target:"output-4",animated:!0,type:"smoothstep"}]},{name:"E-commerce Recommendations",sector:"ecommerce",isActive:!0,savedAt:new Date(Date.now()-1e3*60*30).toISOString(),estimatedSavings:"$4,100/mo",nodes:[{id:"input-0",type:"input",position:{x:100,y:200},data:{label:"INPUT",config:{},metrics:{hitRate:94,latency:35,savings:0}}},{id:"cache_l1-1",type:"cache_l1",position:{x:350,y:200},data:{label:"CACHE L1",config:{ttl:180,max_size:"1GB"},metrics:{hitRate:94,latency:8,savings:1800}}},{id:"cache_l2-2",type:"cache_l2",position:{x:600,y:200},data:{label:"CACHE L2",config:{ttl:1800,storage:"redis"},metrics:{hitRate:89,latency:22,savings:1500}}},{id:"openai-3",type:"openai",position:{x:850,y:200},data:{label:"OPENAI",config:{model:"gpt-3.5-turbo",temperature:.7},metrics:{hitRate:0,latency:650,savings:0}}},{id:"output-4",type:"output",position:{x:1100,y:200},data:{label:"OUTPUT",config:{},metrics:{hitRate:94,latency:35,savings:0}}}],edges:[{id:"e0",source:"input-0",target:"cache_l1-1",animated:!0,type:"smoothstep"},{id:"e1",source:"cache_l1-1",target:"cache_l2-2",label:"MISS",animated:!0,type:"smoothstep"},{id:"e2",source:"cache_l2-2",target:"openai-3",label:"MISS",animated:!0,type:"smoothstep"},{id:"e3",source:"openai-3",target:"output-4",animated:!0,type:"smoothstep"}]},{name:"Multi-Tenant SaaS Cache",sector:"saas",isActive:!1,savedAt:new Date(Date.now()-1e3*60*60*12).toISOString(),estimatedSavings:"$3,800/mo",nodes:[{id:"input-0",type:"input",position:{x:100,y:200},data:{label:"INPUT",config:{},metrics:{hitRate:89,latency:52,savings:0}}},{id:"cache_l1-1",type:"cache_l1",position:{x:350,y:200},data:{label:"CACHE L1",config:{ttl:300,namespace_isolation:!0},metrics:{hitRate:89,latency:10,savings:1400}}},{id:"cache_l2-2",type:"cache_l2",position:{x:600,y:200},data:{label:"CACHE L2",config:{ttl:1800,storage:"redis"},metrics:{hitRate:84,latency:32,savings:1600}}},{id:"semantic_dedup-3",type:"semantic_dedup",position:{x:850,y:200},data:{label:"SEMANTIC DEDUP",config:{threshold:.92},metrics:{hitRate:78,latency:45,savings:800}}},{id:"openai-4",type:"openai",position:{x:1100,y:200},data:{label:"OPENAI",config:{model:"gpt-4"},metrics:{hitRate:0,latency:820,savings:0}}},{id:"output-5",type:"output",position:{x:1350,y:200},data:{label:"OUTPUT",config:{},metrics:{hitRate:89,latency:52,savings:0}}}],edges:[{id:"e0",source:"input-0",target:"cache_l1-1",animated:!0,type:"smoothstep"},{id:"e1",source:"cache_l1-1",target:"cache_l2-2",label:"MISS",animated:!0,type:"smoothstep"},{id:"e2",source:"cache_l2-2",target:"semantic_dedup-3",label:"MISS",animated:!0,type:"smoothstep"},{id:"e3",source:"semantic_dedup-3",target:"openai-4",animated:!0,type:"smoothstep"},{id:"e4",source:"openai-4",target:"output-5",animated:!0,type:"smoothstep"}]}];function wp(e=!1){const t=localStorage.getItem("savedPipelines");return!t||e||t==="[]"?(localStorage.setItem("savedPipelines",JSON.stringify(jr)),console.log(" Demo data loaded:",jr.length,"pipelines"),!0):(console.log(" Demo data already exists, skipping load"),!1)}function Dp(){return window.location.search.includes("demo=true")||window.location.pathname.includes("/demo")}function _p(){Dp()&&wp(!0)}class Ze extends Error{constructor(t,a=null){super(t),this.name="ValidationError",this.field=a}}function Mr(e){if(!e||typeof e!="object")throw new Ze("Pipeline must be an object");if(!e.name||typeof e.name!="string")throw new Ze("Pipeline must have a valid name","name");if(e.name.length>255)throw new Ze("Pipeline name must be less than 255 characters","name");if(!Array.isArray(e.nodes))throw new Ze("Pipeline must have a nodes array","nodes");if(e.nodes.length===0)throw new Ze("Pipeline must have at least one node","nodes");if(!Array.isArray(e.edges))throw new Ze("Pipeline must have an edges array","edges");const t=new Set;for(const r of e.nodes){if(!r.id)throw new Ze("All nodes must have an ID","nodes");if(t.has(r.id))throw new Ze(`Duplicate node ID found: ${r.id}`,"nodes");t.add(r.id)}for(const r of e.edges){if(!r.source||!r.target)throw new Ze("All edges must have source and target","edges");if(!t.has(r.source))throw new Ze(`Edge references non-existent source node: ${r.source}`,"edges");if(!t.has(r.target))throw new Ze(`Edge references non-existent target node: ${r.target}`,"edges")}if(Ep(e.nodes,e.edges))throw new Ze("Pipeline contains circular dependencies","edges");const a=["healthcare","finance","legal","ecommerce","saas","general"];if(e.sector&&!a.includes(e.sector))throw new Ze(`Invalid sector: ${e.sector}`,"sector");return!0}function Ep(e,t){const a={};e.forEach(o=>{a[o.id]=[]}),t.forEach(o=>{a[o.source].push(o.target)});const r=new Set,s=new Set;function n(o){r.add(o),s.add(o);for(const c of a[o]||[])if(r.has(c)){if(s.has(c))return!0}else if(n(c))return!0;return s.delete(o),!1}for(const o of Object.keys(a))if(!r.has(o)&&n(o))return!0;return!1}function Sp(e){return typeof e!="string"?"":e.replace(/<[^>]*>/g,"").replace(/[\x00-\x1F\x7F]/g,"").slice(0,255).trim()}const Ns=2,Pn="agentcache_",nn=5*1024*1024;class On{static save(t,a){try{const r=Pn+t,s=JSON.stringify(a);return s.length>nn?{success:!1,error:"quota",message:"Data exceeds 5MB storage limit. Consider deleting old pipelines.",size:s.length}:(localStorage.setItem(r,s),{success:!0,size:s.length})}catch(r){return r.name==="QuotaExceededError"?{success:!1,error:"quota",message:"Storage quota exceeded. Clear old data to continue.",cause:r}:{success:!1,error:"storage",message:`Failed to save data: ${r.message}`,cause:r}}}static load(t,a=null){try{const r=Pn+t,s=localStorage.getItem(r);return s===null?a:JSON.parse(s)}catch(r){return console.error(`Failed to load ${t}:`,r),a}}static remove(t){try{const a=Pn+t;return localStorage.removeItem(a),!0}catch(a){return console.error(`Failed to remove ${t}:`,a),!1}}static getStorageStats(){try{let t=0,a=0;for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);if(s.startsWith(Pn)){const n=localStorage.getItem(s);t+=n?n.length:0,a++}}return{totalSize:t,itemCount:a,percentUsed:t/nn*100,maxSize:nn,available:nn-t}}catch(t){return console.error("Failed to get storage stats:",t),{totalSize:0,itemCount:0,percentUsed:0,maxSize:nn,available:nn}}}static clearAll(){try{const t=[];for(let a=0;a<localStorage.length;a++){const r=localStorage.key(a);r.startsWith(Pn)&&t.push(r)}return t.forEach(a=>localStorage.removeItem(a)),!0}catch(t){return console.error("Failed to clear storage:",t),!1}}}class Ar{static savePipeline(t){try{t.name=Sp(t.name),Mr(t);const a={...t,_v:Ns,savedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},r=this.loadAllPipelines(),s=r.findIndex(o=>o.name===t.name);s!==-1?r[s]={...a,savedAt:r[s].savedAt}:r.push(a);const n=On.save("pipelines",r);return n.success?{success:!0,pipeline:a,isNew:s===-1}:n}catch(a){return{success:!1,error:"validation",message:a.message,field:a.field||null}}}static loadAllPipelines(){return On.load("pipelines",[]).map(a=>this.migratePipeline(a))}static loadPipeline(t){return this.loadAllPipelines().find(r=>r.name===t)||null}static deletePipeline(t){try{const a=this.loadAllPipelines(),r=a.filter(n=>n.name!==t);return r.length===a.length?{success:!1,error:"not_found",message:`Pipeline "${t}" not found`}:On.save("pipelines",r)}catch(a){return{success:!1,error:"storage",message:a.message}}}static migratePipeline(t){return t._v?(t._v===Ns,t):{...t,_v:Ns,updatedAt:t.savedAt||new Date().toISOString()}}static getPipelineStats(){const t=this.loadAllPipelines(),a={total:t.length,active:t.filter(r=>r.isActive).length,inactive:t.filter(r=>!r.isActive).length,bySector:{}};return t.forEach(r=>{const s=r.sector||"general";a.bySector[s]=(a.bySector[s]||0)+1}),a}static exportPipelines(t=null){const a=this.loadAllPipelines(),r=t?a.filter(s=>t.includes(s.name)):a;return JSON.stringify({version:Ns,exportedAt:new Date().toISOString(),pipelines:r},null,2)}static importPipelines(t){try{const a=JSON.parse(t);if(!a.pipelines||!Array.isArray(a.pipelines))return{success:!1,error:"invalid_format",message:"Invalid import format"};const r=this.loadAllPipelines();let s=0,n=0;for(const c of a.pipelines)try{Mr(c),r.find(i=>i.name===c.name)?n++:(r.push(this.migratePipeline(c)),s++)}catch(i){console.warn(`Skipping invalid pipeline: ${i.message}`),n++}const o=On.save("pipelines",r);return o.success?{success:!0,imported:s,skipped:n}:o}catch(a){return{success:!1,error:"parse_error",message:`Failed to parse JSON: ${a.message}`}}}}const Cp=({id:e,sourceX:t,sourceY:a,targetX:r,targetY:s,sourcePosition:n,targetPosition:o,style:c={},markerEnd:i,data:l})=>{const[u]=ro({sourceX:t,sourceY:a,sourcePosition:n,targetX:r,targetY:s,targetPosition:o}),d=l?.packets||[];return f.jsxDEV(f.Fragment,{children:[f.jsxDEV(fn,{path:u,markerEnd:i,style:c},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/TrafficEdge.jsx",lineNumber:31,columnNumber:13},void 0),d.map(m=>f.jsxDEV("circle",{r:"4",className:`traffic-packet ${m.type}`,children:f.jsxDEV("animateMotion",{dur:`${m.speed}s`,repeatCount:"1",path:u,begin:"0s",fill:"freeze"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/TrafficEdge.jsx",lineNumber:40,columnNumber:21},void 0)},m.id,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/TrafficEdge.jsx",lineNumber:35,columnNumber:17},void 0))]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/TrafficEdge.jsx",lineNumber:30,columnNumber:9},void 0)},Up=I.memo(Cp),jp=e=>typeof e=="object"&&typeof e.then=="function",xs=[];function Mp(e,t,a=(r,s)=>r===s){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let s=0;s<r;s++)if(!a(e[s],t[s]))return!1;return!0}function Ap(e,t=null,a=!1,r={}){t===null&&(t=[e]);for(const n of xs)if(Mp(t,n.keys,n.equal)){if(a)return;if(Object.prototype.hasOwnProperty.call(n,"error"))throw n.error;if(Object.prototype.hasOwnProperty.call(n,"response"))return r.lifespan&&r.lifespan>0&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.remove,r.lifespan)),n.response;if(!a)throw n.promise}const s={keys:t,equal:r.equal,remove:()=>{const n=xs.indexOf(s);n!==-1&&xs.splice(n,1)},promise:(jp(e)?e:e(...t)).then(n=>{s.response=n,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(n=>s.error=n)};if(xs.push(s),!a)throw s.promise}const kp=(e,t,a)=>Ap(e,t,!1,a);function Tp(){var e=Object.create(null);function t(s,n){var o=s.id,c=s.name,i=s.dependencies;i===void 0&&(i=[]);var l=s.init;l===void 0&&(l=function(){});var u=s.getTransferables;if(u===void 0&&(u=null),!e[o])try{i=i.map(function(m){return m&&m.isWorkerModule&&(t(m,function(h){if(h instanceof Error)throw h}),m=e[m.id].value),m}),l=r("<"+c+">.init",l),u&&(u=r("<"+c+">.getTransferables",u));var d=null;typeof l=="function"?d=l.apply(void 0,i):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:d,getTransferables:u},n(d)}catch(m){m&&m.noLog||console.error(m),n(m)}}function a(s,n){var o,c=s.id,i=s.args;(!e[c]||typeof e[c].value!="function")&&n(new Error("Worker module "+c+": not found or its 'init' did not return a function"));try{var l=(o=e[c]).value.apply(o,i);l&&typeof l.then=="function"?l.then(u,function(d){return n(d instanceof Error?d:new Error(""+d))}):u(l)}catch(d){n(d)}function u(d){try{var m=e[c].getTransferables&&e[c].getTransferables(d);(!m||!Array.isArray(m)||!m.length)&&(m=void 0),n(d,m)}catch(h){console.error(h),n(h)}}}function r(s,n){var o=void 0;self.troikaDefine=function(i){return o=i};var c=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+n+`
)`],{type:"application/javascript"}));try{importScripts(c)}catch(i){console.error(i)}return URL.revokeObjectURL(c),delete self.troikaDefine,o}self.addEventListener("message",function(s){var n=s.data,o=n.messageId,c=n.action,i=n.data;try{c==="registerModule"&&t(i,function(l){l instanceof Error?postMessage({messageId:o,success:!1,error:l.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof l=="function"}})}),c==="callModule"&&a(i,function(l,u){l instanceof Error?postMessage({messageId:o,success:!1,error:l.message}):postMessage({messageId:o,success:!0,result:l},u||void 0)})}catch(l){postMessage({messageId:o,success:!1,error:l.stack})}})}function Vp(e){var t=function(){for(var a=[],r=arguments.length;r--;)a[r]=arguments[r];return t._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,a);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var a=e.dependencies,r=e.init;a=Array.isArray(a)?a.map(function(n){return n&&(n=n.onMainThread||n,n._getInitResult&&(n=n._getInitResult())),n}):[];var s=Promise.all(a).then(function(n){return r.apply(null,n)});return t._getInitResult=function(){return s},s},t}var _c=function(){var e=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),e=!0}catch(a){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+a.message+"]")}return _c=function(){return e},e},Pp=0,Rp=0,ba=!1,Gn=Object.create(null),Bn=Object.create(null),La=Object.create(null);function hn(e){if((!e||typeof e.init!="function")&&!ba)throw new Error("requires `options.init` function");var t=e.dependencies,a=e.init,r=e.getTransferables,s=e.workerId,n=Vp(e);s==null&&(s="#default");var o="workerModule"+ ++Pp,c=e.name||o,i=null;t=t&&t.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(ba=!0,u=hn({workerId:s,name:"<"+c+"> function dependency: "+u.name,init:`function(){return (
`+Cs(u)+`
)}`}),ba=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],d=arguments.length;d--;)u[d]=arguments[d];if(!_c())return n.apply(void 0,u);if(!i){i=kr(s,"registerModule",l.workerModuleData);var m=function(){i=null,Bn[s].delete(m)};(Bn[s]||(Bn[s]=new Set)).add(m)}return i.then(function(h){var v=h.isCallable;if(v)return kr(s,"callModule",{id:o,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:o,name:c,dependencies:t,init:Cs(a),getTransferables:r&&Cs(r)},l.onMainThread=n,l}function Ip(e){Bn[e]&&Bn[e].forEach(function(t){t()}),Gn[e]&&(Gn[e].terminate(),delete Gn[e])}function Cs(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function zp(e){var t=Gn[e];if(!t){var a=Cs(Tp);t=Gn[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+` **/

;(`+a+")()"],{type:"application/javascript"}))),t.onmessage=function(r){var s=r.data,n=s.messageId,o=La[n];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete La[n],o(s)}}return t}function kr(e,t,a){return new Promise(function(r,s){var n=++Rp;La[n]=function(o){o.success?r(o.result):s(new Error("Error in worker "+t+" call: "+o.error))},zp(e).postMessage({messageId:n,action:t,data:a})})}function Ec(){var e=(function(t){function a(S,T,b,M,z,F,O,$){var W=1-O;$.x=W*W*S+2*W*O*b+O*O*z,$.y=W*W*T+2*W*O*M+O*O*F}function r(S,T,b,M,z,F,O,$,W,Y){var Z=1-W;Y.x=Z*Z*Z*S+3*Z*Z*W*b+3*Z*W*W*z+W*W*W*O,Y.y=Z*Z*Z*T+3*Z*Z*W*M+3*Z*W*W*F+W*W*W*$}function s(S,T){for(var b=/([MLQCZ])([^MLQCZ]*)/g,M,z,F,O,$;M=b.exec(S);){var W=M[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Y){return parseFloat(Y)});switch(M[1]){case"M":O=z=W[0],$=F=W[1];break;case"L":(W[0]!==O||W[1]!==$)&&T("L",O,$,O=W[0],$=W[1]);break;case"Q":{T("Q",O,$,O=W[2],$=W[3],W[0],W[1]);break}case"C":{T("C",O,$,O=W[4],$=W[5],W[0],W[1],W[2],W[3]);break}case"Z":(O!==z||$!==F)&&T("L",O,$,z,F);break}}}function n(S,T,b){b===void 0&&(b=16);var M={x:0,y:0};s(S,function(z,F,O,$,W,Y,Z,Q,J){switch(z){case"L":T(F,O,$,W);break;case"Q":{for(var q=F,pe=O,ie=1;ie<b;ie++)a(F,O,Y,Z,$,W,ie/(b-1),M),T(q,pe,M.x,M.y),q=M.x,pe=M.y;break}case"C":{for(var ee=F,ae=O,te=1;te<b;te++)r(F,O,Y,Z,Q,J,$,W,te/(b-1),M),T(ee,ae,M.x,M.y),ee=M.x,ae=M.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",i=new WeakMap,l={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(S,T){var b=S.getContext?S.getContext("webgl",l):S,M=i.get(b);if(!M){let Z=function(ee){var ae=F[ee];if(!ae&&(ae=F[ee]=b.getExtension(ee),!ae))throw new Error(ee+" not supported");return ae},Q=function(ee,ae){var te=b.createShader(ae);return b.shaderSource(te,ee),b.compileShader(te),te},J=function(ee,ae,te,H){if(!O[ee]){var se={},re={},K=b.createProgram();b.attachShader(K,Q(ae,b.VERTEX_SHADER)),b.attachShader(K,Q(te,b.FRAGMENT_SHADER)),b.linkProgram(K),O[ee]={program:K,transaction:function(oe){b.useProgram(K),oe({setUniform:function(ne,De){for(var le=[],ue=arguments.length-2;ue-- >0;)le[ue]=arguments[ue+2];var me=re[De]||(re[De]=b.getUniformLocation(K,De));b["uniform"+ne].apply(b,[me].concat(le))},setAttribute:function(ne,De,le,ue,me){var ye=se[ne];ye||(ye=se[ne]={buf:b.createBuffer(),loc:b.getAttribLocation(K,ne),data:null}),b.bindBuffer(b.ARRAY_BUFFER,ye.buf),b.vertexAttribPointer(ye.loc,De,b.FLOAT,!1,0,0),b.enableVertexAttribArray(ye.loc),z?b.vertexAttribDivisor(ye.loc,ue):Z("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ye.loc,ue),me!==ye.data&&(b.bufferData(b.ARRAY_BUFFER,me,le),ye.data=me)}})}}}O[ee].transaction(H)},q=function(ee,ae){W++;try{b.activeTexture(b.TEXTURE0+W);var te=$[ee];te||(te=$[ee]=b.createTexture(),b.bindTexture(b.TEXTURE_2D,te),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST)),b.bindTexture(b.TEXTURE_2D,te),ae(te,W)}finally{W--}},pe=function(ee,ae,te){var H=b.createFramebuffer();Y.push(H),b.bindFramebuffer(b.FRAMEBUFFER,H),b.activeTexture(b.TEXTURE0+ae),b.bindTexture(b.TEXTURE_2D,ee),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ee,0);try{te(H)}finally{b.deleteFramebuffer(H),b.bindFramebuffer(b.FRAMEBUFFER,Y[--Y.length-1]||null)}},ie=function(){F={},O={},$={},W=-1,Y.length=0};var z=typeof WebGL2RenderingContext<"u"&&b instanceof WebGL2RenderingContext,F={},O={},$={},W=-1,Y=[];b.canvas.addEventListener("webglcontextlost",function(ee){ie(),ee.preventDefault()},!1),i.set(b,M={gl:b,isWebGL2:z,getExtension:Z,withProgram:J,withTexture:q,withTextureFramebuffer:pe,handleContextLoss:ie})}T(M)}function d(S,T,b,M,z,F,O,$){O===void 0&&(O=15),$===void 0&&($=null),u(S,function(W){var Y=W.gl,Z=W.withProgram,Q=W.withTexture;Q("copy",function(J,q){Y.texImage2D(Y.TEXTURE_2D,0,Y.RGBA,z,F,0,Y.RGBA,Y.UNSIGNED_BYTE,T),Z("copy",o,c,function(pe){var ie=pe.setUniform,ee=pe.setAttribute;ee("aUV",2,Y.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ie("1i","image",q),Y.bindFramebuffer(Y.FRAMEBUFFER,$||null),Y.disable(Y.BLEND),Y.colorMask(O&8,O&4,O&2,O&1),Y.viewport(b,M,z,F),Y.scissor(b,M,z,F),Y.drawArrays(Y.TRIANGLES,0,3)})})})}function m(S,T,b){var M=S.width,z=S.height;u(S,function(F){var O=F.gl,$=new Uint8Array(M*z*4);O.readPixels(0,0,M,z,O.RGBA,O.UNSIGNED_BYTE,$),S.width=T,S.height=b,d(O,$,0,0,M,z)})}var h=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:d,resizeWebGLCanvasWithoutClearing:m});function v(S,T,b,M,z,F){F===void 0&&(F=1);var O=new Uint8Array(S*T),$=M[2]-M[0],W=M[3]-M[1],Y=[];n(b,function(ee,ae,te,H){Y.push({x1:ee,y1:ae,x2:te,y2:H,minX:Math.min(ee,te),minY:Math.min(ae,H),maxX:Math.max(ee,te),maxY:Math.max(ae,H)})}),Y.sort(function(ee,ae){return ee.maxX-ae.maxX});for(var Z=0;Z<S;Z++)for(var Q=0;Q<T;Q++){var J=pe(M[0]+$*(Z+.5)/S,M[1]+W*(Q+.5)/T),q=Math.pow(1-Math.abs(J)/z,F)/2;J<0&&(q=1-q),q=Math.max(0,Math.min(255,Math.round(q*255))),O[Q*S+Z]=q}return O;function pe(ee,ae){for(var te=1/0,H=1/0,se=Y.length;se--;){var re=Y[se];if(re.maxX+H<=ee)break;if(ee+H>re.minX&&ae-H<re.maxY&&ae+H>re.minY){var K=x(ee,ae,re.x1,re.y1,re.x2,re.y2);K<te&&(te=K,H=Math.sqrt(te))}}return ie(ee,ae)&&(H=-H),H}function ie(ee,ae){for(var te=0,H=Y.length;H--;){var se=Y[H];if(se.maxX<=ee)break;var re=se.y1>ae!=se.y2>ae&&ee<(se.x2-se.x1)*(ae-se.y1)/(se.y2-se.y1)+se.x1;re&&(te+=se.y1<se.y2?1:-1)}return te!==0}}function g(S,T,b,M,z,F,O,$,W,Y){F===void 0&&(F=1),$===void 0&&($=0),W===void 0&&(W=0),Y===void 0&&(Y=0),y(S,T,b,M,z,F,O,null,$,W,Y)}function y(S,T,b,M,z,F,O,$,W,Y,Z){F===void 0&&(F=1),W===void 0&&(W=0),Y===void 0&&(Y=0),Z===void 0&&(Z=0);for(var Q=v(S,T,b,M,z,F),J=new Uint8Array(Q.length*4),q=0;q<Q.length;q++)J[q*4+Z]=Q[q];d(O,J,W,Y,S,T,1<<3-Z,$)}function x(S,T,b,M,z,F){var O=z-b,$=F-M,W=O*O+$*$,Y=W?Math.max(0,Math.min(1,((S-b)*O+(T-M)*$)/W)):0,Z=S-(b+Y*O),Q=T-(M+Y*$);return Z*Z+Q*Q}var w=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:g,generateIntoFramebuffer:y}),_="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",U="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",k=new Float32Array([0,0,2,0,0,2]),D=null,A=!1,V={},R=new WeakMap;function B(S){if(!A&&!C(S))throw new Error("WebGL generation not supported")}function j(S,T,b,M,z,F,O){if(F===void 0&&(F=1),O===void 0&&(O=null),!O&&(O=D,!O)){var $=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!$)throw new Error("OffscreenCanvas or DOM canvas not supported");O=D=$.getContext("webgl",{depth:!1})}B(O);var W=new Uint8Array(S*T*4);u(O,function(J){var q=J.gl,pe=J.withTexture,ie=J.withTextureFramebuffer;pe("readable",function(ee,ae){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,S,T,0,q.RGBA,q.UNSIGNED_BYTE,null),ie(ee,ae,function(te){p(S,T,b,M,z,F,q,te,0,0,0),q.readPixels(0,0,S,T,q.RGBA,q.UNSIGNED_BYTE,W)})})});for(var Y=new Uint8Array(S*T),Z=0,Q=0;Z<W.length;Z+=4)Y[Q++]=W[Z];return Y}function P(S,T,b,M,z,F,O,$,W,Y){F===void 0&&(F=1),$===void 0&&($=0),W===void 0&&(W=0),Y===void 0&&(Y=0),p(S,T,b,M,z,F,O,null,$,W,Y)}function p(S,T,b,M,z,F,O,$,W,Y,Z){F===void 0&&(F=1),W===void 0&&(W=0),Y===void 0&&(Y=0),Z===void 0&&(Z=0),B(O);var Q=[];n(b,function(J,q,pe,ie){Q.push(J,q,pe,ie)}),Q=new Float32Array(Q),u(O,function(J){var q=J.gl,pe=J.isWebGL2,ie=J.getExtension,ee=J.withProgram,ae=J.withTexture,te=J.withTextureFramebuffer,H=J.handleContextLoss;if(ae("rawDistances",function(se,re){(S!==se._lastWidth||T!==se._lastHeight)&&q.texImage2D(q.TEXTURE_2D,0,q.RGBA,se._lastWidth=S,se._lastHeight=T,0,q.RGBA,q.UNSIGNED_BYTE,null),ee("main",_,N,function(K){var ve=K.setAttribute,oe=K.setUniform,ce=!pe&&ie("ANGLE_instanced_arrays"),ne=!pe&&ie("EXT_blend_minmax");ve("aUV",2,q.STATIC_DRAW,0,k),ve("aLineSegment",4,q.DYNAMIC_DRAW,1,Q),oe.apply(void 0,["4f","uGlyphBounds"].concat(M)),oe("1f","uMaxDistance",z),oe("1f","uExponent",F),te(se,re,function(De){q.enable(q.BLEND),q.colorMask(!0,!0,!0,!0),q.viewport(0,0,S,T),q.scissor(0,0,S,T),q.blendFunc(q.ONE,q.ONE),q.blendEquationSeparate(q.FUNC_ADD,pe?q.MAX:ne.MAX_EXT),q.clear(q.COLOR_BUFFER_BIT),pe?q.drawArraysInstanced(q.TRIANGLES,0,3,Q.length/4):ce.drawArraysInstancedANGLE(q.TRIANGLES,0,3,Q.length/4)})}),ee("post",o,U,function(K){K.setAttribute("aUV",2,q.STATIC_DRAW,0,k),K.setUniform("1i","tex",re),q.bindFramebuffer(q.FRAMEBUFFER,$),q.disable(q.BLEND),q.colorMask(Z===0,Z===1,Z===2,Z===3),q.viewport(W,Y,S,T),q.scissor(W,Y,S,T),q.drawArrays(q.TRIANGLES,0,3)})}),q.isContextLost())throw H(),new Error("webgl context lost")})}function C(S){var T=!S||S===D?V:S.canvas||S,b=R.get(T);if(b===void 0){A=!0;var M=null;try{var z=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],F=j(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,S);b=F&&z.length===F.length&&F.every(function(O,$){return O===z[$]}),b||(M="bad trial run results",console.info(z,F))}catch(O){b=!1,M=O.message}M&&console.warn("WebGL SDF generation not supported:",M),A=!1,R.set(T,b)}return b}var E=Object.freeze({__proto__:null,generate:j,generateIntoCanvas:P,generateIntoFramebuffer:p,isSupported:C});function L(S,T,b,M,z,F){z===void 0&&(z=Math.max(M[2]-M[0],M[3]-M[1])/2),F===void 0&&(F=1);try{return j.apply(E,arguments)}catch(O){return console.info("WebGL SDF generation failed, falling back to JS",O),v.apply(w,arguments)}}function G(S,T,b,M,z,F,O,$,W,Y){z===void 0&&(z=Math.max(M[2]-M[0],M[3]-M[1])/2),F===void 0&&(F=1),$===void 0&&($=0),W===void 0&&(W=0),Y===void 0&&(Y=0);try{return P.apply(E,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),g.apply(w,arguments)}}return t.forEachPathCommand=s,t.generate=L,t.generateIntoCanvas=G,t.javascript=w,t.pathToLineSegments=n,t.webgl=E,t.webglUtils=h,Object.defineProperty(t,"__esModule",{value:!0}),t})({});return e}function Fp(){var e=(function(t){var a={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},s={};r.L=1,s[1]="L",Object.keys(a).forEach(function(H,se){r[H]=1<<se+1,s[r[H]]=H}),Object.freeze(r);var n=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,c=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,i=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,l=r.S|r.WS|r.B|n|r.PDI|i,u=null;function d(){if(!u){u=new Map;var H=function(re){if(a.hasOwnProperty(re)){var K=0;a[re].split(",").forEach(function(ve){var oe=ve.split("+"),ce=oe[0],ne=oe[1];ce=parseInt(ce,36),ne=ne?parseInt(ne,36):0,u.set(K+=ce,r[re]);for(var De=0;De<ne;De++)u.set(++K,r[re])})}};for(var se in a)H(se)}}function m(H){return d(),u.get(H.codePointAt(0))||r.L}function h(H){return s[m(H)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(H,se){var re=36,K=0,ve=new Map,oe=se&&new Map,ce;return H.split(",").forEach(function ne(De){if(De.indexOf("+")!==-1)for(var le=+De;le--;)ne(ce);else{ce=De;var ue=De.split(">"),me=ue[0],ye=ue[1];me=String.fromCodePoint(K+=parseInt(me,re)),ye=String.fromCodePoint(K+=parseInt(ye,re)),ve.set(me,ye),se&&oe.set(ye,me)}}),{map:ve,reverseMap:oe}}var y,x,w;function _(){if(!y){var H=g(v.pairs,!0),se=H.map,re=H.reverseMap;y=se,x=re,w=g(v.canonical,!1).map}}function N(H){return _(),y.get(H)||null}function U(H){return _(),x.get(H)||null}function k(H){return _(),w.get(H)||null}var D=r.L,A=r.R,V=r.EN,R=r.ES,B=r.ET,j=r.AN,P=r.CS,p=r.B,C=r.S,E=r.ON,L=r.BN,G=r.NSM,S=r.AL,T=r.LRO,b=r.RLO,M=r.LRE,z=r.RLE,F=r.PDF,O=r.LRI,$=r.RLI,W=r.FSI,Y=r.PDI;function Z(H,se){for(var re=125,K=new Uint32Array(H.length),ve=0;ve<H.length;ve++)K[ve]=m(H[ve]);var oe=new Map;function ce($e,ot){var Xe=K[$e];K[$e]=ot,oe.set(Xe,oe.get(Xe)-1),Xe&c&&oe.set(c,oe.get(c)-1),oe.set(ot,(oe.get(ot)||0)+1),ot&c&&oe.set(c,(oe.get(c)||0)+1)}for(var ne=new Uint8Array(H.length),De=new Map,le=[],ue=null,me=0;me<H.length;me++)ue||le.push(ue={start:me,end:H.length-1,level:se==="rtl"?1:se==="ltr"?0:Mo(me,!1)}),K[me]&p&&(ue.end=me,ue=null);for(var ye=z|M|b|T|n|Y|F|p,be=function($e){return $e+($e&1?1:2)},Ce=function($e){return $e+($e&1?2:1)},Ne=0;Ne<le.length;Ne++){ue=le[Ne];var xe=[{_level:ue.level,_override:0,_isolate:0}],de=void 0,Ue=0,Me=0,Oe=0;oe.clear();for(var Ae=ue.start;Ae<=ue.end;Ae++){var ge=K[Ae];if(de=xe[xe.length-1],oe.set(ge,(oe.get(ge)||0)+1),ge&c&&oe.set(c,(oe.get(c)||0)+1),ge&ye)if(ge&(z|M)){ne[Ae]=de._level;var je=(ge===z?Ce:be)(de._level);je<=re&&!Ue&&!Me?xe.push({_level:je,_override:0,_isolate:0}):Ue||Me++}else if(ge&(b|T)){ne[Ae]=de._level;var tt=(ge===b?Ce:be)(de._level);tt<=re&&!Ue&&!Me?xe.push({_level:tt,_override:ge&b?A:D,_isolate:0}):Ue||Me++}else if(ge&n){ge&W&&(ge=Mo(Ae+1,!0)===1?$:O),ne[Ae]=de._level,de._override&&ce(Ae,de._override);var Se=(ge===$?Ce:be)(de._level);Se<=re&&Ue===0&&Me===0?(Oe++,xe.push({_level:Se,_override:0,_isolate:1,_isolInitIndex:Ae})):Ue++}else if(ge&Y){if(Ue>0)Ue--;else if(Oe>0){for(Me=0;!xe[xe.length-1]._isolate;)xe.pop();var _e=xe[xe.length-1]._isolInitIndex;_e!=null&&(De.set(_e,Ae),De.set(Ae,_e)),xe.pop(),Oe--}de=xe[xe.length-1],ne[Ae]=de._level,de._override&&ce(Ae,de._override)}else ge&F?(Ue===0&&(Me>0?Me--:!de._isolate&&xe.length>1&&(xe.pop(),de=xe[xe.length-1])),ne[Ae]=de._level):ge&p&&(ne[Ae]=ue.level);else ne[Ae]=de._level,de._override&&ge!==L&&ce(Ae,de._override)}for(var Pe=[],ke=null,we=ue.start;we<=ue.end;we++){var Te=K[we];if(!(Te&i)){var Ge=ne[we],Le=Te&n,Ie=Te===Y;ke&&Ge===ke._level?(ke._end=we,ke._endsWithIsolInit=Le):Pe.push(ke={_start:we,_end:we,_level:Ge,_startsWithPDI:Ie,_endsWithIsolInit:Le})}}for(var qe=[],dt=0;dt<Pe.length;dt++){var nt=Pe[dt];if(!nt._startsWithPDI||nt._startsWithPDI&&!De.has(nt._start)){for(var mt=[ke=nt],gt=void 0;ke&&ke._endsWithIsolInit&&(gt=De.get(ke._end))!=null;)for(var st=dt+1;st<Pe.length;st++)if(Pe[st]._start===gt){mt.push(ke=Pe[st]);break}for(var Be=[],vt=0;vt<mt.length;vt++)for(var pn=mt[vt],gn=pn._start;gn<=pn._end;gn++)Be.push(gn);for(var Xs=ne[Be[0]],es=ue.level,Gt=Be[0]-1;Gt>=0;Gt--)if(!(K[Gt]&i)){es=ne[Gt];break}var vn=Be[Be.length-1],Ys=ne[vn],ts=ue.level;if(!(K[vn]&n)){for(var Bt=vn+1;Bt<=ue.end;Bt++)if(!(K[Bt]&i)){ts=ne[Bt];break}}qe.push({_seqIndices:Be,_sosType:Math.max(es,Xs)%2?A:D,_eosType:Math.max(ts,Ys)%2?A:D})}}for(var Wt=0;Wt<qe.length;Wt++){var yn=qe[Wt],fe=yn._seqIndices,At=yn._sosType,qs=yn._eosType,Dt=ne[fe[0]]&1?A:D;if(oe.get(G))for(var Ht=0;Ht<fe.length;Ht++){var Nn=fe[Ht];if(K[Nn]&G){for(var xn=At,$t=Ht-1;$t>=0;$t--)if(!(K[fe[$t]]&i)){xn=K[fe[$t]];break}ce(Nn,xn&(n|Y)?E:xn)}}if(oe.get(V))for(var Xt=0;Xt<fe.length;Xt++){var Yt=fe[Xt];if(K[Yt]&V)for(var ns=Xt-1;ns>=-1;ns--){var po=ns===-1?At:K[fe[ns]];if(po&o){po===S&&ce(Yt,j);break}}}if(oe.get(S))for(var Ks=0;Ks<fe.length;Ks++){var go=fe[Ks];K[go]&S&&ce(go,A)}if(oe.get(R)||oe.get(P))for(var bn=1;bn<fe.length-1;bn++){var Zs=fe[bn];if(K[Zs]&(R|P)){for(var qt=0,Js=0,Qs=bn-1;Qs>=0&&(qt=K[fe[Qs]],!!(qt&i));Qs--);for(var ea=bn+1;ea<fe.length&&(Js=K[fe[ea]],!!(Js&i));ea++);qt===Js&&(K[Zs]===R?qt===V:qt&(V|j))&&ce(Zs,qt)}}if(oe.get(V))for(var ft=0;ft<fe.length;ft++){var Rc=fe[ft];if(K[Rc]&V){for(var ss=ft-1;ss>=0&&K[fe[ss]]&(B|i);ss--)ce(fe[ss],V);for(ft++;ft<fe.length&&K[fe[ft]]&(B|i|V);ft++)K[fe[ft]]!==V&&ce(fe[ft],V)}}if(oe.get(B)||oe.get(R)||oe.get(P))for(var wn=0;wn<fe.length;wn++){var vo=fe[wn];if(K[vo]&(B|R|P)){ce(vo,E);for(var as=wn-1;as>=0&&K[fe[as]]&i;as--)ce(fe[as],E);for(var os=wn+1;os<fe.length&&K[fe[os]]&i;os++)ce(fe[os],E)}}if(oe.get(V))for(var ta=0,yo=At;ta<fe.length;ta++){var No=fe[ta],na=K[No];na&V?yo===D&&ce(No,D):na&o&&(yo=na)}if(oe.get(c)){var Dn=A|V|j,xo=Dn|D,rs=[];{for(var Kt=[],Zt=0;Zt<fe.length;Zt++)if(K[fe[Zt]]&c){var _n=H[fe[Zt]],bo=void 0;if(N(_n)!==null)if(Kt.length<63)Kt.push({char:_n,seqIndex:Zt});else break;else if((bo=U(_n))!==null)for(var En=Kt.length-1;En>=0;En--){var sa=Kt[En].char;if(sa===bo||sa===U(k(_n))||N(k(sa))===_n){rs.push([Kt[En].seqIndex,Zt]),Kt.length=En;break}}}rs.sort(function($e,ot){return $e[0]-ot[0]})}for(var aa=0;aa<rs.length;aa++){for(var wo=rs[aa],is=wo[0],oa=wo[1],Do=!1,at=0,ra=is+1;ra<oa;ra++){var _o=fe[ra];if(K[_o]&xo){Do=!0;var Eo=K[_o]&Dn?A:D;if(Eo===Dt){at=Eo;break}}}if(Do&&!at){at=At;for(var ia=is-1;ia>=0;ia--){var So=fe[ia];if(K[So]&xo){var Co=K[So]&Dn?A:D;Co!==Dt?at=Co:at=Dt;break}}}if(at){if(K[fe[is]]=K[fe[oa]]=at,at!==Dt){for(var Sn=is+1;Sn<fe.length;Sn++)if(!(K[fe[Sn]]&i)){m(H[fe[Sn]])&G&&(K[fe[Sn]]=at);break}}if(at!==Dt){for(var Cn=oa+1;Cn<fe.length;Cn++)if(!(K[fe[Cn]]&i)){m(H[fe[Cn]])&G&&(K[fe[Cn]]=at);break}}}}for(var _t=0;_t<fe.length;_t++)if(K[fe[_t]]&c){for(var Uo=_t,ca=_t,la=At,Un=_t-1;Un>=0;Un--)if(K[fe[Un]]&i)Uo=Un;else{la=K[fe[Un]]&Dn?A:D;break}for(var jo=qs,jn=_t+1;jn<fe.length;jn++)if(K[fe[jn]]&(c|i))ca=jn;else{jo=K[fe[jn]]&Dn?A:D;break}for(var ua=Uo;ua<=ca;ua++)K[fe[ua]]=la===jo?la:Dt;_t=ca}}}for(var Ke=ue.start;Ke<=ue.end;Ke++){var Ic=ne[Ke],cs=K[Ke];if(Ic&1?cs&(D|V|j)&&ne[Ke]++:cs&A?ne[Ke]++:cs&(j|V)&&(ne[Ke]+=2),cs&i&&(ne[Ke]=Ke===0?ue.level:ne[Ke-1]),Ke===ue.end||m(H[Ke])&(C|p))for(var ls=Ke;ls>=0&&m(H[ls])&l;ls--)ne[ls]=ue.level}}return{levels:ne,paragraphs:le};function Mo($e,ot){for(var Xe=$e;Xe<H.length;Xe++){var Et=K[Xe];if(Et&(A|S))return 1;if(Et&(p|D)||ot&&Et===Y)return 0;if(Et&n){var Ao=zc(Xe);Xe=Ao===-1?H.length:Ao}}return 0}function zc($e){for(var ot=1,Xe=$e+1;Xe<H.length;Xe++){var Et=K[Xe];if(Et&p)break;if(Et&Y){if(--ot===0)return Xe}else Et&n&&ot++}return-1}}var Q="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",J;function q(){if(!J){var H=g(Q,!0),se=H.map,re=H.reverseMap;re.forEach(function(K,ve){se.set(ve,K)}),J=se}}function pe(H){return q(),J.get(H)||null}function ie(H,se,re,K){var ve=H.length;re=Math.max(0,re==null?0:+re),K=Math.min(ve-1,K==null?ve-1:+K);for(var oe=new Map,ce=re;ce<=K;ce++)if(se[ce]&1){var ne=pe(H[ce]);ne!==null&&oe.set(ce,ne)}return oe}function ee(H,se,re,K){var ve=H.length;re=Math.max(0,re==null?0:+re),K=Math.min(ve-1,K==null?ve-1:+K);var oe=[];return se.paragraphs.forEach(function(ce){var ne=Math.max(re,ce.start),De=Math.min(K,ce.end);if(ne<De){for(var le=se.levels.slice(ne,De+1),ue=De;ue>=ne&&m(H[ue])&l;ue--)le[ue]=ce.level;for(var me=ce.level,ye=1/0,be=0;be<le.length;be++){var Ce=le[be];Ce>me&&(me=Ce),Ce<ye&&(ye=Ce|1)}for(var Ne=me;Ne>=ye;Ne--)for(var xe=0;xe<le.length;xe++)if(le[xe]>=Ne){for(var de=xe;xe+1<le.length&&le[xe+1]>=Ne;)xe++;xe>de&&oe.push([de+ne,xe+ne])}}}),oe}function ae(H,se,re,K){var ve=te(H,se,re,K),oe=[].concat(H);return ve.forEach(function(ce,ne){oe[ne]=(se.levels[ce]&1?pe(H[ce]):null)||H[ce]}),oe.join("")}function te(H,se,re,K){for(var ve=ee(H,se,re,K),oe=[],ce=0;ce<H.length;ce++)oe[ce]=ce;return ve.forEach(function(ne){for(var De=ne[0],le=ne[1],ue=oe.slice(De,le+1),me=ue.length;me--;)oe[le-me]=ue[me]}),oe}return t.closingToOpeningBracket=U,t.getBidiCharType=m,t.getBidiCharTypeName=h,t.getCanonicalBracket=k,t.getEmbeddingLevels=Z,t.getMirroredCharacter=pe,t.getMirroredCharactersMap=ie,t.getReorderSegments=ee,t.getReorderedIndices=te,t.getReorderedString=ae,t.openingToClosingBracket=N,Object.defineProperty(t,"__esModule",{value:!0}),t})({});return e}const Sc=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Ga(e){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function a(r,s){let n=Hc[s];return n?Ga(n):r}return e.replace(t,a)}const We=[];for(let e=0;e<256;e++)We[e]=(e<16?"0":"")+e.toString(16);function Op(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,a=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(We[e&255]+We[e>>8&255]+We[e>>16&255]+We[e>>24&255]+"-"+We[t&255]+We[t>>8&255]+"-"+We[t>>16&15|64]+We[t>>24&255]+"-"+We[a&63|128]+We[a>>8&255]+"-"+We[a>>16&255]+We[a>>24&255]+We[r&255]+We[r>>8&255]+We[r>>16&255]+We[r>>24&255]).toUpperCase()}const kt=Object.assign||function(){let e=arguments[0];for(let t=1,a=arguments.length;t<a;t++){let r=arguments[t];if(r)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lp=Date.now(),Tr=new WeakMap,Vr=new Map;let Gp=1e10;function Ba(e,t){const a=$p(t);let r=Tr.get(e);if(r||Tr.set(e,r=Object.create(null)),r[a])return new r[a];const s=`_onBeforeCompile${a}`,n=function(l,u){e.onBeforeCompile.call(this,l,u);const d=this.customProgramCacheKey()+"|"+l.vertexShader+"|"+l.fragmentShader;let m=Vr[d];if(!m){const h=Bp(this,l,t,a);m=Vr[d]=h}l.vertexShader=m.vertexShader,l.fragmentShader=m.fragmentShader,kt(l.uniforms,this.uniforms),t.timeUniform&&(l.uniforms[t.timeUniform]={get value(){return Date.now()-Lp}}),this[s]&&this[s](l)},o=function(){return c(t.chained?e:e.clone())},c=function(l){const u=Object.create(l,i);return Object.defineProperty(u,"baseMaterial",{value:e}),Object.defineProperty(u,"id",{value:Gp++}),u.uuid=Op(),u.uniforms=kt({},l.uniforms,t.uniforms),u.defines=kt({},l.defines,t.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${a}`]="",u.extensions=kt({},l.extensions,t.extensions),u._listeners=void 0,u},i={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:l=>{e.type=l}},isDerivedFrom:{writable:!0,configurable:!0,value:function(l){const u=this.baseMaterial;return l===u||u.isDerivedMaterial&&u.isDerivedFrom(l)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+a}},onBeforeCompile:{get(){return n},set(l){this[s]=l}},copy:{writable:!0,configurable:!0,value:function(l){return e.copy.call(this,l),!e.isShaderMaterial&&!e.isDerivedMaterial&&(kt(this.extensions,l.extensions),kt(this.defines,l.defines),kt(this.uniforms,Wc.clone(l.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const l=new e.constructor;return c(l).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let l=this._depthMaterial;return l||(l=this._depthMaterial=Ba(e.isDerivedMaterial?e.getDepthMaterial():new Gc({depthPacking:Bc}),t),l.defines.IS_DEPTH_MATERIAL="",l.uniforms=this.uniforms),l}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let l=this._distanceMaterial;return l||(l=this._distanceMaterial=Ba(e.isDerivedMaterial?e.getDistanceMaterial():new Lc,t),l.defines.IS_DISTANCE_MATERIAL="",l.uniforms=this.uniforms),l}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:l,_distanceMaterial:u}=this;l&&l.dispose(),u&&u.dispose(),e.dispose.call(this)}}};return r[a]=o,new o}function Bp(e,{vertexShader:t,fragmentShader:a},r,s){let{vertexDefs:n,vertexMainIntro:o,vertexMainOutro:c,vertexTransform:i,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:d,fragmentColorTransform:m,customRewriter:h,timeUniform:v}=r;if(n=n||"",o=o||"",c=c||"",l=l||"",u=u||"",d=d||"",(i||h)&&(t=Ga(t)),(m||h)&&(a=a.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),a=Ga(a)),h){let g=h({vertexShader:t,fragmentShader:a});t=g.vertexShader,a=g.fragmentShader}if(m){let g=[];a=a.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(g.push(y),"")),d=`${m}
${g.join(`
`)}
${d}`}if(v){const g=`
uniform float ${v};
`;n=g+n,l=g+l}return i&&(t=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${t}
`,n=`${n}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${i}
}
`,o=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${o}
`,t=t.replace(/\b(position|normal|uv)\b/g,(g,y,x,w)=>/\battribute\s+vec[23]\s+$/.test(w.substr(0,x))?y:`troika_${y}_${s}`),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),t=Pr(t,s,n,o,c),a=Pr(a,s,l,u,d),{vertexShader:t,fragmentShader:a}}function Pr(e,t,a,r,s){return(r||s||a)&&(e=e.replace(Sc,`
${a}
void troikaOrigMain${t}() {`),e+=`
void main() {
  ${r}
  troikaOrigMain${t}();
  ${s}
}`),e}function Wp(e,t){return e==="uniforms"?void 0:typeof t=="function"?t.toString():t}let Hp=0;const Rr=new Map;function $p(e){const t=JSON.stringify(e,Wp);let a=Rr.get(t);return a==null&&Rr.set(t,a=++Hp),a}function Xp(){return typeof window>"u"&&(self.window=self),(function(e){var t={parse:function(s){var n=t._bin,o=new Uint8Array(s);if(n.readASCII(o,0,4)=="ttcf"){var c=4;n.readUshort(o,c),c+=2,n.readUshort(o,c),c+=2;var i=n.readUint(o,c);c+=4;for(var l=[],u=0;u<i;u++){var d=n.readUint(o,c);c+=4,l.push(t._readFont(o,d))}return l}return[t._readFont(o,0)]},_readFont:function(s,n){var o=t._bin,c=n;o.readFixed(s,n),n+=4;var i=o.readUshort(s,n);n+=2,o.readUshort(s,n),n+=2,o.readUshort(s,n),n+=2,o.readUshort(s,n),n+=2;for(var l=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:s,_offset:c},d={},m=0;m<i;m++){var h=o.readASCII(s,n,4);n+=4,o.readUint(s,n),n+=4;var v=o.readUint(s,n);n+=4;var g=o.readUint(s,n);n+=4,d[h]={offset:v,length:g}}for(m=0;m<l.length;m++){var y=l[m];d[y]&&(u[y.trim()]=t[y.trim()].parse(s,d[y].offset,d[y].length,u))}return u},_tabOffset:function(s,n,o){for(var c=t._bin,i=c.readUshort(s,o+4),l=o+12,u=0;u<i;u++){var d=c.readASCII(s,l,4);l+=4,c.readUint(s,l),l+=4;var m=c.readUint(s,l);if(l+=4,c.readUint(s,l),l+=4,d==n)return m}return 0}};t._bin={readFixed:function(s,n){return(s[n]<<8|s[n+1])+(s[n+2]<<8|s[n+3])/65540},readF2dot14:function(s,n){return t._bin.readShort(s,n)/16384},readInt:function(s,n){return t._bin._view(s).getInt32(n)},readInt8:function(s,n){return t._bin._view(s).getInt8(n)},readShort:function(s,n){return t._bin._view(s).getInt16(n)},readUshort:function(s,n){return t._bin._view(s).getUint16(n)},readUshorts:function(s,n,o){for(var c=[],i=0;i<o;i++)c.push(t._bin.readUshort(s,n+2*i));return c},readUint:function(s,n){return t._bin._view(s).getUint32(n)},readUint64:function(s,n){return 4294967296*t._bin.readUint(s,n)+t._bin.readUint(s,n+4)},readASCII:function(s,n,o){for(var c="",i=0;i<o;i++)c+=String.fromCharCode(s[n+i]);return c},readUnicode:function(s,n,o){for(var c="",i=0;i<o;i++){var l=s[n++]<<8|s[n++];c+=String.fromCharCode(l)}return c},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,n,o){var c=t._bin._tdec;return c&&n==0&&o==s.length?c.decode(s):t._bin.readASCII(s,n,o)},readBytes:function(s,n,o){for(var c=[],i=0;i<o;i++)c.push(s[n+i]);return c},readASCIIArray:function(s,n,o){for(var c=[],i=0;i<o;i++)c.push(String.fromCharCode(s[n+i]));return c},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},t._lctf={},t._lctf.parse=function(s,n,o,c,i){var l=t._bin,u={},d=n;l.readFixed(s,n),n+=4;var m=l.readUshort(s,n);n+=2;var h=l.readUshort(s,n);n+=2;var v=l.readUshort(s,n);return n+=2,u.scriptList=t._lctf.readScriptList(s,d+m),u.featureList=t._lctf.readFeatureList(s,d+h),u.lookupList=t._lctf.readLookupList(s,d+v,i),u},t._lctf.readLookupList=function(s,n,o){var c=t._bin,i=n,l=[],u=c.readUshort(s,n);n+=2;for(var d=0;d<u;d++){var m=c.readUshort(s,n);n+=2;var h=t._lctf.readLookupTable(s,i+m,o);l.push(h)}return l},t._lctf.readLookupTable=function(s,n,o){var c=t._bin,i=n,l={tabs:[]};l.ltype=c.readUshort(s,n),n+=2,l.flag=c.readUshort(s,n),n+=2;var u=c.readUshort(s,n);n+=2;for(var d=l.ltype,m=0;m<u;m++){var h=c.readUshort(s,n);n+=2;var v=o(s,d,i+h,l);l.tabs.push(v)}return l},t._lctf.numOfOnes=function(s){for(var n=0,o=0;o<32;o++)(s>>>o&1)!=0&&n++;return n},t._lctf.readClassDef=function(s,n){var o=t._bin,c=[],i=o.readUshort(s,n);if(n+=2,i==1){var l=o.readUshort(s,n);n+=2;var u=o.readUshort(s,n);n+=2;for(var d=0;d<u;d++)c.push(l+d),c.push(l+d),c.push(o.readUshort(s,n)),n+=2}if(i==2){var m=o.readUshort(s,n);for(n+=2,d=0;d<m;d++)c.push(o.readUshort(s,n)),n+=2,c.push(o.readUshort(s,n)),n+=2,c.push(o.readUshort(s,n)),n+=2}return c},t._lctf.getInterval=function(s,n){for(var o=0;o<s.length;o+=3){var c=s[o],i=s[o+1];if(s[o+2],c<=n&&n<=i)return o}return-1},t._lctf.readCoverage=function(s,n){var o=t._bin,c={};c.fmt=o.readUshort(s,n),n+=2;var i=o.readUshort(s,n);return n+=2,c.fmt==1&&(c.tab=o.readUshorts(s,n,i)),c.fmt==2&&(c.tab=o.readUshorts(s,n,3*i)),c},t._lctf.coverageIndex=function(s,n){var o=s.tab;if(s.fmt==1)return o.indexOf(n);if(s.fmt==2){var c=t._lctf.getInterval(o,n);if(c!=-1)return o[c+2]+(n-o[c])}return-1},t._lctf.readFeatureList=function(s,n){var o=t._bin,c=n,i=[],l=o.readUshort(s,n);n+=2;for(var u=0;u<l;u++){var d=o.readASCII(s,n,4);n+=4;var m=o.readUshort(s,n);n+=2;var h=t._lctf.readFeatureTable(s,c+m);h.tag=d.trim(),i.push(h)}return i},t._lctf.readFeatureTable=function(s,n){var o=t._bin,c=n,i={},l=o.readUshort(s,n);n+=2,l>0&&(i.featureParams=c+l);var u=o.readUshort(s,n);n+=2,i.tab=[];for(var d=0;d<u;d++)i.tab.push(o.readUshort(s,n+2*d));return i},t._lctf.readScriptList=function(s,n){var o=t._bin,c=n,i={},l=o.readUshort(s,n);n+=2;for(var u=0;u<l;u++){var d=o.readASCII(s,n,4);n+=4;var m=o.readUshort(s,n);n+=2,i[d.trim()]=t._lctf.readScriptTable(s,c+m)}return i},t._lctf.readScriptTable=function(s,n){var o=t._bin,c=n,i={},l=o.readUshort(s,n);n+=2,l>0&&(i.default=t._lctf.readLangSysTable(s,c+l));var u=o.readUshort(s,n);n+=2;for(var d=0;d<u;d++){var m=o.readASCII(s,n,4);n+=4;var h=o.readUshort(s,n);n+=2,i[m.trim()]=t._lctf.readLangSysTable(s,c+h)}return i},t._lctf.readLangSysTable=function(s,n){var o=t._bin,c={};o.readUshort(s,n),n+=2,c.reqFeature=o.readUshort(s,n),n+=2;var i=o.readUshort(s,n);return n+=2,c.features=o.readUshorts(s,n,i),c},t.CFF={},t.CFF.parse=function(s,n,o){var c=t._bin;(s=new Uint8Array(s.buffer,n,o))[n=0],s[++n],s[++n],s[++n],n++;var i=[];n=t.CFF.readIndex(s,n,i);for(var l=[],u=0;u<i.length-1;u++)l.push(c.readASCII(s,n+i[u],i[u+1]-i[u]));n+=i[i.length-1];var d=[];n=t.CFF.readIndex(s,n,d);var m=[];for(u=0;u<d.length-1;u++)m.push(t.CFF.readDict(s,n+d[u],n+d[u+1]));n+=d[d.length-1];var h=m[0],v=[];n=t.CFF.readIndex(s,n,v);var g=[];for(u=0;u<v.length-1;u++)g.push(c.readASCII(s,n+v[u],v[u+1]-v[u]));if(n+=v[v.length-1],t.CFF.readSubrs(s,n,h),h.CharStrings){n=h.CharStrings,v=[],n=t.CFF.readIndex(s,n,v);var y=[];for(u=0;u<v.length-1;u++)y.push(c.readBytes(s,n+v[u],v[u+1]-v[u]));h.CharStrings=y}if(h.ROS){n=h.FDArray;var x=[];for(n=t.CFF.readIndex(s,n,x),h.FDArray=[],u=0;u<x.length-1;u++){var w=t.CFF.readDict(s,n+x[u],n+x[u+1]);t.CFF._readFDict(s,w,g),h.FDArray.push(w)}n+=x[x.length-1],n=h.FDSelect,h.FDSelect=[];var _=s[n];if(n++,_!=3)throw _;var N=c.readUshort(s,n);for(n+=2,u=0;u<N+1;u++)h.FDSelect.push(c.readUshort(s,n),s[n+2]),n+=3}return h.Encoding&&(h.Encoding=t.CFF.readEncoding(s,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=t.CFF.readCharset(s,h.charset,h.CharStrings.length)),t.CFF._readFDict(s,h,g),h},t.CFF._readFDict=function(s,n,o){var c;for(var i in n.Private&&(c=n.Private[1],n.Private=t.CFF.readDict(s,c,c+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(s,c+n.Private.Subrs,n.Private)),n)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(i)!=-1&&(n[i]=o[n[i]-426+35])},t.CFF.readSubrs=function(s,n,o){var c=t._bin,i=[];n=t.CFF.readIndex(s,n,i);var l,u=i.length;l=u<1240?107:u<33900?1131:32768,o.Bias=l,o.Subrs=[];for(var d=0;d<i.length-1;d++)o.Subrs.push(c.readBytes(s,n+i[d],i[d+1]-i[d]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(s,n){for(var o=0;o<s.charset.length;o++)if(s.charset[o]==n)return o;return-1},t.CFF.glyphBySE=function(s,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(s,t.CFF.tableSE[n])},t.CFF.readEncoding=function(s,n,o){t._bin;var c=[".notdef"],i=s[n];if(n++,i!=0)throw"error: unknown encoding format: "+i;var l=s[n];n++;for(var u=0;u<l;u++)c.push(s[n+u]);return c},t.CFF.readCharset=function(s,n,o){var c=t._bin,i=[".notdef"],l=s[n];if(n++,l==0)for(var u=0;u<o;u++){var d=c.readUshort(s,n);n+=2,i.push(d)}else{if(l!=1&&l!=2)throw"error: format: "+l;for(;i.length<o;){d=c.readUshort(s,n),n+=2;var m=0;for(l==1?(m=s[n],n++):(m=c.readUshort(s,n),n+=2),u=0;u<=m;u++)i.push(d),d++}}return i},t.CFF.readIndex=function(s,n,o){var c=t._bin,i=c.readUshort(s,n)+1,l=s[n+=2];if(n++,l==1)for(var u=0;u<i;u++)o.push(s[n+u]);else if(l==2)for(u=0;u<i;u++)o.push(c.readUshort(s,n+2*u));else if(l==3)for(u=0;u<i;u++)o.push(16777215&c.readUint(s,n+3*u-1));else if(i!=1)throw"unsupported offset size: "+l+", count: "+i;return(n+=i*l)-1},t.CFF.getCharString=function(s,n,o){var c=t._bin,i=s[n],l=s[n+1];s[n+2],s[n+3],s[n+4];var u=1,d=null,m=null;i<=20&&(d=i,u=1),i==12&&(d=100*i+l,u=2),21<=i&&i<=27&&(d=i,u=1),i==28&&(m=c.readShort(s,n+1),u=3),29<=i&&i<=31&&(d=i,u=1),32<=i&&i<=246&&(m=i-139,u=1),247<=i&&i<=250&&(m=256*(i-247)+l+108,u=2),251<=i&&i<=254&&(m=256*-(i-251)-l-108,u=2),i==255&&(m=c.readInt(s,n+1)/65535,u=5),o.val=m??"o"+d,o.size=u},t.CFF.readCharString=function(s,n,o){for(var c=n+o,i=t._bin,l=[];n<c;){var u=s[n],d=s[n+1];s[n+2],s[n+3],s[n+4];var m=1,h=null,v=null;u<=20&&(h=u,m=1),u==12&&(h=100*u+d,m=2),u!=19&&u!=20||(h=u,m=2),21<=u&&u<=27&&(h=u,m=1),u==28&&(v=i.readShort(s,n+1),m=3),29<=u&&u<=31&&(h=u,m=1),32<=u&&u<=246&&(v=u-139,m=1),247<=u&&u<=250&&(v=256*(u-247)+d+108,m=2),251<=u&&u<=254&&(v=256*-(u-251)-d-108,m=2),u==255&&(v=i.readInt(s,n+1)/65535,m=5),l.push(v??"o"+h),n+=m}return l},t.CFF.readDict=function(s,n,o){for(var c=t._bin,i={},l=[];n<o;){var u=s[n],d=s[n+1];s[n+2],s[n+3],s[n+4];var m=1,h=null,v=null;if(u==28&&(v=c.readShort(s,n+1),m=3),u==29&&(v=c.readInt(s,n+1),m=5),32<=u&&u<=246&&(v=u-139,m=1),247<=u&&u<=250&&(v=256*(u-247)+d+108,m=2),251<=u&&u<=254&&(v=256*-(u-251)-d-108,m=2),u==255)throw v=c.readInt(s,n+1)/65535,m=5,"unknown number";if(u==30){var g=[];for(m=1;;){var y=s[n+m];m++;var x=y>>4,w=15&y;if(x!=15&&g.push(x),w!=15&&g.push(w),w==15)break}for(var _="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],U=0;U<g.length;U++)_+=N[g[U]];v=parseFloat(_)}u<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],m=1,u==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],m=2)),h!=null?(i[h]=l.length==1?l[0]:l,l=[]):l.push(v),n+=m}return i},t.cmap={},t.cmap.parse=function(s,n,o){s=new Uint8Array(s.buffer,n,o),n=0;var c=t._bin,i={};c.readUshort(s,n),n+=2;var l=c.readUshort(s,n);n+=2;var u=[];i.tables=[];for(var d=0;d<l;d++){var m=c.readUshort(s,n);n+=2;var h=c.readUshort(s,n);n+=2;var v=c.readUint(s,n);n+=4;var g="p"+m+"e"+h,y=u.indexOf(v);if(y==-1){var x;y=i.tables.length,u.push(v);var w=c.readUshort(s,v);w==0?x=t.cmap.parse0(s,v):w==4?x=t.cmap.parse4(s,v):w==6?x=t.cmap.parse6(s,v):w==12?x=t.cmap.parse12(s,v):console.debug("unknown format: "+w,m,h,v),i.tables.push(x)}if(i[g]!=null)throw"multiple tables for one platform+encoding";i[g]=y}return i},t.cmap.parse0=function(s,n){var o=t._bin,c={};c.format=o.readUshort(s,n),n+=2;var i=o.readUshort(s,n);n+=2,o.readUshort(s,n),n+=2,c.map=[];for(var l=0;l<i-6;l++)c.map.push(s[n+l]);return c},t.cmap.parse4=function(s,n){var o=t._bin,c=n,i={};i.format=o.readUshort(s,n),n+=2;var l=o.readUshort(s,n);n+=2,o.readUshort(s,n),n+=2;var u=o.readUshort(s,n);n+=2;var d=u/2;i.searchRange=o.readUshort(s,n),n+=2,i.entrySelector=o.readUshort(s,n),n+=2,i.rangeShift=o.readUshort(s,n),n+=2,i.endCount=o.readUshorts(s,n,d),n+=2*d,n+=2,i.startCount=o.readUshorts(s,n,d),n+=2*d,i.idDelta=[];for(var m=0;m<d;m++)i.idDelta.push(o.readShort(s,n)),n+=2;for(i.idRangeOffset=o.readUshorts(s,n,d),n+=2*d,i.glyphIdArray=[];n<c+l;)i.glyphIdArray.push(o.readUshort(s,n)),n+=2;return i},t.cmap.parse6=function(s,n){var o=t._bin,c={};c.format=o.readUshort(s,n),n+=2,o.readUshort(s,n),n+=2,o.readUshort(s,n),n+=2,c.firstCode=o.readUshort(s,n),n+=2;var i=o.readUshort(s,n);n+=2,c.glyphIdArray=[];for(var l=0;l<i;l++)c.glyphIdArray.push(o.readUshort(s,n)),n+=2;return c},t.cmap.parse12=function(s,n){var o=t._bin,c={};c.format=o.readUshort(s,n),n+=2,n+=2,o.readUint(s,n),n+=4,o.readUint(s,n),n+=4;var i=o.readUint(s,n);n+=4,c.groups=[];for(var l=0;l<i;l++){var u=n+12*l,d=o.readUint(s,u+0),m=o.readUint(s,u+4),h=o.readUint(s,u+8);c.groups.push([d,m,h])}return c},t.glyf={},t.glyf.parse=function(s,n,o,c){for(var i=[],l=0;l<c.maxp.numGlyphs;l++)i.push(null);return i},t.glyf._parseGlyf=function(s,n){var o=t._bin,c=s._data,i=t._tabOffset(c,"glyf",s._offset)+s.loca[n];if(s.loca[n]==s.loca[n+1])return null;var l={};if(l.noc=o.readShort(c,i),i+=2,l.xMin=o.readShort(c,i),i+=2,l.yMin=o.readShort(c,i),i+=2,l.xMax=o.readShort(c,i),i+=2,l.yMax=o.readShort(c,i),i+=2,l.xMin>=l.xMax||l.yMin>=l.yMax)return null;if(l.noc>0){l.endPts=[];for(var u=0;u<l.noc;u++)l.endPts.push(o.readUshort(c,i)),i+=2;var d=o.readUshort(c,i);if(i+=2,c.length-i<d)return null;l.instructions=o.readBytes(c,i,d),i+=d;var m=l.endPts[l.noc-1]+1;for(l.flags=[],u=0;u<m;u++){var h=c[i];if(i++,l.flags.push(h),(8&h)!=0){var v=c[i];i++;for(var g=0;g<v;g++)l.flags.push(h),u++}}for(l.xs=[],u=0;u<m;u++){var y=(2&l.flags[u])!=0,x=(16&l.flags[u])!=0;y?(l.xs.push(x?c[i]:-c[i]),i++):x?l.xs.push(0):(l.xs.push(o.readShort(c,i)),i+=2)}for(l.ys=[],u=0;u<m;u++)y=(4&l.flags[u])!=0,x=(32&l.flags[u])!=0,y?(l.ys.push(x?c[i]:-c[i]),i++):x?l.ys.push(0):(l.ys.push(o.readShort(c,i)),i+=2);var w=0,_=0;for(u=0;u<m;u++)w+=l.xs[u],_+=l.ys[u],l.xs[u]=w,l.ys[u]=_}else{var N;l.parts=[];do{N=o.readUshort(c,i),i+=2;var U={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(l.parts.push(U),U.glyphIndex=o.readUshort(c,i),i+=2,1&N){var k=o.readShort(c,i);i+=2;var D=o.readShort(c,i);i+=2}else k=o.readInt8(c,i),i++,D=o.readInt8(c,i),i++;2&N?(U.m.tx=k,U.m.ty=D):(U.p1=k,U.p2=D),8&N?(U.m.a=U.m.d=o.readF2dot14(c,i),i+=2):64&N?(U.m.a=o.readF2dot14(c,i),i+=2,U.m.d=o.readF2dot14(c,i),i+=2):128&N&&(U.m.a=o.readF2dot14(c,i),i+=2,U.m.b=o.readF2dot14(c,i),i+=2,U.m.c=o.readF2dot14(c,i),i+=2,U.m.d=o.readF2dot14(c,i),i+=2)}while(32&N);if(256&N){var A=o.readUshort(c,i);for(i+=2,l.instr=[],u=0;u<A;u++)l.instr.push(c[i]),i++}}return l},t.GDEF={},t.GDEF.parse=function(s,n,o,c){var i=n;n+=4;var l=t._bin.readUshort(s,n);return{glyphClassDef:l===0?null:t._lctf.readClassDef(s,i+l)}},t.GPOS={},t.GPOS.parse=function(s,n,o,c){return t._lctf.parse(s,n,o,c,t.GPOS.subt)},t.GPOS.subt=function(s,n,o,c){var i=t._bin,l=o,u={};if(u.fmt=i.readUshort(s,o),o+=2,n==1||n==2||n==3||n==7||n==8&&u.fmt<=2){var d=i.readUshort(s,o);o+=2,u.coverage=t._lctf.readCoverage(s,d+l)}if(n==1&&u.fmt==1){var m=i.readUshort(s,o);o+=2,m!=0&&(u.pos=t.GPOS.readValueRecord(s,o,m))}else if(n==2&&u.fmt>=1&&u.fmt<=2){m=i.readUshort(s,o),o+=2;var h=i.readUshort(s,o);o+=2;var v=t._lctf.numOfOnes(m),g=t._lctf.numOfOnes(h);if(u.fmt==1){u.pairsets=[];var y=i.readUshort(s,o);o+=2;for(var x=0;x<y;x++){var w=l+i.readUshort(s,o);o+=2;var _=i.readUshort(s,w);w+=2;for(var N=[],U=0;U<_;U++){var k=i.readUshort(s,w);w+=2,m!=0&&(j=t.GPOS.readValueRecord(s,w,m),w+=2*v),h!=0&&(P=t.GPOS.readValueRecord(s,w,h),w+=2*g),N.push({gid2:k,val1:j,val2:P})}u.pairsets.push(N)}}if(u.fmt==2){var D=i.readUshort(s,o);o+=2;var A=i.readUshort(s,o);o+=2;var V=i.readUshort(s,o);o+=2;var R=i.readUshort(s,o);for(o+=2,u.classDef1=t._lctf.readClassDef(s,l+D),u.classDef2=t._lctf.readClassDef(s,l+A),u.matrix=[],x=0;x<V;x++){var B=[];for(U=0;U<R;U++){var j=null,P=null;m!=0&&(j=t.GPOS.readValueRecord(s,o,m),o+=2*v),h!=0&&(P=t.GPOS.readValueRecord(s,o,h),o+=2*g),B.push({val1:j,val2:P})}u.matrix.push(B)}}}else if(n==4&&u.fmt==1)u.markCoverage=t._lctf.readCoverage(s,i.readUshort(s,o)+l),u.baseCoverage=t._lctf.readCoverage(s,i.readUshort(s,o+2)+l),u.markClassCount=i.readUshort(s,o+4),u.markArray=t.GPOS.readMarkArray(s,i.readUshort(s,o+6)+l),u.baseArray=t.GPOS.readBaseArray(s,i.readUshort(s,o+8)+l,u.markClassCount);else if(n==6&&u.fmt==1)u.mark1Coverage=t._lctf.readCoverage(s,i.readUshort(s,o)+l),u.mark2Coverage=t._lctf.readCoverage(s,i.readUshort(s,o+2)+l),u.markClassCount=i.readUshort(s,o+4),u.mark1Array=t.GPOS.readMarkArray(s,i.readUshort(s,o+6)+l),u.mark2Array=t.GPOS.readBaseArray(s,i.readUshort(s,o+8)+l,u.markClassCount);else{if(n==9&&u.fmt==1){var p=i.readUshort(s,o);o+=2;var C=i.readUint(s,o);if(o+=4,c.ltype==9)c.ltype=p;else if(c.ltype!=p)throw"invalid extension substitution";return t.GPOS.subt(s,c.ltype,l+C)}console.debug("unsupported GPOS table LookupType",n,"format",u.fmt)}return u},t.GPOS.readValueRecord=function(s,n,o){var c=t._bin,i=[];return i.push(1&o?c.readShort(s,n):0),n+=1&o?2:0,i.push(2&o?c.readShort(s,n):0),n+=2&o?2:0,i.push(4&o?c.readShort(s,n):0),n+=4&o?2:0,i.push(8&o?c.readShort(s,n):0),n+=8&o?2:0,i},t.GPOS.readBaseArray=function(s,n,o){var c=t._bin,i=[],l=n,u=c.readUshort(s,n);n+=2;for(var d=0;d<u;d++){for(var m=[],h=0;h<o;h++)m.push(t.GPOS.readAnchorRecord(s,l+c.readUshort(s,n))),n+=2;i.push(m)}return i},t.GPOS.readMarkArray=function(s,n){var o=t._bin,c=[],i=n,l=o.readUshort(s,n);n+=2;for(var u=0;u<l;u++){var d=t.GPOS.readAnchorRecord(s,o.readUshort(s,n+2)+i);d.markClass=o.readUshort(s,n),c.push(d),n+=4}return c},t.GPOS.readAnchorRecord=function(s,n){var o=t._bin,c={};return c.fmt=o.readUshort(s,n),c.x=o.readShort(s,n+2),c.y=o.readShort(s,n+4),c},t.GSUB={},t.GSUB.parse=function(s,n,o,c){return t._lctf.parse(s,n,o,c,t.GSUB.subt)},t.GSUB.subt=function(s,n,o,c){var i=t._bin,l=o,u={};if(u.fmt=i.readUshort(s,o),o+=2,n!=1&&n!=2&&n!=4&&n!=5&&n!=6)return null;if(n==1||n==2||n==4||n==5&&u.fmt<=2||n==6&&u.fmt<=2){var d=i.readUshort(s,o);o+=2,u.coverage=t._lctf.readCoverage(s,l+d)}if(n==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=i.readShort(s,o),o+=2;else if(u.fmt==2){var m=i.readUshort(s,o);o+=2,u.newg=i.readUshorts(s,o,m),o+=2*u.newg.length}}else if(n==2&&u.fmt==1){m=i.readUshort(s,o),o+=2,u.seqs=[];for(var h=0;h<m;h++){var v=i.readUshort(s,o)+l;o+=2;var g=i.readUshort(s,v);u.seqs.push(i.readUshorts(s,v+2,g))}}else if(n==4)for(u.vals=[],m=i.readUshort(s,o),o+=2,h=0;h<m;h++){var y=i.readUshort(s,o);o+=2,u.vals.push(t.GSUB.readLigatureSet(s,l+y))}else if(n==5&&u.fmt==2){if(u.fmt==2){var x=i.readUshort(s,o);o+=2,u.cDef=t._lctf.readClassDef(s,l+x),u.scset=[];var w=i.readUshort(s,o);for(o+=2,h=0;h<w;h++){var _=i.readUshort(s,o);o+=2,u.scset.push(_==0?null:t.GSUB.readSubClassSet(s,l+_))}}}else if(n==6&&u.fmt==3){if(u.fmt==3){for(h=0;h<3;h++){m=i.readUshort(s,o),o+=2;for(var N=[],U=0;U<m;U++)N.push(t._lctf.readCoverage(s,l+i.readUshort(s,o+2*U)));o+=2*m,h==0&&(u.backCvg=N),h==1&&(u.inptCvg=N),h==2&&(u.ahedCvg=N)}m=i.readUshort(s,o),o+=2,u.lookupRec=t.GSUB.readSubstLookupRecords(s,o,m)}}else{if(n==7&&u.fmt==1){var k=i.readUshort(s,o);o+=2;var D=i.readUint(s,o);if(o+=4,c.ltype==9)c.ltype=k;else if(c.ltype!=k)throw"invalid extension substitution";return t.GSUB.subt(s,c.ltype,l+D)}console.debug("unsupported GSUB table LookupType",n,"format",u.fmt)}return u},t.GSUB.readSubClassSet=function(s,n){var o=t._bin.readUshort,c=n,i=[],l=o(s,n);n+=2;for(var u=0;u<l;u++){var d=o(s,n);n+=2,i.push(t.GSUB.readSubClassRule(s,c+d))}return i},t.GSUB.readSubClassRule=function(s,n){var o=t._bin.readUshort,c={},i=o(s,n),l=o(s,n+=2);n+=2,c.input=[];for(var u=0;u<i-1;u++)c.input.push(o(s,n)),n+=2;return c.substLookupRecords=t.GSUB.readSubstLookupRecords(s,n,l),c},t.GSUB.readSubstLookupRecords=function(s,n,o){for(var c=t._bin.readUshort,i=[],l=0;l<o;l++)i.push(c(s,n),c(s,n+2)),n+=4;return i},t.GSUB.readChainSubClassSet=function(s,n){var o=t._bin,c=n,i=[],l=o.readUshort(s,n);n+=2;for(var u=0;u<l;u++){var d=o.readUshort(s,n);n+=2,i.push(t.GSUB.readChainSubClassRule(s,c+d))}return i},t.GSUB.readChainSubClassRule=function(s,n){for(var o=t._bin,c={},i=["backtrack","input","lookahead"],l=0;l<i.length;l++){var u=o.readUshort(s,n);n+=2,l==1&&u--,c[i[l]]=o.readUshorts(s,n,u),n+=2*c[i[l]].length}return u=o.readUshort(s,n),n+=2,c.subst=o.readUshorts(s,n,2*u),n+=2*c.subst.length,c},t.GSUB.readLigatureSet=function(s,n){var o=t._bin,c=n,i=[],l=o.readUshort(s,n);n+=2;for(var u=0;u<l;u++){var d=o.readUshort(s,n);n+=2,i.push(t.GSUB.readLigature(s,c+d))}return i},t.GSUB.readLigature=function(s,n){var o=t._bin,c={chain:[]};c.nglyph=o.readUshort(s,n),n+=2;var i=o.readUshort(s,n);n+=2;for(var l=0;l<i-1;l++)c.chain.push(o.readUshort(s,n)),n+=2;return c},t.head={},t.head.parse=function(s,n,o){var c=t._bin,i={};return c.readFixed(s,n),n+=4,i.fontRevision=c.readFixed(s,n),n+=4,c.readUint(s,n),n+=4,c.readUint(s,n),n+=4,i.flags=c.readUshort(s,n),n+=2,i.unitsPerEm=c.readUshort(s,n),n+=2,i.created=c.readUint64(s,n),n+=8,i.modified=c.readUint64(s,n),n+=8,i.xMin=c.readShort(s,n),n+=2,i.yMin=c.readShort(s,n),n+=2,i.xMax=c.readShort(s,n),n+=2,i.yMax=c.readShort(s,n),n+=2,i.macStyle=c.readUshort(s,n),n+=2,i.lowestRecPPEM=c.readUshort(s,n),n+=2,i.fontDirectionHint=c.readShort(s,n),n+=2,i.indexToLocFormat=c.readShort(s,n),n+=2,i.glyphDataFormat=c.readShort(s,n),n+=2,i},t.hhea={},t.hhea.parse=function(s,n,o){var c=t._bin,i={};return c.readFixed(s,n),n+=4,i.ascender=c.readShort(s,n),n+=2,i.descender=c.readShort(s,n),n+=2,i.lineGap=c.readShort(s,n),n+=2,i.advanceWidthMax=c.readUshort(s,n),n+=2,i.minLeftSideBearing=c.readShort(s,n),n+=2,i.minRightSideBearing=c.readShort(s,n),n+=2,i.xMaxExtent=c.readShort(s,n),n+=2,i.caretSlopeRise=c.readShort(s,n),n+=2,i.caretSlopeRun=c.readShort(s,n),n+=2,i.caretOffset=c.readShort(s,n),n+=2,n+=8,i.metricDataFormat=c.readShort(s,n),n+=2,i.numberOfHMetrics=c.readUshort(s,n),n+=2,i},t.hmtx={},t.hmtx.parse=function(s,n,o,c){for(var i=t._bin,l={aWidth:[],lsBearing:[]},u=0,d=0,m=0;m<c.maxp.numGlyphs;m++)m<c.hhea.numberOfHMetrics&&(u=i.readUshort(s,n),n+=2,d=i.readShort(s,n),n+=2),l.aWidth.push(u),l.lsBearing.push(d);return l},t.kern={},t.kern.parse=function(s,n,o,c){var i=t._bin,l=i.readUshort(s,n);if(n+=2,l==1)return t.kern.parseV1(s,n-2,o,c);var u=i.readUshort(s,n);n+=2;for(var d={glyph1:[],rval:[]},m=0;m<u;m++){n+=2,o=i.readUshort(s,n),n+=2;var h=i.readUshort(s,n);n+=2;var v=h>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;n=t.kern.readFormat0(s,n,d)}return d},t.kern.parseV1=function(s,n,o,c){var i=t._bin;i.readFixed(s,n),n+=4;var l=i.readUint(s,n);n+=4;for(var u={glyph1:[],rval:[]},d=0;d<l;d++){i.readUint(s,n),n+=4;var m=i.readUshort(s,n);n+=2,i.readUshort(s,n),n+=2;var h=m>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;n=t.kern.readFormat0(s,n,u)}return u},t.kern.readFormat0=function(s,n,o){var c=t._bin,i=-1,l=c.readUshort(s,n);n+=2,c.readUshort(s,n),n+=2,c.readUshort(s,n),n+=2,c.readUshort(s,n),n+=2;for(var u=0;u<l;u++){var d=c.readUshort(s,n);n+=2;var m=c.readUshort(s,n);n+=2;var h=c.readShort(s,n);n+=2,d!=i&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(m),v.vals.push(h),i=d}return n},t.loca={},t.loca.parse=function(s,n,o,c){var i=t._bin,l=[],u=c.head.indexToLocFormat,d=c.maxp.numGlyphs+1;if(u==0)for(var m=0;m<d;m++)l.push(i.readUshort(s,n+(m<<1))<<1);if(u==1)for(m=0;m<d;m++)l.push(i.readUint(s,n+(m<<2)));return l},t.maxp={},t.maxp.parse=function(s,n,o){var c=t._bin,i={},l=c.readUint(s,n);return n+=4,i.numGlyphs=c.readUshort(s,n),n+=2,l==65536&&(i.maxPoints=c.readUshort(s,n),n+=2,i.maxContours=c.readUshort(s,n),n+=2,i.maxCompositePoints=c.readUshort(s,n),n+=2,i.maxCompositeContours=c.readUshort(s,n),n+=2,i.maxZones=c.readUshort(s,n),n+=2,i.maxTwilightPoints=c.readUshort(s,n),n+=2,i.maxStorage=c.readUshort(s,n),n+=2,i.maxFunctionDefs=c.readUshort(s,n),n+=2,i.maxInstructionDefs=c.readUshort(s,n),n+=2,i.maxStackElements=c.readUshort(s,n),n+=2,i.maxSizeOfInstructions=c.readUshort(s,n),n+=2,i.maxComponentElements=c.readUshort(s,n),n+=2,i.maxComponentDepth=c.readUshort(s,n),n+=2),i},t.name={},t.name.parse=function(s,n,o){var c=t._bin,i={};c.readUshort(s,n),n+=2;var l=c.readUshort(s,n);n+=2,c.readUshort(s,n);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],m=n+=2,h=0;h<l;h++){var v=c.readUshort(s,n);n+=2;var g=c.readUshort(s,n);n+=2;var y=c.readUshort(s,n);n+=2;var x=c.readUshort(s,n);n+=2;var w=c.readUshort(s,n);n+=2;var _=c.readUshort(s,n);n+=2;var N,U=d[x],k=m+12*l+_;if(v==0)N=c.readUnicode(s,k,w/2);else if(v==3&&g==0)N=c.readUnicode(s,k,w/2);else if(g==0)N=c.readASCII(s,k,w);else if(g==1)N=c.readUnicode(s,k,w/2);else if(g==3)N=c.readUnicode(s,k,w/2);else{if(v!=1)throw"unknown encoding "+g+", platformID: "+v;N=c.readASCII(s,k,w),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var D="p"+v+","+y.toString(16);i[D]==null&&(i[D]={}),i[D][U!==void 0?U:x]=N,i[D]._lang=y}for(var A in i)if(i[A].postScriptName!=null&&i[A]._lang==1033)return i[A];for(var A in i)if(i[A].postScriptName!=null&&i[A]._lang==0)return i[A];for(var A in i)if(i[A].postScriptName!=null&&i[A]._lang==3084)return i[A];for(var A in i)if(i[A].postScriptName!=null)return i[A];for(var A in i){u=A;break}return console.debug("returning name table with languageID "+i[u]._lang),i[u]},t["OS/2"]={},t["OS/2"].parse=function(s,n,o){var c=t._bin.readUshort(s,n);n+=2;var i={};if(c==0)t["OS/2"].version0(s,n,i);else if(c==1)t["OS/2"].version1(s,n,i);else if(c==2||c==3||c==4)t["OS/2"].version2(s,n,i);else{if(c!=5)throw"unknown OS/2 table version: "+c;t["OS/2"].version5(s,n,i)}return i},t["OS/2"].version0=function(s,n,o){var c=t._bin;return o.xAvgCharWidth=c.readShort(s,n),n+=2,o.usWeightClass=c.readUshort(s,n),n+=2,o.usWidthClass=c.readUshort(s,n),n+=2,o.fsType=c.readUshort(s,n),n+=2,o.ySubscriptXSize=c.readShort(s,n),n+=2,o.ySubscriptYSize=c.readShort(s,n),n+=2,o.ySubscriptXOffset=c.readShort(s,n),n+=2,o.ySubscriptYOffset=c.readShort(s,n),n+=2,o.ySuperscriptXSize=c.readShort(s,n),n+=2,o.ySuperscriptYSize=c.readShort(s,n),n+=2,o.ySuperscriptXOffset=c.readShort(s,n),n+=2,o.ySuperscriptYOffset=c.readShort(s,n),n+=2,o.yStrikeoutSize=c.readShort(s,n),n+=2,o.yStrikeoutPosition=c.readShort(s,n),n+=2,o.sFamilyClass=c.readShort(s,n),n+=2,o.panose=c.readBytes(s,n,10),n+=10,o.ulUnicodeRange1=c.readUint(s,n),n+=4,o.ulUnicodeRange2=c.readUint(s,n),n+=4,o.ulUnicodeRange3=c.readUint(s,n),n+=4,o.ulUnicodeRange4=c.readUint(s,n),n+=4,o.achVendID=[c.readInt8(s,n),c.readInt8(s,n+1),c.readInt8(s,n+2),c.readInt8(s,n+3)],n+=4,o.fsSelection=c.readUshort(s,n),n+=2,o.usFirstCharIndex=c.readUshort(s,n),n+=2,o.usLastCharIndex=c.readUshort(s,n),n+=2,o.sTypoAscender=c.readShort(s,n),n+=2,o.sTypoDescender=c.readShort(s,n),n+=2,o.sTypoLineGap=c.readShort(s,n),n+=2,o.usWinAscent=c.readUshort(s,n),n+=2,o.usWinDescent=c.readUshort(s,n),n+=2},t["OS/2"].version1=function(s,n,o){var c=t._bin;return n=t["OS/2"].version0(s,n,o),o.ulCodePageRange1=c.readUint(s,n),n+=4,o.ulCodePageRange2=c.readUint(s,n),n+=4},t["OS/2"].version2=function(s,n,o){var c=t._bin;return n=t["OS/2"].version1(s,n,o),o.sxHeight=c.readShort(s,n),n+=2,o.sCapHeight=c.readShort(s,n),n+=2,o.usDefault=c.readUshort(s,n),n+=2,o.usBreak=c.readUshort(s,n),n+=2,o.usMaxContext=c.readUshort(s,n),n+=2},t["OS/2"].version5=function(s,n,o){var c=t._bin;return n=t["OS/2"].version2(s,n,o),o.usLowerOpticalPointSize=c.readUshort(s,n),n+=2,o.usUpperOpticalPointSize=c.readUshort(s,n),n+=2},t.post={},t.post.parse=function(s,n,o){var c=t._bin,i={};return i.version=c.readFixed(s,n),n+=4,i.italicAngle=c.readFixed(s,n),n+=4,i.underlinePosition=c.readShort(s,n),n+=2,i.underlineThickness=c.readShort(s,n),n+=2,i},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(s,n){var o=s.cmap,c=-1;if(o.p0e4!=null?c=o.p0e4:o.p3e1!=null?c=o.p3e1:o.p1e0!=null?c=o.p1e0:o.p0e3!=null&&(c=o.p0e3),c==-1)throw"no familiar platform and encoding!";var i=o.tables[c];if(i.format==0)return n>=i.map.length?0:i.map[n];if(i.format==4){for(var l=-1,u=0;u<i.endCount.length;u++)if(n<=i.endCount[u]){l=u;break}return l==-1||i.startCount[l]>n?0:65535&(i.idRangeOffset[l]!=0?i.glyphIdArray[n-i.startCount[l]+(i.idRangeOffset[l]>>1)-(i.idRangeOffset.length-l)]:n+i.idDelta[l])}if(i.format==12){if(n>i.groups[i.groups.length-1][1])return 0;for(u=0;u<i.groups.length;u++){var d=i.groups[u];if(d[0]<=n&&n<=d[1])return d[2]+(n-d[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(s,n){var o={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[n]){var c=s.SVG.entries[n];return c==null?o:(typeof c=="string"&&(c=t.SVG.toPath(c),s.SVG.entries[n]=c),c)}if(s.CFF){var i={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},l=s.CFF,u=s.CFF.Private;if(l.ROS){for(var d=0;l.FDSelect[d+2]<=n;)d+=2;u=l.FDArray[l.FDSelect[d+1]].Private}t.U._drawCFF(s.CFF.CharStrings[n],i,l,u,o)}else s.glyf&&t.U._drawGlyf(n,s,o);return o},t.U._drawGlyf=function(s,n,o){var c=n.glyf[s];c==null&&(c=n.glyf[s]=t.glyf._parseGlyf(n,s)),c!=null&&(c.noc>-1?t.U._simpleGlyph(c,o):t.U._compoGlyph(c,n,o))},t.U._simpleGlyph=function(s,n){for(var o=0;o<s.noc;o++){for(var c=o==0?0:s.endPts[o-1]+1,i=s.endPts[o],l=c;l<=i;l++){var u=l==c?i:l-1,d=l==i?c:l+1,m=1&s.flags[l],h=1&s.flags[u],v=1&s.flags[d],g=s.xs[l],y=s.ys[l];if(l==c)if(m){if(!h){t.U.P.moveTo(n,g,y);continue}t.U.P.moveTo(n,s.xs[u],s.ys[u])}else h?t.U.P.moveTo(n,s.xs[u],s.ys[u]):t.U.P.moveTo(n,(s.xs[u]+g)/2,(s.ys[u]+y)/2);m?h&&t.U.P.lineTo(n,g,y):v?t.U.P.qcurveTo(n,g,y,s.xs[d],s.ys[d]):t.U.P.qcurveTo(n,g,y,(g+s.xs[d])/2,(y+s.ys[d])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(s,n,o){for(var c=0;c<s.parts.length;c++){var i={cmds:[],crds:[]},l=s.parts[c];t.U._drawGlyf(l.glyphIndex,n,i);for(var u=l.m,d=0;d<i.crds.length;d+=2){var m=i.crds[d],h=i.crds[d+1];o.crds.push(m*u.a+h*u.b+u.tx),o.crds.push(m*u.c+h*u.d+u.ty)}for(d=0;d<i.cmds.length;d++)o.cmds.push(i.cmds[d])}},t.U._getGlyphClass=function(s,n){var o=t._lctf.getInterval(n,s);return o==-1?0:n[o+2]},t.U._applySubs=function(s,n,o,c){for(var i=s.length-n-1,l=0;l<o.tabs.length;l++)if(o.tabs[l]!=null){var u,d=o.tabs[l];if(!d.coverage||(u=t._lctf.coverageIndex(d.coverage,s[n]))!=-1){if(o.ltype==1)s[n],d.fmt==1?s[n]=s[n]+d.delta:s[n]=d.newg[u];else if(o.ltype==4)for(var m=d.vals[u],h=0;h<m.length;h++){var v=m[h],g=v.chain.length;if(!(g>i)){for(var y=!0,x=0,w=0;w<g;w++){for(;s[n+x+(1+w)]==-1;)x++;v.chain[w]!=s[n+x+(1+w)]&&(y=!1)}if(y){for(s[n]=v.nglyph,w=0;w<g+x;w++)s[n+w+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var _=t._lctf.getInterval(d.cDef,s[n]),N=d.cDef[_+2],U=d.scset[N],k=0;k<U.length;k++){var D=U[k],A=D.input;if(!(A.length>i)){for(y=!0,w=0;w<A.length;w++){var V=t._lctf.getInterval(d.cDef,s[n+1+w]);if(_==-1&&d.cDef[V+2]!=A[w]){y=!1;break}}if(y){var R=D.substLookupRecords;for(h=0;h<R.length;h+=2)R[h],R[h+1]}}}else if(o.ltype==6&&d.fmt==3){if(!t.U._glsCovered(s,d.backCvg,n-d.backCvg.length)||!t.U._glsCovered(s,d.inptCvg,n)||!t.U._glsCovered(s,d.ahedCvg,n+d.inptCvg.length))continue;var B=d.lookupRec;for(k=0;k<B.length;k+=2){_=B[k];var j=c[B[k+1]];t.U._applySubs(s,n+_,j,c)}}}}},t.U._glsCovered=function(s,n,o){for(var c=0;c<n.length;c++)if(t._lctf.coverageIndex(n[c],s[o+c])==-1)return!1;return!0},t.U.glyphsToPath=function(s,n,o){for(var c={cmds:[],crds:[]},i=0,l=0;l<n.length;l++){var u=n[l];if(u!=-1){for(var d=l<n.length-1&&n[l+1]!=-1?n[l+1]:0,m=t.U.glyphToPath(s,u),h=0;h<m.crds.length;h+=2)c.crds.push(m.crds[h]+i),c.crds.push(m.crds[h+1]);for(o&&c.cmds.push(o),h=0;h<m.cmds.length;h++)c.cmds.push(m.cmds[h]);o&&c.cmds.push("X"),i+=s.hmtx.aWidth[u],l<n.length-1&&(i+=t.U.getPairAdjustment(s,u,d))}}return c},t.U.P={},t.U.P.moveTo=function(s,n,o){s.cmds.push("M"),s.crds.push(n,o)},t.U.P.lineTo=function(s,n,o){s.cmds.push("L"),s.crds.push(n,o)},t.U.P.curveTo=function(s,n,o,c,i,l,u){s.cmds.push("C"),s.crds.push(n,o,c,i,l,u)},t.U.P.qcurveTo=function(s,n,o,c,i){s.cmds.push("Q"),s.crds.push(n,o,c,i)},t.U.P.closePath=function(s){s.cmds.push("Z")},t.U._drawCFF=function(s,n,o,c,i){for(var l=n.stack,u=n.nStems,d=n.haveWidth,m=n.width,h=n.open,v=0,g=n.x,y=n.y,x=0,w=0,_=0,N=0,U=0,k=0,D=0,A=0,V=0,R=0,B={val:0,size:0};v<s.length;){t.CFF.getCharString(s,v,B);var j=B.val;if(v+=B.size,j=="o1"||j=="o18")l.length%2!=0&&!d&&(m=l.shift()+c.nominalWidthX),u+=l.length>>1,l.length=0,d=!0;else if(j=="o3"||j=="o23")l.length%2!=0&&!d&&(m=l.shift()+c.nominalWidthX),u+=l.length>>1,l.length=0,d=!0;else if(j=="o4")l.length>1&&!d&&(m=l.shift()+c.nominalWidthX,d=!0),h&&t.U.P.closePath(i),y+=l.pop(),t.U.P.moveTo(i,g,y),h=!0;else if(j=="o5")for(;l.length>0;)g+=l.shift(),y+=l.shift(),t.U.P.lineTo(i,g,y);else if(j=="o6"||j=="o7")for(var P=l.length,p=j=="o6",C=0;C<P;C++){var E=l.shift();p?g+=E:y+=E,p=!p,t.U.P.lineTo(i,g,y)}else if(j=="o8"||j=="o24"){P=l.length;for(var L=0;L+6<=P;)x=g+l.shift(),w=y+l.shift(),_=x+l.shift(),N=w+l.shift(),g=_+l.shift(),y=N+l.shift(),t.U.P.curveTo(i,x,w,_,N,g,y),L+=6;j=="o24"&&(g+=l.shift(),y+=l.shift(),t.U.P.lineTo(i,g,y))}else{if(j=="o11")break;if(j=="o1234"||j=="o1235"||j=="o1236"||j=="o1237")j=="o1234"&&(w=y,_=(x=g+l.shift())+l.shift(),R=N=w+l.shift(),k=N,A=y,g=(D=(U=(V=_+l.shift())+l.shift())+l.shift())+l.shift(),t.U.P.curveTo(i,x,w,_,N,V,R),t.U.P.curveTo(i,U,k,D,A,g,y)),j=="o1235"&&(x=g+l.shift(),w=y+l.shift(),_=x+l.shift(),N=w+l.shift(),V=_+l.shift(),R=N+l.shift(),U=V+l.shift(),k=R+l.shift(),D=U+l.shift(),A=k+l.shift(),g=D+l.shift(),y=A+l.shift(),l.shift(),t.U.P.curveTo(i,x,w,_,N,V,R),t.U.P.curveTo(i,U,k,D,A,g,y)),j=="o1236"&&(x=g+l.shift(),w=y+l.shift(),_=x+l.shift(),R=N=w+l.shift(),k=N,D=(U=(V=_+l.shift())+l.shift())+l.shift(),A=k+l.shift(),g=D+l.shift(),t.U.P.curveTo(i,x,w,_,N,V,R),t.U.P.curveTo(i,U,k,D,A,g,y)),j=="o1237"&&(x=g+l.shift(),w=y+l.shift(),_=x+l.shift(),N=w+l.shift(),V=_+l.shift(),R=N+l.shift(),U=V+l.shift(),k=R+l.shift(),D=U+l.shift(),A=k+l.shift(),Math.abs(D-g)>Math.abs(A-y)?g=D+l.shift():y=A+l.shift(),t.U.P.curveTo(i,x,w,_,N,V,R),t.U.P.curveTo(i,U,k,D,A,g,y));else if(j=="o14"){if(l.length>0&&!d&&(m=l.shift()+o.nominalWidthX,d=!0),l.length==4){var G=l.shift(),S=l.shift(),T=l.shift(),b=l.shift(),M=t.CFF.glyphBySE(o,T),z=t.CFF.glyphBySE(o,b);t.U._drawCFF(o.CharStrings[M],n,o,c,i),n.x=G,n.y=S,t.U._drawCFF(o.CharStrings[z],n,o,c,i)}h&&(t.U.P.closePath(i),h=!1)}else if(j=="o19"||j=="o20")l.length%2!=0&&!d&&(m=l.shift()+c.nominalWidthX),u+=l.length>>1,l.length=0,d=!0,v+=u+7>>3;else if(j=="o21")l.length>2&&!d&&(m=l.shift()+c.nominalWidthX,d=!0),y+=l.pop(),g+=l.pop(),h&&t.U.P.closePath(i),t.U.P.moveTo(i,g,y),h=!0;else if(j=="o22")l.length>1&&!d&&(m=l.shift()+c.nominalWidthX,d=!0),g+=l.pop(),h&&t.U.P.closePath(i),t.U.P.moveTo(i,g,y),h=!0;else if(j=="o25"){for(;l.length>6;)g+=l.shift(),y+=l.shift(),t.U.P.lineTo(i,g,y);x=g+l.shift(),w=y+l.shift(),_=x+l.shift(),N=w+l.shift(),g=_+l.shift(),y=N+l.shift(),t.U.P.curveTo(i,x,w,_,N,g,y)}else if(j=="o26")for(l.length%2&&(g+=l.shift());l.length>0;)x=g,w=y+l.shift(),g=_=x+l.shift(),y=(N=w+l.shift())+l.shift(),t.U.P.curveTo(i,x,w,_,N,g,y);else if(j=="o27")for(l.length%2&&(y+=l.shift());l.length>0;)w=y,_=(x=g+l.shift())+l.shift(),N=w+l.shift(),g=_+l.shift(),y=N,t.U.P.curveTo(i,x,w,_,N,g,y);else if(j=="o10"||j=="o29"){var F=j=="o10"?c:o;if(l.length==0)console.debug("error: empty stack");else{var O=l.pop(),$=F.Subrs[O+F.Bias];n.x=g,n.y=y,n.nStems=u,n.haveWidth=d,n.width=m,n.open=h,t.U._drawCFF($,n,o,c,i),g=n.x,y=n.y,u=n.nStems,d=n.haveWidth,m=n.width,h=n.open}}else if(j=="o30"||j=="o31"){var W=l.length,Y=(L=0,j=="o31");for(L+=W-(P=-3&W);L<P;)Y?(w=y,_=(x=g+l.shift())+l.shift(),y=(N=w+l.shift())+l.shift(),P-L==5?(g=_+l.shift(),L++):g=_,Y=!1):(x=g,w=y+l.shift(),_=x+l.shift(),N=w+l.shift(),g=_+l.shift(),P-L==5?(y=N+l.shift(),L++):y=N,Y=!0),t.U.P.curveTo(i,x,w,_,N,g,y),L+=4}else{if((j+"").charAt(0)=="o")throw console.debug("Unknown operation: "+j,s),j;l.push(j)}}}n.x=g,n.y=y,n.nStems=u,n.haveWidth=d,n.width=m,n.open=h};var a=t,r={Typr:a};return e.Typr=a,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e})({}).Typr}function Yp(){return(function(e){var t=Uint8Array,a=Uint16Array,r=Uint32Array,s=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(j,P){for(var p=new a(31),C=0;C<31;++C)p[C]=P+=1<<j[C-1];var E=new r(p[30]);for(C=1;C<30;++C)for(var L=p[C];L<p[C+1];++L)E[L]=L-p[C]<<5|C;return[p,E]},i=c(s,2),l=i[0],u=i[1];l[28]=258,u[258]=28;for(var d=c(n,0)[0],m=new a(32768),h=0;h<32768;++h){var v=(43690&h)>>>1|(21845&h)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,m[h]=((65280&v)>>>8|(255&v)<<8)>>>1}var g=function(j,P,p){for(var C=j.length,E=0,L=new a(P);E<C;++E)++L[j[E]-1];var G,S=new a(P);for(E=0;E<P;++E)S[E]=S[E-1]+L[E-1]<<1;{G=new a(1<<P);var T=15-P;for(E=0;E<C;++E)if(j[E])for(var b=E<<4|j[E],M=P-j[E],z=S[j[E]-1]++<<M,F=z|(1<<M)-1;z<=F;++z)G[m[z]>>>T]=b}return G},y=new t(288);for(h=0;h<144;++h)y[h]=8;for(h=144;h<256;++h)y[h]=9;for(h=256;h<280;++h)y[h]=7;for(h=280;h<288;++h)y[h]=8;var x=new t(32);for(h=0;h<32;++h)x[h]=5;var w=g(y,9),_=g(x,5),N=function(j){for(var P=j[0],p=1;p<j.length;++p)j[p]>P&&(P=j[p]);return P},U=function(j,P,p){var C=P/8|0;return(j[C]|j[C+1]<<8)>>(7&P)&p},k=function(j,P){var p=P/8|0;return(j[p]|j[p+1]<<8|j[p+2]<<16)>>(7&P)},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(j,P,p){var C=new Error(P||D[j]);if(C.code=j,Error.captureStackTrace&&Error.captureStackTrace(C,A),!p)throw C;return C},V=function(j,P,p){var C=j.length;if(!C||p&&!p.l&&C<5)return P||new t(0);var E=!P||p,L=!p||p.i;p||(p={}),P||(P=new t(3*C));var G,S=function(de){var Ue=P.length;if(de>Ue){var Me=new t(Math.max(2*Ue,de));Me.set(P),P=Me}},T=p.f||0,b=p.p||0,M=p.b||0,z=p.l,F=p.d,O=p.m,$=p.n,W=8*C;do{if(!z){p.f=T=U(j,b,1);var Y=U(j,b+1,3);if(b+=3,!Y){var Z=j[(re=((G=b)/8|0)+(7&G&&1)+4)-4]|j[re-3]<<8,Q=re+Z;if(Q>C){L&&A(0);break}E&&S(M+Z),P.set(j.subarray(re,Q),M),p.b=M+=Z,p.p=b=8*Q;continue}if(Y==1)z=w,F=_,O=9,$=5;else if(Y==2){var J=U(j,b,31)+257,q=U(j,b+10,15)+4,pe=J+U(j,b+5,31)+1;b+=14;for(var ie=new t(pe),ee=new t(19),ae=0;ae<q;++ae)ee[o[ae]]=U(j,b+3*ae,7);b+=3*q;var te=N(ee),H=(1<<te)-1,se=g(ee,te);for(ae=0;ae<pe;){var re,K=se[U(j,b,H)];if(b+=15&K,(re=K>>>4)<16)ie[ae++]=re;else{var ve=0,oe=0;for(re==16?(oe=3+U(j,b,3),b+=2,ve=ie[ae-1]):re==17?(oe=3+U(j,b,7),b+=3):re==18&&(oe=11+U(j,b,127),b+=7);oe--;)ie[ae++]=ve}}var ce=ie.subarray(0,J),ne=ie.subarray(J);O=N(ce),$=N(ne),z=g(ce,O),F=g(ne,$)}else A(1);if(b>W){L&&A(0);break}}E&&S(M+131072);for(var De=(1<<O)-1,le=(1<<$)-1,ue=b;;ue=b){var me=(ve=z[k(j,b)&De])>>>4;if((b+=15&ve)>W){L&&A(0);break}if(ve||A(2),me<256)P[M++]=me;else{if(me==256){ue=b,z=null;break}var ye=me-254;if(me>264){var be=s[ae=me-257];ye=U(j,b,(1<<be)-1)+l[ae],b+=be}var Ce=F[k(j,b)&le],Ne=Ce>>>4;if(Ce||A(3),b+=15&Ce,ne=d[Ne],Ne>3&&(be=n[Ne],ne+=k(j,b)&(1<<be)-1,b+=be),b>W){L&&A(0);break}E&&S(M+131072);for(var xe=M+ye;M<xe;M+=4)P[M]=P[M-ne],P[M+1]=P[M+1-ne],P[M+2]=P[M+2-ne],P[M+3]=P[M+3-ne];M=xe}}p.l=z,p.p=ue,p.b=M,z&&(T=1,p.m=O,p.d=F,p.n=$)}while(!T);return M==P.length?P:(function(de,Ue,Me){(Me==null||Me>de.length)&&(Me=de.length);var Oe=new(de instanceof a?a:de instanceof r?r:t)(Me-Ue);return Oe.set(de.subarray(Ue,Me)),Oe})(P,0,M)},R=new t(0),B=typeof TextDecoder<"u"&&new TextDecoder;try{B.decode(R,{stream:!0})}catch{}return e.convert_streams=function(j){var P=new DataView(j),p=0;function C(){var J=P.getUint16(p);return p+=2,J}function E(){var J=P.getUint32(p);return p+=4,J}function L(J){Z.setUint16(Q,J),Q+=2}function G(J){Z.setUint32(Q,J),Q+=4}for(var S={signature:E(),flavor:E(),length:E(),numTables:C(),reserved:C(),totalSfntSize:E(),majorVersion:C(),minorVersion:C(),metaOffset:E(),metaLength:E(),metaOrigLength:E(),privOffset:E(),privLength:E()},T=0;Math.pow(2,T)<=S.numTables;)T++;T--;for(var b=16*Math.pow(2,T),M=16*S.numTables-b,z=12,F=[],O=0;O<S.numTables;O++)F.push({tag:E(),offset:E(),compLength:E(),origLength:E(),origChecksum:E()}),z+=16;var $,W=new Uint8Array(12+16*F.length+F.reduce((function(J,q){return J+q.origLength+4}),0)),Y=W.buffer,Z=new DataView(Y),Q=0;return G(S.flavor),L(S.numTables),L(b),L(T),L(M),F.forEach((function(J){G(J.tag),G(J.origChecksum),G(z),G(J.origLength),J.outOffset=z,(z+=J.origLength)%4!=0&&(z+=4-z%4)})),F.forEach((function(J){var q,pe=j.slice(J.offset,J.offset+J.compLength);if(J.compLength!=J.origLength){var ie=new Uint8Array(J.origLength);q=new Uint8Array(pe,2),V(q,ie)}else ie=new Uint8Array(pe);W.set(ie,J.outOffset);var ee=0;(z=J.outOffset+J.origLength)%4!=0&&(ee=4-z%4),W.set(new Uint8Array(ee).buffer,J.outOffset+J.origLength),$=z+ee})),Y.slice(0,$)},Object.defineProperty(e,"__esModule",{value:!0}),e})({}).convert_streams}function qp(e,t){const a={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,n=2,o=4,c=8,i=16,l=32;let u;function d(D){if(!u){const A={R:n,L:s,D:o,C:i,U:l,T:c};u=new Map;for(let V in r){let R=0;r[V].split(",").forEach(B=>{let[j,P]=B.split("+");j=parseInt(j,36),P=P?parseInt(P,36):0,u.set(R+=j,A[V]);for(let p=P;p--;)u.set(++R,A[V])})}}return u.get(D)||l}const m=1,h=2,v=3,g=4,y=[null,"isol","init","fina","medi"];function x(D){const A=new Uint8Array(D.length);let V=l,R=m,B=-1;for(let j=0;j<D.length;j++){const P=D.codePointAt(j);let p=d(P)|0,C=m;p&c||(V&(s|o|i)?p&(n|o|i)?(C=v,(R===m||R===v)&&A[B]++):p&(s|l)&&(R===h||R===g)&&A[B]--:V&(n|l)&&(R===h||R===g)&&A[B]--,R=A[j]=C,V=p,B=j,P>65535&&j++)}return A}function w(D,A){const V=[];for(let B=0;B<A.length;B++){const j=A.codePointAt(B);j>65535&&B++,V.push(e.U.codeToGlyph(D,j))}const R=D.GSUB;if(R){const{lookupList:B,featureList:j}=R;let P;const p=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,C=[];j.forEach(E=>{if(p.test(E.tag))for(let L=0;L<E.tab.length;L++){if(C[E.tab[L]])continue;C[E.tab[L]]=!0;const G=B[E.tab[L]],S=/^(isol|init|fina|medi)$/.test(E.tag);S&&!P&&(P=x(A));for(let T=0;T<V.length;T++)(!P||!S||y[P[T]]===E.tag)&&e.U._applySubs(V,T,G,B)}})}return V}function _(D,A){const V=new Int16Array(A.length*3);let R=0;for(;R<A.length;R++){const p=A[R];if(p===-1)continue;V[R*3+2]=D.hmtx.aWidth[p];const C=D.GPOS;if(C){const E=C.lookupList;for(let L=0;L<E.length;L++){const G=E[L];for(let S=0;S<G.tabs.length;S++){const T=G.tabs[S];if(G.ltype===1){if(e._lctf.coverageIndex(T.coverage,p)!==-1&&T.pos){P(T.pos,R);break}}else if(G.ltype===2){let b=null,M=B();if(M!==-1){const z=e._lctf.coverageIndex(T.coverage,A[M]);if(z!==-1){if(T.fmt===1){const F=T.pairsets[z];for(let O=0;O<F.length;O++)F[O].gid2===p&&(b=F[O])}else if(T.fmt===2){const F=e.U._getGlyphClass(A[M],T.classDef1),O=e.U._getGlyphClass(p,T.classDef2);b=T.matrix[F][O]}if(b){b.val1&&P(b.val1,M),b.val2&&P(b.val2,R);break}}}}else if(G.ltype===4){const b=e._lctf.coverageIndex(T.markCoverage,p);if(b!==-1){const M=B(j),z=M===-1?-1:e._lctf.coverageIndex(T.baseCoverage,A[M]);if(z!==-1){const F=T.markArray[b],O=T.baseArray[z][F.markClass];V[R*3]=O.x-F.x+V[M*3]-V[M*3+2],V[R*3+1]=O.y-F.y+V[M*3+1];break}}}else if(G.ltype===6){const b=e._lctf.coverageIndex(T.mark1Coverage,p);if(b!==-1){const M=B();if(M!==-1){const z=A[M];if(N(D,z)===3){const F=e._lctf.coverageIndex(T.mark2Coverage,z);if(F!==-1){const O=T.mark1Array[b],$=T.mark2Array[F][O.markClass];V[R*3]=$.x-O.x+V[M*3]-V[M*3+2],V[R*3+1]=$.y-O.y+V[M*3+1];break}}}}}}}}else if(D.kern&&!D.cff){const E=B();if(E!==-1){const L=D.kern.glyph1.indexOf(A[E]);if(L!==-1){const G=D.kern.rval[L].glyph2.indexOf(p);G!==-1&&(V[E*3+2]+=D.kern.rval[L].vals[G])}}}}return V;function B(p){for(let C=R-1;C>=0;C--)if(A[C]!==-1&&(!p||p(A[C])))return C;return-1}function j(p){return N(D,p)===1}function P(p,C){for(let E=0;E<3;E++)V[C*3+E]+=p[E]||0}}function N(D,A){const V=D.GDEF&&D.GDEF.glyphClassDef;return V?e.U._getGlyphClass(A,V):0}function U(...D){for(let A=0;A<D.length;A++)if(typeof D[A]=="number")return D[A]}function k(D){const A=Object.create(null),V=D["OS/2"],R=D.hhea,B=D.head.unitsPerEm,j=U(V&&V.sTypoAscender,R&&R.ascender,B),P={unitsPerEm:B,ascender:j,descender:U(V&&V.sTypoDescender,R&&R.descender,0),capHeight:U(V&&V.sCapHeight,j),xHeight:U(V&&V.sxHeight,j),lineGap:U(V&&V.sTypoLineGap,R&&R.lineGap),supportsCodePoint(p){return e.U.codeToGlyph(D,p)>0},forEachGlyph(p,C,E,L){let G=0;const S=1/P.unitsPerEm*C,T=w(D,p);let b=0;const M=_(D,T);return T.forEach((z,F)=>{if(z!==-1){let O=A[z];if(!O){const{cmds:$,crds:W}=e.U.glyphToPath(D,z);let Y="",Z=0;for(let ie=0,ee=$.length;ie<ee;ie++){const ae=a[$[ie]];Y+=$[ie];for(let te=1;te<=ae;te++)Y+=(te>1?",":"")+W[Z++]}let Q,J,q,pe;if(W.length){Q=J=1/0,q=pe=-1/0;for(let ie=0,ee=W.length;ie<ee;ie+=2){let ae=W[ie],te=W[ie+1];ae<Q&&(Q=ae),te<J&&(J=te),ae>q&&(q=ae),te>pe&&(pe=te)}}else Q=q=J=pe=0;O=A[z]={index:z,advanceWidth:D.hmtx.aWidth[z],xMin:Q,yMin:J,xMax:q,yMax:pe,path:Y}}L.call(null,O,G+M[F*3]*S,M[F*3+1]*S,b),G+=M[F*3+2]*S,E&&(G+=E*C)}b+=p.codePointAt(b)>65535?2:1}),G}};return P}return function(A){const V=new Uint8Array(A,0,4),R=e._bin.readASCII(V,0,4);if(R==="wOFF")A=t(A);else if(R==="wOF2")throw new Error("woff2 fonts not supported");return k(e.parse(A)[0])}}const Kp=hn({name:"Typr Font Parser",dependencies:[Xp,Yp,qp],init(e,t,a){const r=e(),s=t();return a(r,s)}});function Zp(){return(function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(_){var N=_>>5;this.buckets.set(N,(this.buckets.get(N)||0)|1<<(31&_))},t.prototype.has=function(_){var N=this.buckets.get(_>>5);return N!==void 0&&(N&1<<(31&_))!=0},t.prototype.serialize=function(){var _=[];return this.buckets.forEach((function(N,U){_.push((+U).toString(36)+":"+N.toString(36))})),_.join(",")},t.prototype.deserialize=function(_){var N=this;this.buckets.clear(),_.split(",").forEach((function(U){var k=U.split(":");N.buckets.set(parseInt(k[0],36),parseInt(k[1],36))}))};var a=Math.pow(2,8),r=a-1,s=~r;function n(_){var N=(function(k){return k&s})(_).toString(16),U=(function(k){return(k&s)+a-1})(_).toString(16);return"codepoint-index/plane"+(_>>16)+"/"+N+"-"+U+".json"}function o(_,N){var U=_&r,k=N.codePointAt(U/6|0);return((k=(k||48)-48)&1<<U%6)!=0}function c(_,N){var U;(U=_,U.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(k){return k.split("-").map((function(D){return parseInt(D.trim(),16)}))}))).forEach((function(k){var D=k[0],A=k[1];A===void 0&&(A=D),N(D,A)}))}function i(_,N){c(_,(function(U,k){for(var D=U;D<=k;D++)N(D)}))}var l={},u={},d=new WeakMap,m="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(_){var N=d.get(_);return N||(N=new t,i(_.ranges,(function(U){return N.add(U)})),d.set(_,N)),N}var v,g=new Map;function y(_,N,U){return _[N]?N:_[U]?U:(function(k){for(var D in k)return D})(_)}function x(_,N){var U=N;if(!_.includes(U)){U=1/0;for(var k=0;k<_.length;k++)Math.abs(_[k]-N)<Math.abs(U-N)&&(U=_[k])}return U}function w(_){return v||(v=new Set,i("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(N){v.add(N)}))),v.has(_)}return e.CodePointSet=t,e.clearCache=function(){l={},u={}},e.getFontsForString=function(_,N){N===void 0&&(N={});var U,k=N.lang;k===void 0&&(k=new RegExp("\\p{Script=Hangul}","u").test(U=_)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(U)?"ja":"en");var D=N.category;D===void 0&&(D="sans-serif");var A=N.style;A===void 0&&(A="normal");var V=N.weight;V===void 0&&(V=400);var R=(N.dataUrl||m).replace(/\/$/g,""),B=new Map,j=new Uint8Array(_.length),P={},p={},C=new Array(_.length),E=new Map,L=!1;function G(b){var M=g.get(b);return M||(M=fetch(R+"/"+b).then((function(z){if(!z.ok)throw new Error(z.statusText);return z.json().then((function(F){if(!Array.isArray(F)||F[0]!==1)throw new Error("Incorrect schema version; need 1, got "+F[0]);return F[1]}))})).catch((function(z){if(R!==m)return L||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+R+'", trying default CDN. '+z.message),L=!0),R=m,g.delete(b),G(b);throw z})),g.set(b,M)),M}for(var S=function(b){var M=_.codePointAt(b),z=n(M);C[b]=z,l[z]||E.has(z)||E.set(z,G(z).then((function(F){l[z]=F}))),M>65535&&(b++,T=b)},T=0;T<_.length;T++)S(T);return Promise.all(E.values()).then((function(){E.clear();for(var b=function(z){var F=_.codePointAt(z),O=null,$=l[C[z]],W=void 0;for(var Y in $){var Z=p[Y];if(Z===void 0&&(Z=p[Y]=new RegExp(Y).test(k||"en")),Z){for(var Q in W=Y,$[Y])if(o(F,$[Y][Q])){O=Q;break}break}}if(!O){e:for(var J in $)if(J!==W){for(var q in $[J])if(o(F,$[J][q])){O=q;break e}}}O||(console.debug("No font coverage for U+"+F.toString(16)),O="latin"),C[z]=O,u[O]||E.has(O)||E.set(O,G("font-meta/"+O+".json").then((function(pe){u[O]=pe}))),F>65535&&(z++,M=z)},M=0;M<_.length;M++)b(M);return Promise.all(E.values())})).then((function(){for(var b,M=null,z=0;z<_.length;z++){var F=_.codePointAt(z);if(M&&(w(F)||h(M).has(F)))j[z]=j[z-1];else{M=u[C[z]];var O=P[M.id];if(!O){var $=M.typeforms,W=y($,D,"sans-serif"),Y=y($[W],A,"normal"),Z=x((b=$[W])===null||b===void 0?void 0:b[Y],V);O=P[M.id]=R+"/font-files/"+M.id+"/"+W+"."+Y+"."+Z+".woff"}var Q=B.get(O);Q==null&&(Q=B.size,B.set(O,Q)),j[z]=Q}F>65535&&(z++,j[z]=j[z-1])}return{fontUrls:Array.from(B.keys()),chars:j}}))},Object.defineProperty(e,"__esModule",{value:!0}),e})({})}function Jp(e,t){const a=Object.create(null),r=Object.create(null);function s(o,c){const i=l=>{console.error(`Failure loading font ${o}`,l)};try{const l=new XMLHttpRequest;l.open("get",o,!0),l.responseType="arraybuffer",l.onload=function(){if(l.status>=400)i(new Error(l.statusText));else if(l.status>0)try{const u=e(l.response);u.src=o,c(u)}catch(u){i(u)}},l.onerror=i,l.send()}catch(l){i(l)}}function n(o,c){let i=a[o];i?c(i):r[o]?r[o].push(c):(r[o]=[c],s(o,l=>{l.src=o,a[o]=l,r[o].forEach(u=>u(l)),delete r[o]}))}return function(o,c,{lang:i,fonts:l=[],style:u="normal",weight:d="normal",unicodeFontsURL:m}={}){const h=new Uint8Array(o.length),v=[];o.length||w();const g=new Map,y=[];if(u!=="italic"&&(u="normal"),typeof d!="number"&&(d=d==="bold"?700:400),l&&!Array.isArray(l)&&(l=[l]),l=l.slice().filter(N=>!N.lang||N.lang.test(i)).reverse(),l.length){let D=0;(function A(V=0){for(let R=V,B=o.length;R<B;R++){const j=o.codePointAt(R);if(D===1&&v[h[R-1]].supportsCodePoint(j)||R>0&&/\s/.test(o[R]))h[R]=h[R-1],D===2&&(y[y.length-1][1]=R);else for(let P=h[R],p=l.length;P<=p;P++)if(P===p){const C=D===2?y[y.length-1]:y[y.length]=[R,R];C[1]=R,D=2}else{h[R]=P;const{src:C,unicodeRange:E}=l[P];if(!E||_(j,E)){const L=a[C];if(!L){n(C,()=>{A(R)});return}if(L.supportsCodePoint(j)){let G=g.get(L);typeof G!="number"&&(G=v.length,v.push(L),g.set(L,G)),h[R]=G,D=1;break}}}j>65535&&R+1<B&&(h[R+1]=h[R],R++,D===2&&(y[y.length-1][1]=R))}x()})()}else y.push([0,o.length-1]),x();function x(){if(y.length){const N=y.map(U=>o.substring(U[0],U[1]+1)).join(`
`);t.getFontsForString(N,{lang:i||void 0,style:u,weight:d,dataUrl:m}).then(({fontUrls:U,chars:k})=>{const D=v.length;let A=0;y.forEach(R=>{for(let B=0,j=R[1]-R[0];B<=j;B++)h[R[0]+B]=k[A++]+D;A++});let V=0;U.forEach((R,B)=>{n(R,j=>{v[B+D]=j,++V===U.length&&w()})})})}else w()}function w(){c({chars:h,fonts:v})}function _(N,U){for(let k=0;k<U.length;k++){const[D,A=D]=U[k];if(D<=N&&N<=A)return!0}return!1}}}const Qp=hn({name:"FontResolver",dependencies:[Jp,Kp,Zp],init(e,t,a){return e(t,a())}});function e0(e,t){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",n=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:v,lang:g,fonts:y,style:x,weight:w,preResolvedFonts:_,unicodeFontsURL:N},U){const k=({chars:D,fonts:A})=>{let V,R;const B=[];for(let j=0;j<D.length;j++)D[j]!==R?(R=D[j],B.push(V={start:j,end:j,fontObj:A[D[j]]})):V.end=j;U(B)};_?k(_):e(v,k,{lang:g,fonts:y,style:x,weight:w,unicodeFontsURL:N})}function c({text:v="",font:g,lang:y,sdfGlyphSize:x=64,fontSize:w=400,fontWeight:_=1,fontStyle:N="normal",letterSpacing:U=0,lineHeight:k="normal",maxWidth:D=1/0,direction:A,textAlign:V="left",textIndent:R=0,whiteSpace:B="normal",overflowWrap:j="normal",anchorX:P=0,anchorY:p=0,metricsOnly:C=!1,unicodeFontsURL:E,preResolvedFonts:L=null,includeCaretPositions:G=!1,chunkedBoundsSize:S=8192,colorRanges:T=null},b){const M=d(),z={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),w=+w,U=+U,D=+D,k=k||"normal",R=+R,o({text:v,lang:y,style:N,weight:_,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:E,preResolvedFonts:L},F=>{z.fontLoad=d()-M;const O=isFinite(D);let $=null,W=null,Y=null,Z=null,Q=null,J=null,q=null,pe=null,ie=0,ee=0,ae=B!=="nowrap";const te=new Map,H=d();let se=R,re=0,K=new m;const ve=[K];F.forEach(le=>{const{fontObj:ue}=le,{ascender:me,descender:ye,unitsPerEm:be,lineGap:Ce,capHeight:Ne,xHeight:xe}=ue;let de=te.get(ue);if(!de){const ge=w/be,je=k==="normal"?(me-ye+Ce)*ge:k*w,tt=(je-(me-ye)*ge)/2,Se=Math.min(je,(me-ye)*ge),_e=(me+ye)/2*ge+Se/2;de={index:te.size,src:ue.src,fontObj:ue,fontSizeMult:ge,unitsPerEm:be,ascender:me*ge,descender:ye*ge,capHeight:Ne*ge,xHeight:xe*ge,lineHeight:je,baseline:-tt-me*ge,caretTop:_e,caretBottom:_e-Se},te.set(ue,de)}const{fontSizeMult:Ue}=de,Me=v.slice(le.start,le.end+1);let Oe,Ae;ue.forEachGlyph(Me,w,U,(ge,je,tt,Se)=>{je+=re,Se+=le.start,Oe=je,Ae=ge;const _e=v.charAt(Se),Pe=ge.advanceWidth*Ue,ke=K.count;let we;if("isEmpty"in ge||(ge.isWhitespace=!!_e&&new RegExp(s).test(_e),ge.canBreakAfter=!!_e&&n.test(_e),ge.isEmpty=ge.xMin===ge.xMax||ge.yMin===ge.yMax||r.test(_e)),!ge.isWhitespace&&!ge.isEmpty&&ee++,ae&&O&&!ge.isWhitespace&&je+Pe+se>D&&ke){if(K.glyphAt(ke-1).glyphObj.canBreakAfter)we=new m,se=-je;else for(let Ge=ke;Ge--;)if(Ge===0&&j==="break-word"){we=new m,se=-je;break}else if(K.glyphAt(Ge).glyphObj.canBreakAfter){we=K.splitAt(Ge+1);const Le=we.glyphAt(0).x;se-=Le;for(let Ie=we.count;Ie--;)we.glyphAt(Ie).x-=Le;break}we&&(K.isSoftWrapped=!0,K=we,ve.push(K),ie=D)}let Te=K.glyphAt(K.count);Te.glyphObj=ge,Te.x=je+se,Te.y=tt,Te.width=Pe,Te.charIndex=Se,Te.fontData=de,_e===`
`&&(K=new m,ve.push(K),se=-(je+Pe+U*w)+R)}),re=Oe+Ae.advanceWidth*Ue+U*w});let oe=0;ve.forEach(le=>{let ue=!0;for(let me=le.count;me--;){const ye=le.glyphAt(me);ue&&!ye.glyphObj.isWhitespace&&(le.width=ye.x+ye.width,le.width>ie&&(ie=le.width),ue=!1);let{lineHeight:be,capHeight:Ce,xHeight:Ne,baseline:xe}=ye.fontData;be>le.lineHeight&&(le.lineHeight=be);const de=xe-le.baseline;de<0&&(le.baseline+=de,le.cap+=de,le.ex+=de),le.cap=Math.max(le.cap,le.baseline+Ce),le.ex=Math.max(le.ex,le.baseline+Ne)}le.baseline-=oe,le.cap-=oe,le.ex-=oe,oe+=le.lineHeight});let ce=0,ne=0;if(P&&(typeof P=="number"?ce=-P:typeof P=="string"&&(ce=-ie*(P==="left"?0:P==="center"?.5:P==="right"?1:l(P)))),p&&(typeof p=="number"?ne=-p:typeof p=="string"&&(ne=p==="top"?0:p==="top-baseline"?-ve[0].baseline:p==="top-cap"?-ve[0].cap:p==="top-ex"?-ve[0].ex:p==="middle"?oe/2:p==="bottom"?oe:p==="bottom-baseline"?-ve[ve.length-1].baseline:l(p)*oe)),!C){const le=t.getEmbeddingLevels(v,A);$=new Uint16Array(ee),W=new Uint8Array(ee),Y=new Float32Array(ee*2),Z={},q=[1/0,1/0,-1/0,-1/0],pe=[],G&&(J=new Float32Array(v.length*4)),T&&(Q=new Uint8Array(ee*3));let ue=0,me=-1,ye=-1,be,Ce;if(ve.forEach((Ne,xe)=>{let{count:de,width:Ue}=Ne;if(de>0){let Me=0;for(let Se=de;Se--&&Ne.glyphAt(Se).glyphObj.isWhitespace;)Me++;let Oe=0,Ae=0;if(V==="center")Oe=(ie-Ue)/2;else if(V==="right")Oe=ie-Ue;else if(V==="justify"&&Ne.isSoftWrapped){let Se=0;for(let _e=de-Me;_e--;)Ne.glyphAt(_e).glyphObj.isWhitespace&&Se++;Ae=(ie-Ue)/Se}if(Ae||Oe){let Se=0;for(let _e=0;_e<de;_e++){let Pe=Ne.glyphAt(_e);const ke=Pe.glyphObj;Pe.x+=Oe+Se,Ae!==0&&ke.isWhitespace&&_e<de-Me&&(Se+=Ae,Pe.width+=Ae)}}const ge=t.getReorderSegments(v,le,Ne.glyphAt(0).charIndex,Ne.glyphAt(Ne.count-1).charIndex);for(let Se=0;Se<ge.length;Se++){const[_e,Pe]=ge[Se];let ke=1/0,we=-1/0;for(let Te=0;Te<de;Te++)if(Ne.glyphAt(Te).charIndex>=_e){let Ge=Te,Le=Te;for(;Le<de;Le++){let Ie=Ne.glyphAt(Le);if(Ie.charIndex>Pe)break;Le<de-Me&&(ke=Math.min(ke,Ie.x),we=Math.max(we,Ie.x+Ie.width))}for(let Ie=Ge;Ie<Le;Ie++){const qe=Ne.glyphAt(Ie);qe.x=we-(qe.x+qe.width-ke)}break}}let je;const tt=Se=>je=Se;for(let Se=0;Se<de;Se++){const _e=Ne.glyphAt(Se);je=_e.glyphObj;const Pe=je.index,ke=le.levels[_e.charIndex]&1;if(ke){const we=t.getMirroredCharacter(v[_e.charIndex]);we&&_e.fontData.fontObj.forEachGlyph(we,0,0,tt)}if(G){const{charIndex:we,fontData:Te}=_e,Ge=_e.x+ce,Le=_e.x+_e.width+ce;J[we*4]=ke?Le:Ge,J[we*4+1]=ke?Ge:Le,J[we*4+2]=Ne.baseline+Te.caretBottom+ne,J[we*4+3]=Ne.baseline+Te.caretTop+ne;const Ie=we-me;Ie>1&&u(J,me,Ie),me=we}if(T){const{charIndex:we}=_e;for(;we>ye;)ye++,T.hasOwnProperty(ye)&&(Ce=T[ye])}if(!je.isWhitespace&&!je.isEmpty){const we=ue++,{fontSizeMult:Te,src:Ge,index:Le}=_e.fontData,Ie=Z[Ge]||(Z[Ge]={});Ie[Pe]||(Ie[Pe]={path:je.path,pathBounds:[je.xMin,je.yMin,je.xMax,je.yMax]});const qe=_e.x+ce,dt=_e.y+Ne.baseline+ne;Y[we*2]=qe,Y[we*2+1]=dt;const nt=qe+je.xMin*Te,mt=dt+je.yMin*Te,gt=qe+je.xMax*Te,st=dt+je.yMax*Te;nt<q[0]&&(q[0]=nt),mt<q[1]&&(q[1]=mt),gt>q[2]&&(q[2]=gt),st>q[3]&&(q[3]=st),we%S===0&&(be={start:we,end:we,rect:[1/0,1/0,-1/0,-1/0]},pe.push(be)),be.end++;const Be=be.rect;if(nt<Be[0]&&(Be[0]=nt),mt<Be[1]&&(Be[1]=mt),gt>Be[2]&&(Be[2]=gt),st>Be[3]&&(Be[3]=st),$[we]=Pe,W[we]=Le,T){const vt=we*3;Q[vt]=Ce>>16&255,Q[vt+1]=Ce>>8&255,Q[vt+2]=Ce&255}}}}}),J){const Ne=v.length-me;Ne>1&&u(J,me,Ne)}}const De=[];te.forEach(({index:le,src:ue,unitsPerEm:me,ascender:ye,descender:be,lineHeight:Ce,capHeight:Ne,xHeight:xe})=>{De[le]={src:ue,unitsPerEm:me,ascender:ye,descender:be,lineHeight:Ce,capHeight:Ne,xHeight:xe}}),z.typesetting=d()-H,b({glyphIds:$,glyphFontIndices:W,glyphPositions:Y,glyphData:Z,fontData:De,caretPositions:J,glyphColors:Q,chunkedBounds:pe,fontSize:w,topBaseline:ne+ve[0].baseline,blockBounds:[ce,ne-oe,ce+ie,ne],visibleBounds:q,timings:z})})}function i(v,g){c({...v,metricsOnly:!0},y=>{const[x,w,_,N]=y.blockBounds;g({width:_-x,height:N-w})})}function l(v){let g=v.match(/^([\d.]+)%$/),y=g?parseFloat(g[1]):NaN;return isNaN(y)?0:y/100}function u(v,g,y){const x=v[g*4],w=v[g*4+1],_=v[g*4+2],N=v[g*4+3],U=(w-x)/y;for(let k=0;k<y;k++){const D=(g+k)*4;v[D]=x+U*k,v[D+1]=x+U*(k+1),v[D+2]=_,v[D+3]=N}}function d(){return(self.performance||Date).now()}function m(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return m.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(v){let g=m.flyweight;return g.data=this.data,g.index=v,g},splitAt(v){let g=new m;return g.data=this.data.splice(v*h.length),g}},m.flyweight=h.reduce((v,g,y,x)=>(Object.defineProperty(v,g,{get(){return this.data[this.index*h.length+y]},set(w){this.data[this.index*h.length+y]=w}}),v),{data:null,index:0}),{typeset:c,measure:i}}const Ft=()=>(self.performance||Date).now(),$s=Ec();let Ir;function t0(e,t,a,r,s,n,o,c,i,l,u=!0){return u?s0(e,t,a,r,s,n,o,c,i,l).then(null,d=>(Ir||(console.warn("WebGL SDF generation failed, falling back to JS",d),Ir=!0),Fr(e,t,a,r,s,n,o,c,i,l))):Fr(e,t,a,r,s,n,o,c,i,l)}const Us=[],n0=5;let Wa=0;function Cc(){const e=Ft();for(;Us.length&&Ft()-e<n0;)Us.shift()();Wa=Us.length?setTimeout(Cc,0):0}const s0=(...e)=>new Promise((t,a)=>{Us.push(()=>{const r=Ft();try{$s.webgl.generateIntoCanvas(...e),t({timing:Ft()-r})}catch(s){a(s)}}),Wa||(Wa=setTimeout(Cc,0))}),a0=4,o0=2e3,zr={};let r0=0;function Fr(e,t,a,r,s,n,o,c,i,l){const u="TroikaTextSDFGenerator_JS_"+r0++%a0;let d=zr[u];return d||(d=zr[u]={workerModule:hn({name:u,workerId:u,dependencies:[Ec,Ft],init(m,h){const v=m().javascript.generate;return function(...g){const y=h();return{textureData:v(...g),timing:h()-y}}},getTransferables(m){return[m.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(e,t,a,r,s,n).then(({textureData:m,timing:h})=>{const v=Ft(),g=new Uint8Array(m.length*4);for(let y=0;y<m.length;y++)g[y*4+l]=m[y];return $s.webglUtils.renderImageData(o,g,c,i,e,t,1<<3-l),h+=Ft()-v,--d.requests===0&&(d.idleTimer=setTimeout(()=>{Ip(u)},o0)),{timing:h}})}function i0(e){e._warm||($s.webgl.isSupported(e),e._warm=!0)}const c0=$s.webglUtils.resizeWebGLCanvasWithoutClearing,Ln={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},l0=new mn;function sn(){return(self.performance||Date).now()}const Or=Object.create(null);function Uc(e,t){e=m0({},e);const a=sn(),r=[];if(e.font&&r.push({label:"user",src:f0(e.font)}),e.font=r,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||Ln.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||Ln.unicodeFontsURL,e.colorRanges!=null){let m={};for(let h in e.colorRanges)if(e.colorRanges.hasOwnProperty(h)){let v=e.colorRanges[h];typeof v!="number"&&(v=l0.set(v).getHex()),m[h]=v}e.colorRanges=m}Object.freeze(e);const{textureWidth:s,sdfExponent:n}=Ln,{sdfGlyphSize:o}=e,c=s/o*4;let i=Or[o];if(!i){const m=document.createElement("canvas");m.width=s,m.height=o*256/c,i=Or[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:m,sdfTexture:new Zc(m,void 0,void 0,void 0,ko,ko),contextLost:!1,glyphsByFont:new Map},i.sdfTexture.generateMipmaps=!1,u0(i)}const{sdfTexture:l,sdfCanvas:u}=i;Ac(e).then(m=>{const{glyphIds:h,glyphFontIndices:v,fontData:g,glyphPositions:y,fontSize:x,timings:w}=m,_=[],N=new Float32Array(h.length*4);let U=0,k=0;const D=sn(),A=g.map(P=>{let p=i.glyphsByFont.get(P.src);return p||i.glyphsByFont.set(P.src,p=new Map),p});h.forEach((P,p)=>{const C=v[p],{src:E,unitsPerEm:L}=g[C];let G=A[C].get(P);if(!G){const{path:z,pathBounds:F}=m.glyphData[E][P],O=Math.max(F[2]-F[0],F[3]-F[1])/o*(Ln.sdfMargin*o+.5),$=i.glyphCount++,W=[F[0]-O,F[1]-O,F[2]+O,F[3]+O];A[C].set(P,G={path:z,atlasIndex:$,sdfViewBox:W}),_.push(G)}const{sdfViewBox:S}=G,T=y[k++],b=y[k++],M=x/L;N[U++]=T+S[0]*M,N[U++]=b+S[1]*M,N[U++]=T+S[2]*M,N[U++]=b+S[3]*M,h[p]=G.atlasIndex}),w.quads=(w.quads||0)+(sn()-D);const V=sn();w.sdf={};const R=u.height,B=Math.ceil(i.glyphCount/c),j=Math.pow(2,Math.ceil(Math.log2(B*o)));j>R&&(console.info(`Increasing SDF texture size ${R}->${j}`),c0(u,s,j),l.dispose()),Promise.all(_.map(P=>jc(P,i,e.gpuAccelerateSDF).then(({timing:p})=>{w.sdf[P.atlasIndex]=p}))).then(()=>{_.length&&!i.contextLost&&(Mc(i),l.needsUpdate=!0),w.sdfTotal=sn()-V,w.total=sn()-a,t(Object.freeze({parameters:e,sdfTexture:l,sdfGlyphSize:o,sdfExponent:n,glyphBounds:N,glyphAtlasIndices:h,glyphColors:m.glyphColors,caretPositions:m.caretPositions,chunkedBounds:m.chunkedBounds,ascender:m.ascender,descender:m.descender,lineHeight:m.lineHeight,capHeight:m.capHeight,xHeight:m.xHeight,topBaseline:m.topBaseline,blockBounds:m.blockBounds,visibleBounds:m.visibleBounds,timings:m.timings}))})}),Promise.resolve().then(()=>{i.contextLost||i0(u)})}function jc({path:e,atlasIndex:t,sdfViewBox:a},{sdfGlyphSize:r,sdfCanvas:s,contextLost:n},o){if(n)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:i}=Ln,l=Math.max(a[2]-a[0],a[3]-a[1]),u=Math.floor(t/4),d=u%(c/r)*r,m=Math.floor(u/(c/r))*r,h=t%4;return t0(r,r,e,a,l,i,s,d,m,h,o)}function u0(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",a=>{console.log("Context Lost",a),a.preventDefault(),e.contextLost=!0}),t.addEventListener("webglcontextrestored",a=>{console.log("Context Restored",a),e.contextLost=!1;const r=[];e.glyphsByFont.forEach(s=>{s.forEach(n=>{r.push(jc(n,e,!0))})}),Promise.all(r).then(()=>{Mc(e),e.sdfTexture.needsUpdate=!0})})}function d0({font:e,characters:t,sdfGlyphSize:a},r){let s=Array.isArray(t)?t.join(`
`):""+t;Uc({font:e,sdfGlyphSize:a,text:s},r)}function m0(e,t){for(let a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}let bs;function f0(e){return bs||(bs=typeof document>"u"?{}:document.createElement("a")),bs.href=e,bs.href}function Mc(e){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:a}=e,{width:r,height:s}=t,n=e.sdfCanvas.getContext("webgl");let o=a.image.data;(!o||o.length!==r*s*4)&&(o=new Uint8Array(r*s*4),a.image={width:r,height:s,data:o},a.flipY=!1,a.isDataTexture=!0),n.readPixels(0,0,r,s,n.RGBA,n.UNSIGNED_BYTE,o)}}const h0=hn({name:"Typesetter",dependencies:[e0,Qp,Fp],init(e,t,a){return e(t,a())}}),Ac=hn({name:"Typesetter",dependencies:[h0],init(e){return function(t){return new Promise(a=>{e.typeset(t,a)})}},getTransferables(e){const t=[];for(let a in e)e[a]&&e[a].buffer&&t.push(e[a].buffer);return t}});Ac.onMainThread;const Lr={};function p0(e){let t=Lr[e];return t||(t=Lr[e]=new Xa(1,1,e,e).translate(.5,.5,0)),t}const g0="aTroikaGlyphBounds",Gr="aTroikaGlyphIndex",v0="aTroikaGlyphColor";class y0 extends Yc{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new qc,this.boundingBox=new $r}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let a=p0(t);["position","normal","uv"].forEach(r=>{this.attributes[r]=a.attributes[r].clone()}),this.setIndex(a.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,a,r,s,n){this.updateAttributeData(g0,t,4),this.updateAttributeData(Gr,a,1),this.updateAttributeData(v0,n,3),this._blockBounds=r,this._chunkedBounds=s,this.instanceCount=a.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:a,boundingBox:r}=this;if(a){const{PI:s,floor:n,min:o,max:c,sin:i,cos:l}=Math,u=s/2,d=s*2,m=Math.abs(a),h=t[0]/m,v=t[2]/m,g=n((h+u)/d)!==n((v+u)/d)?-m:o(i(h)*m,i(v)*m),y=n((h-u)/d)!==n((v-u)/d)?m:c(i(h)*m,i(v)*m),x=n((h+s)/d)!==n((v+s)/d)?m*2:c(m-l(h)*m,m-l(v)*m);r.min.set(g,t[1],a<0?-x:0),r.max.set(y,t[3],a<0?0:x)}else r.min.set(t[0],t[1],0),r.max.set(t[2],t[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let a=this.getAttribute(Gr).count,r=this._chunkedBounds;if(r)for(let s=r.length;s--;){a=r[s].end;let n=r[s].rect;if(n[1]<t.w&&n[3]>t.y&&n[0]<t.z&&n[2]>t.x)break}this.instanceCount=a}updateAttributeData(t,a,r){const s=this.getAttribute(t);a?s&&s.array.length===a.length?(s.array.set(a),s.needsUpdate=!0):(this.setAttribute(t,new Kc(a,r)),delete this._maxInstanceCount,this.dispose()):s&&this.deleteAttribute(t)}}const N0=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,x0=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,b0=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,w0=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function D0(e){const t=Ba(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new js},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new To(0,0,0,0)},uTroikaClipRect:{value:new To(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new js},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new mn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Jc},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:N0,vertexTransform:x0,fragmentDefs:b0,fragmentColorTransform:w0,customRewriter({vertexShader:a,fragmentShader:r}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(r)&&(r=r.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(a)||(a=a.replace(Sc,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:a,fragmentShader:r}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const ho=new $c({color:16777215,side:Qc,transparent:!0}),Br=8421504,Wr=new Xc,ws=new $a,wa=new $a,Rn=[],_0=new $a,Da="+x+y";function Hr(e){return Array.isArray(e)?e[0]:e}let kc=()=>{const e=new Ha(new Xa(1,1),ho);return kc=()=>e,e},Tc=()=>{const e=new Ha(new Xa(1,1,32,1),ho);return Tc=()=>e,e};const E0={type:"syncstart"},S0={type:"synccomplete"},Vc=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],C0=Vc.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Pc=class extends Ha{constructor(){const t=new y0;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Br,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Da,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(E0),Uc({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},a=>{this._isSyncing=!1,this._textRenderInfo=a,this.geometry.updateGlyphs(a.glyphBounds,a.glyphAtlasIndices,a.blockBounds,a.chunkedBounds,a.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(s=>s&&s())})),this.dispatchEvent(S0),t&&t()})))}onBeforeRender(t,a,r,s,n,o){this.sync(),n.isTroikaTextMaterial&&this._prepareForRender(n)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return D0(t)}get material(){let t=this._derivedMaterial;const a=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=ho.clone());if((!t||!t.isDerivedFrom(a))&&(t=this._derivedMaterial=this.createDerivedMaterial(a),a.addEventListener("dispose",function r(){a.removeEventListener("dispose",r),t.dispose()})),this.hasOutline()){let r=t._outlineMtl;return r||(r=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,t.addEventListener("dispose",function s(){t.removeEventListener("dispose",s),r.dispose()})),[r,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return Hr(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return Hr(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){const a=t.isTextOutlineMaterial,r=t.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:c,blockBounds:i}=s;r.uTroikaSDFTexture.value=c,r.uTroikaSDFTextureSize.value.set(c.image.width,c.image.height),r.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,r.uTroikaSDFExponent.value=s.sdfExponent,r.uTroikaTotalBounds.value.fromArray(i),r.uTroikaUseGlyphColors.value=!a&&!!s.glyphColors;let l=0,u=0,d=0,m,h,v,g=0,y=0;if(a){let{outlineWidth:w,outlineOffsetX:_,outlineOffsetY:N,outlineBlur:U,outlineOpacity:k}=this;l=this._parsePercent(w)||0,u=Math.max(0,this._parsePercent(U)||0),m=k,g=this._parsePercent(_)||0,y=this._parsePercent(N)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(v=this.strokeColor,r.uTroikaStrokeColor.value.set(v??Br),h=this.strokeOpacity,h==null&&(h=1)),m=this.fillOpacity;r.uTroikaEdgeOffset.value=l,r.uTroikaPositionOffset.value.set(g,y),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=d,r.uTroikaStrokeOpacity.value=h,r.uTroikaFillOpacity.value=m??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let x=this.clipRect;if(x&&Array.isArray(x)&&x.length===4)r.uTroikaClipRect.value.fromArray(x);else{const w=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(i[0]-w,i[1]-w,i[2]+w,i[3]+w)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const n=a?this.outlineColor||0:this.color;if(n==null)delete t.color;else{const c=t.hasOwnProperty("color")?t.color:t.color=new mn;(n!==c._input||typeof n=="object")&&c.set(c._input=n)}let o=this.orientation||Da;if(o!==t._orientation){let c=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let i=o!==Da&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(i){let[,l,u,d,m]=i;ws.set(0,0,0)[u]=l==="-"?1:-1,wa.set(0,0,0)[m]=d==="-"?-1:1,Wr.lookAt(_0,ws.cross(wa),wa),c.setFromMatrix4(Wr)}else c.identity();t._orientation=o}}_parsePercent(t){if(typeof t=="string"){let a=t.match(/^(-?[\d.]+)%$/),r=a?parseFloat(a[1]):NaN;t=(isNaN(r)?0:r/100)*this.fontSize}return t}localPositionToTextCoords(t,a=new js){a.copy(t);const r=this.curveRadius;return r&&(a.x=Math.atan2(t.x,Math.abs(r)-Math.abs(t.z))*Math.abs(r)),a}worldPositionToTextCoords(t,a=new js){return ws.copy(t),this.localPositionToTextCoords(this.worldToLocal(ws),a)}raycast(t,a){const{textRenderInfo:r,curveRadius:s}=this;if(r){const n=r.blockBounds,o=s?Tc():kc(),c=o.geometry,{position:i,uv:l}=c.attributes;for(let u=0;u<l.count;u++){let d=n[0]+l.getX(u)*(n[2]-n[0]);const m=n[1]+l.getY(u)*(n[3]-n[1]);let h=0;s&&(h=s-Math.cos(d/s)*s,d=Math.sin(d/s)*s),i.setXYZ(u,d,m,h)}c.boundingSphere=this.geometry.boundingSphere,c.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Rn.length=0,o.raycast(t,Rn);for(let u=0;u<Rn.length;u++)Rn[u].object=this,a.push(Rn[u])}}copy(t){const a=this.geometry;return super.copy(t),this.geometry=a,C0.forEach(r=>{this[r]=t[r]}),this}clone(){return new this.constructor().copy(this)}};Vc.forEach(e=>{const t="_private_"+e;Object.defineProperty(Pc.prototype,e,{get(){return this[t]},set(a){a!==this[t]&&(this[t]=a,this._needsSync=!0)}})});new $r;new mn;const U0=I.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:a="middle",font:r,fontSize:s=1,children:n,characters:o,onSync:c,...i},l)=>{const u=el(({invalidate:v})=>v),[d]=I.useState(()=>new Pc),[m,h]=I.useMemo(()=>{const v=[];let g="";return I.Children.forEach(n,y=>{typeof y=="string"||typeof y=="number"?g+=y:v.push(y)}),[v,g]},[n]);return kp(()=>new Promise(v=>d0({font:r,characters:o},v)),["troika-text",r,o]),I.useLayoutEffect(()=>void d.sync(()=>{u(),c&&c(d)})),I.useEffect(()=>()=>d.dispose(),[d]),I.createElement("primitive",tl({object:d,ref:l,font:r,text:h,anchorX:t,anchorY:a,fontSize:s,sdfGlyphSize:e},i),m)});function j0({data:e,onHover:t}){const a=I.useRef(),r=I.useMemo(()=>{if(!e||e.length===0)return{pos:new Float32Array(0),col:new Float32Array(0)};const s=new Float32Array(e.length*3),n=new Float32Array(e.length*3),o={coding:"#00f3ff",creative:"#7000ff",analysis:"#00ff9d",chat:"#ff0055"};return e.forEach((c,i)=>{const[l,u,d]=c.embedding||[0,0,0];s[i*3]=l,s[i*3+1]=u,s[i*3+2]=d;const m=new mn(o[c.category]||"#ffffff");n[i*3]=m.r,n[i*3+1]=m.g,n[i*3+2]=m.b}),{pos:s,col:n}},[e]);return Xr(()=>{a.current&&(a.current.rotation.y+=.002)}),f.jsxDEV("points",{ref:a,onPointerOver:s=>{s.stopPropagation();const n=s.index;n!==void 0&&e[n]&&t(e[n])},onPointerOut:()=>t(null),children:[f.jsxDEV("bufferGeometry",{children:[f.jsxDEV("bufferAttribute",{attach:"attributes-position",count:r.pos.length/3,array:r.pos,itemSize:3},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:58,columnNumber:9},this),f.jsxDEV("bufferAttribute",{attach:"attributes-color",count:r.col.length/3,array:r.col,itemSize:3},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:64,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:57,columnNumber:7},this),f.jsxDEV("pointsMaterial",{size:.8,vertexColors:!0,transparent:!0,opacity:1,sizeAttenuation:!0,blending:Yr,depthWrite:!1},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:71,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:46,columnNumber:5},this)}function M0({count:e=5e3}){const t=I.useRef(),a=I.useMemo(()=>{const s=[],n=[{color:"#00f3ff",x:12,y:4,z:2},{color:"#7000ff",x:-12,y:-4,z:6},{color:"#00ff9d",x:4,y:-12,z:-6},{color:"#ff0055",x:-6,y:12,z:1}];for(let o=0;o<e;o++){const c=n[Math.floor(Math.random()*n.length)],i=6,l=c.x+(Math.random()-.5)*i*2,u=c.y+(Math.random()-.5)*i*2,d=c.z+(Math.random()-.5)*i*2;s.push({x:l,y:u,z:d,color:c.color})}return s},[e]),r=I.useMemo(()=>{const s=new Float32Array(e*3),n=new Float32Array(e*3);return a.forEach((o,c)=>{s[c*3]=o.x,s[c*3+1]=o.y,s[c*3+2]=o.z;const i=new mn(o.color);n[c*3]=i.r*.4,n[c*3+1]=i.g*.4,n[c*3+2]=i.b*.4}),{pos:s,col:n}},[a,e]);return Xr(()=>{t.current&&(t.current.rotation.y+=5e-4)}),f.jsxDEV("points",{ref:t,children:[f.jsxDEV("bufferGeometry",{children:[f.jsxDEV("bufferAttribute",{attach:"attributes-position",count:r.pos.length/3,array:r.pos,itemSize:3},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:138,columnNumber:9},this),f.jsxDEV("bufferAttribute",{attach:"attributes-color",count:r.col.length/3,array:r.col,itemSize:3},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:144,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:137,columnNumber:7},this),f.jsxDEV("pointsMaterial",{size:.2,vertexColors:!0,transparent:!0,opacity:.4,sizeAttenuation:!0,blending:Yr,depthWrite:!1},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:151,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:136,columnNumber:5},this)}function A0(){const e=[{position:[12,4,2],label:"Coding",color:"#00f3ff"},{position:[-12,-4,6],label:"Creative",color:"#7000ff"},{position:[4,-12,-6],label:"Analysis",color:"#00ff9d"},{position:[-6,12,1],label:"Chat",color:"#ff0055"}];return f.jsxDEV("group",{children:e.map((t,a)=>f.jsxDEV(U0,{position:t.position,fontSize:1.2,color:t.color,anchorX:"center",anchorY:"middle",outlineWidth:.05,outlineColor:"#000000",children:t.label},a,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:175,columnNumber:9},this))},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:173,columnNumber:5},this)}function k0(){const[e,t]=I.useState([]),[a,r]=I.useState(null);return I.useEffect(()=>{Oa.loadDataset().then(t)},[]),f.jsxDEV("div",{style:{width:"100%",height:"100%",background:"#030508"},children:[f.jsxDEV(nl,{camera:{position:[0,0,35],fov:60},children:[f.jsxDEV("color",{attach:"background",args:["#030508"]},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:203,columnNumber:9},this),f.jsxDEV("fog",{attach:"fog",args:["#030508",20,80]},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:204,columnNumber:9},this),f.jsxDEV("ambientLight",{intensity:.5},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:206,columnNumber:9},this),f.jsxDEV("pointLight",{position:[10,10,10]},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:207,columnNumber:9},this),f.jsxDEV(sl,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:209,columnNumber:9},this),f.jsxDEV(M0,{count:8e3},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:212,columnNumber:9},this),e.length>0&&f.jsxDEV(j0,{data:e,onHover:r},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:216,columnNumber:11},this),f.jsxDEV(A0,{},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:219,columnNumber:9},this),f.jsxDEV(al,{enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:!0,autoRotateSpeed:.5},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:221,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:202,columnNumber:7},this),f.jsxDEV("div",{style:{position:"absolute",bottom:"20px",left:"20px",color:"rgba(0, 243, 255, 0.8)",fontFamily:"Rajdhani, sans-serif",pointerEvents:"none",zIndex:10},children:[f.jsxDEV("h3",{style:{margin:0,fontSize:"1.2rem",textTransform:"uppercase"},children:"Semantic Space"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:240,columnNumber:9},this),f.jsxDEV("p",{style:{margin:0,fontSize:"0.8rem",opacity:.7},children:[e.length," Active Nodes  8,000+ Historical Vectors"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:241,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:231,columnNumber:7},this),a&&f.jsxDEV("div",{style:{position:"absolute",top:"20px",right:"20px",background:"rgba(6, 11, 20, 0.9)",border:`1px solid ${a.category==="coding"?"#00f3ff":"#ffffff"}`,padding:"15px",borderRadius:"8px",maxWidth:"300px",color:"#fff",fontFamily:"Rajdhani, sans-serif",zIndex:20,backdropFilter:"blur(10px)",boxShadow:"0 0 20px rgba(0,0,0,0.5)"},children:[f.jsxDEV("div",{style:{fontSize:"0.8rem",textTransform:"uppercase",color:"#888",marginBottom:"5px"},children:[a.category,"  ",a.tokens," tokens"]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:263,columnNumber:11},this),f.jsxDEV("div",{style:{fontSize:"1rem"},children:['"',a.text,'"']},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:248,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/components/NeuralGalaxy.jsx",lineNumber:201,columnNumber:5},this)}function T0(e,t){const[a,r]=I.useState({}),s=I.useRef(),n=.05,o=1,c=2.5,i=I.useCallback(()=>{r(l=>{const u={...l},d=Date.now();return e.filter(h=>h.type==="input"||h.type==="source").forEach(h=>{Math.random()<n&&t.filter(g=>g.source===h.id).forEach(g=>{u[g.id]||(u[g.id]=[]),u[g.id].push({id:`pkt-${d}-${Math.random()}`,type:"request",startTime:d,speed:c,progress:0})})}),Object.keys(u).forEach(h=>{const v=t.find(x=>x.id===h);if(!v){delete u[h];return}const g=u[h]||[],y=[];g.forEach(x=>{if((d-x.startTime)/1e3/x.speed>=1){const N=e.find(U=>U.id===v.target);if(N){let U=x.type,k=x.speed;if(N.type.startsWith("cache_")){const A=Math.random()>.3;U=A?"hit":"miss",k=A?o:c}t.filter(A=>A.source===N.id).forEach(A=>{u[A.id]||(u[A.id]=[]),u[A.id].push({id:`pkt-${d}-${Math.random()}`,type:U,startTime:d,speed:k,progress:0})})}}else y.push(x)}),u[h]=y}),u}),s.current=requestAnimationFrame(i)},[e,t]);return I.useEffect(()=>(s.current=requestAnimationFrame(i),()=>cancelAnimationFrame(s.current)),[i]),a}const V0={traffic:Up};function P0(){const{sector:e,config:t,selectSector:a,showSectorModal:r,setShowSectorModal:s}=fo(),[n,o,c]=jh([]),[i,l,u]=Mh([]),[d,m]=I.useState("dashboard"),[h,v]=I.useState(!1),[g,y]=I.useState(!1),[x,w]=I.useState(null),[_,N]=I.useState("Untitled Pipeline"),U=T0(n,i);I.useEffect(()=>{l(p=>p.map(C=>({...C,type:"traffic",data:{...C.data,packets:U[C.id]||[]}})))},[U,l]),console.log("App render:",{sector:e,config:t,showSectorModal:r}),I.useEffect(()=>{_p()},[]);const k=I.useCallback(p=>l(C=>Pi(p,C)),[l]),D=I.useCallback((p,C)=>{w(C)},[]),A=I.useCallback(p=>{const C=p.nodes.map((L,G)=>({id:`${L.type}-${G}`,type:L.type,position:{x:100+G*250,y:200},data:{label:L.type.replace("_"," ").toUpperCase(),config:L.config,metrics:{hitRate:0,latency:0,savings:0}}})),E=[];for(let L=0;L<C.length-1;L++)E.push({id:`e${L}`,source:C[L].id,target:C[L+1].id,animated:!0,style:{stroke:"#10b981"}});o(C),l(E),N(p.name||"Generated Pipeline"),v(!1)},[o,l]),V=I.useCallback(p=>{o(p.nodes),l(p.edges),N(p.name),y(!1),m("builder")},[o,l]);I.useCallback(p=>{o(p.nodes),l(p.edges),N(p.name),m("builder")},[o,l]);const R=I.useCallback(()=>{o([]),l([]),N("Untitled Pipeline"),m("builder")},[o,l]),B=I.useCallback(()=>{if(!_||_.trim()===""){alert("Please enter a pipeline name");return}if(n.length===0){alert("Pipeline must have at least one node");return}const p={name:_.trim(),sector:e,nodes:n,edges:i};try{const C=Ar.savePipeline(p);if(!C.success){C.error==="quota"?alert(`Storage quota exceeded: ${C.message}

Consider deleting old pipelines or upgrading your plan.`):C.error==="validation"?alert(`Validation error: ${C.message}

Field: ${C.field||"unknown"}`):alert(`Failed to save pipeline: ${C.message}`);return}const E=On.getStorageStats(),L=E.percentUsed.toFixed(1),G=C.isNew?`Pipeline "${_}" saved!`:`Pipeline "${_}" updated!`;E.percentUsed>80?alert(`${G}

 Storage warning: ${L}% used. Consider deleting old pipelines.`):alert(G)}catch(C){console.error("Failed to save pipeline:",C),alert(`Error saving pipeline: ${C.message}`)}},[_,e,n,i]),j=I.useCallback(p=>{p.preventDefault(),p.dataTransfer.dropEffect="move"},[]),P=I.useCallback(p=>{p.preventDefault();const C=p.dataTransfer.getData("application/reactflow"),E={x:p.clientX-250,y:p.clientY-100},L={id:`${C}-${Date.now()}`,type:C,position:E,data:{label:C.replace("_"," ").toUpperCase(),config:{},metrics:{hitRate:0,latency:0,savings:0}}};o(G=>G.concat(L))},[o]);if(r)return f.jsxDEV("div",{className:"app",children:f.jsxDEV(rp,{onComplete:a,onSkip:a},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:228,columnNumber:9},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:227,columnNumber:7},this);if(!e||!t)return f.jsxDEV("div",{style:{padding:"20px",color:"white"},children:"Loading sector config..."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:238,columnNumber:12},this);if(d==="dashboard"){const p=Ar.loadAllPipelines();return f.jsxDEV("div",{className:"app",children:[f.jsxDEV(dp,{onOpenWizard:()=>v(!0),onNewPipeline:R,pipelines:p},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:248,columnNumber:9},this),h&&f.jsxDEV(Dr,{sector:e,config:t,onClose:()=>v(!1),onComplete:C=>{A(C),m("builder")}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:255,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:247,columnNumber:7},this)}return d==="galaxy"?f.jsxDEV("div",{className:"app",children:[f.jsxDEV("header",{className:"header",style:{position:"absolute",top:0,left:0,right:0,zIndex:10,background:"transparent",border:"none"},children:[f.jsxDEV("div",{className:"header-left",children:[f.jsxDEV("button",{className:"btn btn-icon",onClick:()=>m("dashboard"),title:"Back to Dashboard",style:{background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},children:" "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:275,columnNumber:13},this),f.jsxDEV("div",{children:f.jsxDEV("h1",{style:{textShadow:"0 0 10px rgba(0,243,255,0.5)"},children:"Neural Galaxy"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:284,columnNumber:15},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:283,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:274,columnNumber:11},this),f.jsxDEV("div",{className:"header-right",children:f.jsxDEV("button",{className:"btn btn-secondary",onClick:()=>m("builder"),style:{background:"rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},children:"Switch to Builder"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:288,columnNumber:13},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:287,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:273,columnNumber:9},this),f.jsxDEV(k0,{},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:293,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:272,columnNumber:7},this):f.jsxDEV("div",{className:"app",children:[f.jsxDEV("header",{className:"header",children:[f.jsxDEV("div",{className:"header-left",children:[f.jsxDEV("button",{className:"btn btn-icon",onClick:()=>m("dashboard"),title:"Back to Dashboard",children:" "},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:303,columnNumber:11},this),f.jsxDEV("div",{children:[f.jsxDEV("h1",{children:"AgentCache Studio"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:311,columnNumber:13},this),f.jsxDEV("span",{className:"subtitle",children:["Visual Pipeline Builder  ",e.charAt(0).toUpperCase()+e.slice(1)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:312,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:310,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:302,columnNumber:9},this),f.jsxDEV("div",{className:"header-center",children:f.jsxDEV("input",{type:"text",className:"pipeline-name-input",value:_,onChange:p=>N(p.target.value),placeholder:"Pipeline name..."},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:316,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:315,columnNumber:9},this),f.jsxDEV("div",{className:"header-right",children:[f.jsxDEV("button",{className:"btn btn-secondary",onClick:()=>y(!0),children:" Load Preset"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:325,columnNumber:11},this),f.jsxDEV("button",{className:"btn btn-secondary",onClick:()=>v(!0),children:" AI Wizard"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:328,columnNumber:11},this),f.jsxDEV("button",{className:"btn btn-success",onClick:B,children:" Save"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:331,columnNumber:11},this),f.jsxDEV("button",{className:"btn btn-primary",children:" Deploy"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:334,columnNumber:11},this),f.jsxDEV("button",{className:"btn btn-secondary",onClick:()=>m("galaxy"),children:" Galaxy View"},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:337,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:324,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:301,columnNumber:7},this),f.jsxDEV("div",{className:"main-content",children:[f.jsxDEV(np,{sector:e,config:t},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:344,columnNumber:9},this),f.jsxDEV("div",{className:"canvas-container",children:f.jsxDEV(gc,{nodes:n,edges:i,onNodesChange:c,onEdgesChange:u,onConnect:k,onNodeClick:D,onDrop:P,onDragOver:j,nodeTypes:bp,edgeTypes:V0,fitView:!0,children:[f.jsxDEV(Xh,{},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:360,columnNumber:13},this),f.jsxDEV(Oh,{nodeColor:p=>{switch(p.type){case"input":return"#3b82f6";case"cache_l1":case"cache_l2":case"cache_l3":return"#10b981";case"openai":case"anthropic":case"gemini":return"#8b5cf6";default:return"#6366f1"}},style:{background:"#1e293b"}},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:361,columnNumber:13},this),f.jsxDEV(Qh,{color:"#334155",gap:16},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:382,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:347,columnNumber:11},this)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:346,columnNumber:9},this),f.jsxDEV(ip,{selectedNode:x},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:386,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:343,columnNumber:7},this),h&&f.jsxDEV(Dr,{sector:e,config:t,onClose:()=>v(!1),onComplete:A},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:390,columnNumber:9},this),g&&f.jsxDEV(up,{onLoadPreset:V,onClose:()=>y(!1)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:399,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/App.jsx",lineNumber:300,columnNumber:5},this)}ol.createRoot(document.getElementById("root")).render(f.jsxDEV(X.StrictMode,{children:f.jsxDEV(cp,{children:f.jsxDEV(P0,{},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/main.jsx",lineNumber:10,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/main.jsx",lineNumber:9,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/letstaco/Documents/agentcache-ai/src/main.jsx",lineNumber:8,columnNumber:3},void 0));
